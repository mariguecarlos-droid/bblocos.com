;/*FB_PKG_DELIM*/

__d("ActionConfirmationTypesTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({CONFIRMATION:0,DENIAL:1,AMBIGUOUS:2});a.exports={ConfirmationAction:e}}),null);
__d("AggregateError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(n,r){var o,a=r!=null?r:l(n);return o=e.call(this,a)||this,o.name="AggregateError",o.errors=n,o.message=a,Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));function l(e){return e.length===0?"No errors":e.length===1?e[0].message:e.map(function(e){return"- "+e.message}).join("\n")}i.default=e}),66);
__d("BizInboxCTSSuggestedActionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SAVE_LAST_SENT_MESSAGE:"SAVE_LAST_SENT_MESSAGE",NONE:"NONE",SET_INSTANT_REPLY:"SET_INSTANT_REPLY",MARK_AS_PAID:"MARK_AS_PAID",MARK_AS_SHIPPED:"MARK_AS_SHIPPED",SUGGESTED_REPLY:"SUGGESTED_REPLY",SET_ICEBREAKER_QUESTIONS:"SET_ICEBREAKER_QUESTIONS",ONBOARD_TO_EMAIL:"ONBOARD_TO_EMAIL",SET_FAQ:"SET_FAQ",SET_FOLLOW_UP:"SET_FOLLOW_UP",SET_INSTANT_REPLY_AUTOMATION:"SET_INSTANT_REPLY_AUTOMATION",SET_AWAY_MESSAGE_AUTOMATION:"SET_AWAY_MESSAGE_AUTOMATION",SUGGESTED_LABEL:"SUGGESTED_LABEL",EXTRACT_INFO_TO_CONTACT_CARD:"EXTRACT_INFO_TO_CONTACT_CARD",SET_COMMENT_TO_MESSAGE_AUTOMATION:"SET_COMMENT_TO_MESSAGE_AUTOMATION",CREATE_OFFER:"CREATE_OFFER",CTD_UPSELL:"CTD_UPSELL",CTM_UPSELL:"CTM_UPSELL"});i.default=e}),66);
__d("BizInboxSurface",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["BUSINESS_SUITE","CREATOR_STUDIO","INVALID","PAGE","PAGE_APPOINTMENT"]),l=e;i.default=l}),66);
__d("BizInboxSurfaceContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(Object.freeze({})),c=u;l.default=c}),98);
__d("XBizSuiteControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/latest/{?*rest}",Object.freeze({boosted_auto_open:!1,auto_open_saved_replies:!1,auto_open_order_tip:!1,auto_open_promote:!1,launch_notifications:!1,launch_onboarding:!1,partnership_messages:!1,preloaded_with_autodraft:!1,unified_composer_mode:"REEL",should_open_edit_fb_profile:!1,long_form_to_reels_playlist_flow:!1,redirect_notice:!1,is_expanded:!1}),void 0),s=e;l.default=s}),98);
__d("BizInboxSurfaceUtils",["BizInboxSurface","BizInboxSurfaceContext","URI","XBizSuiteControllerRouteBuilder","gkx","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useContext;function c(){if(r("gkx")("20935"))return r("gkx")("21034");var t=r("XBizSuiteControllerRouteBuilder").buildURL({}),n=new(e||(e=r("URI")))(t).getQualifiedURI().toString();return e.getRequestURI().getQualifiedURI().toString().startsWith(n)}function d(){var e=u(r("BizInboxSurfaceContext")),t=e.inboxSurface;return t!=null?t:r("BizInboxSurface").INVALID}function m(){var t=new RegExp("/inbox/(all|instagram_direct|messenger)","i");return c()&&t.test((e||(e=r("URI"))).getRequestURI().getQualifiedURI().toString())}l.isBizSuiteSurface=c,l.useBizInboxSurface=d,l.useBizInboxSkeletonLoadingState=m}),98);
__d("BizInboxGating",["BizInboxCTSSuggestedActionType","BizInboxSurfaceUtils","gkx","justknobx","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!o("BizInboxSurfaceUtils").isBizSuiteSurface()}function s(){return r("gkx")("22410")}function u(){return r("gkx")("11269")}function c(){return r("gkx")("2136")}function d(e){return e===r("BizInboxCTSSuggestedActionType").SET_FAQ}function m(){return!0}function p(){return!1}function _(){return r("gkx")("22417")}function f(){return r("gkx")("22418")}function g(){return r("gkx")("22414")}function h(){return r("qex")._("1407")===!0}function y(){return r("qex")._("1407")}function C(){return!0}function b(){return!1}function v(){return r("justknobx")._("1133")}function S(){return r("gkx")("2334")}function R(){return r("gkx")("5588")}function L(){return!0}l.getShowNewIAModal=e,l.getCTSSuggestionBar=s,l.getUseAutoReply=u,l.getUseGearIconForPersonalization=c,l.getShouldEnableControlButtonForSuggestionBar=d,l.getIsIGDirectThreadTitleUpdate=m,l.getShouldDisplayOnboardingCardForExistedUsers=p,l.getIsEligibleForRemovePageDependencyInboxPhase1=_,l.getShouldUseClientSideCalculation=f,l.getUseSPMigration=g,l.shouldLoadIGDOnMsys=h,l.getMsysExperimentValue=y,l.getCometExperimentValue=C,l.shouldAllowEmptyThreadDetails=b,l.shouldShowAYMTOnTests=v,l.shouldPreloadMsys=S,l.shouldEnableBizwebIGDIncomingTypingIndicator=R,l.shouldCacheAutomationQuery=L}),98);
__d("OverlayConfigLayer",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.getLayerSource=function(){return this.$1},t.getValue=function(t){return this.$2[t]},t.logExposure=function(t){},e})();i.default=e}),66);
__d("OverlayConfigLayerBuilder",["FBLogger","OverlayConfigConstants","OverlayConfigLayer"],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=new Array(n("OverlayConfigConstants").OverlayConfigNumParameters).fill(n("OverlayConfigConstants").OverlayConfigNotPresentFlagValue),this.$2=e}var t=e.prototype;return t.build=function(){return new(n("OverlayConfigLayer"))(this.$2,this.$1)},t.$3=function(t,r){if(t>=n("OverlayConfigConstants").OverlayConfigNumParameters)throw n("FBLogger")("rtc_www").mustfixThrow("Parameter ID passed in exceeds max parameter id");this.$1[t]=r},t.$4=function(t,n){this.$3(t,n?1:0)},t.setExampleConfigEnabled=function(t){this.$4(0,t)},t.setExampleConfigSomeBoolean=function(t){this.$4(2,t)},t.setExampleConfigSomeOtherIntegerHasValue=function(t){this.$4(1724,t)},t.setExampleConfigSomeOtherBoolean=function(t){this.$4(2044,t)},t.setExampleConfigSomeInteger=function(t){this.$3(1,t)},t.setExampleConfigSomeOtherInteger=function(t){this.$3(3,t)},t.setExampleConfigSomeDouble=function(t){this.$3(2011,t)},t.setPreferredCaptureConfigEnabled=function(t){this.$4(173,t)},t.setPreferredCaptureConfigPreferStableFps=function(t){this.$4(3919,t)},t.setPreferredCaptureConfigEnabledForZenon=function(t){this.$4(4478,t)},t.setPreferredCaptureConfigWidthPx=function(t){this.$3(174,t)},t.setPreferredCaptureConfigHeightPx=function(t){this.$3(175,t)},t.setPreferredCaptureConfigFps=function(t){this.$3(176,t)},t.setZenonSdpTransformConfigPreserveH264=function(t){this.$4(244,t)},t.setZenonSdpTransformConfigPreferH264ForMwCall=function(t){this.$4(420,t)},t.setZenonSdpTransformConfigPreferSwH264=function(t){this.$4(421,t)},t.setZenonSdpTransformConfigAddAudioNack=function(t){this.$4(245,t)},t.setZenonSdpTransformConfigDisableOpusStereo=function(t){this.$4(246,t)},t.setZenonSdpTransformConfigPreferIsacForGroupAudio=function(t){this.$4(248,t)},t.setZenonSdpTransformConfigEnableOpusFmtpMunging=function(t){this.$4(1448,t)},t.setZenonSdpTransformConfigSetOpusUsedtx=function(t){this.$4(1444,t)},t.setZenonSdpTransformConfigSetOpusUseinbandfec=function(t){this.$4(1445,t)},t.setZenonSdpTransformConfigSetOpusMaxplaybackrate=function(t){this.$3(1446,t)},t.setZenonSdpTransformConfigSetOpusMaxaveragebitrate=function(t){this.$3(1447,t)},t.setZenonPeerConnectionConfigRtpDataChannels=function(t){this.$4(302,t)},t.setZenonStartCallImmediatelyConfigEnabled=function(t){this.$4(308,t)},t.setZenonGeneralizedIdentityConfigDuplicatedParticipantsProcessingMode=function(t){this.$3(1891,t)},t.setZenonMultiCallSupportConfigMaxConnectedCalls=function(t){this.$3(309,t)},t.setZenonPlatformSupportConfigSupportsZenonPlatform=function(t){this.$4(316,t)},t.setZenonPlatformSupportConfigStartImmediatelyEnabled=function(t){this.$4(318,t)},t.setZenonPlatformSupportConfigUploadSummaryOnCallEnded=function(t){this.$4(2251,t)},t.setZenonPlatformSupportConfigMultiwayAvEscalationEnabled=function(t){this.$4(1900,t)},t.setZenonPlatformSupportConfigMaxConnectedCalls=function(t){this.$3(317,t)},t.setZenonPlatformSupportConfigParentWindowConnectionTimeoutMs=function(t){this.$3(319,t)},t.setZenonSimulcastConfigSimulcastEnabled=function(t){this.$4(453,t)},t.setDynamicRuleConfigEnabled=function(t){this.$4(1342,t)},t.setDynamicRuleConfigDebugLoggingEnabled=function(t){this.$4(1597,t)},t.setDynamicRuleConfigProcessIntervalMs=function(t){this.$3(1359,t)},t.setDynamicRuleConfigNetworkProcessIntervalMs=function(t){this.$3(1510,t)},t.setDynamicRuleConfigDebugLoggingIntervalMs=function(t){this.$3(1612,t)},t.setSignalingPingConfigPingIntervalMs=function(t){this.$3(1470,t)},t.setNetEqAiConfigEnabled=function(t){this.$4(4550,t)},t.setNetEqAiConfigDisableTimeStretching=function(t){this.$4(4551,t)},t.setNetEqAiConfigPacketWaitTimeMs=function(t){this.$3(4552,t)},t.setNetEqAiConfigCngDelayMs=function(t){this.$3(5477,t)},e})();a.exports=e}),null);
__d("ChromeOverlayConfigLayer",["OverlayConfigLayerBuilder","OverlayConfigLayerSource"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=new(r("OverlayConfigLayerBuilder"))(r("OverlayConfigLayerSource").BROWSER);return e.setZenonSdpTransformConfigDisableOpusStereo(!0),e.setZenonPeerConnectionConfigRtpDataChannels(!0),e.build()})(),s=e;l.default=s}),98);
__d("ClientActionInLoopTypesTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({SUMMARIZE_UNREAD_MESSAGES:0});a.exports={ClientInstructionType:e}}),null);
__d("ClientActionInLoopTypesSerializers",["ClientActionInLoopTypesTypes","ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{instruction_type:o("ClientActionInLoopTypesTypes").ClientInstructionType.cast(0)}}function u(){return{instruction_type:o("ClientActionInLoopTypesTypes").ClientInstructionType.cast(0)}}function c(){return{}}function d(){return{threadName:"",senderName:"",messageText:"",timestampMs:"0"}}function m(){return{}}function p(){return{}}function _(t,n){if(n.writeStructBegin("ClientInstruction"),n.writeFieldBegin({fname:"instruction_type",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.instruction_type!=null){var a;n.writeI32((a=t.instruction_type)!=null?a:0)}else{var i=o("ClientActionInLoopTypesTypes").ClientInstructionType.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.request_id!=null&&(n.writeFieldBegin({fname:"request_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.request_id),n.writeFieldEnd()),t.turn_id!=null&&(n.writeFieldBegin({fname:"turn_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.turn_id),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function f(t,n){if(n.writeStructBegin("ClientInstructionResponse"),n.writeFieldBegin({fname:"instruction_type",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.instruction_type!=null){var a;n.writeI32((a=t.instruction_type)!=null?a:0)}else{var i=o("ClientActionInLoopTypesTypes").ClientInstructionType.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.unread_messages!=null&&(n.writeFieldBegin({fname:"unread_messages",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),g(t.unread_messages,n),n.writeFieldEnd()),t.request_id!=null&&(n.writeFieldBegin({fname:"request_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.request_id),n.writeFieldEnd()),t.turn_id!=null&&(n.writeFieldBegin({fname:"turn_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.turn_id),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function g(t,n){if(n.writeStructBegin("UnreadMessages"),t.messages!=null){n.writeFieldBegin({fname:"messages",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRUCT,size:t.messages.length});for(var o of t.messages)h(o,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function h(t,n){if(n.writeStructBegin("Message"),n.writeFieldBegin({fname:"threadName",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.threadName!=null)n.writeString(t.threadName);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"senderName",ftype:e.STRING,fid:2}),t.senderName!=null)n.writeString(t.senderName);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"messageText",ftype:e.STRING,fid:3}),t.messageText!=null)n.writeString(t.messageText);else{var i="";n.writeString(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"timestampMs",ftype:e.I64,fid:4}),t.timestampMs!=null)n.writeI64(BigInt(t.timestampMs));else{var l="0";n.writeI64(BigInt(l))}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function y(t,n){n.writeStructBegin("ToolResponseContent"),t.tool_name!=null&&(n.writeFieldBegin({fname:"tool_name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.tool_name),n.writeFieldEnd()),t.tool_response!=null&&(n.writeFieldBegin({fname:"tool_response",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.tool_response),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){n.writeStructBegin("AgentStep"),t.tool_response_content!=null&&(n.writeFieldBegin({fname:"tool_response_content",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),y(t.tool_response_content,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function b(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.instruction_type=o("ClientActionInLoopTypesTypes").ClientInstructionType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.request_id=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.turn_id=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.instruction_type===void 0&&(n.instruction_type=o("ClientActionInLoopTypesTypes").ClientInstructionType.cast(0)),n}function v(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.instruction_type=o("ClientActionInLoopTypesTypes").ClientInstructionType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.unread_messages=S(t):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.request_id=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.turn_id=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.instruction_type===void 0&&(n.instruction_type=o("ClientActionInLoopTypesTypes").ClientInstructionType.cast(0)),n}function S(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.messages=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=R(t);n.messages.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function R(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.threadName=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.senderName=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.messageText=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).I64?n.timestampMs=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.threadName===void 0&&(n.threadName=""),n.senderName===void 0&&(n.senderName=""),n.messageText===void 0&&(n.messageText=""),n.timestampMs===void 0&&(n.timestampMs="0"),n}function L(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.tool_name=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.tool_response=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function E(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.tool_response_content=L(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}l.ClientInstruction$DefaultConstructor=s,l.ClientInstructionResponse$DefaultConstructor=u,l.UnreadMessages$DefaultConstructor=c,l.Message$DefaultConstructor=d,l.ToolResponseContent$DefaultConstructor=m,l.AgentStep$DefaultConstructor=p,l.serializeClientInstruction=_,l.serializeClientInstructionResponse=f,l.serializeUnreadMessages=g,l.serializeMessage=h,l.serializeToolResponseContent=y,l.serializeAgentStep=C,l.deserializeClientInstruction=b,l.deserializeClientInstructionResponse=v,l.deserializeUnreadMessages=S,l.deserializeMessage=R,l.deserializeToolResponseContent=L,l.deserializeAgentStep=E}),98);
__d("StructuredConfigBase",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.getBool=function(t){return this.$1.getValue(t)>0},t.getInt=function(t){return this.$1.getValue(t)},e})();i.default=e}),66);
__d("Configs",["StructuredConfigBase"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$ExampleConfig1=t.getBool(0),t.$ExampleConfig2=t.getBool(2),t.$ExampleConfig3=t.getBool(1724),t.$ExampleConfig4=t.getBool(2044),t.$ExampleConfig5=t.getInt(1),t.$ExampleConfig6=t.getInt(3),t.$ExampleConfig7=t.getInt(2011),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$ExampleConfig1=this.getBool(0),this.$ExampleConfig2=this.getBool(2),this.$ExampleConfig3=this.getBool(1724),this.$ExampleConfig4=this.getBool(2044),this.$ExampleConfig5=this.getInt(1),this.$ExampleConfig6=this.getInt(3),this.$ExampleConfig7=this.getInt(2011)},n.isEnabled=function(){return this.$ExampleConfig1},n.isSomeBoolean=function(){return this.$ExampleConfig2},n.isSomeOtherIntegerHasValue=function(){return this.$ExampleConfig3},n.isSomeOtherBoolean=function(){return this.$ExampleConfig4},n.getSomeInteger=function(){return this.$ExampleConfig5},n.getSomeOtherInteger=function(){return this.$ExampleConfig6},n.getSomeDouble=function(){return this.$ExampleConfig7},t})(e=n("StructuredConfigBase")),s=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$PreferredCaptureConfig1=t.getBool(173),t.$PreferredCaptureConfig2=t.getBool(3919),t.$PreferredCaptureConfig3=t.getBool(4478),t.$PreferredCaptureConfig4=t.getInt(174),t.$PreferredCaptureConfig5=t.getInt(175),t.$PreferredCaptureConfig6=t.getInt(176),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$PreferredCaptureConfig1=this.getBool(173),this.$PreferredCaptureConfig2=this.getBool(3919),this.$PreferredCaptureConfig3=this.getBool(4478),this.$PreferredCaptureConfig4=this.getInt(174),this.$PreferredCaptureConfig5=this.getInt(175),this.$PreferredCaptureConfig6=this.getInt(176)},n.isEnabled=function(){return this.$PreferredCaptureConfig1},n.isPreferStableFps=function(){return this.$PreferredCaptureConfig2},n.isEnabledForZenon=function(){return this.$PreferredCaptureConfig3},n.getWidthPx=function(){return this.$PreferredCaptureConfig4},n.getHeightPx=function(){return this.$PreferredCaptureConfig5},n.getFps=function(){return this.$PreferredCaptureConfig6},t})(e),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$ZenonSdpTransformConfig1=t.getBool(244),t.$ZenonSdpTransformConfig2=t.getBool(420),t.$ZenonSdpTransformConfig3=t.getBool(421),t.$ZenonSdpTransformConfig4=t.getBool(245),t.$ZenonSdpTransformConfig5=t.getBool(246),t.$ZenonSdpTransformConfig6=t.getBool(248),t.$ZenonSdpTransformConfig7=t.getBool(1448),t.$ZenonSdpTransformConfig8=t.getBool(1444),t.$ZenonSdpTransformConfig9=t.getBool(1445),t.$ZenonSdpTransformConfig10=t.getInt(1446),t.$ZenonSdpTransformConfig11=t.getInt(1447),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$ZenonSdpTransformConfig1=this.getBool(244),this.$ZenonSdpTransformConfig2=this.getBool(420),this.$ZenonSdpTransformConfig3=this.getBool(421),this.$ZenonSdpTransformConfig4=this.getBool(245),this.$ZenonSdpTransformConfig5=this.getBool(246),this.$ZenonSdpTransformConfig6=this.getBool(248),this.$ZenonSdpTransformConfig7=this.getBool(1448),this.$ZenonSdpTransformConfig8=this.getBool(1444),this.$ZenonSdpTransformConfig9=this.getBool(1445),this.$ZenonSdpTransformConfig10=this.getInt(1446),this.$ZenonSdpTransformConfig11=this.getInt(1447)},n.isPreserveH264=function(){return this.$ZenonSdpTransformConfig1},n.isPreferH264ForMwCall=function(){return this.$ZenonSdpTransformConfig2},n.isPreferSwH264=function(){return this.$ZenonSdpTransformConfig3},n.isAddAudioNack=function(){return this.$ZenonSdpTransformConfig4},n.isDisableOpusStereo=function(){return this.$ZenonSdpTransformConfig5},n.isPreferIsacForGroupAudio=function(){return this.$ZenonSdpTransformConfig6},n.isEnableOpusFmtpMunging=function(){return this.$ZenonSdpTransformConfig7},n.isSetOpusUsedtx=function(){return this.$ZenonSdpTransformConfig8},n.isSetOpusUseinbandfec=function(){return this.$ZenonSdpTransformConfig9},n.getSetOpusMaxplaybackrate=function(){return this.$ZenonSdpTransformConfig10},n.getSetOpusMaxaveragebitrate=function(){return this.$ZenonSdpTransformConfig11},t})(e),c=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$ZenonPeerConnectionConfig1=t.getBool(302),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$ZenonPeerConnectionConfig1=this.getBool(302)},n.isRtpDataChannels=function(){return this.$ZenonPeerConnectionConfig1},t})(e),d=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$ZenonStartCallImmediatelyConfig1=t.getBool(308),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$ZenonStartCallImmediatelyConfig1=this.getBool(308)},n.isEnabled=function(){return this.$ZenonStartCallImmediatelyConfig1},t})(e),m=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$ZenonGeneralizedIdentityConfig1=t.getInt(1891),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$ZenonGeneralizedIdentityConfig1=this.getInt(1891)},n.getDuplicatedParticipantsProcessingMode=function(){return this.$ZenonGeneralizedIdentityConfig1},t})(e),p=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$ZenonMultiCallSupportConfig1=t.getInt(309),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$ZenonMultiCallSupportConfig1=this.getInt(309)},n.getMaxConnectedCalls=function(){return this.$ZenonMultiCallSupportConfig1},t})(e),_=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$ZenonPlatformSupportConfig1=t.getBool(316),t.$ZenonPlatformSupportConfig2=t.getBool(318),t.$ZenonPlatformSupportConfig3=t.getBool(2251),t.$ZenonPlatformSupportConfig4=t.getBool(1900),t.$ZenonPlatformSupportConfig5=t.getInt(317),t.$ZenonPlatformSupportConfig6=t.getInt(319),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$ZenonPlatformSupportConfig1=this.getBool(316),this.$ZenonPlatformSupportConfig2=this.getBool(318),this.$ZenonPlatformSupportConfig3=this.getBool(2251),this.$ZenonPlatformSupportConfig4=this.getBool(1900),this.$ZenonPlatformSupportConfig5=this.getInt(317),this.$ZenonPlatformSupportConfig6=this.getInt(319)},n.isSupportsZenonPlatform=function(){return this.$ZenonPlatformSupportConfig1},n.isStartImmediatelyEnabled=function(){return this.$ZenonPlatformSupportConfig2},n.isUploadSummaryOnCallEnded=function(){return this.$ZenonPlatformSupportConfig3},n.isMultiwayAvEscalationEnabled=function(){return this.$ZenonPlatformSupportConfig4},n.getMaxConnectedCalls=function(){return this.$ZenonPlatformSupportConfig5},n.getParentWindowConnectionTimeoutMs=function(){return this.$ZenonPlatformSupportConfig6},t})(e),f=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$ZenonSimulcastConfig1=t.getBool(453),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$ZenonSimulcastConfig1=this.getBool(453)},n.isSimulcastEnabled=function(){return this.$ZenonSimulcastConfig1},t})(e),g=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$DynamicRuleConfig1=t.getBool(1342),t.$DynamicRuleConfig2=t.getBool(1597),t.$DynamicRuleConfig3=t.getInt(1359),t.$DynamicRuleConfig4=t.getInt(1510),t.$DynamicRuleConfig5=t.getInt(1612),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$DynamicRuleConfig1=this.getBool(1342),this.$DynamicRuleConfig2=this.getBool(1597),this.$DynamicRuleConfig3=this.getInt(1359),this.$DynamicRuleConfig4=this.getInt(1510),this.$DynamicRuleConfig5=this.getInt(1612)},n.isEnabled=function(){return this.$DynamicRuleConfig1},n.isDebugLoggingEnabled=function(){return this.$DynamicRuleConfig2},n.getProcessIntervalMs=function(){return this.$DynamicRuleConfig3},n.getNetworkProcessIntervalMs=function(){return this.$DynamicRuleConfig4},n.getDebugLoggingIntervalMs=function(){return this.$DynamicRuleConfig5},t})(e),h=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$SignalingPingConfig1=t.getInt(1470),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$SignalingPingConfig1=this.getInt(1470)},n.getPingIntervalMs=function(){return this.$SignalingPingConfig1},t})(e),y=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$NetEqAiConfig1=t.getBool(4550),t.$NetEqAiConfig2=t.getBool(4551),t.$NetEqAiConfig3=t.getInt(4552),t.$NetEqAiConfig4=t.getInt(5477),babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.updateParams=function(){this.$NetEqAiConfig1=this.getBool(4550),this.$NetEqAiConfig2=this.getBool(4551),this.$NetEqAiConfig3=this.getInt(4552),this.$NetEqAiConfig4=this.getInt(5477)},n.isEnabled=function(){return this.$NetEqAiConfig1},n.isDisableTimeStretching=function(){return this.$NetEqAiConfig2},n.getPacketWaitTimeMs=function(){return this.$NetEqAiConfig3},n.getCngDelayMs=function(){return this.$NetEqAiConfig4},t})(e);a.exports={ExampleConfig:l,PreferredCaptureConfig:s,ZenonSdpTransformConfig:u,ZenonPeerConnectionConfig:c,ZenonStartCallImmediatelyConfig:d,ZenonGeneralizedIdentityConfig:m,ZenonMultiCallSupportConfig:p,ZenonPlatformSupportConfig:_,ZenonSimulcastConfig:f,DynamicRuleConfig:g,SignalingPingConfig:h,NetEqAiConfig:y}}),null);
__d("DecoilAtomStore",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=t,n=new Set;return{getSnapshot:function(){return e},subscribe:function(t){return n.add(t),function(){n.delete(t)}},update:function(r){var t=typeof r=="function"?r:function(e){return r};e=t(e);for(var o of n)o()}}},l=e;i.default=l}),66);
__d("DecoilRoot.react",["DecoilAtomStore","FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo,m=u.useRef,p=u.useState,_=s.createContext({getForAtom:function(){throw r("FBLogger")("decoil").mustfixThrow("Decoil is not initialized correctly. Have you created a DecoilRoot component higher in the component tree?")}});function f(e){var t=e.children,n=e.initializeState,o=m(new Map),a=c(function(e,t){var n=r("DecoilAtomStore")(t);return o.current.set(e.key,n),n},[]),i=p(!1),l=i[0],u=i[1];l||(n==null||n({set:function(t,n){a(t,n)}}),u(!0));var f=d(function(){return{getForAtom:function(t){var e=o.current.get(t.key);return e!==void 0?e:a(t,t.default)}}},[a]);return s.jsx(_.Provider,{value:f,children:t})}f.displayName=f.name+" [from "+i.id+"]",l.DecoilRoot=f,l.DecoilRootContext=_}),98);
__d("Decoil",["DecoilRoot.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useMemo,m=s.useSyncExternalStore;function p(e){return e}function _(e){return function(t){return babelHelpers.extends({},e,{key:e.key+"."+t})}}function f(e){var t=c(o("DecoilRoot.react").DecoilRootContext),n=t.getForAtom;return d(function(){return n(e)},[n,e])}function g(e){var t=f(e);return m(t.subscribe,t.getSnapshot)}function h(e){var t=f(e);return u(function(e){t.update(e)},[t])}function y(e){var t=g(e),n=h(e);return[t,n]}l.atom=p,l.atomFamily=_,l.useDecoilValue=g,l.useSetDecoilState=h,l.useDecoilState=y}),98);
__d("E2eeMetricsSerializers",["ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{}}function c(){return{p2p_e2ee:s(),group_e2ee:u()}}function d(t,n){if(n.writeStructBegin("P2pE2eeMetrics"),t.engine_type!=null&&(n.writeFieldBegin({fname:"engine_type",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(BigInt(t.engine_type)),n.writeFieldEnd()),t.status!=null&&(n.writeFieldBegin({fname:"status",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.status)),n.writeFieldEnd()),t.version!=null&&(n.writeFieldBegin({fname:"version",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(BigInt(t.version)),n.writeFieldEnd()),t.gen_prekey_bundle_time_ms!=null&&(n.writeFieldBegin({fname:"gen_prekey_bundle_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:4}),n.writeI64(BigInt(t.gen_prekey_bundle_time_ms)),n.writeFieldEnd()),t.encrypted_msg_time_ms!=null&&(n.writeFieldBegin({fname:"encrypted_msg_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:5}),n.writeI64(BigInt(t.encrypted_msg_time_ms)),n.writeFieldEnd()),t.decrypted_msg_time_ms!=null&&(n.writeFieldBegin({fname:"decrypted_msg_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:6}),n.writeI64(BigInt(t.decrypted_msg_time_ms)),n.writeFieldEnd()),t.process_sdp_crypto_time_ms!=null&&(n.writeFieldBegin({fname:"process_sdp_crypto_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:7}),n.writeI64(BigInt(t.process_sdp_crypto_time_ms)),n.writeFieldEnd()),t.create_crypto_offer_time_ms!=null&&(n.writeFieldBegin({fname:"create_crypto_offer_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:8}),n.writeI64(BigInt(t.create_crypto_offer_time_ms)),n.writeFieldEnd()),t.create_crypto_answer_time_ms!=null&&(n.writeFieldBegin({fname:"create_crypto_answer_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:9}),n.writeI64(BigInt(t.create_crypto_answer_time_ms)),n.writeFieldEnd()),t.get_ik_time_ms!=null&&(n.writeFieldBegin({fname:"get_ik_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:10}),n.writeI64(BigInt(t.get_ik_time_ms)),n.writeFieldEnd()),t.peer_id!=null&&(n.writeFieldBegin({fname:"peer_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:11}),n.writeI64(BigInt(t.peer_id)),n.writeFieldEnd()),t.peer_connection_index!=null&&(n.writeFieldBegin({fname:"peer_connection_index",ftype:(e||(e=r("ThriftTypes"))).I64,fid:12}),n.writeI64(BigInt(t.peer_connection_index)),n.writeFieldEnd()),t.srtp_crypto_suite!=null&&(n.writeFieldBegin({fname:"srtp_crypto_suite",ftype:(e||(e=r("ThriftTypes"))).I64,fid:13}),n.writeI64(BigInt(t.srtp_crypto_suite)),n.writeFieldEnd()),t.engine_error!=null&&(n.writeFieldBegin({fname:"engine_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:14}),n.writeI64(BigInt(t.engine_error)),n.writeFieldEnd()),t.libsignal_error!=null&&(n.writeFieldBegin({fname:"libsignal_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:15}),n.writeI64(BigInt(t.libsignal_error)),n.writeFieldEnd()),t.identity_key_mode!=null&&(n.writeFieldBegin({fname:"identity_key_mode",ftype:(e||(e=r("ThriftTypes"))).I64,fid:16}),n.writeI64(BigInt(t.identity_key_mode)),n.writeFieldEnd()),t.identity_key_num_persistent!=null&&(n.writeFieldBegin({fname:"identity_key_num_persistent",ftype:(e||(e=r("ThriftTypes"))).I64,fid:17}),n.writeI64(BigInt(t.identity_key_num_persistent)),n.writeFieldEnd()),t.identity_key_num_validated!=null&&(n.writeFieldBegin({fname:"identity_key_num_validated",ftype:(e||(e=r("ThriftTypes"))).I64,fid:18}),n.writeI64(BigInt(t.identity_key_num_validated)),n.writeFieldEnd()),t.identity_key_num_saved!=null&&(n.writeFieldBegin({fname:"identity_key_num_saved",ftype:(e||(e=r("ThriftTypes"))).I64,fid:19}),n.writeI64(BigInt(t.identity_key_num_saved)),n.writeFieldEnd()),t.identity_key_num_existing!=null&&(n.writeFieldBegin({fname:"identity_key_num_existing",ftype:(e||(e=r("ThriftTypes"))).I64,fid:20}),n.writeI64(BigInt(t.identity_key_num_existing)),n.writeFieldEnd()),t.is_e2ee_mandated!=null&&(n.writeFieldBegin({fname:"is_e2ee_mandated",ftype:(e||(e=r("ThriftTypes"))).I64,fid:21}),n.writeI64(BigInt(t.is_e2ee_mandated)),n.writeFieldEnd()),t.local_trace_id!=null&&(n.writeFieldBegin({fname:"local_trace_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:22}),n.writeI64(BigInt(t.local_trace_id)),n.writeFieldEnd()),t.remote_trace_id!=null&&(n.writeFieldBegin({fname:"remote_trace_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:23}),n.writeI64(BigInt(t.remote_trace_id)),n.writeFieldEnd()),t.local_device_id!=null&&(n.writeFieldBegin({fname:"local_device_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:24}),n.writeI64(BigInt(t.local_device_id)),n.writeFieldEnd()),t.remote_device_id!=null&&(n.writeFieldBegin({fname:"remote_device_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:25}),n.writeI64(BigInt(t.remote_device_id)),n.writeFieldEnd()),t.events!=null){n.writeFieldBegin({fname:"events",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:26}),n.writeListBegin({etype:e.I64,size:t.events.length});for(var o of t.events)n.writeI64(BigInt(o));n.writeListEnd(),n.writeFieldEnd()}t.gen_dtls_auth_info_status!=null&&(n.writeFieldBegin({fname:"gen_dtls_auth_info_status",ftype:(e||(e=r("ThriftTypes"))).I64,fid:27}),n.writeI64(BigInt(t.gen_dtls_auth_info_status)),n.writeFieldEnd()),t.gen_dtls_auth_info_libsignal_status!=null&&(n.writeFieldBegin({fname:"gen_dtls_auth_info_libsignal_status",ftype:(e||(e=r("ThriftTypes"))).I64,fid:28}),n.writeI64(BigInt(t.gen_dtls_auth_info_libsignal_status)),n.writeFieldEnd()),t.gen_dtls_auth_info_time_ms!=null&&(n.writeFieldBegin({fname:"gen_dtls_auth_info_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:29}),n.writeI64(BigInt(t.gen_dtls_auth_info_time_ms)),n.writeFieldEnd()),t.verify_dtls_auth_info_status!=null&&(n.writeFieldBegin({fname:"verify_dtls_auth_info_status",ftype:(e||(e=r("ThriftTypes"))).I64,fid:30}),n.writeI64(BigInt(t.verify_dtls_auth_info_status)),n.writeFieldEnd()),t.verify_dtls_auth_info_libsignal_status!=null&&(n.writeFieldBegin({fname:"verify_dtls_auth_info_libsignal_status",ftype:(e||(e=r("ThriftTypes"))).I64,fid:31}),n.writeI64(BigInt(t.verify_dtls_auth_info_libsignal_status)),n.writeFieldEnd()),t.verify_dtls_auth_info_time_ms!=null&&(n.writeFieldBegin({fname:"verify_dtls_auth_info_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:32}),n.writeI64(BigInt(t.verify_dtls_auth_info_time_ms)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function m(t,n){if(n.writeStructBegin("GroupE2eeMetrics"),t.received_key_message_counter!=null&&(n.writeFieldBegin({fname:"received_key_message_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(BigInt(t.received_key_message_counter)),n.writeFieldEnd()),t.sent_key_message_counter!=null&&(n.writeFieldBegin({fname:"sent_key_message_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.sent_key_message_counter)),n.writeFieldEnd()),t.cached_key_message_counter!=null&&(n.writeFieldBegin({fname:"cached_key_message_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(BigInt(t.cached_key_message_counter)),n.writeFieldEnd()),t.used_cached_key_counter!=null&&(n.writeFieldBegin({fname:"used_cached_key_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:4}),n.writeI64(BigInt(t.used_cached_key_counter)),n.writeFieldEnd()),t.unused_smu_counter!=null&&(n.writeFieldBegin({fname:"unused_smu_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:5}),n.writeI64(BigInt(t.unused_smu_counter)),n.writeFieldEnd()),t.missing_key_message_counter!=null&&(n.writeFieldBegin({fname:"missing_key_message_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:6}),n.writeI64(BigInt(t.missing_key_message_counter)),n.writeFieldEnd()),t.negotiate_off_status!=null&&(n.writeFieldBegin({fname:"negotiate_off_status",ftype:(e||(e=r("ThriftTypes"))).I64,fid:7}),n.writeI64(BigInt(t.negotiate_off_status)),n.writeFieldEnd()),t.cipher_suite_status!=null&&(n.writeFieldBegin({fname:"cipher_suite_status",ftype:(e||(e=r("ThriftTypes"))).I64,fid:8}),n.writeI64(BigInt(t.cipher_suite_status)),n.writeFieldEnd()),t.decrypt_used_cached_session_counter!=null&&(n.writeFieldBegin({fname:"decrypt_used_cached_session_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:9}),n.writeI64(BigInt(t.decrypt_used_cached_session_counter)),n.writeFieldEnd()),t.encrypt_used_cached_session_counter!=null&&(n.writeFieldBegin({fname:"encrypt_used_cached_session_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:10}),n.writeI64(BigInt(t.encrypt_used_cached_session_counter)),n.writeFieldEnd()),t.sent_ack_message_counter!=null&&(n.writeFieldBegin({fname:"sent_ack_message_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:11}),n.writeI64(BigInt(t.sent_ack_message_counter)),n.writeFieldEnd()),t.reuse_ackd_uid_counter!=null&&(n.writeFieldBegin({fname:"reuse_ackd_uid_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:12}),n.writeI64(BigInt(t.reuse_ackd_uid_counter)),n.writeFieldEnd()),t.total_uids_created_counter!=null&&(n.writeFieldBegin({fname:"total_uids_created_counter",ftype:(e||(e=r("ThriftTypes"))).I64,fid:13}),n.writeI64(BigInt(t.total_uids_created_counter)),n.writeFieldEnd()),t.generate_chain_key_failed_error!=null&&(n.writeFieldBegin({fname:"generate_chain_key_failed_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:14}),n.writeI64(BigInt(t.generate_chain_key_failed_error)),n.writeFieldEnd()),t.set_chain_key_failed_error!=null&&(n.writeFieldBegin({fname:"set_chain_key_failed_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:15}),n.writeI64(BigInt(t.set_chain_key_failed_error)),n.writeFieldEnd()),t.key_provider_not_found_error!=null&&(n.writeFieldBegin({fname:"key_provider_not_found_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:16}),n.writeI64(BigInt(t.key_provider_not_found_error)),n.writeFieldEnd()),t.key_message_parse_failed_error!=null&&(n.writeFieldBegin({fname:"key_message_parse_failed_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:17}),n.writeI64(BigInt(t.key_message_parse_failed_error)),n.writeFieldEnd()),t.empty_pkb_result_error!=null&&(n.writeFieldBegin({fname:"empty_pkb_result_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:18}),n.writeI64(BigInt(t.empty_pkb_result_error)),n.writeFieldEnd()),t.empty_encrypt_result_error!=null&&(n.writeFieldBegin({fname:"empty_encrypt_result_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:19}),n.writeI64(BigInt(t.empty_encrypt_result_error)),n.writeFieldEnd()),t.empty_decrypt_result_error!=null&&(n.writeFieldBegin({fname:"empty_decrypt_result_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:20}),n.writeI64(BigInt(t.empty_decrypt_result_error)),n.writeFieldEnd()),t.empty_version_error!=null&&(n.writeFieldBegin({fname:"empty_version_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:21}),n.writeI64(BigInt(t.empty_version_error)),n.writeFieldEnd()),t.unsupported_version_error!=null&&(n.writeFieldBegin({fname:"unsupported_version_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:22}),n.writeI64(BigInt(t.unsupported_version_error)),n.writeFieldEnd()),t.midcall_version_change_error!=null&&(n.writeFieldBegin({fname:"midcall_version_change_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:23}),n.writeI64(BigInt(t.midcall_version_change_error)),n.writeFieldEnd()),t.inconsistent_remote_maps_error!=null&&(n.writeFieldBegin({fname:"inconsistent_remote_maps_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:24}),n.writeI64(BigInt(t.inconsistent_remote_maps_error)),n.writeFieldEnd()),t.key_message_pkb_mismatch_error!=null&&(n.writeFieldBegin({fname:"key_message_pkb_mismatch_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:25}),n.writeI64(BigInt(t.key_message_pkb_mismatch_error)),n.writeFieldEnd()),t.no_key_or_ack_in_e2ee_message_error!=null&&(n.writeFieldBegin({fname:"no_key_or_ack_in_e2ee_message_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:26}),n.writeI64(BigInt(t.no_key_or_ack_in_e2ee_message_error)),n.writeFieldEnd()),t.receiver_key_provider_not_found_error!=null&&(n.writeFieldBegin({fname:"receiver_key_provider_not_found_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:27}),n.writeI64(BigInt(t.receiver_key_provider_not_found_error)),n.writeFieldEnd()),t.pkb_parse_failed_error!=null&&(n.writeFieldBegin({fname:"pkb_parse_failed_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:28}),n.writeI64(BigInt(t.pkb_parse_failed_error)),n.writeFieldEnd()),t.message_deserialized_failed_error!=null&&(n.writeFieldBegin({fname:"message_deserialized_failed_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:29}),n.writeI64(BigInt(t.message_deserialized_failed_error)),n.writeFieldEnd()),t.decrypt_no_identity_key_and_cached_session_not_used_error!=null&&(n.writeFieldBegin({fname:"decrypt_no_identity_key_and_cached_session_not_used_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:30}),n.writeI64(BigInt(t.decrypt_no_identity_key_and_cached_session_not_used_error)),n.writeFieldEnd()),t.encrypt_no_identity_key_and_cached_session_not_used_error!=null&&(n.writeFieldBegin({fname:"encrypt_no_identity_key_and_cached_session_not_used_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:31}),n.writeI64(BigInt(t.encrypt_no_identity_key_and_cached_session_not_used_error)),n.writeFieldEnd()),t.decrypt_ack_wrong_message_error!=null&&(n.writeFieldBegin({fname:"decrypt_ack_wrong_message_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:32}),n.writeI64(BigInt(t.decrypt_ack_wrong_message_error)),n.writeFieldEnd()),t.invalid_uid_received_error!=null&&(n.writeFieldBegin({fname:"invalid_uid_received_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:33}),n.writeI64(BigInt(t.invalid_uid_received_error)),n.writeFieldEnd()),t.ack_for_absent_user!=null&&(n.writeFieldBegin({fname:"ack_for_absent_user",ftype:(e||(e=r("ThriftTypes"))).I64,fid:34}),n.writeI64(BigInt(t.ack_for_absent_user)),n.writeFieldEnd()),t.uid_not_awaiting_ack_error!=null&&(n.writeFieldBegin({fname:"uid_not_awaiting_ack_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:35}),n.writeI64(BigInt(t.uid_not_awaiting_ack_error)),n.writeFieldEnd()),t.decrypt_ack_error!=null&&(n.writeFieldBegin({fname:"decrypt_ack_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:36}),n.writeI64(BigInt(t.decrypt_ack_error)),n.writeFieldEnd()),t.empty_decrypt_result_ack_error!=null&&(n.writeFieldBegin({fname:"empty_decrypt_result_ack_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:37}),n.writeI64(BigInt(t.empty_decrypt_result_ack_error)),n.writeFieldEnd()),t.decrypt_ack_cached_session_not_used_error!=null&&(n.writeFieldBegin({fname:"decrypt_ack_cached_session_not_used_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:38}),n.writeI64(BigInt(t.decrypt_ack_cached_session_not_used_error)),n.writeFieldEnd()),t.encrypt_ack_error!=null&&(n.writeFieldBegin({fname:"encrypt_ack_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:39}),n.writeI64(BigInt(t.encrypt_ack_error)),n.writeFieldEnd()),t.empty_encrypt_result_ack_error!=null&&(n.writeFieldBegin({fname:"empty_encrypt_result_ack_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:40}),n.writeI64(BigInt(t.empty_encrypt_result_ack_error)),n.writeFieldEnd()),t.invalid_message_type_error!=null&&(n.writeFieldBegin({fname:"invalid_message_type_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:41}),n.writeI64(BigInt(t.invalid_message_type_error)),n.writeFieldEnd()),t.server_state_deserialized_failed_error!=null&&(n.writeFieldBegin({fname:"server_state_deserialized_failed_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:42}),n.writeI64(BigInt(t.server_state_deserialized_failed_error)),n.writeFieldEnd()),t.crypto_engine_failure_error!=null&&(n.writeFieldBegin({fname:"crypto_engine_failure_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:43}),n.writeI64(BigInt(t.crypto_engine_failure_error)),n.writeFieldEnd()),t.empty_e2ee_client_state_error!=null&&(n.writeFieldBegin({fname:"empty_e2ee_client_state_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:44}),n.writeI64(BigInt(t.empty_e2ee_client_state_error)),n.writeFieldEnd()),t.group_e2ee_negotiated!=null&&(n.writeFieldBegin({fname:"group_e2ee_negotiated",ftype:(e||(e=r("ThriftTypes"))).I64,fid:45}),n.writeI64(BigInt(t.group_e2ee_negotiated)),n.writeFieldEnd()),t.negotiation_mode_kn!=null&&(n.writeFieldBegin({fname:"negotiation_mode_kn",ftype:(e||(e=r("ThriftTypes"))).I64,fid:46}),n.writeI64(BigInt(t.negotiation_mode_kn)),n.writeFieldEnd()),t.group_e2ee_setup_status!=null&&(n.writeFieldBegin({fname:"group_e2ee_setup_status",ftype:(e||(e=r("ThriftTypes"))).I64,fid:47}),n.writeI64(BigInt(t.group_e2ee_setup_status)),n.writeFieldEnd()),t.enable_group_e2ee!=null&&(n.writeFieldBegin({fname:"enable_group_e2ee",ftype:(e||(e=r("ThriftTypes"))).I64,fid:48}),n.writeI64(BigInt(t.enable_group_e2ee)),n.writeFieldEnd()),t.identity_key_mode_group!=null&&(n.writeFieldBegin({fname:"identity_key_mode_group",ftype:(e||(e=r("ThriftTypes"))).I64,fid:49}),n.writeI64(BigInt(t.identity_key_mode_group)),n.writeFieldEnd()),t.identity_key_num_persistent_group!=null&&(n.writeFieldBegin({fname:"identity_key_num_persistent_group",ftype:(e||(e=r("ThriftTypes"))).I64,fid:50}),n.writeI64(BigInt(t.identity_key_num_persistent_group)),n.writeFieldEnd()),t.identity_key_num_validated_group!=null&&(n.writeFieldBegin({fname:"identity_key_num_validated_group",ftype:(e||(e=r("ThriftTypes"))).I64,fid:51}),n.writeI64(BigInt(t.identity_key_num_validated_group)),n.writeFieldEnd()),t.identity_key_num_saved_group!=null&&(n.writeFieldBegin({fname:"identity_key_num_saved_group",ftype:(e||(e=r("ThriftTypes"))).I64,fid:52}),n.writeI64(BigInt(t.identity_key_num_saved_group)),n.writeFieldEnd()),t.identity_key_num_existing_group!=null&&(n.writeFieldBegin({fname:"identity_key_num_existing_group",ftype:(e||(e=r("ThriftTypes"))).I64,fid:53}),n.writeI64(BigInt(t.identity_key_num_existing_group)),n.writeFieldEnd()),t.max_key_message_latency_ms!=null&&(n.writeFieldBegin({fname:"max_key_message_latency_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:54}),n.writeI64(BigInt(t.max_key_message_latency_ms)),n.writeFieldEnd()),t.max_key_message_latency_ms_joiner!=null&&(n.writeFieldBegin({fname:"max_key_message_latency_ms_joiner",ftype:(e||(e=r("ThriftTypes"))).I64,fid:55}),n.writeI64(BigInt(t.max_key_message_latency_ms_joiner)),n.writeFieldEnd()),t.max_smu_to_key_message_latency_ms!=null&&(n.writeFieldBegin({fname:"max_smu_to_key_message_latency_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:56}),n.writeI64(BigInt(t.max_smu_to_key_message_latency_ms)),n.writeFieldEnd()),t.process_smu_time_ms!=null&&(n.writeFieldBegin({fname:"process_smu_time_ms",ftype:(e||(e=r("ThriftTypes"))).I64,fid:57}),n.writeI64(BigInt(t.process_smu_time_ms)),n.writeFieldEnd()),t.decryption_total_frames!=null&&(n.writeFieldBegin({fname:"decryption_total_frames",ftype:(e||(e=r("ThriftTypes"))).I64,fid:58}),n.writeI64(BigInt(t.decryption_total_frames)),n.writeFieldEnd()),t.decryption_total_error_frames!=null&&(n.writeFieldBegin({fname:"decryption_total_error_frames",ftype:(e||(e=r("ThriftTypes"))).I64,fid:59}),n.writeI64(BigInt(t.decryption_total_error_frames)),n.writeFieldEnd()),t.decryption_error_frames_alloc!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_alloc",ftype:(e||(e=r("ThriftTypes"))).I64,fid:60}),n.writeI64(BigInt(t.decryption_error_frames_alloc)),n.writeFieldEnd()),t.decryption_error_frames_invalid_params!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_invalid_params",ftype:(e||(e=r("ThriftTypes"))).I64,fid:61}),n.writeI64(BigInt(t.decryption_error_frames_invalid_params)),n.writeFieldEnd()),t.decryption_error_frames_cipher!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_cipher",ftype:(e||(e=r("ThriftTypes"))).I64,fid:62}),n.writeI64(BigInt(t.decryption_error_frames_cipher)),n.writeFieldEnd()),t.decryption_error_frames_parse!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_parse",ftype:(e||(e=r("ThriftTypes"))).I64,fid:63}),n.writeI64(BigInt(t.decryption_error_frames_parse)),n.writeFieldEnd()),t.decryption_error_frames_invalid_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_invalid_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:64}),n.writeI64(BigInt(t.decryption_error_frames_invalid_key)),n.writeFieldEnd()),t.decryption_error_frames_missing_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_missing_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:65}),n.writeI64(BigInt(t.decryption_error_frames_missing_key)),n.writeFieldEnd()),t.decryption_error_frames_out_of_ratchet_space!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_out_of_ratchet_space",ftype:(e||(e=r("ThriftTypes"))).I64,fid:66}),n.writeI64(BigInt(t.decryption_error_frames_out_of_ratchet_space)),n.writeFieldEnd()),t.decryption_error_frames_cipher_auth!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_cipher_auth",ftype:(e||(e=r("ThriftTypes"))).I64,fid:67}),n.writeI64(BigInt(t.decryption_error_frames_cipher_auth)),n.writeFieldEnd()),t.decryption_error_frames_frame_too_old!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_frame_too_old",ftype:(e||(e=r("ThriftTypes"))).I64,fid:68}),n.writeI64(BigInt(t.decryption_error_frames_frame_too_old)),n.writeFieldEnd()),t.decryption_error_frames_seen_frame!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_seen_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:69}),n.writeI64(BigInt(t.decryption_error_frames_seen_frame)),n.writeFieldEnd()),t.decryption_error_frames_invalid_frame!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_invalid_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:70}),n.writeI64(BigInt(t.decryption_error_frames_invalid_frame)),n.writeFieldEnd()),t.decryption_error_frames_setting_invalid_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_setting_invalid_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:71}),n.writeI64(BigInt(t.decryption_error_frames_setting_invalid_key)),n.writeFieldEnd()),t.decryption_error_frames_setting_existing_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_setting_existing_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:72}),n.writeI64(BigInt(t.decryption_error_frames_setting_existing_key)),n.writeFieldEnd()),t.decryption_error_frames_escape_data!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_escape_data",ftype:(e||(e=r("ThriftTypes"))).I64,fid:73}),n.writeI64(BigInt(t.decryption_error_frames_escape_data)),n.writeFieldEnd()),t.decryption_error_frames_deescape_data!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_deescape_data",ftype:(e||(e=r("ThriftTypes"))).I64,fid:74}),n.writeI64(BigInt(t.decryption_error_frames_deescape_data)),n.writeFieldEnd()),t.decryption_error_frames_parse_frame_or_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_parse_frame_or_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:75}),n.writeI64(BigInt(t.decryption_error_frames_parse_frame_or_key)),n.writeFieldEnd()),t.decryption_error_frames_unknown!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_unknown",ftype:(e||(e=r("ThriftTypes"))).I64,fid:76}),n.writeI64(BigInt(t.decryption_error_frames_unknown)),n.writeFieldEnd()),t.decryption_unencrypted_frames!=null&&(n.writeFieldBegin({fname:"decryption_unencrypted_frames",ftype:(e||(e=r("ThriftTypes"))).I64,fid:77}),n.writeI64(BigInt(t.decryption_unencrypted_frames)),n.writeFieldEnd()),t.encryption_total_frames!=null&&(n.writeFieldBegin({fname:"encryption_total_frames",ftype:(e||(e=r("ThriftTypes"))).I64,fid:78}),n.writeI64(BigInt(t.encryption_total_frames)),n.writeFieldEnd()),t.encryption_error_frames!=null&&(n.writeFieldBegin({fname:"encryption_error_frames",ftype:(e||(e=r("ThriftTypes"))).I64,fid:79}),n.writeI64(BigInt(t.encryption_error_frames)),n.writeFieldEnd()),t.encryption_escape_bytes!=null&&(n.writeFieldBegin({fname:"encryption_escape_bytes",ftype:(e||(e=r("ThriftTypes"))).I64,fid:80}),n.writeI64(BigInt(t.encryption_escape_bytes)),n.writeFieldEnd()),t.encryption_total_error_frames!=null&&(n.writeFieldBegin({fname:"encryption_total_error_frames",ftype:(e||(e=r("ThriftTypes"))).I64,fid:81}),n.writeI64(BigInt(t.encryption_total_error_frames)),n.writeFieldEnd()),t.encryption_error_frames_alloc!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_alloc",ftype:(e||(e=r("ThriftTypes"))).I64,fid:82}),n.writeI64(BigInt(t.encryption_error_frames_alloc)),n.writeFieldEnd()),t.encryption_error_frames_invalid_params!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_invalid_params",ftype:(e||(e=r("ThriftTypes"))).I64,fid:83}),n.writeI64(BigInt(t.encryption_error_frames_invalid_params)),n.writeFieldEnd()),t.encryption_error_frames_cipher!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_cipher",ftype:(e||(e=r("ThriftTypes"))).I64,fid:84}),n.writeI64(BigInt(t.encryption_error_frames_cipher)),n.writeFieldEnd()),t.encryption_error_frames_parse!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_parse",ftype:(e||(e=r("ThriftTypes"))).I64,fid:85}),n.writeI64(BigInt(t.encryption_error_frames_parse)),n.writeFieldEnd()),t.encryption_error_frames_invalid_key!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_invalid_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:86}),n.writeI64(BigInt(t.encryption_error_frames_invalid_key)),n.writeFieldEnd()),t.encryption_error_frames_cipher_auth!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_cipher_auth",ftype:(e||(e=r("ThriftTypes"))).I64,fid:87}),n.writeI64(BigInt(t.encryption_error_frames_cipher_auth)),n.writeFieldEnd()),t.encryption_error_frames_escape_data!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_escape_data",ftype:(e||(e=r("ThriftTypes"))).I64,fid:88}),n.writeI64(BigInt(t.encryption_error_frames_escape_data)),n.writeFieldEnd()),t.encryption_error_frames_unsupported_codec!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_unsupported_codec",ftype:(e||(e=r("ThriftTypes"))).I64,fid:89}),n.writeI64(BigInt(t.encryption_error_frames_unsupported_codec)),n.writeFieldEnd()),t.encryption_error_frames_unknown!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_unknown",ftype:(e||(e=r("ThriftTypes"))).I64,fid:90}),n.writeI64(BigInt(t.encryption_error_frames_unknown)),n.writeFieldEnd()),t.decryption_total_frames_data_channel!=null&&(n.writeFieldBegin({fname:"decryption_total_frames_data_channel",ftype:(e||(e=r("ThriftTypes"))).I64,fid:91}),n.writeI64(BigInt(t.decryption_total_frames_data_channel)),n.writeFieldEnd()),t.decryption_total_error_frames_data_channel!=null&&(n.writeFieldBegin({fname:"decryption_total_error_frames_data_channel",ftype:(e||(e=r("ThriftTypes"))).I64,fid:92}),n.writeI64(BigInt(t.decryption_total_error_frames_data_channel)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_alloc!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_alloc",ftype:(e||(e=r("ThriftTypes"))).I64,fid:93}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_alloc)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_invalid_params!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_invalid_params",ftype:(e||(e=r("ThriftTypes"))).I64,fid:94}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_invalid_params)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_cipher!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_cipher",ftype:(e||(e=r("ThriftTypes"))).I64,fid:95}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_cipher)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_parse!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_parse",ftype:(e||(e=r("ThriftTypes"))).I64,fid:96}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_parse)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_invalid_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_invalid_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:97}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_invalid_key)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_missing_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_missing_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:98}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_missing_key)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_out_of_ratchet_space!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_out_of_ratchet_space",ftype:(e||(e=r("ThriftTypes"))).I64,fid:99}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_out_of_ratchet_space)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_cipher_auth!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_cipher_auth",ftype:(e||(e=r("ThriftTypes"))).I64,fid:100}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_cipher_auth)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_frame_too_old!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_frame_too_old",ftype:(e||(e=r("ThriftTypes"))).I64,fid:101}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_frame_too_old)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_seen_frame!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_seen_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:102}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_seen_frame)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_invalid_frame!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_invalid_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:103}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_invalid_frame)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_setting_invalid_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_setting_invalid_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:104}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_setting_invalid_key)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_setting_existing_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_setting_existing_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:105}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_setting_existing_key)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_escape_data!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_escape_data",ftype:(e||(e=r("ThriftTypes"))).I64,fid:106}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_escape_data)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_deescape_data!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_deescape_data",ftype:(e||(e=r("ThriftTypes"))).I64,fid:107}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_deescape_data)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_parse_frame_or_key!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_parse_frame_or_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:108}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_parse_frame_or_key)),n.writeFieldEnd()),t.decryption_error_frames_data_channel_unknown!=null&&(n.writeFieldBegin({fname:"decryption_error_frames_data_channel_unknown",ftype:(e||(e=r("ThriftTypes"))).I64,fid:109}),n.writeI64(BigInt(t.decryption_error_frames_data_channel_unknown)),n.writeFieldEnd()),t.decryption_unencrypted_frames_data_channel!=null&&(n.writeFieldBegin({fname:"decryption_unencrypted_frames_data_channel",ftype:(e||(e=r("ThriftTypes"))).I64,fid:110}),n.writeI64(BigInt(t.decryption_unencrypted_frames_data_channel)),n.writeFieldEnd()),t.encryption_total_frames_data_channel!=null&&(n.writeFieldBegin({fname:"encryption_total_frames_data_channel",ftype:(e||(e=r("ThriftTypes"))).I64,fid:111}),n.writeI64(BigInt(t.encryption_total_frames_data_channel)),n.writeFieldEnd()),t.encryption_error_frames_data_channel!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel",ftype:(e||(e=r("ThriftTypes"))).I64,fid:112}),n.writeI64(BigInt(t.encryption_error_frames_data_channel)),n.writeFieldEnd()),t.encryption_total_error_frames_data_channel!=null&&(n.writeFieldBegin({fname:"encryption_total_error_frames_data_channel",ftype:(e||(e=r("ThriftTypes"))).I64,fid:113}),n.writeI64(BigInt(t.encryption_total_error_frames_data_channel)),n.writeFieldEnd()),t.encryption_error_frames_data_channel_alloc!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel_alloc",ftype:(e||(e=r("ThriftTypes"))).I64,fid:114}),n.writeI64(BigInt(t.encryption_error_frames_data_channel_alloc)),n.writeFieldEnd()),t.encryption_error_frames_data_channel_invalid_params!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel_invalid_params",ftype:(e||(e=r("ThriftTypes"))).I64,fid:115}),n.writeI64(BigInt(t.encryption_error_frames_data_channel_invalid_params)),n.writeFieldEnd()),t.encryption_error_frames_data_channel_cipher!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel_cipher",ftype:(e||(e=r("ThriftTypes"))).I64,fid:116}),n.writeI64(BigInt(t.encryption_error_frames_data_channel_cipher)),n.writeFieldEnd()),t.encryption_error_frames_data_channel_parse!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel_parse",ftype:(e||(e=r("ThriftTypes"))).I64,fid:117}),n.writeI64(BigInt(t.encryption_error_frames_data_channel_parse)),n.writeFieldEnd()),t.encryption_error_frames_data_channel_invalid_key!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel_invalid_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:118}),n.writeI64(BigInt(t.encryption_error_frames_data_channel_invalid_key)),n.writeFieldEnd()),t.encryption_error_frames_data_channel_cipher_auth!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel_cipher_auth",ftype:(e||(e=r("ThriftTypes"))).I64,fid:119}),n.writeI64(BigInt(t.encryption_error_frames_data_channel_cipher_auth)),n.writeFieldEnd()),t.encryption_error_frames_data_channel_escape_data!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel_escape_data",ftype:(e||(e=r("ThriftTypes"))).I64,fid:120}),n.writeI64(BigInt(t.encryption_error_frames_data_channel_escape_data)),n.writeFieldEnd()),t.encryption_error_frames_data_channel_unsupported_codec!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel_unsupported_codec",ftype:(e||(e=r("ThriftTypes"))).I64,fid:121}),n.writeI64(BigInt(t.encryption_error_frames_data_channel_unsupported_codec)),n.writeFieldEnd()),t.encryption_error_frames_data_channel_unknown!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_data_channel_unknown",ftype:(e||(e=r("ThriftTypes"))).I64,fid:122}),n.writeI64(BigInt(t.encryption_error_frames_data_channel_unknown)),n.writeFieldEnd()),t.num_removed_data_decryptors!=null&&(n.writeFieldBegin({fname:"num_removed_data_decryptors",ftype:(e||(e=r("ThriftTypes"))).I64,fid:123}),n.writeI64(BigInt(t.num_removed_data_decryptors)),n.writeFieldEnd()),t.num_frame_decryptor_with_unencrypted_data!=null&&(n.writeFieldBegin({fname:"num_frame_decryptor_with_unencrypted_data",ftype:(e||(e=r("ThriftTypes"))).I64,fid:124}),n.writeI64(BigInt(t.num_frame_decryptor_with_unencrypted_data)),n.writeFieldEnd()),t.num_removed_decryptors!=null&&(n.writeFieldBegin({fname:"num_removed_decryptors",ftype:(e||(e=r("ThriftTypes"))).I64,fid:125}),n.writeI64(BigInt(t.num_removed_decryptors)),n.writeFieldEnd()),t.data_channel_encryption_not_ready_in_mandated_calls_error!=null&&(n.writeFieldBegin({fname:"data_channel_encryption_not_ready_in_mandated_calls_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:126}),n.writeI64(BigInt(t.data_channel_encryption_not_ready_in_mandated_calls_error)),n.writeFieldEnd()),t.num_e2ee_message_total_encrypt!=null&&(n.writeFieldBegin({fname:"num_e2ee_message_total_encrypt",ftype:(e||(e=r("ThriftTypes"))).I64,fid:127}),n.writeI64(BigInt(t.num_e2ee_message_total_encrypt)),n.writeFieldEnd()),t.num_e2ee_message_error_encrypt!=null&&(n.writeFieldBegin({fname:"num_e2ee_message_error_encrypt",ftype:(e||(e=r("ThriftTypes"))).I64,fid:128}),n.writeI64(BigInt(t.num_e2ee_message_error_encrypt)),n.writeFieldEnd()),t.num_e2ee_message_total_decrypt!=null&&(n.writeFieldBegin({fname:"num_e2ee_message_total_decrypt",ftype:(e||(e=r("ThriftTypes"))).I64,fid:129}),n.writeI64(BigInt(t.num_e2ee_message_total_decrypt)),n.writeFieldEnd()),t.num_e2ee_message_error_decrypt!=null&&(n.writeFieldBegin({fname:"num_e2ee_message_error_decrypt",ftype:(e||(e=r("ThriftTypes"))).I64,fid:130}),n.writeI64(BigInt(t.num_e2ee_message_error_decrypt)),n.writeFieldEnd()),t.negotiate_off_time!=null&&(n.writeFieldBegin({fname:"negotiate_off_time",ftype:(e||(e=r("ThriftTypes"))).I64,fid:131}),n.writeI64(BigInt(t.negotiate_off_time)),n.writeFieldEnd()),t.negotiated_version!=null&&(n.writeFieldBegin({fname:"negotiated_version",ftype:(e||(e=r("ThriftTypes"))).I64,fid:132}),n.writeI64(BigInt(t.negotiated_version)),n.writeFieldEnd()),t.decryptor_removed_time!=null&&(n.writeFieldBegin({fname:"decryptor_removed_time",ftype:(e||(e=r("ThriftTypes"))).I64,fid:133}),n.writeI64(BigInt(t.decryptor_removed_time)),n.writeFieldEnd()),t.is_e2ee_mandated_group!=null&&(n.writeFieldBegin({fname:"is_e2ee_mandated_group",ftype:(e||(e=r("ThriftTypes"))).I64,fid:134}),n.writeI64(BigInt(t.is_e2ee_mandated_group)),n.writeFieldEnd()),t.events!=null){n.writeFieldBegin({fname:"events",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:135}),n.writeListBegin({etype:e.I64,size:t.events.length});for(var o of t.events)n.writeI64(BigInt(o));n.writeListEnd(),n.writeFieldEnd()}t.num_e2ee_message_received!=null&&(n.writeFieldBegin({fname:"num_e2ee_message_received",ftype:(e||(e=r("ThriftTypes"))).I64,fid:136}),n.writeI64(BigInt(t.num_e2ee_message_received)),n.writeFieldEnd()),t.num_e2ee_message_error_decrypt_non_e2ee_received!=null&&(n.writeFieldBegin({fname:"num_e2ee_message_error_decrypt_non_e2ee_received",ftype:(e||(e=r("ThriftTypes"))).I64,fid:137}),n.writeI64(BigInt(t.num_e2ee_message_error_decrypt_non_e2ee_received)),n.writeFieldEnd()),t.num_e2ee_message_error_decrypt_missing_sender!=null&&(n.writeFieldBegin({fname:"num_e2ee_message_error_decrypt_missing_sender",ftype:(e||(e=r("ThriftTypes"))).I64,fid:138}),n.writeI64(BigInt(t.num_e2ee_message_error_decrypt_missing_sender)),n.writeFieldEnd()),t.num_e2ee_message_error_decrypt_exceeding_retry!=null&&(n.writeFieldBegin({fname:"num_e2ee_message_error_decrypt_exceeding_retry",ftype:(e||(e=r("ThriftTypes"))).I64,fid:139}),n.writeI64(BigInt(t.num_e2ee_message_error_decrypt_exceeding_retry)),n.writeFieldEnd()),t.max_media_channel_key_message_retry_count!=null&&(n.writeFieldBegin({fname:"max_media_channel_key_message_retry_count",ftype:(e||(e=r("ThriftTypes"))).I64,fid:140}),n.writeI64(BigInt(t.max_media_channel_key_message_retry_count)),n.writeFieldEnd()),t.g_e2ee_total_count_of_extra_decryptions!=null&&(n.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_decryptions",ftype:(e||(e=r("ThriftTypes"))).I64,fid:141}),n.writeI64(BigInt(t.g_e2ee_total_count_of_extra_decryptions)),n.writeFieldEnd()),t.g_e2ee_total_count_of_extra_decryptions_failures!=null&&(n.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_decryptions_failures",ftype:(e||(e=r("ThriftTypes"))).I64,fid:142}),n.writeI64(BigInt(t.g_e2ee_total_count_of_extra_decryptions_failures)),n.writeFieldEnd()),t.g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key!=null&&(n.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:143}),n.writeI64(BigInt(t.g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key)),n.writeFieldEnd()),t.g_e2ee_decryption_error_frames_empty_supported_codes!=null&&(n.writeFieldBegin({fname:"g_e2ee_decryption_error_frames_empty_supported_codes",ftype:(e||(e=r("ThriftTypes"))).I64,fid:144}),n.writeI64(BigInt(t.g_e2ee_decryption_error_frames_empty_supported_codes)),n.writeFieldEnd()),t.g_e2ee_encryption_error_frames_empty!=null&&(n.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_empty",ftype:(e||(e=r("ThriftTypes"))).I64,fid:146}),n.writeI64(BigInt(t.g_e2ee_encryption_error_frames_empty)),n.writeFieldEnd()),t.g_e2ee_encryption_error_frames_empty_nalu_blocks!=null&&(n.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_empty_nalu_blocks",ftype:(e||(e=r("ThriftTypes"))).I64,fid:147}),n.writeI64(BigInt(t.g_e2ee_encryption_error_frames_empty_nalu_blocks)),n.writeFieldEnd()),t.g_e2ee_encryption_error_frames_invalid_h264!=null&&(n.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_invalid_h264",ftype:(e||(e=r("ThriftTypes"))).I64,fid:148}),n.writeI64(BigInt(t.g_e2ee_encryption_error_frames_invalid_h264)),n.writeFieldEnd()),t.g_e2ee_encryption_error_frames_invalid_h265!=null&&(n.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_invalid_h265",ftype:(e||(e=r("ThriftTypes"))).I64,fid:149}),n.writeI64(BigInt(t.g_e2ee_encryption_error_frames_invalid_h265)),n.writeFieldEnd()),t.g_e2ee_encryption_error_frames_invalid_h265_nalu_block!=null&&(n.writeFieldBegin({fname:"g_e2ee_encryption_error_frames_invalid_h265_nalu_block",ftype:(e||(e=r("ThriftTypes"))).I64,fid:150}),n.writeI64(BigInt(t.g_e2ee_encryption_error_frames_invalid_h265_nalu_block)),n.writeFieldEnd()),t.g_e2ee_total_count_of_extra_encryptions!=null&&(n.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_encryptions",ftype:(e||(e=r("ThriftTypes"))).I64,fid:151}),n.writeI64(BigInt(t.g_e2ee_total_count_of_extra_encryptions)),n.writeFieldEnd()),t.g_e2ee_total_count_of_extra_encryptions_failures!=null&&(n.writeFieldBegin({fname:"g_e2ee_total_count_of_extra_encryptions_failures",ftype:(e||(e=r("ThriftTypes"))).I64,fid:152}),n.writeI64(BigInt(t.g_e2ee_total_count_of_extra_encryptions_failures)),n.writeFieldEnd()),t.encryption_error_frames_no_active_key!=null&&(n.writeFieldBegin({fname:"encryption_error_frames_no_active_key",ftype:(e||(e=r("ThriftTypes"))).I64,fid:153}),n.writeI64(BigInt(t.encryption_error_frames_no_active_key)),n.writeFieldEnd()),t.key_negotiation_protocol!=null&&(n.writeFieldBegin({fname:"key_negotiation_protocol",ftype:(e||(e=r("ThriftTypes"))).I64,fid:154}),n.writeI64(BigInt(t.key_negotiation_protocol)),n.writeFieldEnd()),t.key_messages_received_via_signaling!=null&&(n.writeFieldBegin({fname:"key_messages_received_via_signaling",ftype:(e||(e=r("ThriftTypes"))).I64,fid:155}),n.writeI64(BigInt(t.key_messages_received_via_signaling)),n.writeFieldEnd()),t.key_messages_received_via_media!=null&&(n.writeFieldBegin({fname:"key_messages_received_via_media",ftype:(e||(e=r("ThriftTypes"))).I64,fid:156}),n.writeI64(BigInt(t.key_messages_received_via_media)),n.writeFieldEnd()),t.key_messages_received_via_signaling_joiner!=null&&(n.writeFieldBegin({fname:"key_messages_received_via_signaling_joiner",ftype:(e||(e=r("ThriftTypes"))).I64,fid:157}),n.writeI64(BigInt(t.key_messages_received_via_signaling_joiner)),n.writeFieldEnd()),t.key_messages_received_via_media_joiner!=null&&(n.writeFieldBegin({fname:"key_messages_received_via_media_joiner",ftype:(e||(e=r("ThriftTypes"))).I64,fid:158}),n.writeI64(BigInt(t.key_messages_received_via_media_joiner)),n.writeFieldEnd()),t.g_e2ee_participant_hash_verification_failed_error!=null&&(n.writeFieldBegin({fname:"g_e2ee_participant_hash_verification_failed_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:159}),n.writeI64(BigInt(t.g_e2ee_participant_hash_verification_failed_error)),n.writeFieldEnd()),t.g_e2ee_invalid_key_distributor_id_error!=null&&(n.writeFieldBegin({fname:"g_e2ee_invalid_key_distributor_id_error",ftype:(e||(e=r("ThriftTypes"))).I64,fid:160}),n.writeI64(BigInt(t.g_e2ee_invalid_key_distributor_id_error)),n.writeFieldEnd()),t.g_e2ee_key_message_validation_failure_count!=null&&(n.writeFieldBegin({fname:"g_e2ee_key_message_validation_failure_count",ftype:(e||(e=r("ThriftTypes"))).I64,fid:161}),n.writeI64(BigInt(t.g_e2ee_key_message_validation_failure_count)),n.writeFieldEnd()),t.g_e2ee_cached_decrypted_key_count!=null&&(n.writeFieldBegin({fname:"g_e2ee_cached_decrypted_key_count",ftype:(e||(e=r("ThriftTypes"))).I64,fid:162}),n.writeI64(BigInt(t.g_e2ee_cached_decrypted_key_count)),n.writeFieldEnd()),t.g_e2ee_reapply_cached_decrypted_key_count!=null&&(n.writeFieldBegin({fname:"g_e2ee_reapply_cached_decrypted_key_count",ftype:(e||(e=r("ThriftTypes"))).I64,fid:163}),n.writeI64(BigInt(t.g_e2ee_reapply_cached_decrypted_key_count)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_data_channel_av1_invalid_obu_offset!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_data_channel_av1_invalid_obu_offset",ftype:(e||(e=r("ThriftTypes"))).I64,fid:164}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_data_channel_av1_invalid_obu_offset)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_av1_invalid_obu_offset!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_av1_invalid_obu_offset",ftype:(e||(e=r("ThriftTypes"))).I64,fid:165}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_av1_invalid_obu_offset)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_data_channel_av1_insufficient_bytes_for_extension!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_data_channel_av1_insufficient_bytes_for_extension",ftype:(e||(e=r("ThriftTypes"))).I64,fid:166}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_data_channel_av1_insufficient_bytes_for_extension)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_av1_insufficient_bytes_for_extension!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_av1_insufficient_bytes_for_extension",ftype:(e||(e=r("ThriftTypes"))).I64,fid:167}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_av1_insufficient_bytes_for_extension)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_data_channel_av1_insufficient_bytes_for_size!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_data_channel_av1_insufficient_bytes_for_size",ftype:(e||(e=r("ThriftTypes"))).I64,fid:168}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_data_channel_av1_insufficient_bytes_for_size)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_av1_insufficient_bytes_for_size!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_av1_insufficient_bytes_for_size",ftype:(e||(e=r("ThriftTypes"))).I64,fid:169}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_av1_insufficient_bytes_for_size)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_data_channel_av1_leb128_parse_failure!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_data_channel_av1_leb128_parse_failure",ftype:(e||(e=r("ThriftTypes"))).I64,fid:170}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_data_channel_av1_leb128_parse_failure)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_av1_leb128_parse_failure!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_av1_leb128_parse_failure",ftype:(e||(e=r("ThriftTypes"))).I64,fid:171}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_av1_leb128_parse_failure)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_data_channel_av1_empty_frame!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_data_channel_av1_empty_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:172}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_data_channel_av1_empty_frame)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_av1_empty_frame!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_av1_empty_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:173}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_av1_empty_frame)),n.writeFieldEnd()),t.g_e2ee_dec_error_frames_data_channel_av1_invalid_frame!=null&&(n.writeFieldBegin({fname:"g_e2ee_dec_error_frames_data_channel_av1_invalid_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:174}),n.writeI64(BigInt(t.g_e2ee_dec_error_frames_data_channel_av1_invalid_frame)),n.writeFieldEnd()),t.g_e2ee_dec_error_frames_av1_invalid_frame!=null&&(n.writeFieldBegin({fname:"g_e2ee_dec_error_frames_av1_invalid_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:175}),n.writeI64(BigInt(t.g_e2ee_dec_error_frames_av1_invalid_frame)),n.writeFieldEnd()),t.g_e2ee_dec_error_frames_data_channel_av1_deescape_data!=null&&(n.writeFieldBegin({fname:"g_e2ee_dec_error_frames_data_channel_av1_deescape_data",ftype:(e||(e=r("ThriftTypes"))).I64,fid:176}),n.writeI64(BigInt(t.g_e2ee_dec_error_frames_data_channel_av1_deescape_data)),n.writeFieldEnd()),t.g_e2ee_dec_error_frames_av1_deescape_data!=null&&(n.writeFieldBegin({fname:"g_e2ee_dec_error_frames_av1_deescape_data",ftype:(e||(e=r("ThriftTypes"))).I64,fid:177}),n.writeI64(BigInt(t.g_e2ee_dec_error_frames_av1_deescape_data)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_data_channel_av1_invalid_frame!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_data_channel_av1_invalid_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:178}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_data_channel_av1_invalid_frame)),n.writeFieldEnd()),t.g_e2ee_enc_error_frames_av1_invalid_frame!=null&&(n.writeFieldBegin({fname:"g_e2ee_enc_error_frames_av1_invalid_frame",ftype:(e||(e=r("ThriftTypes"))).I64,fid:179}),n.writeI64(BigInt(t.g_e2ee_enc_error_frames_av1_invalid_frame)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function p(t,n){if(n.writeStructBegin("E2eeMetrics"),n.writeFieldBegin({fname:"p2p_e2ee",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),t.p2p_e2ee!=null)d(t.p2p_e2ee,n);else{var o=s();d(o,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"group_e2ee",ftype:e.STRUCT,fid:2}),t.group_e2ee!=null)m(t.group_e2ee,n);else{var a=u();m(a,n)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function _(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.engine_type=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.status=t.readI64().toString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I64?n.version=t.readI64().toString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).I64?n.gen_prekey_bundle_time_ms=t.readI64().toString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).I64?n.encrypted_msg_time_ms=t.readI64().toString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).I64?n.decrypted_msg_time_ms=t.readI64().toString():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).I64?n.process_sdp_crypto_time_ms=t.readI64().toString():t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).I64?n.create_crypto_offer_time_ms=t.readI64().toString():t.skip(a);break;case 9:a===(e||(e=r("ThriftTypes"))).I64?n.create_crypto_answer_time_ms=t.readI64().toString():t.skip(a);break;case 10:a===(e||(e=r("ThriftTypes"))).I64?n.get_ik_time_ms=t.readI64().toString():t.skip(a);break;case 11:a===(e||(e=r("ThriftTypes"))).I64?n.peer_id=t.readI64().toString():t.skip(a);break;case 12:a===(e||(e=r("ThriftTypes"))).I64?n.peer_connection_index=t.readI64().toString():t.skip(a);break;case 13:a===(e||(e=r("ThriftTypes"))).I64?n.srtp_crypto_suite=t.readI64().toString():t.skip(a);break;case 14:a===(e||(e=r("ThriftTypes"))).I64?n.engine_error=t.readI64().toString():t.skip(a);break;case 15:a===(e||(e=r("ThriftTypes"))).I64?n.libsignal_error=t.readI64().toString():t.skip(a);break;case 16:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_mode=t.readI64().toString():t.skip(a);break;case 17:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_num_persistent=t.readI64().toString():t.skip(a);break;case 18:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_num_validated=t.readI64().toString():t.skip(a);break;case 19:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_num_saved=t.readI64().toString():t.skip(a);break;case 20:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_num_existing=t.readI64().toString():t.skip(a);break;case 21:a===(e||(e=r("ThriftTypes"))).I64?n.is_e2ee_mandated=t.readI64().toString():t.skip(a);break;case 22:a===(e||(e=r("ThriftTypes"))).I64?n.local_trace_id=t.readI64().toString():t.skip(a);break;case 23:a===(e||(e=r("ThriftTypes"))).I64?n.remote_trace_id=t.readI64().toString():t.skip(a);break;case 24:a===(e||(e=r("ThriftTypes"))).I64?n.local_device_id=t.readI64().toString():t.skip(a);break;case 25:a===(e||(e=r("ThriftTypes"))).I64?n.remote_device_id=t.readI64().toString():t.skip(a);break;case 26:if(a===(e||(e=r("ThriftTypes"))).LIST){n.events=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI64().toString();n.events.push(u)}}else t.skip(a);break;case 27:a===(e||(e=r("ThriftTypes"))).I64?n.gen_dtls_auth_info_status=t.readI64().toString():t.skip(a);break;case 28:a===(e||(e=r("ThriftTypes"))).I64?n.gen_dtls_auth_info_libsignal_status=t.readI64().toString():t.skip(a);break;case 29:a===(e||(e=r("ThriftTypes"))).I64?n.gen_dtls_auth_info_time_ms=t.readI64().toString():t.skip(a);break;case 30:a===(e||(e=r("ThriftTypes"))).I64?n.verify_dtls_auth_info_status=t.readI64().toString():t.skip(a);break;case 31:a===(e||(e=r("ThriftTypes"))).I64?n.verify_dtls_auth_info_libsignal_status=t.readI64().toString():t.skip(a);break;case 32:a===(e||(e=r("ThriftTypes"))).I64?n.verify_dtls_auth_info_time_ms=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function f(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.received_key_message_counter=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.sent_key_message_counter=t.readI64().toString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I64?n.cached_key_message_counter=t.readI64().toString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).I64?n.used_cached_key_counter=t.readI64().toString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).I64?n.unused_smu_counter=t.readI64().toString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).I64?n.missing_key_message_counter=t.readI64().toString():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).I64?n.negotiate_off_status=t.readI64().toString():t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).I64?n.cipher_suite_status=t.readI64().toString():t.skip(a);break;case 9:a===(e||(e=r("ThriftTypes"))).I64?n.decrypt_used_cached_session_counter=t.readI64().toString():t.skip(a);break;case 10:a===(e||(e=r("ThriftTypes"))).I64?n.encrypt_used_cached_session_counter=t.readI64().toString():t.skip(a);break;case 11:a===(e||(e=r("ThriftTypes"))).I64?n.sent_ack_message_counter=t.readI64().toString():t.skip(a);break;case 12:a===(e||(e=r("ThriftTypes"))).I64?n.reuse_ackd_uid_counter=t.readI64().toString():t.skip(a);break;case 13:a===(e||(e=r("ThriftTypes"))).I64?n.total_uids_created_counter=t.readI64().toString():t.skip(a);break;case 14:a===(e||(e=r("ThriftTypes"))).I64?n.generate_chain_key_failed_error=t.readI64().toString():t.skip(a);break;case 15:a===(e||(e=r("ThriftTypes"))).I64?n.set_chain_key_failed_error=t.readI64().toString():t.skip(a);break;case 16:a===(e||(e=r("ThriftTypes"))).I64?n.key_provider_not_found_error=t.readI64().toString():t.skip(a);break;case 17:a===(e||(e=r("ThriftTypes"))).I64?n.key_message_parse_failed_error=t.readI64().toString():t.skip(a);break;case 18:a===(e||(e=r("ThriftTypes"))).I64?n.empty_pkb_result_error=t.readI64().toString():t.skip(a);break;case 19:a===(e||(e=r("ThriftTypes"))).I64?n.empty_encrypt_result_error=t.readI64().toString():t.skip(a);break;case 20:a===(e||(e=r("ThriftTypes"))).I64?n.empty_decrypt_result_error=t.readI64().toString():t.skip(a);break;case 21:a===(e||(e=r("ThriftTypes"))).I64?n.empty_version_error=t.readI64().toString():t.skip(a);break;case 22:a===(e||(e=r("ThriftTypes"))).I64?n.unsupported_version_error=t.readI64().toString():t.skip(a);break;case 23:a===(e||(e=r("ThriftTypes"))).I64?n.midcall_version_change_error=t.readI64().toString():t.skip(a);break;case 24:a===(e||(e=r("ThriftTypes"))).I64?n.inconsistent_remote_maps_error=t.readI64().toString():t.skip(a);break;case 25:a===(e||(e=r("ThriftTypes"))).I64?n.key_message_pkb_mismatch_error=t.readI64().toString():t.skip(a);break;case 26:a===(e||(e=r("ThriftTypes"))).I64?n.no_key_or_ack_in_e2ee_message_error=t.readI64().toString():t.skip(a);break;case 27:a===(e||(e=r("ThriftTypes"))).I64?n.receiver_key_provider_not_found_error=t.readI64().toString():t.skip(a);break;case 28:a===(e||(e=r("ThriftTypes"))).I64?n.pkb_parse_failed_error=t.readI64().toString():t.skip(a);break;case 29:a===(e||(e=r("ThriftTypes"))).I64?n.message_deserialized_failed_error=t.readI64().toString():t.skip(a);break;case 30:a===(e||(e=r("ThriftTypes"))).I64?n.decrypt_no_identity_key_and_cached_session_not_used_error=t.readI64().toString():t.skip(a);break;case 31:a===(e||(e=r("ThriftTypes"))).I64?n.encrypt_no_identity_key_and_cached_session_not_used_error=t.readI64().toString():t.skip(a);break;case 32:a===(e||(e=r("ThriftTypes"))).I64?n.decrypt_ack_wrong_message_error=t.readI64().toString():t.skip(a);break;case 33:a===(e||(e=r("ThriftTypes"))).I64?n.invalid_uid_received_error=t.readI64().toString():t.skip(a);break;case 34:a===(e||(e=r("ThriftTypes"))).I64?n.ack_for_absent_user=t.readI64().toString():t.skip(a);break;case 35:a===(e||(e=r("ThriftTypes"))).I64?n.uid_not_awaiting_ack_error=t.readI64().toString():t.skip(a);break;case 36:a===(e||(e=r("ThriftTypes"))).I64?n.decrypt_ack_error=t.readI64().toString():t.skip(a);break;case 37:a===(e||(e=r("ThriftTypes"))).I64?n.empty_decrypt_result_ack_error=t.readI64().toString():t.skip(a);break;case 38:a===(e||(e=r("ThriftTypes"))).I64?n.decrypt_ack_cached_session_not_used_error=t.readI64().toString():t.skip(a);break;case 39:a===(e||(e=r("ThriftTypes"))).I64?n.encrypt_ack_error=t.readI64().toString():t.skip(a);break;case 40:a===(e||(e=r("ThriftTypes"))).I64?n.empty_encrypt_result_ack_error=t.readI64().toString():t.skip(a);break;case 41:a===(e||(e=r("ThriftTypes"))).I64?n.invalid_message_type_error=t.readI64().toString():t.skip(a);break;case 42:a===(e||(e=r("ThriftTypes"))).I64?n.server_state_deserialized_failed_error=t.readI64().toString():t.skip(a);break;case 43:a===(e||(e=r("ThriftTypes"))).I64?n.crypto_engine_failure_error=t.readI64().toString():t.skip(a);break;case 44:a===(e||(e=r("ThriftTypes"))).I64?n.empty_e2ee_client_state_error=t.readI64().toString():t.skip(a);break;case 45:a===(e||(e=r("ThriftTypes"))).I64?n.group_e2ee_negotiated=t.readI64().toString():t.skip(a);break;case 46:a===(e||(e=r("ThriftTypes"))).I64?n.negotiation_mode_kn=t.readI64().toString():t.skip(a);break;case 47:a===(e||(e=r("ThriftTypes"))).I64?n.group_e2ee_setup_status=t.readI64().toString():t.skip(a);break;case 48:a===(e||(e=r("ThriftTypes"))).I64?n.enable_group_e2ee=t.readI64().toString():t.skip(a);break;case 49:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_mode_group=t.readI64().toString():t.skip(a);break;case 50:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_num_persistent_group=t.readI64().toString():t.skip(a);break;case 51:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_num_validated_group=t.readI64().toString():t.skip(a);break;case 52:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_num_saved_group=t.readI64().toString():t.skip(a);break;case 53:a===(e||(e=r("ThriftTypes"))).I64?n.identity_key_num_existing_group=t.readI64().toString():t.skip(a);break;case 54:a===(e||(e=r("ThriftTypes"))).I64?n.max_key_message_latency_ms=t.readI64().toString():t.skip(a);break;case 55:a===(e||(e=r("ThriftTypes"))).I64?n.max_key_message_latency_ms_joiner=t.readI64().toString():t.skip(a);break;case 56:a===(e||(e=r("ThriftTypes"))).I64?n.max_smu_to_key_message_latency_ms=t.readI64().toString():t.skip(a);break;case 57:a===(e||(e=r("ThriftTypes"))).I64?n.process_smu_time_ms=t.readI64().toString():t.skip(a);break;case 58:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_total_frames=t.readI64().toString():t.skip(a);break;case 59:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_total_error_frames=t.readI64().toString():t.skip(a);break;case 60:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_alloc=t.readI64().toString():t.skip(a);break;case 61:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_invalid_params=t.readI64().toString():t.skip(a);break;case 62:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_cipher=t.readI64().toString():t.skip(a);break;case 63:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_parse=t.readI64().toString():t.skip(a);break;case 64:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_invalid_key=t.readI64().toString():t.skip(a);break;case 65:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_missing_key=t.readI64().toString():t.skip(a);break;case 66:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_out_of_ratchet_space=t.readI64().toString():t.skip(a);break;case 67:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_cipher_auth=t.readI64().toString():t.skip(a);break;case 68:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_frame_too_old=t.readI64().toString():t.skip(a);break;case 69:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_seen_frame=t.readI64().toString():t.skip(a);break;case 70:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_invalid_frame=t.readI64().toString():t.skip(a);break;case 71:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_setting_invalid_key=t.readI64().toString():t.skip(a);break;case 72:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_setting_existing_key=t.readI64().toString():t.skip(a);break;case 73:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_escape_data=t.readI64().toString():t.skip(a);break;case 74:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_deescape_data=t.readI64().toString():t.skip(a);break;case 75:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_parse_frame_or_key=t.readI64().toString():t.skip(a);break;case 76:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_unknown=t.readI64().toString():t.skip(a);break;case 77:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_unencrypted_frames=t.readI64().toString():t.skip(a);break;case 78:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_total_frames=t.readI64().toString():t.skip(a);break;case 79:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames=t.readI64().toString():t.skip(a);break;case 80:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_escape_bytes=t.readI64().toString():t.skip(a);break;case 81:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_total_error_frames=t.readI64().toString():t.skip(a);break;case 82:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_alloc=t.readI64().toString():t.skip(a);break;case 83:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_invalid_params=t.readI64().toString():t.skip(a);break;case 84:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_cipher=t.readI64().toString():t.skip(a);break;case 85:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_parse=t.readI64().toString():t.skip(a);break;case 86:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_invalid_key=t.readI64().toString():t.skip(a);break;case 87:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_cipher_auth=t.readI64().toString():t.skip(a);break;case 88:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_escape_data=t.readI64().toString():t.skip(a);break;case 89:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_unsupported_codec=t.readI64().toString():t.skip(a);break;case 90:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_unknown=t.readI64().toString():t.skip(a);break;case 91:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_total_frames_data_channel=t.readI64().toString():t.skip(a);break;case 92:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_total_error_frames_data_channel=t.readI64().toString():t.skip(a);break;case 93:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_alloc=t.readI64().toString():t.skip(a);break;case 94:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_invalid_params=t.readI64().toString():t.skip(a);break;case 95:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_cipher=t.readI64().toString():t.skip(a);break;case 96:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_parse=t.readI64().toString():t.skip(a);break;case 97:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_invalid_key=t.readI64().toString():t.skip(a);break;case 98:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_missing_key=t.readI64().toString():t.skip(a);break;case 99:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_out_of_ratchet_space=t.readI64().toString():t.skip(a);break;case 100:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_cipher_auth=t.readI64().toString():t.skip(a);break;case 101:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_frame_too_old=t.readI64().toString():t.skip(a);break;case 102:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_seen_frame=t.readI64().toString():t.skip(a);break;case 103:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_invalid_frame=t.readI64().toString():t.skip(a);break;case 104:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_setting_invalid_key=t.readI64().toString():t.skip(a);break;case 105:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_setting_existing_key=t.readI64().toString():t.skip(a);break;case 106:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_escape_data=t.readI64().toString():t.skip(a);break;case 107:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_deescape_data=t.readI64().toString():t.skip(a);break;case 108:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_parse_frame_or_key=t.readI64().toString():t.skip(a);break;case 109:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_error_frames_data_channel_unknown=t.readI64().toString():t.skip(a);break;case 110:a===(e||(e=r("ThriftTypes"))).I64?n.decryption_unencrypted_frames_data_channel=t.readI64().toString():t.skip(a);break;case 111:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_total_frames_data_channel=t.readI64().toString():t.skip(a);break;case 112:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel=t.readI64().toString():t.skip(a);break;case 113:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_total_error_frames_data_channel=t.readI64().toString():t.skip(a);break;case 114:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel_alloc=t.readI64().toString():t.skip(a);break;case 115:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel_invalid_params=t.readI64().toString():t.skip(a);break;case 116:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel_cipher=t.readI64().toString():t.skip(a);break;case 117:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel_parse=t.readI64().toString():t.skip(a);break;case 118:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel_invalid_key=t.readI64().toString():t.skip(a);break;case 119:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel_cipher_auth=t.readI64().toString():t.skip(a);break;case 120:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel_escape_data=t.readI64().toString():t.skip(a);break;case 121:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel_unsupported_codec=t.readI64().toString():t.skip(a);break;case 122:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_data_channel_unknown=t.readI64().toString():t.skip(a);break;case 123:a===(e||(e=r("ThriftTypes"))).I64?n.num_removed_data_decryptors=t.readI64().toString():t.skip(a);break;case 124:a===(e||(e=r("ThriftTypes"))).I64?n.num_frame_decryptor_with_unencrypted_data=t.readI64().toString():t.skip(a);break;case 125:a===(e||(e=r("ThriftTypes"))).I64?n.num_removed_decryptors=t.readI64().toString():t.skip(a);break;case 126:a===(e||(e=r("ThriftTypes"))).I64?n.data_channel_encryption_not_ready_in_mandated_calls_error=t.readI64().toString():t.skip(a);break;case 127:a===(e||(e=r("ThriftTypes"))).I64?n.num_e2ee_message_total_encrypt=t.readI64().toString():t.skip(a);break;case 128:a===(e||(e=r("ThriftTypes"))).I64?n.num_e2ee_message_error_encrypt=t.readI64().toString():t.skip(a);break;case 129:a===(e||(e=r("ThriftTypes"))).I64?n.num_e2ee_message_total_decrypt=t.readI64().toString():t.skip(a);break;case 130:a===(e||(e=r("ThriftTypes"))).I64?n.num_e2ee_message_error_decrypt=t.readI64().toString():t.skip(a);break;case 131:a===(e||(e=r("ThriftTypes"))).I64?n.negotiate_off_time=t.readI64().toString():t.skip(a);break;case 132:a===(e||(e=r("ThriftTypes"))).I64?n.negotiated_version=t.readI64().toString():t.skip(a);break;case 133:a===(e||(e=r("ThriftTypes"))).I64?n.decryptor_removed_time=t.readI64().toString():t.skip(a);break;case 134:a===(e||(e=r("ThriftTypes"))).I64?n.is_e2ee_mandated_group=t.readI64().toString():t.skip(a);break;case 135:if(a===(e||(e=r("ThriftTypes"))).LIST){n.events=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI64().toString();n.events.push(u)}}else t.skip(a);break;case 136:a===(e||(e=r("ThriftTypes"))).I64?n.num_e2ee_message_received=t.readI64().toString():t.skip(a);break;case 137:a===(e||(e=r("ThriftTypes"))).I64?n.num_e2ee_message_error_decrypt_non_e2ee_received=t.readI64().toString():t.skip(a);break;case 138:a===(e||(e=r("ThriftTypes"))).I64?n.num_e2ee_message_error_decrypt_missing_sender=t.readI64().toString():t.skip(a);break;case 139:a===(e||(e=r("ThriftTypes"))).I64?n.num_e2ee_message_error_decrypt_exceeding_retry=t.readI64().toString():t.skip(a);break;case 140:a===(e||(e=r("ThriftTypes"))).I64?n.max_media_channel_key_message_retry_count=t.readI64().toString():t.skip(a);break;case 141:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_total_count_of_extra_decryptions=t.readI64().toString():t.skip(a);break;case 142:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_total_count_of_extra_decryptions_failures=t.readI64().toString():t.skip(a);break;case 143:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_total_count_of_extra_decryptions_failures_due_to_missing_key=t.readI64().toString():t.skip(a);break;case 144:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_decryption_error_frames_empty_supported_codes=t.readI64().toString():t.skip(a);break;case 146:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_encryption_error_frames_empty=t.readI64().toString():t.skip(a);break;case 147:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_encryption_error_frames_empty_nalu_blocks=t.readI64().toString():t.skip(a);break;case 148:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_encryption_error_frames_invalid_h264=t.readI64().toString():t.skip(a);break;case 149:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_encryption_error_frames_invalid_h265=t.readI64().toString():t.skip(a);break;case 150:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_encryption_error_frames_invalid_h265_nalu_block=t.readI64().toString():t.skip(a);break;case 151:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_total_count_of_extra_encryptions=t.readI64().toString():t.skip(a);break;case 152:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_total_count_of_extra_encryptions_failures=t.readI64().toString():t.skip(a);break;case 153:a===(e||(e=r("ThriftTypes"))).I64?n.encryption_error_frames_no_active_key=t.readI64().toString():t.skip(a);break;case 154:a===(e||(e=r("ThriftTypes"))).I64?n.key_negotiation_protocol=t.readI64().toString():t.skip(a);break;case 155:a===(e||(e=r("ThriftTypes"))).I64?n.key_messages_received_via_signaling=t.readI64().toString():t.skip(a);break;case 156:a===(e||(e=r("ThriftTypes"))).I64?n.key_messages_received_via_media=t.readI64().toString():t.skip(a);break;case 157:a===(e||(e=r("ThriftTypes"))).I64?n.key_messages_received_via_signaling_joiner=t.readI64().toString():t.skip(a);break;case 158:a===(e||(e=r("ThriftTypes"))).I64?n.key_messages_received_via_media_joiner=t.readI64().toString():t.skip(a);break;case 159:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_participant_hash_verification_failed_error=t.readI64().toString():t.skip(a);break;case 160:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_invalid_key_distributor_id_error=t.readI64().toString():t.skip(a);break;case 161:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_key_message_validation_failure_count=t.readI64().toString():t.skip(a);break;case 162:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_cached_decrypted_key_count=t.readI64().toString():t.skip(a);break;case 163:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_reapply_cached_decrypted_key_count=t.readI64().toString():t.skip(a);break;case 164:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_data_channel_av1_invalid_obu_offset=t.readI64().toString():t.skip(a);break;case 165:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_av1_invalid_obu_offset=t.readI64().toString():t.skip(a);break;case 166:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_data_channel_av1_insufficient_bytes_for_extension=t.readI64().toString():t.skip(a);break;case 167:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_av1_insufficient_bytes_for_extension=t.readI64().toString():t.skip(a);break;case 168:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_data_channel_av1_insufficient_bytes_for_size=t.readI64().toString():t.skip(a);break;case 169:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_av1_insufficient_bytes_for_size=t.readI64().toString():t.skip(a);break;case 170:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_data_channel_av1_leb128_parse_failure=t.readI64().toString():t.skip(a);break;case 171:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_av1_leb128_parse_failure=t.readI64().toString():t.skip(a);break;case 172:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_data_channel_av1_empty_frame=t.readI64().toString():t.skip(a);break;case 173:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_av1_empty_frame=t.readI64().toString():t.skip(a);break;case 174:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_dec_error_frames_data_channel_av1_invalid_frame=t.readI64().toString():t.skip(a);break;case 175:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_dec_error_frames_av1_invalid_frame=t.readI64().toString():t.skip(a);break;case 176:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_dec_error_frames_data_channel_av1_deescape_data=t.readI64().toString():t.skip(a);break;case 177:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_dec_error_frames_av1_deescape_data=t.readI64().toString():t.skip(a);break;case 178:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_data_channel_av1_invalid_frame=t.readI64().toString():t.skip(a);break;case 179:a===(e||(e=r("ThriftTypes"))).I64?n.g_e2ee_enc_error_frames_av1_invalid_frame=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function g(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.p2p_e2ee=_(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.group_e2ee=f(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.p2p_e2ee===void 0&&(n.p2p_e2ee=s()),n.group_e2ee===void 0&&(n.group_e2ee=u()),n}l.P2pE2eeMetrics$DefaultConstructor=s,l.GroupE2eeMetrics$DefaultConstructor=u,l.E2eeMetrics$DefaultConstructor=c,l.serializeP2pE2eeMetrics=d,l.serializeGroupE2eeMetrics=m,l.serializeE2eeMetrics=p,l.deserializeP2pE2eeMetrics=_,l.deserializeGroupE2eeMetrics=f,l.deserializeE2eeMetrics=g}),98);
__d("E2eeStateTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({NONE:0,NEGOTIATED:1,STATIC:2}),s=e({NONE:0,MEDIA_CHANNEL_KEY_PROTOCOL:1}),u=e({SENDER_KEY:0,SESSION_KEY:1}),c=e({NOT_SET:0,CONTROL:1,TEST:2}),d=e({NOT_SET:0,CONTROL:1,TEST:2}),m=e({ENABLED:0,DISABLED:1,FALLBACK:2});a.exports={E2eeKeyNegotiationProtocolEnum:u,E2eeStateCapabilitiesEnum:s,E2eeStateP2PSFrameExpStatus:d,InfraMandatedExpStatus:c,KeyNegotiationModeEnum:l,SignalingKeyMessageProtocolEnum:m}}),null);
__d("E2eeStateSerializers",["E2eeStateTypes","ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{min:0,max:0}}function u(){return{supportedVersions:[]}}function c(){return{employedVersion:0}}function d(){return{mode:0}}function m(){return{preKeyBundle:Uint8Array.of(),identityKeyInfo:d(),deviceId:0}}function p(){return{epochId:"0",isKeyDistributor:!1,epochInfo:_(),keyDistributorId:""}}function _(){return{currentEpochId:"0",lastLeaveEpochId:"0",lastJoinEpochId:"0"}}function f(){return{supportedVersions:[]}}function g(){return{keyNegotiationMode:0,allowOptionalGfd:!1}}function h(){return{keyNegotiationMode:0,removeFrameDecryptorDelayMs:0,keepFrameDecryptors:!1,senderKeyUpdateDelayMs:0,keyTtlMs:0,ratchetSpace:0,keyOverMediaDataChannelNumSends:0,keyOverMediaDataChannelRetryDelayMs:0,enableH264V2:!1,requiredCapabilities:[],disableE2eeAckThroughSignalingChannel:!1,signalingKeyMessageProtocol:o("E2eeStateTypes").SignalingKeyMessageProtocolEnum.cast(0)}}function y(){return{sessionKeyProtocolInfo:p(),populateParticipantHash:!1,enableParticipantVerification:!1}}function C(){return{preKeyBundle:Uint8Array.of(),cipherSuites:[],protocolVersion:f(),config:g(),identityKeyInfo:d(),deviceId:0,e2eeClientStateCapabilities:{},supportedE2eeKeyNegotiationProtocols:[]}}function b(){return{cipherSuites:[],protocolVersion:f(),config:h(),endpointInfos:{},e2eeServerStateCapabilities:{},negotiatedE2eeKeyNegotiationProtocol:o("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(0),serverInfraMandatedExpStatus:o("E2eeStateTypes").InfraMandatedExpStatus.cast(0),serverP2PSFrameExpStatus:o("E2eeStateTypes").E2eeStateP2PSFrameExpStatus.cast(0)}}function v(t,n){if(n.writeStructBegin("VersionRange"),n.writeFieldBegin({fname:"min",ftype:(e||(e=r("ThriftTypes"))).I16,fid:1}),t.min!=null)n.writeI16(t.min);else{var o=0;n.writeI16(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"max",ftype:e.I16,fid:2}),t.max!=null)n.writeI16(t.max);else{var a=0;n.writeI16(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function S(t,n){if(n.writeStructBegin("E2eeClientStateCapability"),n.writeFieldBegin({fname:"supportedVersions",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),t.supportedVersions!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.supportedVersions.length});for(var o of t.supportedVersions)v(o,n);n.writeListEnd()}else{var a=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:a.length});for(var i of a)v(i,n);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function R(t,n){if(n.writeStructBegin("E2eeServerStateCapability"),n.writeFieldBegin({fname:"employedVersion",ftype:(e||(e=r("ThriftTypes"))).I16,fid:1}),t.employedVersion!=null)n.writeI16(t.employedVersion);else{var o=0;n.writeI16(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function L(t,n){if(n.writeStructBegin("IdentityKeyInfo"),n.writeFieldBegin({fname:"mode",ftype:(e||(e=r("ThriftTypes"))).I16,fid:1}),t.mode!=null)n.writeI16(t.mode);else{var o=0;n.writeI16(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function E(t,n){if(n.writeStructBegin("E2eeEndpointInfo"),n.writeFieldBegin({fname:"preKeyBundle",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.preKeyBundle!=null)n.writeBinary(t.preKeyBundle);else{var o=Uint8Array.of();n.writeBinary(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"identityKeyInfo",ftype:e.STRUCT,fid:2}),t.identityKeyInfo!=null)L(t.identityKeyInfo,n);else{var a=d();L(a,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"deviceId",ftype:e.I32,fid:3}),t.deviceId!=null)n.writeI32(t.deviceId);else{var i=0;n.writeI32(i)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function k(t,n){if(n.writeStructBegin("SessionKeyProtocolInfo"),n.writeFieldBegin({fname:"epochId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.epochId!=null)n.writeI64(BigInt(t.epochId));else{var o="0";n.writeI64(BigInt(o))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"isKeyDistributor",ftype:e.BOOL,fid:2}),t.isKeyDistributor!=null)n.writeBool(t.isKeyDistributor);else{var a=!1;n.writeBool(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"epochInfo",ftype:e.STRUCT,fid:3}),t.epochInfo!=null)I(t.epochInfo,n);else{var i=_();I(i,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"keyDistributorId",ftype:e.STRING,fid:4}),t.keyDistributorId!=null)n.writeString(t.keyDistributorId);else{var l="";n.writeString(l)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function I(t,n){if(n.writeStructBegin("EpochInfo"),n.writeFieldBegin({fname:"currentEpochId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.currentEpochId!=null)n.writeI64(BigInt(t.currentEpochId));else{var o="0";n.writeI64(BigInt(o))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"lastLeaveEpochId",ftype:e.I64,fid:2}),t.lastLeaveEpochId!=null)n.writeI64(BigInt(t.lastLeaveEpochId));else{var a="0";n.writeI64(BigInt(a))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"lastJoinEpochId",ftype:e.I64,fid:3}),t.lastJoinEpochId!=null)n.writeI64(BigInt(t.lastJoinEpochId));else{var i="0";n.writeI64(BigInt(i))}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function T(t,n){if(n.writeStructBegin("E2eeProtocolVersion"),n.writeFieldBegin({fname:"supportedVersions",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),t.supportedVersions!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.supportedVersions.length});for(var o of t.supportedVersions)v(o,n);n.writeListEnd()}else{var a=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:a.length});for(var i of a)v(i,n);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function D(t,n){if(n.writeStructBegin("E2eeClientStateConfig"),n.writeFieldBegin({fname:"keyNegotiationMode",ftype:(e||(e=r("ThriftTypes"))).I16,fid:1}),t.keyNegotiationMode!=null)n.writeI16(t.keyNegotiationMode);else{var o=0;n.writeI16(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"allowOptionalGfd",ftype:e.BOOL,fid:3}),t.allowOptionalGfd!=null)n.writeBool(t.allowOptionalGfd);else{var a=!1;n.writeBool(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function x(t,n){if(n.writeStructBegin("E2eeServerStateConfig"),n.writeFieldBegin({fname:"keyNegotiationMode",ftype:(e||(e=r("ThriftTypes"))).I16,fid:1}),t.keyNegotiationMode!=null)n.writeI16(t.keyNegotiationMode);else{var a=0;n.writeI16(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"removeFrameDecryptorDelayMs",ftype:e.I32,fid:4}),t.removeFrameDecryptorDelayMs!=null)n.writeI32(t.removeFrameDecryptorDelayMs);else{var i=0;n.writeI32(i)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"keepFrameDecryptors",ftype:e.BOOL,fid:5}),t.keepFrameDecryptors!=null)n.writeBool(t.keepFrameDecryptors);else{var l=!1;n.writeBool(l)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"senderKeyUpdateDelayMs",ftype:e.I32,fid:6}),t.senderKeyUpdateDelayMs!=null)n.writeI32(t.senderKeyUpdateDelayMs);else{var s=0;n.writeI32(s)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"keyTtlMs",ftype:e.I32,fid:7}),t.keyTtlMs!=null)n.writeI32(t.keyTtlMs);else{var u=0;n.writeI32(u)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"ratchetSpace",ftype:e.I16,fid:8}),t.ratchetSpace!=null)n.writeI16(t.ratchetSpace);else{var c=0;n.writeI16(c)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"keyOverMediaDataChannelNumSends",ftype:e.I32,fid:9}),t.keyOverMediaDataChannelNumSends!=null)n.writeI32(t.keyOverMediaDataChannelNumSends);else{var d=0;n.writeI32(d)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"keyOverMediaDataChannelRetryDelayMs",ftype:e.I32,fid:10}),t.keyOverMediaDataChannelRetryDelayMs!=null)n.writeI32(t.keyOverMediaDataChannelRetryDelayMs);else{var m=0;n.writeI32(m)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"enableH264V2",ftype:e.BOOL,fid:11}),t.enableH264V2!=null)n.writeBool(t.enableH264V2);else{var p=!1;n.writeBool(p)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"requiredCapabilities",ftype:e.LIST,fid:12}),t.requiredCapabilities!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:t.requiredCapabilities.length});for(var _ of t.requiredCapabilities)n.writeI32(_!=null?_:0);n.writeListEnd()}else{var f=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:f.length});for(var g of f)n.writeI32(g!=null?g:0);n.writeListEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"disableE2eeAckThroughSignalingChannel",ftype:e.BOOL,fid:13}),t.disableE2eeAckThroughSignalingChannel!=null)n.writeBool(t.disableE2eeAckThroughSignalingChannel);else{var h=!1;n.writeBool(h)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"signalingKeyMessageProtocol",ftype:e.I32,fid:14}),t.signalingKeyMessageProtocol!=null){var y;n.writeI32((y=t.signalingKeyMessageProtocol)!=null?y:0)}else{var C=o("E2eeStateTypes").SignalingKeyMessageProtocolEnum.cast(0);n.writeI32(C!=null?C:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function $(t,n){if(n.writeStructBegin("KeyNegotiationProtocolConfig"),n.writeFieldBegin({fname:"sessionKeyProtocolInfo",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),t.sessionKeyProtocolInfo!=null)k(t.sessionKeyProtocolInfo,n);else{var o=p();k(o,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"populateParticipantHash",ftype:e.BOOL,fid:2}),t.populateParticipantHash!=null)n.writeBool(t.populateParticipantHash);else{var a=!1;n.writeBool(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"enableParticipantVerification",ftype:e.BOOL,fid:3}),t.enableParticipantVerification!=null)n.writeBool(t.enableParticipantVerification);else{var i=!1;n.writeBool(i)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function P(t,n){if(n.writeStructBegin("E2eeClientState"),n.writeFieldBegin({fname:"preKeyBundle",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.preKeyBundle!=null)n.writeBinary(t.preKeyBundle);else{var o=Uint8Array.of();n.writeBinary(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"cipherSuites",ftype:e.LIST,fid:2}),t.cipherSuites!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I16,size:t.cipherSuites.length});for(var a of t.cipherSuites)n.writeI16(a);n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I16,size:i.length});for(var l of i)n.writeI16(l);n.writeListEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"protocolVersion",ftype:e.STRUCT,fid:3}),t.protocolVersion!=null)T(t.protocolVersion,n);else{var s=f();T(s,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"config",ftype:e.STRUCT,fid:4}),t.config!=null)D(t.config,n);else{var u=g();D(u,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"identityKeyInfo",ftype:e.STRUCT,fid:5}),t.identityKeyInfo!=null)L(t.identityKeyInfo,n);else{var c=d();L(c,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"deviceId",ftype:e.I32,fid:6}),t.deviceId!=null)n.writeI32(t.deviceId);else{var m=0;n.writeI32(m)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"e2eeClientStateCapabilities",ftype:e.MAP,fid:7}),t.e2eeClientStateCapabilities!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(t.e2eeClientStateCapabilities).length});for(var p of Object.entries(t.e2eeClientStateCapabilities)){var _,h=p[0],y=p[1];n.writeI32((_=Number(h))!=null?_:0),S(y,n)}n.writeMapEnd()}else{var C={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(C).length});for(var b of Object.entries(C)){var v,R=b[0],E=b[1];n.writeI32((v=Number(R))!=null?v:0),S(E,n)}n.writeMapEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"supportedE2eeKeyNegotiationProtocols",ftype:e.LIST,fid:8}),t.supportedE2eeKeyNegotiationProtocols!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:t.supportedE2eeKeyNegotiationProtocols.length});for(var k of t.supportedE2eeKeyNegotiationProtocols)n.writeI32(k!=null?k:0);n.writeListEnd()}else{var I=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I32,size:I.length});for(var x of I)n.writeI32(x!=null?x:0);n.writeListEnd()}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function N(t,n){if(n.writeStructBegin("E2eeServerState"),n.writeFieldBegin({fname:"cipherSuites",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),t.cipherSuites!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I16,size:t.cipherSuites.length});for(var a of t.cipherSuites)n.writeI16(a);n.writeListEnd()}else{var i=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).I16,size:i.length});for(var l of i)n.writeI16(l);n.writeListEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"protocolVersion",ftype:e.STRUCT,fid:3}),t.protocolVersion!=null)T(t.protocolVersion,n);else{var s=f();T(s,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"config",ftype:e.STRUCT,fid:4}),t.config!=null)x(t.config,n);else{var u=h();x(u,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"endpointInfos",ftype:e.MAP,fid:5}),t.endpointInfos!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(t.endpointInfos).length});for(var c of Object.entries(t.endpointInfos)){var d=c[0],m=c[1];n.writeString(d),E(m,n)}n.writeMapEnd()}else{var p={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).STRING,vtype:e.STRUCT,size:Object.keys(p).length});for(var _ of Object.entries(p)){var g=_[0],y=_[1];n.writeString(g),E(y,n)}n.writeMapEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"e2eeServerStateCapabilities",ftype:e.MAP,fid:6}),t.e2eeServerStateCapabilities!=null){n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(t.e2eeServerStateCapabilities).length});for(var C of Object.entries(t.e2eeServerStateCapabilities)){var b,v=C[0],S=C[1];n.writeI32((b=Number(v))!=null?b:0),R(S,n)}n.writeMapEnd()}else{var L={};n.writeMapBegin({ktype:(e||(e=r("ThriftTypes"))).I32,vtype:e.STRUCT,size:Object.keys(L).length});for(var k of Object.entries(L)){var I,D=k[0],P=k[1];n.writeI32((I=Number(D))!=null?I:0),R(P,n)}n.writeMapEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"negotiatedE2eeKeyNegotiationProtocol",ftype:e.I32,fid:7}),t.negotiatedE2eeKeyNegotiationProtocol!=null){var N;n.writeI32((N=t.negotiatedE2eeKeyNegotiationProtocol)!=null?N:0)}else{var M=o("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(0);n.writeI32(M!=null?M:0)}if(n.writeFieldEnd(),t.keyNegotiationProtocolConfig!=null&&(n.writeFieldBegin({fname:"keyNegotiationProtocolConfig",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:8}),$(t.keyNegotiationProtocolConfig,n),n.writeFieldEnd()),n.writeFieldBegin({fname:"serverInfraMandatedExpStatus",ftype:e.I32,fid:9}),t.serverInfraMandatedExpStatus!=null){var w;n.writeI32((w=t.serverInfraMandatedExpStatus)!=null?w:0)}else{var A=o("E2eeStateTypes").InfraMandatedExpStatus.cast(0);n.writeI32(A!=null?A:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"serverP2PSFrameExpStatus",ftype:e.I32,fid:10}),t.serverP2PSFrameExpStatus!=null){var F;n.writeI32((F=t.serverP2PSFrameExpStatus)!=null?F:0)}else{var O=o("E2eeStateTypes").E2eeStateP2PSFrameExpStatus.cast(0);n.writeI32(O!=null?O:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function M(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I16?n.min=t.readI16():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I16?n.max=t.readI16():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.min===void 0&&(n.min=0),n.max===void 0&&(n.max=0),n}function w(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.supportedVersions=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=M(t);n.supportedVersions.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.supportedVersions===void 0&&(n.supportedVersions=[]),n}function A(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I16?n.employedVersion=t.readI16():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.employedVersion===void 0&&(n.employedVersion=0),n}function F(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I16?n.mode=t.readI16():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.mode===void 0&&(n.mode=0),n}function O(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.preKeyBundle=t.readBinary():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.identityKeyInfo=F(t):t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I32?n.deviceId=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.preKeyBundle===void 0&&(n.preKeyBundle=Uint8Array.of()),n.identityKeyInfo===void 0&&(n.identityKeyInfo=d()),n.deviceId===void 0&&(n.deviceId=0),n}function B(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.epochId=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).BOOL?n.isKeyDistributor=t.readBool():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRUCT?n.epochInfo=W(t):t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.keyDistributorId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.epochId===void 0&&(n.epochId="0"),n.isKeyDistributor===void 0&&(n.isKeyDistributor=!1),n.epochInfo===void 0&&(n.epochInfo=_()),n.keyDistributorId===void 0&&(n.keyDistributorId=""),n}function W(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.currentEpochId=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.lastLeaveEpochId=t.readI64().toString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I64?n.lastJoinEpochId=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.currentEpochId===void 0&&(n.currentEpochId="0"),n.lastLeaveEpochId===void 0&&(n.lastLeaveEpochId="0"),n.lastJoinEpochId===void 0&&(n.lastJoinEpochId="0"),n}function q(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.supportedVersions=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=M(t);n.supportedVersions.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.supportedVersions===void 0&&(n.supportedVersions=[]),n}function U(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I16?n.keyNegotiationMode=t.readI16():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.allowOptionalGfd=t.readBool():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.keyNegotiationMode===void 0&&(n.keyNegotiationMode=0),n.allowOptionalGfd===void 0&&(n.allowOptionalGfd=!1),n}function V(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I16?n.keyNegotiationMode=t.readI16():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.removeFrameDecryptorDelayMs=t.readI32():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).BOOL?n.keepFrameDecryptors=t.readBool():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.senderKeyUpdateDelayMs=t.readI32():t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).I32?n.keyTtlMs=t.readI32():t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).I16?n.ratchetSpace=t.readI16():t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).I32?n.keyOverMediaDataChannelNumSends=t.readI32():t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).I32?n.keyOverMediaDataChannelRetryDelayMs=t.readI32():t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).BOOL?n.enableH264V2=t.readBool():t.skip(i);break;case 12:if(i===(e||(e=r("ThriftTypes"))).LIST){n.requiredCapabilities=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("E2eeStateTypes").E2eeStateCapabilitiesEnum.cast(t.readI32());n.requiredCapabilities.push(c)}}else t.skip(i);break;case 13:i===(e||(e=r("ThriftTypes"))).BOOL?n.disableE2eeAckThroughSignalingChannel=t.readBool():t.skip(i);break;case 14:i===(e||(e=r("ThriftTypes"))).I32?n.signalingKeyMessageProtocol=o("E2eeStateTypes").SignalingKeyMessageProtocolEnum.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.keyNegotiationMode===void 0&&(n.keyNegotiationMode=0),n.removeFrameDecryptorDelayMs===void 0&&(n.removeFrameDecryptorDelayMs=0),n.keepFrameDecryptors===void 0&&(n.keepFrameDecryptors=!1),n.senderKeyUpdateDelayMs===void 0&&(n.senderKeyUpdateDelayMs=0),n.keyTtlMs===void 0&&(n.keyTtlMs=0),n.ratchetSpace===void 0&&(n.ratchetSpace=0),n.keyOverMediaDataChannelNumSends===void 0&&(n.keyOverMediaDataChannelNumSends=0),n.keyOverMediaDataChannelRetryDelayMs===void 0&&(n.keyOverMediaDataChannelRetryDelayMs=0),n.enableH264V2===void 0&&(n.enableH264V2=!1),n.requiredCapabilities===void 0&&(n.requiredCapabilities=[]),n.disableE2eeAckThroughSignalingChannel===void 0&&(n.disableE2eeAckThroughSignalingChannel=!1),n.signalingKeyMessageProtocol===void 0&&(n.signalingKeyMessageProtocol=o("E2eeStateTypes").SignalingKeyMessageProtocolEnum.cast(0)),n}function H(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.sessionKeyProtocolInfo=B(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).BOOL?n.populateParticipantHash=t.readBool():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.enableParticipantVerification=t.readBool():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.sessionKeyProtocolInfo===void 0&&(n.sessionKeyProtocolInfo=p()),n.populateParticipantHash===void 0&&(n.populateParticipantHash=!1),n.enableParticipantVerification===void 0&&(n.enableParticipantVerification=!1),n}function G(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.preKeyBundle=t.readBinary():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.cipherSuites=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=t.readI16();n.cipherSuites.push(c)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRUCT?n.protocolVersion=q(t):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.config=U(t):t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRUCT?n.identityKeyInfo=F(t):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.deviceId=t.readI32():t.skip(i);break;case 7:if(i===(e||(e=r("ThriftTypes"))).MAP){n.e2eeClientStateCapabilities={};for(var m=t.readMapBegin(),p=0;p<m.size;p++){var _=o("E2eeStateTypes").E2eeStateCapabilitiesEnum.cast(t.readI32()),h=w(t);_!=null&&(n.e2eeClientStateCapabilities[_]=h)}}else t.skip(i);break;case 8:if(i===(e||(e=r("ThriftTypes"))).LIST){n.supportedE2eeKeyNegotiationProtocols=[];for(var y=t.readListBegin(),C=0;C<y.size;C++){var b=o("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(t.readI32());n.supportedE2eeKeyNegotiationProtocols.push(b)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.preKeyBundle===void 0&&(n.preKeyBundle=Uint8Array.of()),n.cipherSuites===void 0&&(n.cipherSuites=[]),n.protocolVersion===void 0&&(n.protocolVersion=f()),n.config===void 0&&(n.config=g()),n.identityKeyInfo===void 0&&(n.identityKeyInfo=d()),n.deviceId===void 0&&(n.deviceId=0),n.e2eeClientStateCapabilities===void 0&&(n.e2eeClientStateCapabilities={}),n.supportedE2eeKeyNegotiationProtocols===void 0&&(n.supportedE2eeKeyNegotiationProtocols=[]),n}function z(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.cipherSuites=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=t.readI16();n.cipherSuites.push(c)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRUCT?n.protocolVersion=q(t):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.config=V(t):t.skip(i);break;case 5:if(i===(e||(e=r("ThriftTypes"))).MAP){n.endpointInfos={};for(var d=t.readMapBegin(),m=0;m<d.size;m++){var p=t.readString(),_=O(t);n.endpointInfos[p]=_}}else t.skip(i);break;case 6:if(i===(e||(e=r("ThriftTypes"))).MAP){n.e2eeServerStateCapabilities={};for(var g=t.readMapBegin(),y=0;y<g.size;y++){var C=o("E2eeStateTypes").E2eeStateCapabilitiesEnum.cast(t.readI32()),b=A(t);C!=null&&(n.e2eeServerStateCapabilities[C]=b)}}else t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).I32?n.negotiatedE2eeKeyNegotiationProtocol=o("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(t.readI32()):t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).STRUCT?n.keyNegotiationProtocolConfig=H(t):t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).I32?n.serverInfraMandatedExpStatus=o("E2eeStateTypes").InfraMandatedExpStatus.cast(t.readI32()):t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).I32?n.serverP2PSFrameExpStatus=o("E2eeStateTypes").E2eeStateP2PSFrameExpStatus.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.cipherSuites===void 0&&(n.cipherSuites=[]),n.protocolVersion===void 0&&(n.protocolVersion=f()),n.config===void 0&&(n.config=h()),n.endpointInfos===void 0&&(n.endpointInfos={}),n.e2eeServerStateCapabilities===void 0&&(n.e2eeServerStateCapabilities={}),n.negotiatedE2eeKeyNegotiationProtocol===void 0&&(n.negotiatedE2eeKeyNegotiationProtocol=o("E2eeStateTypes").E2eeKeyNegotiationProtocolEnum.cast(0)),n.serverInfraMandatedExpStatus===void 0&&(n.serverInfraMandatedExpStatus=o("E2eeStateTypes").InfraMandatedExpStatus.cast(0)),n.serverP2PSFrameExpStatus===void 0&&(n.serverP2PSFrameExpStatus=o("E2eeStateTypes").E2eeStateP2PSFrameExpStatus.cast(0)),n}l.VersionRange$DefaultConstructor=s,l.E2eeClientStateCapability$DefaultConstructor=u,l.E2eeServerStateCapability$DefaultConstructor=c,l.IdentityKeyInfo$DefaultConstructor=d,l.E2eeEndpointInfo$DefaultConstructor=m,l.SessionKeyProtocolInfo$DefaultConstructor=p,l.EpochInfo$DefaultConstructor=_,l.E2eeProtocolVersion$DefaultConstructor=f,l.E2eeClientStateConfig$DefaultConstructor=g,l.E2eeServerStateConfig$DefaultConstructor=h,l.KeyNegotiationProtocolConfig$DefaultConstructor=y,l.E2eeClientState$DefaultConstructor=C,l.E2eeServerState$DefaultConstructor=b,l.serializeVersionRange=v,l.serializeE2eeClientStateCapability=S,l.serializeE2eeServerStateCapability=R,l.serializeIdentityKeyInfo=L,l.serializeE2eeEndpointInfo=E,l.serializeSessionKeyProtocolInfo=k,l.serializeEpochInfo=I,l.serializeE2eeProtocolVersion=T,l.serializeE2eeClientStateConfig=D,l.serializeE2eeServerStateConfig=x,l.serializeKeyNegotiationProtocolConfig=$,l.serializeE2eeClientState=P,l.serializeE2eeServerState=N,l.deserializeVersionRange=M,l.deserializeE2eeClientStateCapability=w,l.deserializeE2eeServerStateCapability=A,l.deserializeIdentityKeyInfo=F,l.deserializeE2eeEndpointInfo=O,l.deserializeSessionKeyProtocolInfo=B,l.deserializeEpochInfo=W,l.deserializeE2eeProtocolVersion=q,l.deserializeE2eeClientStateConfig=U,l.deserializeE2eeServerStateConfig=V,l.deserializeKeyNegotiationProtocolConfig=H,l.deserializeE2eeClientState=G,l.deserializeE2eeServerState=z}),98);
__d("RpWebMediaActionsEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1750245"),s=o("FalcoLoggerInternal").create("rp_web_media_actions_event",e),u=s;l.default=u}),98);
__d("ZenonMediaLoggingUtils",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=typeof((e=window.MediaStreamTrack)==null||(e=e.prototype)==null?void 0:e.getSettings)=="function",u={serializeMediaStreamTrack:function(t){var e=s?t.getSettings():null;return JSON.stringify({contentHint:t.contentHint,enabled:t.enabled,id:t.id,kind:t.kind,label:t.label,muted:t.muted,readyState:t.readyState,remote:t.remote,settings:{deviceId:e==null?void 0:e.deviceId,groupId:e==null?void 0:e.groupId}})},shouldLogEmployeeOnly:function(){return r("gkx")("25152")}},c=u;l.default=c}),98);
__d("ZenonMediaActionLogger",["FBLogger","RpWebMediaActionsEventFalcoEvent","ZenonMediaLoggingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1={conferenceName:void 0,deviceID:void 0,peerID:void 0,serverInfoData:void 0,signalingID:void 0},this.$2=!1}var t=e.prototype;return t.updateCachedValues=function(t){var e=t.conferenceName,n=t.deviceID,r=t.peerID,o=t.serverInfoData,a=t.signalingID;this.$1.signalingID=a!=null?a:this.$1.signalingID,this.$1.conferenceName=e!=null?e:this.$1.conferenceName,this.$1.deviceID=n!=null?n:this.$1.deviceID,this.$1.peerID=r!=null?r:this.$1.peerID,this.$1.serverInfoData=o!=null?o:this.$1.serverInfoData},t.disable=function(){this.$2=!0},t.enable=function(){this.$2=!1},t.logCheckpointEmployeesTestUsersOnly=function(t){r("ZenonMediaLoggingUtils").shouldLogEmployeeOnly()&&this.logCheckpoint(t)},t.logEventEmployeesTestUsersOnly=function(t){r("ZenonMediaLoggingUtils").shouldLogEmployeeOnly()&&this.logEvent(t)},t.logCheckpoint=function(t){this.logEvent({checkpoint:t})},t.logEvent=function(t){if(!this.$2){var e={call_id:this.$1.signalingID==null?void 0:String(this.$1.signalingID),checkpoint:t.checkpoint,client_timestamp_milliseconds:Date.now().toString(),conference_name:this.$1.conferenceName,error_domain:t.errorDomain,error_type:t.errorType,media_id:t.mediaID,peer_id:this.$1.peerID,server_info_data:this.$1.serverInfoData,web_device_id:this.$1.deviceID};r("RpWebMediaActionsEventFalcoEvent").log(function(){return e})}},t.logErrorToFbLogger=function(t,n,o,a){if(!this.$2){var e=r("FBLogger")("rtc_www");switch(o instanceof Error&&(e=e.catching(o)),a){case"debug":e.debug(t);break;case"info":e.info(t);break;case"warn":e.warn(t);break;case"mustfix":e.mustfix(t);break}this.logEvent({checkpoint:t,errorDomain:n,errorType:o==null?void 0:o.toString()})}},e})(),s=new e;l.default=s}),98);
__d("EchoConfidenceMetricsManager",["ZenonMediaActionLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e="ZenonEchoConfidenceMetricsManager",s="[EchoConfidenceMetricsManager]",u=(function(){function t(){this.$1=!1,this.$2=null,this.$3=null,this.$4=null,this.$5=null}var o=t.prototype;return o.setEnabled=function(t){this.$1=t},o.setProcessorUrl=function(t){this.$3=t},o.setAudioContext=function(t){this.$2=t,this.$4=null},o.getProcessor=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return this.$2===null?null:this.$4?this.$4:(yield this.$6(),this.$4)});function t(){return e.apply(this,arguments)}return t})(),o.getAndResetEchoConfidenceMetrics=function(){if(!this.$1)return null;var e=this.$5;return this.$5=null,e},o.cleanUp=function(){var e;(e=this.$4)==null||e.port.postMessage("clean"),this.$4=null},o.$6=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=this;if(r("ZenonMediaActionLogger").logCheckpoint(s+" Initializing the Echo Confidence Metrics Processor!"),!this.$2){var n="Audio Context is null when initializing the Echo Confidence Metrics Processor!";r("ZenonMediaActionLogger").logErrorToFbLogger(s+" "+n,e,null,"warn");return}if(this.$3===null||this.$3===""){var o="Unable to retrieve processor url!";r("ZenonMediaActionLogger").logErrorToFbLogger(s+" "+o,e,null,"warn"),this.$2=null;return}try{yield this.$2.audioWorklet.addModule(this.$3)}catch(t){var a="Audio Worklet AddModule method returned the following error: "+t;r("ZenonMediaActionLogger").logErrorToFbLogger(s+" "+a,e,null,"warn");return}this.$4=new AudioWorkletNode(this.$2,"echo-confidence-metrics-processor",{numberOfInputs:2}),this.$4.port.onmessage=function(n){if(n.data.type==="metrics"){if(!n.data.metrics){var o="AudioWorklet Processor Node returned null metrics!";r("ZenonMediaActionLogger").logErrorToFbLogger(s+" "+o,e,null,"warn")}t.$5===null?t.$5=n.data.metrics:t.$7(n.data.metrics,t.$5)}else if(n.data.type==="error"){var a="AudioWorklet Processor Node returned the following error: "+n.data.message;r("ZenonMediaActionLogger").logErrorToFbLogger(s+" "+a,e,null,"warn")}},this.$4.onprocessorerror=function(t){var n="AudioWorklet Processor Node returned the following uncaught error: "+t.message;r("ZenonMediaActionLogger").logErrorToFbLogger(s+" "+n,e,null,"warn")}});function o(){return t.apply(this,arguments)}return o})(),o.$7=function(t,n){n.echoConfidence=Math.max(n.echoConfidence,t.echoConfidence),n.echoCrossCorrelation=Math.max(n.echoCrossCorrelation,t.echoCrossCorrelation),n.echoDelay=Math.max(n.echoDelay,t.echoDelay),n.echoERL=Math.max(n.echoERL,t.echoERL),n.echoLpbRMS=Math.max(n.echoLpbRMS,t.echoLpbRMS),n.echoRMS=Math.max(n.echoRMS,t.echoRMS),n.goldenEchoMetric=Math.max(n.goldenEchoMetric,t.goldenEchoMetric),n.ltEchoConfidence=Math.max(n.ltEchoConfidence,t.ltEchoConfidence),n.ltEchoDelay=Math.max(n.ltEchoDelay,t.ltEchoDelay),n.ltEchoDelayEntropy=Math.max(n.ltEchoDelayEntropy,t.ltEchoDelayEntropy),n.ltEchoERL=Math.max(n.ltEchoERL,t.ltEchoERL),n.ltEchoFramesPercentage=Math.max(n.ltEchoFramesPercentage,t.ltEchoFramesPercentage)},t})(),c=new u;l.default=c}),98);
__d("EdgeOverlayConfigLayer",["OverlayConfigLayerBuilder","OverlayConfigLayerSource"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=new(r("OverlayConfigLayerBuilder"))(r("OverlayConfigLayerSource").BROWSER);return e.setZenonSdpTransformConfigDisableOpusStereo(!0),e.build()})(),s=e;l.default=s}),98);
__d("FBIDCheck",[],(function(t,n,r,o,a,i){"use strict";var e=/^[1-9]\d*$/;function l(t){var n=t;return n==null||typeof n=="string"&&!e.test(n)||(n=parseInt(n,10),!n)?!1:n>0&&n<22e8||n>=1e14&&n<=0x5b0a58f100ef||n>=89e12&&n<=89999999999999||n>=6000001e7&&n<=60000019999999}i.isUser_deprecated=l}),66);
__d("FBIDForMercury",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t.localeCompare(e)}var l={cmp:e};function s(e){return e}function u(e){return e}i.Comparable=l,i.compare=e,i.ofString=u,i.ofStringExn=s}),null);
__d("FirefoxOverlayConfigLayer",["OverlayConfigLayerBuilder","OverlayConfigLayerSource"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=new(r("OverlayConfigLayerBuilder"))(r("OverlayConfigLayerSource").BROWSER);return e.setZenonSdpTransformConfigDisableOpusStereo(!0),e.build()})(),s=e;l.default=s}),98);
__d("FrameEncryptionWasmTypes",["$InternalEnum","err"],(function(t,n,r,o,a,i,l){"use strict";var e="This wasm pointer must not be null.",s="This wasm pointer is read after being freed.",u=0;function c(e,t){if(e<=u)throw r("err")(t)}var d=n("$InternalEnum")({POST_REMOTE_SDP:"post_remote_sdp",GROUP:"group",P2P:"p2p",WASM:"wasm",PRE_REMOTE_SDP:"pre_remote_sdp",INSERTABLE_STREAMS:"insertable_streams"}),m=(function(){function e(e){this.$1=e}var t=e.prototype;return t.isNull=function(){return this.$1<=u},t.get=function(){return this.$1},t.markAsFreed=function(){this.$1=u},e})(),p=(function(t){function n(n){return c(n,e),t.call(this,n)||this}babelHelpers.inheritsLoose(n,t),n.fromNullable=function(r){var t=r.get();return c(t,e),new n(t)};var r=n.prototype;return r.get=function(){return c(t.prototype.get.call(this),s),t.prototype.get.call(this)},n})(m),_=(function(){function e(e){this.$1=e,this.$2=new Array(0)}var t=e.prototype;return t.createCallback=function(t,n){var e=new p(this.$1.addFunction(t,n));return this.$2.push(e),e},t.getCountOfCallbacks=function(){return this.$2.length},t.cleanupAllCallbacks=function(){var e=this;this.$2.forEach(function(t){return e.$1.removeFunction(t.get())}),this.$2=new Array(0)},e})();l.ERROR_MESSAGE_MUST_NOT_BE_NULL=e,l.ERROR_MESSAGE_USE_AFTER_FREE=s,l.WASM_NULLPTR_VALUE=u,l.ZenonE2eeComponent=d,l.ZenonNullableWasmPtr=m,l.ZenonNonNullWasmPtr=p,l.WasmCallbackManager=_}),98);
__d("FundsAvailability",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_TWO_DAY:80,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85,FUNDS_AVAILABILITY_ONE_THREE_DAY:79,FUNDS_AVAILABILITY_CROSS_BORDER:66,FUNDS_AVAILABILITY_CROSS_BORDER_FAST_FUNDS:67,FUNDS_AVAILABILITY_DOMESTIC:68,FUNDS_AVAILABILITY_DOMESTIC_FAST_FUNDS:69});i.default=e}),66);
__d("ImmutableValue",["invariant","isNode"],(function(t,n,r,o,a,i,l){"use strict";var e="_DONT_EVER_TYPE_THIS_SECRET_KEY",s=(function(){function t(n){n===t[e]||l(0,5608)}return t.mergeAllPropertiesInto=function(t,n){for(var e=n.length,r=0;r<e;r++)Object.assign(t,n[r])},t.deepFreezeRootNode=function(r){if(!n("isNode")(r)){Object.freeze(r);for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.recurseDeepFreeze(r[e]);Object.seal(r)}},t.recurseDeepFreeze=function(r){if(!(n("isNode")(r)||!t.shouldRecurseFreeze(r))){Object.freeze(r);for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.recurseDeepFreeze(r[e]);Object.seal(r)}},t.shouldRecurseFreeze=function(n){return typeof n=="object"&&!(n instanceof t)&&n!==null},t})();s._DONT_EVER_TYPE_THIS_SECRET_KEY=Math.random(),i.default=s}),66);
__d("mergeHelpers",["invariant","FbtResultBase"],(function(t,n,r,o,a,i,l,s){"use strict";var e=36,u=function(t){return typeof t!="object"||t instanceof Date||t===null||t instanceof r("FbtResultBase")},c={MAX_MERGE_DEPTH:e,isTerminal:u,normalizeMergeArg:function(t){return t==null?{}:t},checkMergeArrayArgs:function(t,n){Array.isArray(t)&&Array.isArray(n)||s(0,3714,t,n)},checkMergeObjectArgs:function(t,n){c.checkMergeObjectArg(t),c.checkMergeObjectArg(n)},checkMergeObjectArg:function(t){!u(t)&&!Array.isArray(t)||s(0,3715,t)},checkMergeIntoObjectArg:function(t){(!u(t)||typeof t=="function")&&!Array.isArray(t)||s(0,3716,t)},checkMergeLevel:function(n){n<e||s(0,3717)},checkArrayStrategy:function(t){t==null||t in c.ArrayStrategies||s(0,3718)},ArrayStrategies:{Clobber:"Clobber",Concat:"Concat",IndexByIndex:"IndexByIndex"}},d=c;l.default=d}),98);
__d("ImmutableObject",["invariant","ImmutableValue","mergeHelpers"],(function(t,n,r,o,a,i,l){"use strict";var e=n("mergeHelpers").checkMergeObjectArgs,s=n("mergeHelpers").isTerminal,u="_DONT_EVER_TYPE_THIS_SECRET_KEY";function c(e){e instanceof n("ImmutableValue")||l(0,3884)}var d=(function(e){function t(){var t;return t=e.call(this,n("ImmutableValue")[u])||this,n("ImmutableValue").mergeAllPropertiesInto(t,arguments),t}return babelHelpers.inheritsLoose(t,e),t.set=function(n,r){return c(n),typeof r=="object"&&r!==void 0&&!Array.isArray(r)||l(0,3885),new t(n,r)},t.setProperty=function(n,r,o){var e={};return e[r]=o,t.set(n,e)},t.deleteProperty=function(n,r){var e={};for(var o in n)o!==r&&Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return new t(e)},t.setDeep=function(t,n){return c(t),m(t,n)},t.values=function(t){return Object.keys(t).map(function(e){return t[e]})},t})(n("ImmutableValue"));function m(t,r){e(t,r);for(var o={},a=Object.keys(t),i=0;i<a.length;i++){var l=a[i];Object.prototype.hasOwnProperty.call(r,l)?s(t[l])||s(r[l])?o[l]=r[l]:o[l]=m(t[l],r[l]):o[l]=t[l]}var u=Object.keys(r);for(i=0;i<u.length;i++){var c=u[i];Object.prototype.hasOwnProperty.call(t,c)||(o[c]=r[c])}return t instanceof n("ImmutableValue")?new d(o):r instanceof n("ImmutableValue")?new d(o):o}a.exports=d}),null);
__d("InstantGameUpdateXMATUpdateType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:"unknown",GAME_SCORE:"game_score",CUSTOM_MESSAGE:"custom_message"});i.default=e}),66);
__d("LSIntEnum",["I64"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map;function u(t){var n=s.get(t);if(n!=null)return n;var r=(e||(e=o("I64"))).of_float(t);return s.set(t,r),r}function c(t){return(e||(e=o("I64"))).to_float(t)}function d(t){return(e||(e=o("I64"))).to_float(t)}function m(e,t){return e==null?!1:c(e)===t}l.ofNumber=u,l.toNumber=c,l.unwrapIntEnum=d,l.equal=m}),98);
__d("LeadGenInfoFieldTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({CUSTOM:"CUSTOM",CITY:"CITY",COMPANY_NAME:"COMPANY_NAME",COUNTRY:"COUNTRY",DOB:"DOB",EMAIL:"EMAIL",GENDER:"GENDER",FIRST_NAME:"FIRST_NAME",FULL_ADDRESS:"FULL_ADDRESS",FULL_NAME:"FULL_NAME",JOB_TITLE:"JOB_TITLE",LAST_NAME:"LAST_NAME",MARITIAL_STATUS:"MARITIAL_STATUS",WHATSAPP_NUMBER:"WHATSAPP_NUMBER",EDUCATION_LEVEL:"EDUCATION_LEVEL",WEBSITE:"WEBSITE",PHONE:"PHONE",PHONE_OTP:"PHONE_OTP",POST_CODE:"POST_CODE",PROVINCE:"PROVINCE",RELATIONSHIP_STATUS:"RELATIONSHIP_STATUS",STATE:"STATE",STREET_ADDRESS:"STREET_ADDRESS",ZIP:"ZIP",WORK_EMAIL:"WORK_EMAIL",MILITARY_STATUS:"MILITARY_STATUS",WORK_PHONE_NUMBER:"WORK_PHONE_NUMBER",SLIDER:"SLIDER",STORE_LOOKUP:"STORE_LOOKUP",STORE_LOOKUP_WITH_TYPEAHEAD:"STORE_LOOKUP_WITH_TYPEAHEAD",DATE_TIME:"DATE_TIME",ID_CPF:"ID_CPF",ID_AR_DNI:"ID_AR_DNI",ID_CL_RUT:"ID_CL_RUT",ID_CO_CC:"ID_CO_CC",ID_EC_CI:"ID_EC_CI",ID_PE_DNI:"ID_PE_DNI",ID_MX_RFC:"ID_MX_RFC",JOIN_CODE:"JOIN_CODE",USER_PROVIDED_PHONE_NUMBER:"USER_PROVIDED_PHONE_NUMBER",FACEBOOK_LEAD_ID:"FACEBOOK_LEAD_ID",EMAIL_ALIAS:"EMAIL_ALIAS",MESSENGER:"MESSENGER",VIN:"VIN",LICENSE_PLATE:"LICENSE_PLATE",THREAD_LINK:"THREAD_LINK",ADDRESS_LINE_TWO:"ADDRESS_LINE_TWO"});i.default=e}),66);
__d("LocationTypesSerializers",["ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(t,n){n.writeStructBegin("GenAILocationOverrides"),t.locale!=null&&(n.writeFieldBegin({fname:"locale",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.locale),n.writeFieldEnd()),t.timezone!=null&&(n.writeFieldBegin({fname:"timezone",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.timezone),n.writeFieldEnd()),t.latitude!=null&&(n.writeFieldBegin({fname:"latitude",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.latitude),n.writeFieldEnd()),t.longitude!=null&&(n.writeFieldBegin({fname:"longitude",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.longitude),n.writeFieldEnd()),t.serialized_address!=null&&(n.writeFieldBegin({fname:"serialized_address",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.serialized_address),n.writeFieldEnd()),t.city_name!=null&&(n.writeFieldBegin({fname:"city_name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.city_name),n.writeFieldEnd()),t.country_name!=null&&(n.writeFieldBegin({fname:"country_name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.country_name),n.writeFieldEnd()),t.region_name!=null&&(n.writeFieldBegin({fname:"region_name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:8}),n.writeString(t.region_name),n.writeFieldEnd()),t.user_country!=null&&(n.writeFieldBegin({fname:"user_country",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:9}),n.writeString(t.user_country),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function c(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.locale=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.timezone=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.latitude=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.longitude=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.serialized_address=t.readString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRING?n.city_name=t.readString():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).STRING?n.country_name=t.readString():t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).STRING?n.region_name=t.readString():t.skip(a);break;case 9:a===(e||(e=r("ThriftTypes"))).STRING?n.user_country=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}l.GenAILocationOverrides$DefaultConstructor=s,l.serializeGenAILocationOverrides=u,l.deserializeGenAILocationOverrides=c}),98);
__d("LsRtcCallSummaryFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743880"),s=o("FalcoLoggerInternal").create("ls_rtc_call_summary",e),u=s;l.default=u}),98);
__d("LsRtcEndCallSurveyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743882"),s=o("FalcoLoggerInternal").create("ls_rtc_end_call_survey",e),u=s;l.default=u}),98);
__d("LsRtcGroupE2eeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1066"),s=o("FalcoLoggerInternal").create("ls_rtc_group_e2ee",e),u=s;l.default=u}),98);
__d("LsRtcP2pE2eeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("5665"),s=o("FalcoLoggerInternal").create("ls_rtc_p2p_e2ee",e),u=s;l.default=u}),98);
__d("LsRtcPeerConnectionSummaryFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743883"),s=o("FalcoLoggerInternal").create("ls_rtc_peer_connection_summary",e),u=s;l.default=u}),98);
__d("LsRtcStarRatingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743884"),s=o("FalcoLoggerInternal").create("ls_rtc_star_rating",e),u=s;l.default=u}),98);
__d("LsRtcTslogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743886"),s=o("FalcoLoggerInternal").create("ls_rtc_tslog",e),u=s;l.default=u}),98);
__d("MNCommerceBubbleType",[],(function(t,n,r,o,a,i){var e=Object.freeze({FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14});i.default=e}),66);
__d("MNCommerceCallToActionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OPEN_NATIVE:1,OPEN_URL:2,POSTBACK:4,ACCOUNT_LINK:5,SHARE:7,PAYMENT:8,FACEBOOK_REPORT_A_PROBLEM:9,NAVIGATION:11,EXTENSIBLE_SHARE:12,OPEN_PAGE_ABOUT:14,OPEN_BRANDED_CAMERA:15,OPEN_THREAD:16,OPEN_MARKETPLACE_PROFILE_REPORT:17,OPEN_DIRECT_SEND_VIEW:18,OPEN_BIZ_INBOX_FORM:33,BOOKING:19,BOOKING_ADD_TO_CALENDAR:20,BOOKING_CONFIRM:47,BOOKING_RESCHEDULE:48,BOOKING_DECLINE:57,BOOKING_VIEW_DETAILS:58,BOOKING_IG_USER_ADD_DETAILS:63,BOOKING_IG_USER_VIEW_DETAILS:64,BOOKING_IG_USER_VIEW_DETAILS_APPOINTMENT_CANCELLED:65,BOOKING_IG_BUSINESS_VIEW_APPOINTMENT_DETAILS:66,ACCOUNT_UNLINK:21,RATE_SELLER:22,ROOMS_SPEAKEASY_INVITE:23,ROOMS_SPEAKEASY_INTERESTED:24,ROOMS_SPEAKEASY_EDIT:25,ROOMS_SPEAKEASY_UNDO:26,ROOMS_SPEAKEASY_CALLBACK:27,ROOMS_SPEAKEASY_COPY_LINK:32,ROOMS_SPEAKEASY_JOIN_WITHOUT_VIDEO:34,ROOMS_SPEAKEASY_JOIN_FROM_PORTAL:36,FB_LOGIN:28,FEEDBACK_SEND:29,SHOPS_PDP:30,OPEN_SHOPS_PRODUCT_VARIANT_PICKER:43,REQUEST_ORDER:60,MERCHANT_CONFIRM_ORDER:61,OFFERS_VIEW_DETAILS:62,OFFERS_BUY_NOW:67,VIEW_MESSENGER_CATALOG:68,OPEN_DIALOG:31,RTC_NEW_AUDIO_DEFAULT:45,RTC_NEW_VIDEO_DEFAULT:35,RTC_NEW_VIDEO_FROM_FB_SHARE:38,RTC_NEW_VIDEO_FROM_FB_VIDEO_SHARE:40,RTC_NEW_VIDEO_FROM_COWATCH_SHARE:42,DISABLED:44,CUSTOMER_INFORMATION:46,RTC_ENDED_AUDIO:49,RTC_ENDED_VIDEO:50,RTC_MISSED_AUDIO:51,RTC_MISSED_VIDEO:52,RTC_MISSED_GROUP_AUDIO:53,RTC_MISSED_GROUP_VIDEO:54,RTC_AUDIO:55,RTC_VIDEO:56,IGD_WEB_POST_SHARE:59,P2M_3PP_CHECKOUT:72,BIO_BUYER_PAYMENT:73,BIO_MARK_AS_PAID:74,IG_BIO_SEND_MESSAGE:75,MEMORY_VIEWER:78,LEAD_FORM_OPEN_RESPONSE:79,PROMPTS:80,ADD_TAGGED_POST_TO_STORY:81,ADD_TAGGED_REEL_TO_STORY:82,REVIEW_POST_COLLABORATION_REQUEST:83,REVIEW_REEL_COLLABORATION_REQUEST:84,BIZ_AI_CONVERSATION_BOT_ENABLE_AI:90,SUBSCRIPTION_PRESELECT:10,OPEN_REACT_NATIVE_MINI_APP:13,OPEN_CANCEL_RIDE_MUTATION:3,MANAGE_MESSAGES:6,GROUP_CHAT_COMMERCE_VIEW_DETAILS:70,WATCH_SHARING:71,PARTNERSHIP_ADS_COPY_CODE:76});i.default=e}),66);
__d("MNCommerceMessageType",[],(function(t,n,r,o,a,i){var e=Object.freeze({TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",SHOPS_PRODUCT:"shops_product",SHOPS_PRODUCT_HSCROLL:"shops_product_hscroll",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",ICE_BREAKER:"ice_breaker",FALLBACK:"fallback",ONE_TIME_NOTIF_REQ:"one_time_notif_req",NOTIFICATION_MESSAGES:"notification_messages",COUPON:"coupon",INSTANT_FORM:"instant_form",QUICK_REPLY_BUTTON:"quick_reply_button",ORDER_STATUS:"order_status",CUSTOMER_FEEDBACK:"customer_feedback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",INSTANT_GAMES_LIVE_STREAM:"instant_games_live_stream",INSTANT_GAMES_CUSTOM_UPDATE:"instant_games_custom_update",INSTANT_GAMES_CUSTOM_UPDATE_MEDIA:"instant_games_custom_update_media",INSTANT_GAMES_TOURNAMENT_UPDATE:"instant_games_tournament_update",INSTANT_GAMES_MESSENGER_GAME_UPDATE:"instant_games_messenger_game_update",HORIZON_WORLDS_MESSENGER_WORLD_UPDATE:"HORIZON_WORLDS_MESSENGER_WORLD_UPDATE",GAMING_SERVICES_GAME_INVITE:"GAMING_SERVICES_GAME_INVITE",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",FEEDBACK:"feedback",FORM_PROGRESS:"form_progress",MEDIA:"media",PLACE_CARD:"place_card",MESSENGER_CALL_PROMPT:"messenger_call_prompt",MESSENGER_CALL_USER_PROMPT_SENT:"messenger_call_user_prompt_sent",CALL_PROMPT:"call_prompt",OPS_BOT_CAROUSEL:"ops_bot_carousel"});i.default=e}),66);
__d("MercuryIDs",[],(function(t,n,r,o,a,i){"use strict";var e={isValid:function(t){return t==null||t===""||typeof t!="string"?!1:/^\w{3,12}:.+/.test(t)},isValidThreadID:function(n){if(!e.isValid(n))return!1;var t=e.tokenize(n);switch(t.type){case"user":case"support":case"thread":case"root":return!0;default:return!1}},tokenize:function(n){if(n==null||n===""||!e.isValid(n))throw new Error("bad_id_format "+String(n));var t=n.indexOf(":");return{type:n.substr(0,t),value:n.substr(t+1)}},getUserIDFromParticipantID:function(n){if(!e.isValid(n))throw new Error("bad_id_format "+n);var t=e.tokenize(n),r=t.type,o=t.value;return r==="fbid"?o:null},getParticipantIDFromUserID:function(t){if(isNaN(t))throw new Error("Not a user ID: "+t);return"fbid:"+t},getUserIDFromThreadID:function(t){return this.isCanonical(t)?this.tokenize(t).value:null},getThreadIDFromUserID:function(t){return"user:"+t},getThreadIDFromThreadFBID:function(t){return"thread:"+t},getThreadIDFromSupportInboxItemID:function(t){return"support:"+t},getThreadFBIDFromThreadID:function(t){return this.tokenize(t).value},getThreadKeyfromThreadIDUserID:function(n,r){if(n==null||n===""||!e.isValid(n))throw new Error("bad_id_format "+String(n));var t=this.tokenize(n).type,o=this.tokenize(n).value;if(t!=="user")return"g"+o;var a="",i="";if(o.length!==r.length)a=o.length>r.length?o:r,i=o.length>r.length?r:o;else{if(r===o)return r+"u"+o;for(var l=0;l<o.length&&l<r.length;)if(o[l]===r[l])l++;else{a=o[l]>r[l]?o:r,i=o[l]>r[l]?r:o;break}}return i+"u"+a},getThreadIDFromParticipantID:function(t){var e=this.getUserIDFromParticipantID(t);return e?this.getThreadIDFromUserID(e):null},getParticipantIDFromFromThreadID:function(t){var e=this.getUserIDFromThreadID(t);return e?this.getParticipantIDFromUserID(e):null},getSupportInboxItemIDFromThreadID:function(t){return this.tokenize(t).value},isCanonical:function(t){return this.isValid(t)&&this.tokenize(t).type==="user"},isGroupChat:function(t){return this.isValid(t)&&this.tokenize(t).type!=="user"},isLocalThread:function(t){return this.isValid(t)&&this.tokenize(t).type==="root"}};a.exports=e}),null);
__d("MercuryAssert",["MercuryIDs"],(function(t,n,r,o,a,i,l){function e(e){if(e==null)throw new Error("participant_id null/undefined");if(!o("MercuryIDs").isValid(e))throw new Error("bad_participant_id "+e)}function s(t){t.forEach(e)}function u(e){var t=o("MercuryIDs").tokenize(e);if(e==null)throw new Error("participant_id null/undefined");if(t.type!="fbid")throw new Error("bad_user_id "+e)}function c(e){var t=o("MercuryIDs").tokenize(e);if(e==null)throw new Error("participant_id null/undefined");if(t.type!="email")throw new Error("bad_email_id "+e)}function d(e){e.forEach(m)}function m(e){if(e==null)throw new Error("participant_id null/undefined");if(!o("MercuryIDs").isValid(e))throw new Error("bad_thread_id "+e)}l.isParticipantID=e,l.allParticipantIDs=s,l.isUserParticipantID=u,l.isEmailParticipantID=c,l.allThreadID=d,l.isThreadID=m}),98);
__d("MercurySourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ABRA_WEB:"source:abra_web",BRAND_COLLABS_MANAGER:"source:brand_collabs_manager",BUSINESS_WHATSAPP_SHARE_XMA:"source:business_whatsapp_share_xma",CMB_BOTTOM_SHEET:"source:chat:cmb_bottom_sheet",CHAT_ORCA:"source:chat:orca",CHAT_LIGHT_SPEED:"source:chat:light_speed",CHAT_WEB_LIGHT_SPEED_INBOX:"source:chat:web:light_speed:inbox",CHAT_WEB_LIGHT_SPEED_CHAT:"source:chat:web:light_speed:chat",CHAT_WEB_LIGHT_SPEED_ROOMS_SIDE_CHAT:"source:chat:web:light_speed:rooms_side_chat",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT_FULLSCREEN:"source:chat:fullscreen",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",CONTEXTUAL_PROFILE_MESSAGE:"source:contextual_profile:message",CONTEXTUAL_PROFILE_WAVE:"source:contextual_profile:wave",COWORKER_GROUP:"source:work:coworker_group",COVID_HUB_MENTAL_HEALTH_UNIT:"source:covid_hub_mental_health",CREATOR_BADGES:"source:creator_badges",CUSTOMER_CHAT_PLUGIN:"source:discovery:customer_chat_plugin",CUSTOMER_CHAT_PLUGIN_ESCALATION:"source:discovery:customer_chat_plugin_escalation",CUSTOMER_CHAT_SUPPORT:"source:integrity:customer_chat_support",DEVELOPER_PLATFORM:"source:developer_platform",ECTO_PROMPT:"source:ecto_prompt",ECTO_BOT_RESPONSE:"source:ecto_bot_response",EMAIL:"source:email",ENT_FRAMEWORK:"source:ent_framework",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_TICKETING:"source:event_ticket",EVENT_REMINDERS:"source:event_reminders",EVENT_INITIAL_MESSAGE:"source:event_initial_message",EVENT_JOIN_CHAT:"source:event_join_chat",EVENT_CREATION:"source:event_creation",WHITEHAT_FBDL:"source:whitehat_fbdl",GENERIC_ADMIN_TEXT:"source:generic_admin_text",DETECTED_OUTCOME_ADMIN_TEXT:"source:detected_outcome_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",GRATITUDE_LIBRARY:"source:gratitude_library",GROUP_ADMOD_THREAD_AUTOJOIN:"source:group:admod_thread_autojoin",GROUP_THREAD_MESSAGING_BOT:"source:group:thread_messaging_bot",GROUP_GENERAL_THREAD_AUTOJOIN:"source:group:general_thread_autojoin",GROUP_ADMOD_THREAD_MODERATION_QUEUE_ENTRYPOINT:"source:group_admod_thread_moderation_queue_entrypoint",GROUP_SEND_POST_TO_CHAT:"source:group:send_post_to_chat",GROUPS_INVITE_VIA_MESSENGER:"source:groups_invite_via_messenger",FANTASY_GAMES:"source:fantasy_games",MESSENGER_HORIZON_WORLDS_DISCOVERY:"source:messenger_horizon_worlds_discovery",INBOX_WHATSAPP_AUTOMATION:"source:inbox_whatsapp_automation",INBOX_WHATSAPP_MIGRATION:"source:inbox_whatsapp_migration",INBOX_WHATSAPP_RECEIVE_REACTION_ASYNC_JOB:"source:inbox_whatsapp_receive_reaction_async_job",INBOX_WHATSAPP_SEND_MESSAGE_IN_OBSERVER:"source:inbox_whatsapp_send_message_in_observer",INVITE:"source:invite",LEADS_CENTER_ADMIN_TEXT:"source:leads_center_admin_text",LEIA:"source:leia",MILANDA:"source:group:milanda",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",MESSENGER_UNKNOWN:"source:messenger:unknown",MESSENGER_RESTRICT:"source:messenger:restrict",REFERRALS_DIALOG:"source:referrals:dialog",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",SSI_RESOURCES:"source:ssi_resources",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",PAGE_UNIFIED_INBOX:"source:page_unified_inbox",PAGE_UNIFIED_INBOX_ANDROID:"source:page_unified_inbox_android",PAGE_UNIFIED_INBOX_IOS:"source:page_unified_inbox_ios",WHATSAPP_CALLBACK:"source:wa_callback",UNKNOWN:"source:unknown",WEB:"source:web",WESTWORLD:"source:westworld",TESTDATA:"source:testdata",HELPCENTER:"source:helpcenter",HUDDLE:"source:huddle",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",CLICK_TO_DIRECT_LEAD_GEN:"source:click:to:direct:lead:gen",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",GEN_AI_BOT:"source:gen_ai_bot",GEN_AI_PPF_CURATION:"source:gen_ai_ppf_curation",GEN_AI_WA_USER_INVOKE:"source:gen_ai_wa_user_invoke",GEN_AI_BOT_WELCOME:"source:gen_ai_bot_welcome",GEN_AI_BOT_PROACTIVE_MESSAGE:"source:gen_ai_bot_proactive_message",GEN_AI_BOT_NEW_LANGUAGES_SUPPORTED:"source:gen_ai_bot_new_languages_supported",GEN_AI_DISCOVERY_BOTTOMSHEET:"source:gen_ai_discovery_bottomsheet",GEN_AI_FB_CONTEXT_INJECTION:"source:gen_ai_fb_context_injection",GEN_AI_GENERIC_ADMIN_TEXT:"source:gen_ai_generic_admin_text",MESSENGER_AI_BOT_WELCOME:"source:ai_bot_welcome",MESSENGER_CHAT_ENTITY:"source:messenger:chat_entity",SERVICES_QPC_CTA_TRIGGER_MESSAGE:"source:services:qpc:cta:trigger:message",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",CLICK_TO_MESSENGER_AD:"source:click_to_messenger_ad",CLICK_TO_MESSENGER_CALL_AD:"source:click_to_messenger_call_ad",CLICK_TO_DIRECT_AD:"source:click_to_direct_ad",CLICK_TO_DIRECT_AD_ONE_DAY_VIEW_THROUGH:"source:click_to_direct_ad_one_day_view_through",MARKETPLACE:"source:marketplace",MARKETPLACE_BUSINESS_MESSAGING:"source:marketplace:bizmsg",MARKETPLACE_CARE:"source:marketplace:care",MARKETPLACE_BOT:"source:marketplace:bot",MARKETPLACE_INBOX:"source:marketplace_inbox",PAYMENTS_BOT:"source:payments:bot",CHEX_C2C:"source:chex:c2c",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERN_APPROVALS:"source:intern:approvals",INTERNAL_TEST_INBOX:"source:internal:test_inbox",INTERNAL_TEST_PENDING:"source:internal:test_pending",INTERNAL_TEST_OTHER:"source:internal:test_other",INTERNAL_TEST_SPAM:"source:internal:test_spam",INTERNAL_TEST_ML_ONLY:"source:internal:test_ml_only",JOB_SEARCH_APPLICATION:"source:job_search:application",JOB_SEARCH_JOB_OPENING:"source:job_search:job_opening",MEMORIES:"source:memories",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_JOINABLE_GROUP_LINK:"source:messenger:joinable_group_link",MESSENGER_ADD_WITH_APPROVAL:"source:messenger:add_with_approval",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGE_COMMENT_OPT_IN:"source:pages:opt_in",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGES_ORDER_MANAGEMENT:"source:pages:order_management",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGE_AUTO_RESPONSE_INSTANT_REPLY:"source:pages:auto_response:instant_reply",PAGE_AUTO_RESPONSE_AWAY_MESSAGE:"source:pages:auto_response:away_message",PAGE_AUTO_RESPONSE_CUSTOM_QUESTIONS:"source:pages:auto_response:custom_questions",PAGE_AUTO_RESPONSE_KEYWORD_DETECTION:"source:pages:auto_response:keyword_detection",PAGE_AUTO_RESPONSE_JOB_APPLICATION:"source:pages:auto_response:job_application",PAGE_AUTO_RESPONSE_COMMENT_TO_INBOX:"source:pages:auto_response:comment_to_inbox",PAGE_AUTO_RESPONSE_APPOINTMENT_REMINDER:"source:pages:auto_response:appointment_reminder",PAGE_AUTO_RESPONSE_ORGANIC_INTAKE_FORM:"source:pages:auto_response:organic_intake_form",PAGE_AUTO_RESPONSE_NOT_RESPONDED:"source:pages:auto_response:not_responded",PAGE_AUTO_RESPONSE_CUSTOM_AUTOMATION:"source:pages:auto_response:custom_automation",PAGE_AUTO_RESPONSE_SMART_REPLY_CONTACT:"source:pages:auto_response:smart_reply_contact",PAGE_AUTO_RESPONSE_SMART_REPLY_HOURS:"source:pages:auto_response:smart_reply_hours",PAGE_AUTO_RESPONSE_SMART_REPLY_LOCATION:"source:pages:auto_response:smart_reply_location",PAGE_AUTO_RESPONSE_SMART_REPLY_POSITIVE_FEEDBACK:"source:pages:auto_response:smart_reply_positive_feedback",PAGE_AUTO_RESPONSE_SMART_REPLY_NEGATIVE_FEEDBACK:"source:pages:auto_response:smart_reply_negative_feedback",PAGE_AUTO_RESPONSE_POSITIVE_RECOMMENDATION:"source:pages:auto_response:positive_recommendation",PAGE_AUTO_RESPONSE_NEGATIVE_RECOMMENDATION:"source:pages:auto_response:negative_recommendation",PAGE_AUTO_RESPONSE_SHIPPING_UPDATES:"source:pages:auto_response:shipping_updates",PAGE_AUTO_RESPONSE_FOLLOWUP_MESSAGE:"source:pages:auto_response:followup_message",PAGE_AUTO_RESPONSE_FUNDRAISER_CREATED:"source:pages:auto_response:fundraiser_created",PAGE_AUTO_RESPONSE_FUNDRAISER_DONATION:"source:pages:auto_response:fundraiser_donation",PAGES_INVITE:"source:pages:invite",PAGES_INVITE_SEND_MESSAGE_BOTTOMSHEET:"source:pages:invite_send_message_bottomsheet",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",PAGES_COMPOSER:"source:pages:composer",PAGES_SMB_LEAD_GEN:"source:pages:smb_lead_gen",PTX:"source:ptx",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",LIVE_EVENT_CHAT:"source:live_event_chat",GEMSTONE:"source:gemstone",WATCH_PARTY:"source:watch_party",WORK_ACTIVATION_CARD_GENERAL_GROUP_CHAT:"source:work:activation_card_general_group_chat",SCHOOL_COMMUNITY:"source:school_community",SCHOOL_COMMUNITY_COURSE:"source:school_community_course",SOCIAL_ASSISTANT:"source:social_assistant",BELL_RESEARCH:"source:bell_research",BELL_MESSENGER_LINKED:"source:bell_messenger_linked",BELL_MESSENGER_UNLINKED:"source:bell_messenger_unlinked",BELL_MESSENGER_ONBOARD:"source:bell_messenger_onboard",PROFILE_DIRECTORY:"profile_directory",PROFILE_MEET_NEW_FRIENDS:"source:profile_meet_new_friends",PROFILE_MEET_NEW_FRIENDS_REPLY:"source:profile_meet_new_friends_reply",OCULUS_COMMUNICATOR:"source:oculus_communicator",OCULUS_COMMUNICATOR_SALSA_AGE_DOWN:"source:oculus_communicator:salsa_age_down",OCULUS_COMMUNICATOR_REMOVE_SCAMMER_FROM_ALL_PUBLIC_GROUPS:"source:oculus_communicator:remove_scammer_from_all_public_groups",OCULUS_COMMUNICATOR_SALSA_CONSISTENCY_RULE_FIXER:"source:oculus_communicator:salsa_consistency_rule_fixer",OCULUS_COMMUNICATOR_PUBLIC_GROUP_ADMIN_CONSISTENCY_RULE_FIXER:"source:oculus_communicator:oculus_communicator_public_group_admin_consistency_rule_fixer",OCULUS_COMMUNICATOR_PUBLIC_GROUPS_HIGH_RISK_ADULT_HANDLING:"source:oculus_communicator:oculus_communicator_public_groups_high_risk_adult_handling",OCULUS_MEDIA_MESSAGING:"source:oculus_media_messaging",OCULUS_SHARE_TO_MESSENGER:"source:oculus_share_to_messenger",BFF_BOT:"source:bff:bot",PROFILE_PLUS_ORGANIC_LEAD_GEN:"source:profile_plus_organic_lead_gen",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",FRIENDVERSARY_BUMP:"source:messenger_growth:friendversary_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",MESSENGER_BROADCASTFLOW:"source:messenger:broadcastflow",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot",PAGE_HOVERCARD:"source:pages:hovercard",INSTANT_GAMES_GAME_UPDATE:"source:instant_games_game_updates",FANTASY_GAMES_GAME_UPDATE:"source:fantasy_games_game_updates",INSTANT_GAMES_GAME_SHARE:"source:instant_games_game_share",INSTANT_GAMES_MATCH_MAKING:"source:instant_games_match_making",INSTANT_GAMES_GROUP_CREATION:"source:instant_games_group_creation",MOBILE_GAME_SHARE:"source:games_app:mobile_game_share",GAMES_SERVICE_GAME_INVITE:"source:games_service_game_invite",GAMES_SERVICE_GAME_REQUEST:"source:games_service_game_request",PAGE_EMAIL_REPLY:"source:pages:email_reply",PAGE_HOME_PAGE_PANEL:"source:page_home_page_panel",GROUPSYNC_MESSENGER_GROUP_CREATE:"source:groupsync:messenger_group_create",GROUPSYNC_SYNC_FROM_FB:"source:groupsync:sync_from_fb",GROUPSYNC_NAMING:"source:groupsync:naming",GROUPSYNC_THREAD_INFO_SYNC_FROM_FB:"source:groupsync:thread_info_sync",GROUPSYNC_THREAD_INFO_SYNC_FROM_FB_NON_PARTICIPANT:"source:groupsync:thread_info_sync_non_participant",WORK_GARDEN_CREATION:"source:work:garden:creation",COWORKING:"source:coworking",WORKROOM_SYNCED_CHAT_MEMBER_SYNC:"source:work:workroomchat:member_sync",WORK_GROUP_SYNCED_CHAT_CREATION:"source:work:groupchat:creation",WORK_DEFAULT_GROUP_SYNCED_CHAT_CREATION:"source:work:defaultgroupchat:creation",WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC:"source:work:groupchat:member_sync",WORK_MEETING_SYNCED_CHAT_MEMBER_SYNC:"source:work:meetingchat:member_sync",WORK_GROUP_SYNCED_CHAT_DESCRIPTION_SYNC:"source:work:groupchat:description_sync",WORK_GROUP_SYNCED_CHAT_NAME_SYNC:"source:work:groupchat:name_sync",WORK_GROUP_SYNCED_CHAT_OPT_IN:"source:work:groupchat:opt_in",PAGE_PQI_MESSAGE:"source:pages:pqi_message",PAGE_PLUGIN_MESSAGE:"source:pages:page_plugin_message",WORKPLACE_CHAT_DESKTOP:"source:workchat:desktop",WORKPLACE_QUICKCHAT:"source:workchat:quickchat",WORKPLACE_SIGNUP_PAGE_ADMIN_INVITE:"source:workplace:signup_page_admin_invite",WORKPLACE_SUBTYPING_MIGRATION:"source:workplace:subtyping",WORKPLACE_APPROVALS:"source:workplace:approvals",WORKPLACE_TEAMWORK_CALL:"source:workplace:teamwork_call",WORKPLACE_TEAMWORK_TEST:"source:workplace:test",WORKPLACE_TEAMWORK_GROUP_POST:"source:workplace:group_post",CREATOR_STUDIO:"source:creator_studio",FB_GROUP_ADMINSHIP_SYNC:"source:fbgroup:adminship_sync",FB_GROUP_CHAT_MUTE_MEMBER:"source:fbgroup:mute_member",MESSENGER_ADS_PARTIAL_AUTOMATED_REMINDER:"source:ads_partial_automated:reminder",AR_CALLING_PARROT_BOT:"source:ar_calling:parrot_bot",WEARABLES_AI_EXTENSION:"source:wearables:ai_extension",COMMUNITY_HELP_LISTING:"source:community_help_listing",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",MENTORSHIP:"source:mentorship",MENTORSHIP_DISCUSSION_TOPIC:"source:mentorship_discussion_topic",MENTORSHIP_OUTREACH:"source:mentorship_outreach",NONPROFIT_SUPPORTER_LIST:"source:nonprofit_supporter_list",VOLUNTEERING_ORGANIZER_REACHOUT:"source:volunteering_organizer_reachout",VOD_CONVERSATION:"source:vod_conversation",LOCAL_SEARCH_SERVICES:"source:local_search_services",YOUTH_VAULT:"source:youth_vault",MESSENGER_KIDS:"source:messenger_kids",MESSENGER_KIDS_ACTIVITY:"source:messenger_kids:activity",STORY_REPLY:"source:story_reply",LOCAL_DEV_PLATFORM:"source:local_dev_platform",INSTAGRAM_DIRECT:"source:instagram_direct",WA_MSGR_INTEROP:"source:wa-msgr-interop",C4G_CURRENT_GROUP_MEMBERS_ENTINTEGRITY:"source:c4g_current_group_members_entintegrity",CHATROOM:"source:chatroom",WHITECLAW_BOT:"source:intern:whiteclaw",FB_FEED:"source:fb_feed",FB_GROUPS:"source:fb_groups",FB_INBOX:"source:messaging_inbox_in_blue",FB_JOINABLE_VIDEO_CHATS:"source:fb_joinable_video_chats",FB_MENTIONS_MESSENGER_SHARING:"source:fb_mentions_messenger_sharing",FB_PAGE:"source:fb_page",FB_PROFILE:"source:fb_profile",FB_SEARCH_NULLSTATE_GLOBAL:"source:fb_search_nullstate_global",FB_SEARCH:"source:fb_search",FB_STORY:"source:fb_story",FB_STATUS:"source:fb_status",FB_TOP_OF_FEED_UNIT:"source:fb_top_of_feed_unit",FEED:"source:feed",MIB_NOTIFICATION:"source:mib_notification",KOTOTORO:"source:kototoro",SHARESHEET:"source:sharesheet",UFI:"source:ufi",ADMIN_ASSIST_RECURRING_MESSAGES:"source:admin_assist_recurring_messages",PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:"source:private_sharing_forward_super_share_sheet",ROOMS_INVITE:"source:rooms_invite",IG_ROOMS:"source:ig_rooms",FRIENDS_HOME:"source:friends_home",FRIENDS_HOME_SENDER_SIDE_POST_ACCEPT:"source:friends_home:sender_side_post_accept",NPE_WHALE:"source:npe_whale",NPE_POUTINE:"source:npe_poutine",NPE_HOBBI:"source:npe_hobbi",SHOPS_XMA_DOGFOODING:"source:shops_xma_dogfooding",SHOPS_QA:"source:shops_qa",CHAT_FOR_ROOM:"source:chat_for_room",WORK_AUTOMATION:"source:work_automation",WORK_ROOM_INCALL_CHAT:"source:work_room_incall_chat",MESSENGER_ROOM_INCALL_CHAT:"source:messenger_room_incall_chat",SECURITY_ACADEMY_BOT:"source:security_academy_bot",VR_MESSENGER:"source:vr_messenger",PRODUCT_PICKER:"product_picker",STARS_ONBOARDING:"source:stars_onboarding",N4M:"source:novi_for_messenger",ARMADILLO_WA:"source:armadillo_wa",REMEDIATION_PLATFORM:"REMEDIATION_PLATFORM",ONLINE_LEARNING_CLASS_CREATION:"source:online_learning_class_creation",ONLINE_LEARNING_CLASS_GOING:"source:online_learning_class_going",ONLINE_LEARNING_CLASS_ADMIN_SYNC:"source:online_learning_class_admin_sync",PORTAL_CONTACT_GROUP:"source:portal_contact_group",CAREER_CHAT_THREAD:"source:career_chat_thread",CUSTOMER_DATA_BIZ_TRANSACTIONAL_UPDATES:"source:biz_messaging:transactional_updates",THREAD_HISTORY_TRUNCATION:"source:thread_history_truncation",SERVICEFRIEND:"source:servicefriend",FINANCIAL_INTEGRITY_CORRESPONDENCE_FRAMEWORK:"source:financial_integrity_correspondence_framework",MIB_RTC_CALL_XMA:"source:mib_rtc_call_xma",SUPPORT_BOT:"source:support_bot",CHECKBOX_PLUGIN_MARKETING_OPT_IN:"source:checkbox_plugin_marketing_opt_in",CHECKBOX_PLUGIN_PROMOTIONAL_OPT_IN:"source:checkbox_plugin_promotional_opt_in",BUSINESS_SUPPORT_MESSAGING:"source:business_support_messaging",LIVE_SHOPPING_MESSAGING_ORDER:"source:live_shopping_messaging_order",HORIZON_SHARING:"source:horizon_sharing",HORIZON_MESSENGER:"source:horizon_messenger",COMMUNITY_CHATS_IMPLICIT_AUTO_JOIN:"source:community_chats_implicit_auto_join",COMMUNITY_CHATS_CONTENT_VISIBILITY_DISCLAIMER:"source:community_chats_content_visibility_disclaimer",COMMUNITY_CHATS_PARTICIPANT_ACTIONS:"source:community_chats_participant_actions",COMMUNITY_CHATS_INVITE_FROM_POLL:"source:community_chats_invite_from_poll",COMMUNITY_MESSAGING_EVENT_CREATION_XMA:"source:community_messaging_event_creation_xma",EVENT_WITH_GROUP_CHAT_CREATION_XMA:"source:group_chat_event_creation_xma",EVENT_WITH_GROUP_CHAT_CREATION_WELCOME_MESSAGE:"source:group_chat_creation_welcome_message",IG_SOCIAL_CHANNEL_JOIN:"source:ig_social_channel_join",IG_SOCIAL_CHANNEL_REQUEST_TO_JOIN:"source:ig_social_channel_request_to_join",IG_SOCIAL_CHANNEL_WAITLIST:"source:ig_social_channel_waitlist",SUBSCRIPTIONS:"source:subscriptions",PRIVACY_PORTAL_BOT:"source:privacy_portal_bot",SIMPLE_NOTIFICATION_SERVICE:"source:simple_notification_service",MESSAGING_OFFER_ONE_WAY:"source:messaging_offer_one_way",MESSENGER_PUBLIC_CHATS:"source:messenger_public_chats",COMMENT_PRIVATE_MESSAGE:"source:comment:private_message",COMMENT_IN_THREAD_NOTIFICATION:"source:comment:in_thread_notification",COMMUNITY_CHAT_PARTICIPANT_VALIDATION:"source:cm:participant_validation",COMMUNITY_CHAT_RECALL_MESSAGE_ADMIN_TEXT:"source:cm:recall_msg_admin_text",GROUP_CHAT_PAUSED_STATE_UPDATE:"source:group_chat_paused_state_update",CM_THREAD_SUMMARIES:"source:cm_thread_summaries",USER_DELETION:"source:user_deletion",PUBLIC_CHAT_JOIN_VIA_THREAD_ID:"source:public_chat_join_via_thread_id",PUBLIC_CHAT_JOIN_VIA_INVITE_IN_THREAD_PREVIEW:"source:public_chat_join_via_INVITE_IN_THREAD_PREVIEW",PUBLIC_CHAT_INSPIRATION_HUB:"source:public_chat_inspiration_hub",MM_STALE_THREAD_FOLLOW_UP_MESSAGE:"source:mm_stale_thread_follow_up_message",MSGR_MM_IN_AM_WELCOME_MESSAGE:"source:msgr_mm_in_am_welcome_message",LEAD_ADS_OPT_IN_MESSAGING:"source:lead_ads_opt_in_messaging",LEAD_ADS_1P_AUTOMATION:"source:lead_ads_1p_automation",OTP_VERIFICATION:"otp_verification",LAUNCHMATE:"source:launchmate",ACTIONABLE_INSIGHTS_INTERNAL:"source:actionable_insights_internal",BM_GENAI_AGENT_HUMAN_TAKEOVER_TRIGGER:"source:bm_genai_agent_human_takeover_trigger",BM_GENAI_AGENT:"source:bm_genai_agent",BUSINESS_GENAI_AGENT_HANDOFF_OUTSIDE_CONVERSATION:"source:business_genai_agent_handoff_outside_conversation",META_AI_BUSINESS_AGENT_WA_CONSUMER:"source:meta_ai_business_agent_wa_consumer",META_AI_BUSINESS_AGENT_WA_BUSINESS:"source:mera_ai_business_agent_wa_business",MESSENGER_P2B_THREAD_DXMA:"source:messenger_p2b_thread_dxma",IG_P2B_THREAD_DXMA:"source:ig_p2b_thread_dxma",MORPHING_JOB:"source:morphing_job",GEO_MESSAGING_THREAD:"source:geo_messaging_thread",CW_ACCESS_REDUCTION:"source:cw_access_reduction",PROMO_ADS_EMAIL_CAPTURE:"source:promo_ads:email_capture",EARLY_ACCESS_BROADCAST_CHANNEL_POST:"source:early_access_broadcast_channel_post",SHARE_TO_BROADCAST_CHANNEL_POST:"source:share_to_broadcast_channel_post",CHANNELS_XPOSTING:"source:channels_xposting",CHANNELS_IN_PERSONAL_INBOX:"source:channels_in_personal_inbox",FB_LIVE_DXMA_INTO_BC:"source:fb_live_dxma_into_bc",CHANNEL_PROMPTS:"source:channel_prompts",BROADCAST_CHANNELS_FIRST_MESSAGE_SCREEN:"source:broadcast_channels_first_message_screen",SHARE_CHALLENGE_TO_CHANNEL:"source:share_challenge_to_channel",THREAD_SUBSCRIPTION:"source:thread_subscription",MESSENGER_MEMORIES:"source:messenger_memories",CREATOR_CUES_MEMBERSHIP_MILESTONE:"source:creator_cues_membership_milestone",CREATOR_CUES_ENGAGEMENT_REMINDER:"source:creator_cues_engagement_reminder",CREATOR_CUES_COLLECT_FEEDBACK:"source:creator_cues_collect_feedback",WORK_MEETINGS_CHAT:"source:work_meetings_chat",WORK_MEETINGS_TEMP_PARTICIPANT_SYNC:"source:work_meetings_chat_temp_participants",WORKING_TEAM:"source:working_team",FAN_RECOGNITION_DIRECT_MESSAGE_POST:"source:fan_recognition_direct_message_post",BIZ_MESSAGING_GENERAL:"source:biz_messaging:general",BIZ_MESSAGING_COMMERCE:"source:biz_messaging:commerce",BIZ_MESSAGING_P2M:"source:biz_messaging:p2m",BIZ_MESSAGING_P2P:"source:biz_messaging:p2p",BIZ_MESSAGING_BUYER_SMART_SUGGESTION:"source:biz_messaging:buyer_smart_suggestion",BIZ_MESSAGING_LEAD_GEN:"source:biz_messaging:lead_gen",PAGE_FEATURE_LIMIT_CUSTOMER_NOTIFICATION:"source:integrity:page_feature_limit_customer_notification",MAGICAL_MESSENGER:"source:magical_messenger",PROMODE_SEV_MIGRATION:"source:promode:S411221:page_mailbox_msg_migration",KEYWORD_CANNED_RESPONSE:"source:keyword_canned_response",PHONE_CONNECTION:"source:phone_connection",QR_CODE:"source:qr_code",CREATOR_MESSAGING_BIIM:"source:creator_messaging:biim",CREATOR_MESSAGING_FBM:"source:creator_messaging:fbm",CREATOR_MESSAGING_MBS_WEB:"source:creator_messaging:mbs_web",CREATOR_MESSAGING_INITIATION:"source:creator_messaging:initiation",CREATOR_MESSAGING_INITIATION_P2U:"source:creator_messaging:initiation:p2u",CREATOR_MESSAGING_INITIATION_P2P:"source:creator_messaging:initiation:p2p",BIZ_AI_P2P:"source:biz_messaging:biz_ai",MAYBE_CREATOR_MESSAGING_UNKNOWN_ATTRIBUTION:"source:creator_messaging:unknown_attribution",P2P_SELF_THREAD:"source:p2p:thread_with_self",SLIDE:"source:slide",CHAT_PILOT:"source:business_messaging:chat_pilot",IGD_WHATSAPP_NUMBER_SHARE_XMA:"igd_whatsapp_number_share_xma",OMNI_OPTIN_OFFER:"source:omni_optin_offer",MOBILE_HOME_VOICE_ASSISTANT:"source:mobile_home_voice_assistant",META_AI_MESSAGE_DOGFOODING_PREFILL_TOOL:"source:meta_ai_message_dogfooding_prefill_tool"});i.default=e}),66);
__d("bs_js_null_undefined",["bs_caml_option"],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e==null?e:t(e)}function l(e,t){if(e!=null)return t(e)}function s(e){if(e!==void 0)return n("bs_caml_option").valFromOption(e)}var u=s;i.bind=e,i.iter=l,i.fromOption=s,i.from_opt=u}),null);
__d("MercuryVanityIDMap.bs",["MercuryAssert","bs_js_null_undefined"],(function(t,n,r,o,a,i,l){"use strict";var e={},s={};function u(t){return r("bs_js_null_undefined").fromOption(e[t.toLowerCase()])}function c(e){return r("bs_js_null_undefined").fromOption(s[e])}function d(e){return s[e]!==void 0}function m(t){return e[t.toLowerCase()]!==void 0}function p(t,n){o("MercuryAssert").isParticipantID(n);var r=t.toLowerCase();e[r]=n,s[n]=r}l.vanityToID=e,l.idToVanity=s,l.getID=u,l.getVanity=c,l.hasID=d,l.hasVanity=m,l.set=p}),98);
__d("MessageSharedMediaIDStore.bs",[],(function(t,n,r,o,a,i){"use strict";var e={};function l(t,n){e[t]=n}function s(t){var n=e[t];return n!==void 0?n:null}i._store=e,i.setMessageIDForAttachmentID=l,i.getMessageIDForAttachmentID=s}),66);
__d("MessageThreadUnsendabilityStatus.bs",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e==null)return null;switch(e){case"can_unsend":return"can_unsend";case"deny_for_specific_ids":return"deny_for_specific_ids";case"deny_if_cannot_load_thread":return"deny_if_cannot_load_thread";case"deny_if_marketplace_thread":return"deny_if_marketplace_thread";case"deny_if_page_thread":return"deny_if_page_thread";case"deny_if_thread_contains_pau":return"deny_if_thread_contains_pau";default:return null}}i.fromNullableString=e}),66);
__d("MessageUnsendabilityStatus.bs",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e==null)return null;switch(e){case"can_unsend":return"can_unsend";case"deny_blob_attachment":return"deny_blob_attachment";case"deny_for_non_sender":return"deny_for_non_sender";case"deny_log_message":return"deny_log_message";case"deny_p2p_payment":return"deny_p2p_payment";case"deny_story_reaction":return"deny_story_reaction";case"deny_tombstone_message":return"deny_tombstone_message";default:return null}}i.fromNullableString=e}),66);
__d("MessagingGenericAdminTextType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ALOHA_AUTOCONNECT_INVITED:"aloha_autoconnect_invited",ALOHA_CONTACT_ADDED:"aloha_contact_added",ALOHA_CONTACT_ADDED_TO_ALOHA_PROXY_USER:"aloha_contact_added_to_aloha_proxy_user",ALOHA_CONTACT_REMOVED:"aloha_contact_removed",ALOHA_INVITE_OWNER_ACCEPT:"aloha_invite_owner_accept",ALOHA_INVITE_OWNER_DECLINE:"aloha_invite_owner_decline",ALOHA_MEDIA_ADDED:"aloha_media_added",ALOHA_MEDIA_SENT:"aloha_media_sent",ALOHA_VISUAL_MEDIA_SENT:"aloha_visual_media_sent",ALOHA_OWNER_INVITED:"aloha_owner_invited",ALOHA_PROXY_USER_NAME_SET:"aloha_proxy_user_name_set",ALOHA_PROXY_USER_PROFILE_PHOTO_SET:"aloha_proxy_user_profile_photo_set",ALOHA_WIFI_CREDENTIALS_SET:"aloha_wifi_credentials_set",ALOHA_USER_JOINED_CALL_ON_ALOHA:"aloha_user_joined_call_on_aloha",ALOHA_CALL_ENDED_ON_ALOHA:"aloha_call_ended_on_aloha",ALOHA_CALL_INVITE:"aloha_call_invite",BCMP_RESPOND_TO_PROJECT_BRIEF:"bcmp_respond_to_project_brief",BCMP_BRAND_INITIATED_MESSAGE:"bcmp_brand_initiated_message",BCMP_CAMPAIGN_INVITE:"bcmp_campaign_invite",MADE_POLL_VOTE:"made_poll_vote",GROUP_POLL:"group_poll",GROUP_POLL_DELETED:"group_poll_deleted",GENERIC_NEW_CONNECTION:"generic_new_connection",CONFIRM_FRIEND_REQUEST:"confirm_friend_request",THREAD_CUSTOMIZATION_UPSELL:"thread_customization_upsell",PHONE_CONTACT_UPLOAD:"phone_contact_upload",RELATIONSHIP_CREATED:"relationship_created",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_THEME_TO_LOCATION_THEME:"change_thread_theme_to_location_theme",CHANGE_THREAD_ICON:"change_thread_icon",CHANGE_THREAD_QUICK_REACTION:"change_thread_quick_reaction",GROUP_THREAD_CREATED:"group_thread_created",GROUP_THREAD_CREATED_WITH_AI_BOTS:"group_thread_created_with_ai_bots",GROUP_THREAD_CREATED_WITH_SPECTRA_XMAT:"group_thread_created_with_spectra_xmat",GROUP_THREAD_NAMED:"group_thread_named",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup",CHANGE_THREAD_NICKNAME:"change_thread_nickname",NOTIFY_GROUP_MAYORSHIP:"notify_group_mayorship",PROMPT_GROUP_MAYORSHIP_CUSTOMIZATION:"prompt_group_mayorship_customization",MESSAGE_COUNT_MILESTONE_MESSAGE:"message_count_milestone_message",BOT_THREAD_SUBSCRIPTION:"bot_thread_subscription",RTC_CALL_LOG:"rtc_call_log",RTC_PAGE_CALLBACK:"rtc_page_callback",RTC_INSTANT_VIDEO_LIFECYCLE:"rtc_instant_video_lifecycle",JOURNEY_PROMPT_BOT:"journey_prompt_bot",RIDE_ORDERED_MESSAGE:"ride_ordered_message",DESTINATION_ETA_MESSAGE:"destination_eta_message",RIDE_ARRIVED_MESSAGE:"ride_arrived_message",JOURNEY_PROMPT_NEW_SETUP:"journey_prompt_new_setup",LIGHTWEIGHT_EVENT_CREATE:"lightweight_event_create",LIGHTWEIGHT_EVENT_DELETE:"lightweight_event_delete",LIGHTWEIGHT_EVENT_NOTIFY:"lightweight_event_notify",LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:"lightweight_event_notify_before_event",LIGHTWEIGHT_EVENT_RSVP:"lightweight_event_rsvp",LIGHTWEIGHT_EVENT_UPDATE:"lightweight_event_update",LIGHTWEIGHT_EVENT_UPDATE_LOCATION:"lightweight_event_update_location",LIGHTWEIGHT_EVENT_UPDATE_TIME:"lightweight_event_update_time",LIGHTWEIGHT_EVENT_UPDATE_TITLE:"lightweight_event_update_title",SAFETY_LOCATION_REQUEST_SENT:"safety_location_request_sent",SAFETY_LOCATION_REQUEST_RESPONDED:"safety_location_request_responded",SAFETY_LOCATION_REQUEST_DENIED:"safety_location_request_denied",AD_MANAGE_MESSAGE:"ad_manage_message",ADMIN_TEXT_WITH_LINK:"admin_text_with_link",ADMIN_TEXT_WITH_RPC:"admin_text_with_rpc",AD_REPLY_MESSAGE:"ad_reply_message",TAGGED_PHOTO:"tagged_photo",GAME_SCORE:"game_score",INSTANT_GAME_UPDATE:"instant_game_update",INSTANT_GAME_BOT_INTRO:"instant_game_bot_intro",INSTANT_GAME_BOT_FEEDBACK:"instant_game_bot_feedback",INSTANT_GAME_BOT_MESSAGE_SUBSCRIPTION_MANAGEMENT:"instant_game_bot_message_subscription_management",INSTANT_GAME_WORLD_CUP_INTRO:"intant_games_world_cup_intro",INSTANT_GAME_CUSTOM_UPDATE_NUX_ADMIN_MESSAGE:"instant_game_custom_update_nux_admin_message",INSTANT_GAME_CUSTOM_UPDATE_MUTE_MANAGEMENT:"instant_game_custom_update_mute_management",INSTANT_GAME_BOT_PROMPT_GENERIC_ADMIN_MESSAGE:"instant_game_bot_prompt_generic_admin_message",INSTANT_GAME_OFFLINE_MATCH_INTRO:"instant_game_offline_match_intro",INSTANT_GAME_TOURNAMENT_REMINDER:"instant_game_tournament_reminder",MEDIA_SUBSCRIPTION_MANAGE:"media_subscription_manage",M_AI_SURVEY:"m_ai_survey",PHONE_NUMBER_LOOKUP_NOTICE:"phone_number_lookup_notice",MARK_AS_SHIPPED_UPDATE:"mark_as_shipped_update",MESSENGER_PRECHECKED_PLUGIN:"messenger_prechecked_plugin",MESSENGER_THREAD_RESURRECTION_NOTICE:"messenger_thread_resurrection_notice",MESSENGER_ENTRY_BY_MDOTME_LINK_WITH_REF:"messenger_entry_by_mdotme_link_with_ref",ADD_CONTACT:"add_contact",PRODUCT_INVOICE_RECEIPT_REJECTED:"product_invoice_receipt_rejected",PRODUCT_INVOICE_PAID:"product_invoice_paid",PRODUCT_INVOICE_VOIDED:"product_invoice_voided",PRODUCT_INVOICE_SHIPPED:"product_invoice_shipped",PRODUCT_INVOICE_PAYMENT_EXPIRED:"product_invoice_payment_expired",PRODUCT_INVOICE_RECEIPT_UPLOADED:"product_invoice_receipt_uploaded",PRODUCT_INVOICE_PAYMENT_PROCESSING:"product_invoice_payment_processing",PRODUCT_INVOICE_PAYMENT_FAILED:"product_invoice_payment_failed",PRODUCT_INVOICE_SHIPPING_UPDATE:"product_invoice_shipping_update",PRODUCT_INVOICE_STATUS_UPDATE:"product_invoice_status_update",PRODUCT_INVOICE_DUPLICATE_PAYMENT_REFUND_UPDATE:"product_invoice_duplicate_payment_refund_update",SELLER_NOT_ONBOARDED_FOR_PAYMENTS:"seller_not_onboarded_for_payments",CHANGE_JOINABLE_SETTING:"change_joinable_setting",CHANGE_THREAD_ADMINS:"change_thread_admins",CHANGE_THREAD_APPROVAL_MODE:"change_thread_approval_mode",CHANGE_THREAD_JOIN_REQUEST_APPROVAL_SETTING:"change_join_request_approval_setting",CAPY_SESSION_BEGIN:"capy_session_begin",CAPY_SESSION_BOT_BEGIN:"capy_session_bot_begin",CAPY_SESSION_END:"capy_session_end",CAPY_AGENT_JOIN:"capy_agent_join",CAPY_AGENT_DUMPED:"capy_agent_dumped",CAPY_SESSION_UNAVAILABLE:"capy_session_unavailable",CAPY_SESSION_WAIT_TIME:"capy_session_wait_time",CAPY_TRANSCRIPT_NOTIF:"capy_transcript_notif",CUSTOMER_SUPPORT_BOT_BEGIN:"customer_support_bot_begin",GROUP_SMS_PARTICIPANT_JOINED:"group_sms_participant_joined",GROUP_SMS_PARTICIPANT_CAPPED:"group_sms_participant_capped",SMS_PHONE_NUMBER_CHECK:"sms_phone_number_check",MESSENGER_BOT_REVIEW_SENT:"messenger_bot_review_sent",MESSENGER_CODE_SCAN:"messenger_code_scan",MESSENGER_LIVECHAT_PLUGIN_OPEN:"messenger_livechat_plugin_open",MESSENGER_LIVECHAT_PLUGIN_GUEST_END_CHAT:"messenger_livechat_plugin_guest_end_chat",MESSENGER_LIVECHAT_PLUGIN_GUEST_START_CHAT:"messenger_livechat_plugin_guest_start_chat",MESSENGER_LIVECHAT_PLUGIN_URL_UPDATE:"messenger_livechat_plugin_url_update",MESSENGER_LIVECHAT_PLUGIN_FB_USER_START_CHAT:"messenger_livechat_plugin_fb_user_start_chat",MESSENGER_LIVECHAT_PLUGIN_GUEST_USER_START_CHAT:"messanger_livechat_plugin_guest_user_start_chat",MN_ACCOUNT_LINKING_TEXT:"mn_account_linking_text",MN_ACCOUNT_UNLINKING_TEXT:"mn_account_unlinking_text",MN_ACCOUNT_FORCED_UNLINKING_TEXT:"mn_account_forced_unlinking_text",MN_REF_SEND_TEXT:"mn_ref_send_text",ADS_WELCOME_MSG:"ads_welcome_msg",THREAD_JOINABLE_PROMOTION_TEXT:"thread_joinable_promotion_text",PAGES_PLATFORM_REQUEST_TEXT:"pages_platform_request_text",MESSENGER_NEW_USER_GET_STARTED:"messenger_new_user_get_started",SMS_PHONE_NUMBER_TOGGLE:"sms_phone_number_toggle",PAGES_PLATFORM_CREATE_APPOINTMENT:"Pages_Platform_create_appointment",INTERNAL_CAREER_JOBSY_REACHOUT_CONNECTED:"internal_career_jobsy_reachout_connected",JOINABLE_GROUP_THREAD_CREATED:"joinable_group_thread_created",JOINABLE_ROOM_CREATED_WITH_CO_CREATORS:"joinable_room_created_with_co_creators",PAGES_PLATFORM_ACCEPT_APPOINTMENT:"pages_platform_accept_appointment",PAGES_PLATFORM_REFERRAL_CONFIRMED_APPOINTMENT:"pages_platform_referral_confirmed_appointment",PAGES_PLATFORM_DECLINE_APPOINTMENT:"pages_platform_decline_appointment",PAGES_PLATFORM_USER_CANCEL:"pages_platform_user_cancel",PAGES_PLATFORM_ADMIN_CANCEL:"pages_platform_admin_cancel",MESSENGER_OMNIM_CREATE_FLOW:"messenger_omnim_create_flow",MESSENGER_OMNIM_UPDATE_FLOW:"messenger_omnim_update_flow",MESSENGER_OMNIM_UPDATE_FLOW_STATE:"messenger_omnim_update_flow_state",MESSENGER_GROUP_DESCRITPION_UPDATE:"messenger_group_description_update",MESSENGER_GROUP_DESCRIPTION_UPDATE_V2:"messenger_group_description_update_v2",MESSENGER_EXTENSION_ADD_CART:"messenger_extension_add_cart",MESSENGER_EXTENSION_ADD_FAVORITE:"messenger_extension_add_favorite",MESSENGER_AD_CONTEXT:"messenger_ad_context",PAGES_PLATFORM_APPOINTMENT_REMINDER:"pages_platform_appointment_reminder",PAGES_PLATFORM_ADMIN_DECLINE:"pages_platform_admin_decline",POKE_RECEIVED:"poke_received",MESSENGER_STATION_SUBSCRIPTION:"messenger_station_subscription",MESSENGER_USER_ALSO_ON_MESSENGER:"messenger_user_also_on_messenger",MESSENGER_INBOX2_BIRTHDAY_BUMP:"messenger_inbox2_birthday_bump",MESSENGER_RESPOND_REMINDER_CONFIRMATION:"messenger_respond_reminder_confirmation",MESSENGER_RESPOND_REMINDER:"messenger_respond_reminder",MESSENGER_RESPOND_REMINDER_USER_CANCEL:"messenger_respond_reminder_user_cancel",MESSENGER_RESPOND_REMINDER_CANCEL_SUGGESTION:"messenger_respond_reminder_cancel_suggestion",STARTED_SHARING_VIDEO:"started_sharing_video",LIVE_VIDEO_CHAT:"live_video_chat",PARTICIPANT_JOINED_GROUP_CALL:"participant_joined_group_call",MESSENGER_ONLY_PHONE_JOINED_WITH_NEW_ACCOUNT:"messenger_only_phone_joined_with_new_account",PAGES_COMMERCE_PAYMENT_ENABLED:"pages_commerce_payment_enabled",GROUP_PAYMENT_REQUEST:"group_payment_request",P2P_CALL_ESCALATED_TO_GROUP_CALL:"p2p_call_escalated_to_group_call",INVITED_TO_ESCALATED_P2P_CALL:"invited_to_escalated_p2p_call",EVENT_UPCOMING:"event_upcoming",PAGES_VISITOR_POST_SEND_MESSAGE_UPSELL:"pages_visitor_post_send_message_upsell",PAGES_LOW_MESSAGE_RESPONSE_RATE:"pages_low_message_response_rate",PAGES_START_CALL:"pages_start_call",PARTIES_INVITE:"parties_invite",WORK_INVITE_CLAIMED:"work_invite_claimed",WORK_BOT_INSTALLED:"work_bot_installed",WORK_NEW_MULTI_COMPANY_CHAT:"work_new_multi_company_chat",PARTIAL_AUTOMATED_FEEDBACK:"partial_automated_feedback",P2P_PAYMENT_REQUEST_REMINDER:"p2p_payment_request_reminder",PHOTO_TAG_BUMP:"photo_tag_bump",MESSENGER_CALL_UPGRADE_LEGACY_CLIENT:"messenger_call_upgrade_legacy_client",DIRECTED_WALL_POST:"directed_wall_post",MESSENGER_CALL_LOG:"messenger_call_log",P2P_PAYMENT_MONEY_RAIN_GAME_ENTRY_POINT:"p2p_payment_money_rain_game_entry_point",MESSENGER_MONTAGE_MENTIONS:"messenger_montage_mentions",PAGES_MESSAGING_BLOCK_WORDS:"pages_messaging_block_words",SHIPPO_TRACKING_UPDATES:"shippo_tracking_updates",NEO_APPROVED_CONNECTION_ADDED:"neo_approved_connection_added",NEO_APPROVED_USERNAME:"neo_approved_username",NEO_PARENT_PROXY_CREATED:"neo_parent_proxy_created",NEO_PARENT_PROXY_FORWARDED:"neo_parent_proxy_forwarded",NEO_PARENT_UNLOCK_STICKER:"neo_parent_unlock_sticker",NEO_READ_ONLY_RECIPIENT:"neo_read_only_recipient",CHANGE_FAVORITE_COLOR:"change_favorite_color",MARKETPLACE_ITEM_CHANGED:"marketplace_item_changed",MARKETPLACE_ITEM_CHANGED_V2:"marketplace_item_changed_v2",LINK_CTA:"link_cta",PLAIN_TEXT:"plain_text",BUSINESS_INLINE_FEEDBACK_FORM_CONFIRMATION:"business_inline_feedback_form_confirmation",BUSINESS_FEEDBACK_FORM_CONFIRMATION:"business_feedback_form_confirmation",BUSINESS_INLINE_FEEDBACK_FORM_EXPIRING:"business_inline_feedback_form_expiring",BUSINESS_FEEDBACK_FORM_EXPIRING:"business_feedback_form_expiring",CUSTOMER_INFORMATION_FORM:"customer_information_form",SDR_BOT_SESSION_BEGIN:"sdr_bot_session_begin",SERVICES_VERTICAL_REDEEMED_REFERRAL:"services_vertical_redeemed_referral",SERVICES_VERTICAL_OPT_OUT_REQUESTS:"services_vertical_opt_out_requests",SERVICES_VERTICAL_OPT_OUT_REQUESTS_SUCCESS:"services_vertical_opt_out_requests_success",SERVICES_VERTICAL_LEAD_GEN_SURVEY:"services_vertical_lead_gen_survey",SERVICES_VERTICAL_LEAD_GEN_SURVEY_EDIT:"services_vertical_lead_gen_survey_edit",SBG_PROACTIVE_CHAT_OPT_IN:"sbg_proactive_chat_opt_in",PAGES_MARK_AS_PAID:"pages_mark_as_paid",MIGRATED_TO_WORKPLACE:"migrated_to_workplace",MESSENGER_GROUP_EVENT_STATUS_UPDATE:"messenger_group_event_status_update",NEO_APPROVED_USER_REMOVED_FROM_GROUP:"neo_approved_user_removed_from_group",LIVE_CHAT_SUPPORT_AGENT_JOIN:"live_chat_support_agent_join",LIVE_CHAT_SUPPORT_SESSION_BEGIN:"live_chat_support_session_begin",LIVE_CHAT_SUPPORT_SESSION_END:"live_chat_support_session_end",LIVE_CHAT_PRIVACY_NOTICE:"live_chat_privacy_notice",MONTAGE_DIRECT_KEEP:"montage_direct_keep",MONTAGE_DIRECT_EXPIRE:"montage_direct_expire",CHSBOT_CONVERSATION_ENDED:"chsbot_conversation_ended",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_BEGIN:"chsbot_live_chat_support_agent_begin",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_END:"chsbot_live_chat_support_agent_end",CHSBOT_LIVE_PHONE_SUPPORT_AGENT_CALLING:"chsbot_live_phone_support_agent_calling",CHSBOT_SUPPORT_REQUESTED:"chsbot_support_requested",SUPPORT_DIALOG_CTA:"support_dialog_cta",SUPPORT_BOT_CHAT_MESSAGES_MACHINE_TRANSLATED:"support_bot_chat_messages_machine_translated",SUPPORT_BOT_SESSION_AGENT_JOIN:"support_bot_session_agent_join",SUPPORT_BOT_SESSION_AGENT_LEAVE:"support_bot_session_agent_leave",SUPPORT_BOT_SAFTEY_NET_QUEUE_TRANSFER:"support_bot_saftey_net_queue_transfer",SUPPORT_BOT_SESSION_END:"support_bot_session_end",SUPPORT_BOT_CALL_BEGIN:"support_bot_call_begin",SUPPORT_BOT_CALL_END:"support_bot_call_end",SUPPORT_BOT_INITIATE_CONVERSATION:"support_bot_initiate_conversation",IG_SUPPORT_BOT_INITIATE_CONVERSATION:"ig_support_bot_initiate_conversation",AGENT_CONNECT_ASYNC_CHAT_CASE_TRANSFER_WAIT_TIME:"agent_connect_async_chat_case_transfer_wait_time",MESSENGER_SUBSCRIBE_TO_UPDATES:"messenger_subscribe_to_updates",MESSENGER_UNSUBSCRIBE_FROM_UPDATES:"messenger_unsubscribe_from_updates",MESSENGER_BLOCK_MESSAGES:"messenger_block_messages",MESSENGER_UNBLOCK_MESSAGES:"messenger_unblock_messages",MESSENGER_TURN_ON_MESSAGES:"messenger_turn_on_messages",MESSENGER_TURN_OFF_MESSAGES:"messenger_turn_off_messages",THANKS_FOR_SHARING_MESSAGE_CONTEXT:"thanks_for_sharing_message_context",GROUP_ADMIN_MODEL_NUX:"group_admin_model_nux",MESSENGER_PAYMENT_INCENTIVE_INFO:"messenger_payment_incentive_info",MESSENGER_PLATFORM_PERSONA:"messenger_platform_persona",MESSENGER_GROUP_SYNC_OPT_IN:"messenger_group_sync_opt_in",MESSENGER_GROUP_SYNC_OPT_OUT:"messenger_group_sync_opt_out",MENTORSHIP_MATCH:"mentorship_match",MENTORSHIP_PROGRAM_MATCH:"mentorship_program_match",MENTORSHIP_PROGRAM_CONTINUE:"mentorship_program_continue",MENTORSHIP_PROGRAM_LEAVE:"mentorship_program_leave",MENTORSHIP_PROGRAM_LEAVE_PROMPT:"mentorship_program_leave_prompt",MENTORSHIP_CURRICULUM_STEP:"mentorship_curriculum_step",MENTORSHIP_DISCUSSION_TOPIC_SET_PROMPT:"mentorship_discussion_topic_set_prompt",MENTORSHIP_CHECK_IN_REMINDER:"mentorship_check_in_reminder",MENTORSHIP_DISCLAIMER:"mentorship_disclaimer",PAGES_CALL_DEFLECTION_UPSELL:"pages_call_deflection_upsell",RTC_PHOTOBOOTH:"rtc_photobooth",DELAYED_PHONE_NUMBER_MATCH:"delayed_phone_number_match",AUTOMATIC_TRANSLATION_ENABLED:"automatic_translation_enabled",AUTOMATIC_TRANSLATION_AUTO_ENABLED:"automatic_translation_auto_enabled",AUTOMATIC_TRANSLATION_DISABLED:"automatic_translation_disabled",AUTOMATIC_TRANSCRIPTION_ENABLED:"automatic_transcription_enabled",AUTOMATIC_TRANSCRIPTION_DISABLED:"automatic_transcription_disabled",MESSENGER_ROOM_MIGRATION:"messenger_room_migration",PAGE_ADMIN_RESPONSIVENESS_REMINDER:"page_admin_responsiveness_reminder",MESSENGER_GROWTH_GENERIC_ADMIN_TEXT:"messenger_growth_generic_admin_text",MESSENGER_TALK_TO_YOUR_MOM_REMINDER:"messenger_talk_to_your_mom_reminder",PAYMENT_INCENTIVE_RECEIVED:"payment_incentive_received",PAGES_THREAD_REMINDER:"pages_thread_reminder",MESSENGER_PLATFORM_PERSONA_LEAVE_THREAD:"messenger_platform_persona_leave_thread",STORY_REPLY_CONTEXT:"story_reply_context",PAGES_AUTOMATED_RESPONSE_RECOMMENDATION:"pages_automated_response_recommendation",PAGES_AUTOMATED_RESPONSE_SMART_REPLY:"pages_automated_response_smart_reply",PAGES_AUTOMATED_RESPONSE_JOB_APPLICATION:"pages_automated_response_job_APPLICATION",MESSENGER_ICEBREAKER_VOTE_CAST:"messenger_icebreaker_vote_cast",PARTIES_PRESENCE:"parties_presence",PAGE_THREAD_ADMIN_ASSIGNMENT_TEXT:"page_thread_admin_assignment_text",RTC_INSTANT_ACTIVITY_LIFECYCLE:"rtc_instant_activity_lifecycle",RTC_VIDEO_CHAT_LINK_LIFECYCLE:"rtc_video_chat_link_lifecycle",RTC_REDUCE_CALL_QUALITY:"rtc_reduce_call_quality",SHIBA_MOCK_BOT_RESTART_CHAT_TEXT:"shiba_mock_bot_restart_chat_text",MARKETPLACE_RENTALS_INITIAL_MESSAGE:"marketplace_rentals_initial_message",MARKETPLACE_RENTALS_SENDER_INFO:"marketplace_rentals_sender_info",PAGES_MARK_AS_PAID_NEW:"pages_mark_as_paid_new",MESSENGER_BUSINESS_REPORT_SPAM:"messenger_business_report_spam",MESSENGER_BUSINESS_REPORT_INAPPROPRIATE:"messenger_business_report_inappropriate",MESSENGER_BUSINESS_REPORT_OTHER_ABUSE:"messenger_business_report_other_abuse",FRIENDED_IN_MESSENGER:"friended_in_messenger",MARKETPLACE_REPLY_REMINDER:"marketplace_reply_reminder",VOD_CONVERSATION_SEND_MESSAGE:"vod_conversation_send_message",MESSENGER_SHARED_WITH:"messenger_shared_with",PAGE_THREAD_ACTION_SYSTEM_ADD_DETAILS:"page_thread_action_system_add_details",PAGE_USER_MESSENGER_CONNECTED:"page_user_messenger_connected",FB_ONLY_BOT_TEXT:"fb_only_bot_text",MESSENGER_SCHOOL_CHAT_AUTO_ADD_USER:"messenger_school_chat_auto_add_user",LIVING_ROOM_MESSAGE:"living_room_message",MESSENGER_FRIENDVERSARY_SHARED_TO:"messenger_friendversary_shared_to",PARENT_APPROVED_NEW_FRIEND_CODE:"parent_approved_new_friend_code",CHAT_ENTICEMENT_JOINED:"chat_enticement_joined",EVENT_CONFIRMED_GOING:"event_confirmed_going",CHEX_ORDER_STATE_CHANGED:"chex_order_state_changed",MESSENGER_CARE_PII_PRIVACY_INTRO:"messenger_care_pii_privacy_intro",MESSENGER_CARE_AUTH_LINKS_REF:"messenger_care_auth_links_ref",MARKETPLACE_DISCOUNTED_PRICE_EXPIRING:"marketplace_discounted_price_expiring",GEMSTONE_THREAD_CREATION:"gemstone_thread_creation",GEMSTONE_FB_MESSENGER_THREAD_CREATION:"gemstone_fb_messenger_thread_creation",GEMSTONE_CONTACT_SHARE_UPSELL:"gemstone_contact_share_upsell",GEMSTONE_MUTUAL_READY_TO_MEET:"gemstone_mutual_ready_to_meet",GEMSTONE_ADD_READY_TO_MEET_SINGLE_SIDED:"gemstone_add_ready_to_meet_single_sided",GEMSTONE_RECEIVED_COMPLIMENTS:"gemstone_received_compliments",GEMSTONE_REMOVE_READY_TO_MEET_SINGLE_SIDED:"gemstone_remove_ready_to_meet_single_sided",GEMSTONE_SEND_COMPLIMENTS_PM_TRIGGER:"gemstone_send_compliments_pm_trigger",GEMSTONE_SOCIAL_BADGE_PM_TRIGGER:"gemstone_social_badge_pm_trigger",GEMSTONE_STALE_THREAD:"gemstone_stale_thread",GEMSTONE_WE_MET_PROMPT:"gemstone_we_met_prompt",MNF_LIGHTWEIGHT_LIKE:"mnf_lightweight_like",WORKCHAT_REMINDER_ADMIN_TEXT:"workchat_reminder_admin_text",WORKCHAT_REMINDER_CREATION_FAILURE:"workchat_reminder_creation_failure",WORKCHAT_REMINDER_LINK_CTA:"workchat_reminder_link_cta",WORKCHAT_REMINDER_WITHOUT_MESSAGE:"workchat_reminder_without_message",WORKCHAT_RECIPIENT_ON_DND_WARNING:"workchat_recipient_on_dnd_warning",WORKCHAT_PIN_MESSAGE_ACTION:"workchat_pin_message_action",WORKCHAT_UNPIN_MESSAGE_ACTION:"workchat_unpin_message_action",CHATS_IN_GROUPS_PRE_MIGRATION:"chats_in_groups_pre_migration",CHATS_IN_GROUPS_MIGRATION:"chats_in_groups_migration",POST_SHARED_FROM_GROUP:"post_shared_from_group",WORKCHAT_ACTIVATION_WELCOME_MESSAGE:"workchat_activation_welcome_message",WORKCHAT_SELF_CHAT_INITIATOR:"workchat_self_chat_initiator",WORKCHAT_ACTIVATION_UNCLAIMED_ACCOUNT_WELCOME_MESSAGE:"workchat_activation_unclaimed_account_welcome_message",MARKETPLACE_ASSISTANT_SUPPORT_CASE_START:"marketplace_assistant_support_case_start",MARKETPLACE_ASSISTANT_SUPPORT_CASE_END:"marketplace_assistant_support_case_end",SECURITY_HUB_AGENT_LEFT:"security_hub_agent_left",SECURITY_HUB_AGENT_JOINED:"security_hub_agent_joined",NEO_SEND_DGG:"neo_send_dgg",SECURITY_HUB_AGENT_REASSIGNED:"security_hub_agent_reassigned",C4G_MESSAGE_REMOVED:"c4g_message_removed",C4G_NEW_VIDEO_ROOM_CREATED:"c4g_new_video_room_created",C4G_VIDEO_ROOM_ENDED:"c4g_video_room_ended",C4G_VIDEO_ROOM_PARTICIPANT_JOIN:"c4g_video_room_participant_join",C4G_PARTICIPANT_JOIN:"c4g_participant_join",C4G_PARTICIPANT_LEFT:"c4g_participant_left",NEO_SHARE_VIRTUAL_PET:"neo_share_virtual_pet",NEO_SHARE_ASYNC_GAME_SCORE:"neo_share_async_game_score",NEO_SHARE_ASYNC_GAME_OTHER:"neo_share_async_game_other",NEO_SHARE_PROFILE_PHOTO_UPDATE:"neo_share_profile_photo_update",NEO_UPDATE_EMOJI_STATUS:"neo_update_emoji_status",NEO_NOTIFY_PARENT_EMOJI_STATUS:"neo_notify_parent_emoji_status",NEO_BEACON_QUICK_REACTION:"neo_beacon_quick_reaction",NEO_BEACON_QUICK_REPLY:"neo_beacon_quick_reply",THREAD_THEME_DEPRECATION:"thread_theme_deprecation",MAKETPLACE_SELLER_REQUEST_RATING:"maketplace_seller_request_rating",PRODUCT_INVOICE_CREATED:"PRODUCT_INVOICE_CREATED",REJOINED_GROUP_THREAD_AFTER_ERROR:"rejoined_group_thread_after_error",IG_DIRECT_CALL_LOG:"ig_direct_call_log",PAYMENT_REQUEST_REMINDER:"payment_request_reminder",MARKETPLACE_BSG_CONTACT_SELLER:"marketplace_bsg_contact_seller",MARKETPLACE_TXN_QUESTION:"marketplace_txn_question",MARKETPLACE_BUYER_TXN_QUESTION:"marketplace_buyer_txn_question",WORKCHAT_DETACH_SYNCED_GROUP_CHAT:"workchat_detach_synced_group_chat",CHAT_PLUGIN_GUEST_EXPIRATION:"chat_plugin_guest_expiration",MARKETPLACE_FOLLOW_SUGGESTION:"marketplace_follow_suggestion",CIP_REFERRAL_MESSAGE:"cip_referral_message",FB_LOGIN_B2P:"fb_login_b2p",EO_SRT_HELPDESK_TECHNICIAN_JOINED:"eo_srt_helpdesk_technician_joined",EO_SRT_HELPDESK_TECHNICIAN_LEFT:"eo_srt_helpdesk_technician_left",COMMUNITY_CHATS_DESCRITPION_UPDATE:"community_chats_description_update",COMMUNITY_CHATS_THREAD_CREATION:"community_chats_thread_creation",COMMUNITY_MESSAGING_POLL_DELETION:"community_messaging_poll_deletion",MARKETPLACE_MEETING_PLAN_DELETED:"marketplace_meeting_plan_deleted",MARKETPLACE_MEETING_PLAN_SHARED:"marketplace_meeting_plan_shared",MARKETPLACE_COMMERCE_POST_PRIVATE_REPLY:"marketplace_commerce_post_private_reply",PRIVATE_REPLY_ADMIN_TEXT_LOG:"private_reply_admin_text_log",MESSAGE_REQUEST_ACCEPTED_ADMIN_TEXT_LOG:"message_request_accepted_admin_text_log",CHAT_PLUGIN_UPGRADE_PAGE_SIDE:"chat_plugin_upgrade_page_side",MARKETPLACE_NEW_THREAD:"marketplace_new_thread",MARKETPLACE_NEW_THREAD_V2:"marketplace_new_thread_v2",MARKETPLACE_EPD_NEW_THREAD:"marketplace_epd_new_thread",MARKETPLACE_JOBS_NEW_THREAD:"marketplace_jobs_new_thread",PRODUCT_INVOICE_ORDER_TOTAL_AMOUNT_EDITED:"product_invoice_order_total_amount_edited",PRODUCT_INVOICE_ORDER_NOTES_EDITED:"product_invoice_order_notes_edited",PRODUCT_INVOICE_PAYMENT_DISPUTED:"product_invoice_payment_disputed",SHH_MODE_SCREENSHOT:"shh_mode_screenshot",SHH_MODE_REPLAY:"SHH_MODE_REPLAY",MESSAGING_REACHABILITY_ONE_WAY_SEND:"messaging_reachability_one_way_send",NEO_LINK_SHARING:"neo_link_sharing",MARKETPLACE_REPLY_REMINDER_1_TO_1_THREAD:"marketplace_reply_reminder_1_to_1_thread",MARKETPLACE_COMMENT_TO_MESSAGING:"marketplace_comment_to_messaging",ADULT_MINOR_INTERACTION_ONE_WAY_SEND:"adult_minor_interaction_one_way_send",SHARED_ITEM_XMA:"shared_item_xma",MESSENGER_ROOMS_THREAD_CREATED:"messenger_rooms_thread_created_xmat",MESSENGER_ROOMS_THREAD_PARTICIPANT_JOINED:"messenger_rooms_thread_participant_joined_xmat",MESSENGER_ROOMS_THREAD_PARTICIPANT_LEFT:"messenger_rooms_thread_participant_left_xmat",PAYMENTS_CARE_B2C_MESSENGER_ESCALATION_XMAT:"payments_care_b2c_messenger_escalation_xmat",REACTION_LOG:"reaction_log",GAMING_SQUADS_ADMIN_XMAT:"gaming_squads_admin_xmat",MAGIC_WORDS:"magic_words",PIN_MESSAGES_V2:"pin_messages_v2",UNPIN_MESSAGES_V2:"unpin_messages_v2",FEATURE_MESSAGES_V2:"feature_messages_v2",REMOVE_FEATURED_MESSAGES_V2:"remove_featured_messages_v2",PAY_REFERRAL_INVITATION_SENT_XMAT:"pay_referral_invitation_sent_xmat",ICEBREAKER_SENT_BY_MISTAKE:"icebreaker_sent_by_mistake",EARLY_THREAD_CLOSE_OUT_SENT_BY_MISTAKE:"early_thread_close_out_sent_by_mistake",NOTIFICATION_MESSAGES:"notification_messages",WORKCHAT_BOT_LEFT_MISSING_PERMISSION:"workchat_bot_left_missing_permission",LIVE_PRIVATE_REPLY_ADMIN_TEXT_LOG:"live_private_reply_admin_text_log",COLLAB_COLLECTION_ADMIN_TEXT_LOG:"collab_collection_admin_text_log",BIZ_INBOX_CSAT_SURVEY_CUSTOMER_SUBMIT_NOTIFY:"biz_inbox_csat_survey_customer_submit_notify",JOINABLE_GROUP_LINK_MODE_CHANGE:"joinable_group_link_mode_change",JOINABLE_GROUP_LINK_RESET:"joinable_group_link_reset",VOLUNTEERING_OPT_IN_MESSAGES:"volunteering_opt_in_messages",MESSENGER_SILENT_MESSAGE:"messenger_silent_message",TOGGLE_IN_THREAD_TRANSLATION:"toggle_in_thread_translation",BIZ_INBOX_ASSIGN_ADMIN:"biz_inbox_assign_admin",BIZ_INBOX_ADMIN_ASSIGNMENT_NOTE:"biz_inbox_admin_assignment_note",LAST_ADMIN_LEFT:"last_admin_left",CM_THREAD_HISTORY_TRUNCATED:"cm_thread_history_truncated",EVENT_THREAD_CREATION:"event_thread_creation",MESSENGER_P2B_PRIVACY_DISCLOSURE:"messenger_p2b_privacy_disclosure",HELPDESK_CHAT_ADMIN_MESSAGE:"helpdesk_chat_admin_message",SHOPS_QA_BUYER_PRIVATE_REPLY_MANAGE:"shops_qa_buyer_private_reply_manage",BIZ_INBOX_OMNICHANNEL_EMAIL_SENT:"biz_inbox_omnichannel_email_sent",BIZ_INBOX_FORM_BUILDER_SUBMIT_NOTIFY:"biz_inbox_form_builder_submit_notify",BCP_CREATOR_ACCEPTS_PROJECT_INVITE:"bcp_creator_accepts_project_invite",IG_ME_ADMIN_TEXT_LOG:"ig_me_admin_text_log",BCP_AGENCY_INVITES_CREATOR_TO_PROJECT:"bcp_agency_invites_creator_to_project",BCP_BRAND_UPDATES_PROJECT_DETAILS:"bcp_brand_updates_project_details",PARTNERSHIP_MESSAGING_AFFILIATE_SELLER_INITIATION:"partnership_messaging_affiliate_seller_initiation",BCP_CREATOR_ATTACHES_MEDIA_TO_PROJECT:"bcp_creator_attaches_media_to_project",BCP_CREATOR_COMPLETES_PROJECT:"bcp_creator_completes_project",BCP_BRAND_INITIATED_PAYMENT_FOR_PROJECT:"bcp_brand_initiated_payment_for_project",BCP_BRAND_REMOVES_CREATOR_FROM_PROJECT:"bcp_brand_removes_creator_from_project",MESSENGER_FAQ_RESPONSE_RESOLUTION_SIGNAL_COLLECTION_XMAT:"messenger_faq_response_resolution_signal_collection_xmat",DEFAULT_ICEBREAKER_ADMIN_TEXT_LOG:"default_icebreaker_admin_text_log",BIZ_INBOX_AUTO_ASSIGNED_ADMIN:"biz_inbox_auto_assigned_admin",GROUP_CHALLENGE_PARTICIPANT_ADD_ACTIVITY:"group_challenge_participant_add_activity",IG_HANGOUTS_CANVAS_CONTENT_UPDATE_ACTION_LOG:"ig_hangouts_canvas_content_update_action_log",BUSINESS_CALLING_PROMOTION_ADMIN_TEXT_LOG:"business_calling_promotion_admin_text_log",NOTIFY_ONE_HOUR_BEFORE_CSC_END:"notify_one_hour_before_csc_end",BCP_BRAND_PAID_CREATOR_OFFSITE_FOR_PROJECT:"bcp_brand_paid_creator_offsite_for_project",SERVICE_BOOKING_LEGAL_DISCLAIMER_ADMIN_TEXT:"service_booking_legal_disclaimer_admin_text",BMC_SELLER_REVIEW_POST_SUBMISSION_TEXT:"bmc_seller_review_post_submission_text",ADMIN_REMOVE_MESSAGE:"admin_remove_message",CM_HOWDY_BOT:"cm_howdy_bot",SERVICE_APPOINTMENT_REMINDER:"service_appointment_reminder",GROUPS_ADMOD_SHARE_ADMIN_ACTION:"groups_admod_share_admin_action",MESSENGER_CART_ACTION:"messenger_cart_action",MESSAGING_OFFERS_REMINDER:"messaging_offers_reminder",IG_HANGOUTS_CANVAS_BUZZ_NOTIFY_ACTION_LOG:"ig_hangouts_canvas_buzz_notify_action_log",ADMIN_MESSAGE_PUBLIC_CHAT_CREATION:"admin_message_public_chat_creation",LIVE_MESSAGE_OPT_IN:"live_message_opt_in",DISABLE_VANISH_MODE_ADMIN_TEXT_LOG:"disable_vanish_mode_admin_text_log",LIVE_MESSAGE_OPT_OUT:"live_message_opt_out",MCOM_CUSTOMER_PAYMENT_INVOICE_MEDIA_MESSAGE_DETECTION_CREATION:"mcom_customer_payment_invoice_media_message_detection_creation",MCOM_CUSTOMER_PAYMENT_INVOICE_MEDIA_MESSAGE_DETECTION_CANCELATION:"mcom_customer_payment_invoice_media_message_detection_cancelation",MCOM_MERCHANT_PAYMENT_INVOICE_MEDIA_MESSAGE_DETECTION_CREATION:"mcom_merchant_payment_invoice_media_message_detection_creation",VR_REQUEST_THREAD_ACCEPT:"vr_request_thread_accept",BIZ_INBOX_AUTOMATION_NONPROFITS_SUPPORTER_ACTIVITY:"biz_inbox_automation_nonprofits_supporter_activity",BIZ_INBOX_AUTOMATION_NONPROFITS_PAGE_ADMIN:"biz_inbox_automation_nonprofits_page_admin",GROUP_SET_WELCOME_MESSAGE_MEDIA:"group_set_welcome_message_media",GROUP_INVITE_VIA_MESSENGER:"group_invite_via_messenger",GROUP_INVITE_PENDING_VIA_MESSENGER:"group_invite_pending_via_messenger",EVENT_RSVP_UPDATED:"event_rsvp_updated",EVENT_RSVP_UPDATED_BY_ADMOD:"event_rsvp_updated_by_admod",VR_REQUEST_GROUP_THREAD_ACCEPT:"vr_request_group_thread_accept",CHANGE_THREAD_IMAGE:"change_thread_image",PROMPT_CREATION:"prompt_creation",PROMPT_V2_CREATION:"prompt_v2_creation",ROLL_CALL_RESPONSE:"roll_call_response",IG_BROADCAST_CHAT_COLLABORATOR_JOIN_OR_LEAVE:"ig_broadcast_chat_collaborator_join_or_leave",VR_GROUPS_CHANGED_PRIVATE_SPACE:"vr_groups_changed_private_space",VR_GROUPS_CHANGED_REQUIRE_APPROVAL_TO_JOIN:"vr_groups_changed_require_approval_to_join",VR_GROUPS_CHANGED_WHAT_WE_PLAY:"vr_groups_changed_what_we_play",VR_GROUPS_TRAVELED_TO_PRIVATE_SPACE:"vr_groups_traveled_to_private_space",VR_GROUPS_CREATED_GROUP:"vr_groups_created_group",VR_GROUPS_JOINED_GROUP_CALL:"vr_groups_joined_group_call",VR_GROUPS_LEFT_GROUP_CALL:"vr_groups_left_group_call",VR_GROUPS_INVITED_DESTINATION:"vr_groups_invited_destination",VR_GROUPS_INVITED_DESTINATION_DCT:"vr_groups_invited_destination_dct",VR_APPLICATION_INVITED_DESTINATION_INVITE_UPDATED:"vr_application_invited_destination_invite_udpated",VR_GROUPS_TRAVELED_DESTINATION:"vr_groups_traveled_destination",IG_BROADCAST_CHAT_DECLINE_COLLABORATOR_INVITE:"ig_broadcast_chat_decline_collaborator_invite",REELS_TOGETHER_ENDED:"reels_together_ended",SCHEDULED_CALL:"scheduled_call",DEPRECATE_THREAD_QUICK_REACTION_OPTION:"deprecate_thread_quick_reaction_option",TOGGLE_READ_RECEIPTS:"toggle_read_receipts",EVENT_THREAD_REMOVAL:"event_thread_removal",EVENT_ENDED:"event_ended",EVENT_STARTING:"event_starting",INSTANT_GAME_DYNAMIC_CUSTOM_UPDATE:"instant_game_dynamic_custom_update",P2M_NOTIFICATION_HUB:"p2m_notification_hub",GROUP_CHAT_PAUSED:"group_chat_paused",GROUP_CHAT_UNPAUSED:"group_chat_unpaused",GROUP_WELCOME_PROMPT:"group_welcome_prompt",MEMBER_ONBOARDING_PROMPT:"member_onboarding_prompt",AUTO_END_SOCIAL_CHANNEL:"auto_end_social_channel",AUTO_END_BROADCAST_CHANNEL:"auto_end_broadcast_channel",BCP_CREATOR_ACCEPTS_UGC_REQUEST_FROM_BRAND:"bcp_creator_accepts_ugc_request_from_brand",FANTASY_GAMES:"fantasy_games",GROUP_THREAD_ROLE_JOIN_OR_LEAVE:"group_thread_role_join_or_leave",FANTASY_GAMES_RESULTS:"fantasy_games_results",EVENT_TOMORROW:"event_tomorrow",DECLINE_ROLE_INVITE:"decline_role_invite",BCP_BRAND_MARKS_CREATOR_CHALLENGE_SUBMISSION_AS_WINNER:"bcp_brand_marks_creator_challenge_submission_as_winner",EXPLORE_WITH_FRIENDS_INVITE:"explore_with_friends_invite",CM_GROUP_UPDATES_BOT:"cm_group_updates_bot",SHARED_ALBUM_ADDITION:"shared_album_addition",WORKROOMS_COLLAB_NOTIFS:"workrooms_collab_notifs",SHARED_ALBUM_CONTENT_REMOVAL:"shared_album_content_removal",SHARED_ALBUM_RENAME:"shared_album_rename",SHARED_ALBUM_DELETE:"shared_album_delete",SHARED_ALBUM_XMA:"shared_album_xma",UPDATE_E2EE_PAYMENTS_XMA:"update_e2ee_payments_xma",IG_CHANNELS_MESSAGE_TAKEDOWN:"ig_channels_message_takedown",IG_CHANNELS_MESSAGE_TAKEDOWN_V2:"ig_channels_message_takedown_v2",CHANGE_DISAPPEARING_SETTING:"change_disappearing_setting",COMMUNITY_CHATS_ADMOD_REMOVE_MESSAGE:"community_chats_admod_remove_message",COMMUNITY_CHATS_CONTENT_DISCLAIMER:"community_chats_content_disclaimer",IG_EVENT_THREAD_CREATED:"ig_event_thread_created",COMMUNITY_CHATS_SUB_THREAD_CREATION:"community_chats_sub_thread_creation",COMMUNITY_CHATS_THREAD_CREATED_FROM_POLL:"community_chats_thread_created_from_poll",BIZ_INBOX_DETECTED_OUTCOMES_ACTIVITY:"biz_inbox_detected_outcomes_activity",TOGGLE_DM_SETTINGS:"toggle_dm_settings",BM_GEN_AI_CONSUMER_DISCLAIMER:"bm_gen_ai_consumer_disclaimer",BM_GEN_AI_BUSINESS_DISCLAIMER:"bm_gen_ai_business_disclaimer",CHANNEL_COMMENT_STATUS:"channel_comment_status",MM_STALE_THREAD_ADMIN_TEXT:"mm_stale_thread_admin_text",FANTASY_GAMES_NEW_THREAD:"fantasy_games_new_thread",GEN_AI_ERROR_MESSAGE:"gen_ai_error_message",GEN_AI_NUX_INLINE:"gen_ai_nux_inline",GEN_AI_NUX_TRAINING_INLINE:"gen_ai_nux_training_inline",GEN_AI_CONTEXT_UPDATE:"gen_ai_context_update",BM_GEN_AI_AGENT_STOPPED_RESPONDING_NOTIF:"bm_gen_ai_agent_stopped_responding_notif",BIZ_AI_CONVERSATIONAL_KNOWLEDGE_GATHERING_CONSUMER_ADMIN_TEXT:"biz_ai_conversational_knowledge_gathering_consumer_admin_text",BIZ_AI_RE_ENABLE_AI_ADMIN_TEXT:"biz_ai_re_enable_ai_admin_text",BM_GEN_AI_AGENT_STOPPED_RESPONDING_CONSUMER_TEXT:"bm_gen_ai_agent_stopped_responding_consumer_text",EPHEMERAL_SCREENSHOT:"ephemeral_screenshot",MESSENGER_AUTO_MARK_AS_LEAD:"messenger_auto_mark_as_lead",MESSENGER_LEAD_FORM_RECEIVED:"messenger_lead_form_received",IG_SOCIAL_CHANNELS_DIRECT_INVITE_RECEIVED:"ig_social_channels_direct_invite_received",REMOVE_ROLE_INVITE:"remove_role_invite",REQUEST_TO_CALL_AGENT_UPDATE:"request_to_call_agent_update",CHANGE_THREAD_GEO_METADATA:"change_thread_geo_metadata",XS_ADVERTISER_GEN_AI_DISCLAIMER:"xs_advertiser_gen_ai_disclaimer",XS_ADVERTISER_GEN_AI_BEGIN_BOT:"xs_advertiser_gen_ai_begin_bot",IG_EVENT_DXMA_CREATE_OR_UPDATE:"ig_event_dxma_create_or_update",MARKETING_PRO_SESSION_BOT_BEGIN:"marketing_pro_session_bot_begin",MARKETING_PRO_SESSION_BOT_BEGIN_EPD:"marketing_pro_session_bot_begin_epd",SUPPORT_PRO_SESSION_BOT_BEGIN:"support_pro_session_bot_begin",COMMUNITY_CHATS_RECURRING_PROMPT_STOPPED:"community_chats_recurring_prompt_stopped",INSTANT_GAME_ENCRYPTED_DYNAMIC_CUSTOM_UPDATE:"instant_game_encrypted_dynamic_custom_update",MESSENGER_THREAD_SUBS_ADD_SUBSCRIPTION:"messenger_thread_subs_add_subscription",MESSENGER_THREAD_SUBS_REMOVE_SUBSCRIPTION:"messenger_thread_subs_remove_subscription",MESSENGER_THREAD_GENAI_REMINDER_ADD:"messenger_thread_genai_reminder_add",MESSENGER_THREAD_GENAI_REMINDER_REMOVE:"messenger_thread_genai_reminder_remove",MESSENGER_THREAD_GENAI_UPDATE_ADD:"messenger_thread_genai_update_add",MESSENGER_THREAD_GENAI_UPDATE_REMOVE:"messenger_thread_genai_update_remove",MESSENGER_THREAD_GENAI_TASK_ADD:"messenger_thread_genai_task_add",MESSENGER_THREAD_GENAI_TASK_EDIT:"messenger_thread_genai_task_edit",MESSENGER_THREAD_GENAI_TASK_DELIVER:"messenger_thread_genai_task_deliver",MESSENGER_WIDGET_TODO_LIST_CREATED:"messenger_widget_todo_list_created",MESSENGER_WIDGET_TODO_ITEM_ADDED:"messenger_widget_todo_item_added",MESSENGER_WIDGET_TODO_ITEM_COMPLETED:"messenger_widget_todo_item_completed",MESSENGER_WIDGET_TODO_ITEM_UNCOMPLETED:"messenger_widget_todo_item_uncompleted",CONFIRM_FRIEND_REQUEST_ENCRYPTED:"confirm_friend_request_encrypted",BIZ_INBOX_MSGR_NUDGE:"biz_inbox_msgr_nudge",BIZ_INBOX_IGD_NUDGE:"biz_inbox_igd_nudge",IGD_CHANNEL_PARTICIPANT_JOIN_OR_LEAVE:"igd_channel_participant_join_or_leave",BUSINESS_INITIATED_CALLING_ADMIN_TEXT:"business_initiated_calling_admin_text",MESSENGER_QR_CODE_SCANNED:"MESSENGER_QR_CODE_SCANNED",IGD_THREAD_REMINDER:"igd_thread_reminder",MM_CTM_ADS_CLICK:"mm_ctm_ads_click",BIZ_INBOX_LEAD_STAGE_CHANGE:"biz_inbox_lead_stage_change",IGD_CREATOR_AI_FAN_ONBOARDING:"igd_creator_ai_fan_onboarding",IGD_CREATOR_AI_THREAD_TOGGLE:"igd_creator_ai_thread_toggle",BUZZ_THREAD:"buzz_thread",BIZ_INBOX_THREAD_AUTO_MOVED_TO_SPAM:"biz_inbox_thread_auto_moved_to_spam",COLADA_AUTOSHARING_UPDATED:"colada_autosharing_updated",IGD_CHANNEL_REACTION_NOTIF:"igd_channel_reaction_notif",IGD_CHANNEL_XPOSTING:"igd_channel_xposting",IGD_CHALLENGES_PROMPT_CHOOSE_WINNERS_XMAT:"igd_challenges_prompt_choose_winners_xmat",IGD_STOP_RECURRING_PROMPT:"igd_stop_recurring_prompt",IGD_AUTO_STOP_RECURRING_PROMPT:"igd_auto_stop_recurring_prompt",IG_REELS_BLEND_MEMBERSHIP_UPDATE:"ig_reels_blend_membership_update",IG_REELS_BLEND_VISITATION:"ig_reels_blend_visitation",PAGE_FEATURE_LIMIT_CUSTOMER_NOTIFICATION:"page_feature_limit_customer_notification",FANTASY_GAME_BOT_MESSAGE_SUBSCRIPTION_MANAGEMENT:"fantasy_game_bot_message_subscription_management",AI_STUDIO_CREATION:"ai_studio_creation",IG_BUYER_SMART_SUGGESTION:"ig_buyer_smart_suggestion",IG_CHANNELS_MESSAGE_GEOBLOCK:"ig_channels_message_geoblock",COMMUNITY_CHATS_MEMBER_JOIN_NOTICE:"community_chats_member_join_notice",COMMUNITY_CHATS_MEMBER_ADDED_TO_CHAT:"community_chats_member_added_to_chat",BM_GEN_AI_RESET_TRIGGERED:"bm_gen_ai_reset_triggered",SMC_RECONSIDERATION_ADMIN_TEXT:"smc_reconsideration_admin_text",CONVERSATION_FEEDBACK_NO_PURCHASE_ADMIN_TEXT:"conversation_feedback_no_purchase_admin_text",CONVERSATION_FEEDBACK_START_ACE_SURVEY_BOTTOM_SHEET_ADMIN_TEXT:"conversation_feedback_start_ace_survey_bottom_sheet_admin_text",IG_EMOJI_PONG_HIGH_SCORE:"ig_emoji_pong_high_score",IG_EMOJI_PONG_CHALLENGE_HIGH_SCORE:"ig_emoji_pong_challenge_high_score",META_AI_MEMORY_UPDATE:"meta_ai_memory_update",IG_PERMISSIONS_CREATOR_ADMIN_TEXT:"ig_permissions_creator_admin_text",IG_PERMISSIONS_SHARED_ACCOUNT_ADMIN_TEXT:"ig_permissions_shared_account_admin_text",IG_REELS_BLEND_REMINDER:"ig_reels_blend_reminder",MARKETING_MESSAGES_BYOS:"marketing_messages_byos",BIZ_INBOX_AUTO_SAVED_REPLY:"biz_inbox_auto_saved_reply",BIZ_INBOX_WA_STATUS_REPLY:"biz_inbox_wa_status_reply",IGD_CREATOR_AI_MESSAGE_HISTORY_CUTOFF:"igd_creator_ai_message_history_cutoff",MESSENGER_COMMUNITY_CREATED_GCU:"messenger_community_created_gcu",MESSENGER_COMMUNITY_EVENT_CREATED:"messenger_community_event_details_created",MESSENGER_COMMUNITY_EVENT_DETAILS_UPDATED:"messenger_community_event_details_updated",MESSENGER_COMMUNITY_EVENT_RSVP_UPDATED:"messenger_community_event_rsvp_updated",MESSENGER_COMMUNITY_EVENT_REMINDER:"messenger_community_event_reminder",MESSENGER_VR_DELETED_CHAT_HISTORY:"messenger_vr_deleted_chat_history",IGD_DETECTED_OUTCOMES_ADMIN_TEXT:"igd_detected_outcomes_admin_text",IG_CREATOR_AI_HANDOFF:"ig_creator_ai_handoff",IG_CREATOR_AI_THREAD_INTEGRITY_DISABLE:"ig_creator_ai_thread_integrity_disable",GENAI_THREAD_SUMMARY_GENERATED:"genai_thread_summary_generated",GENAI_MESSAGES_SHARED_WITH_META_AI:"genai_messages_shared_with_meta_ai",GENAI_REMIX_TOGGLE:"genai_remix_toggle",IG_FRIEND_MAP_LOCATION_SHARING_REQUEST:"ig_friend_map_location_sharing_request",IG_FRIEND_MAP_LOCATION_SHARING_STARTED:"ig_friend_map_location_sharing_started",ABRA_ARTIFACT_VERSION_TEXT:"abra_artifact_version_text",MARKETPLACE_RESPONSE_RATE:"marketplace_response_rate",AI_BOT_ADDED_TO_GROUP_CHAT:"ai_bot_added_to_group_chat",AI_BOT_REMOVED_FROM_GROUP_CHAT:"ai_bot_removed_from_group_chat",AI_BOT_REMOVED_FROM_GROUP_CHAT_DUE_TO_INACCESSIBILITY:"ai_bot_removed_from_group_chat_due_to_inaccessibility",AI_BOT_GROUP_ACTIVITY_CHAT_RESET:"ai_bot_group_activity_chat_reset",AI_BOT_GROUP_ACTIVITY_CHAT_CREATED:"ai_bot_group_activity_chat_created",AI_BOT_GROUP_USER_INELIGIBLE:"ai_bot_group_user_ineligible",IG_PALS_ENABLED_FOR_THREAD:"ig_pals_enabled_for_thread",BIZ_INBOX_FAQ_FUZZY_MATCH:"biz_inbox_faq_fuzzy_match",VR_GROUPS_FIRST_TIME_ONE_TO_ONE_MESSAGE_YOUTH:"vr_groups_first_time_one_to_one_message_youth",MARKETPLACE_MAKE_AN_OFFER:"marketplace_make_an_offer",MARKETPLACE_TRANSACTIONAL_SIGNAL:"marketplace_transactional_signal",MARKETPLACE_UNRESPONSIVE_SELLER_EDUCATION:"marketplace_unresponsive_seller_education",MARKETPLACE_CLOSED_THREAD:"marketplace_closed_thread",IGD_NEW_FRIEND_BUMP:"igd_new_friend_bump",IGD_BUMP_ON_PROMO:"igd_bump_on_promo",PHONE_NUMBER_MESSAGE_FALLBACK:"phone_number_message_fallback",IG_CTM_AD_CLICK_LOG:"ig_ctm_ad_click_log",PROMO_ADS_ADMIN_TEXT:"promo_ads_admin_text",LIMIT_SHARING:"limit_sharing",GENAI_IMAGINE_UPSELL:"genai_imagine_upsell",PRIVATE_REPLY_FOLLOW_ADMIN_TEXT_LOG:"private_reply_follow_admin_text_log",PRIVATE_REPLY_COMMENT_POLL_RESPONSE_ADMIN_TEXT_LOG:"private_reply_comment_poll_response_admin_text_log",PRIVATE_REPLY_STORY_POLL_RESPONSE_ADMIN_TEXT_LOG:"private_reply_story_poll_response_admin_text_log",PRIVATE_REPLY_STORY_SHARE_ADMIN_TEXT_LOG:"private_reply_story_share_admin_text_log",SLIDE_MESSAGING_MESSAGE_TAKEDOWN:"slide_messaging_message_takedown",GENAI_PROACTIVE_MESSAGE_USER_CONTROL:"genai_proactive_message_user_control",MESSENGER_THREAD_GENAI_TASK_SKIP:"messenger_thread_genai_task_skip",INSTAGRAM_BIZ_AGENT_CONSUMER_HANDOFF_MESSAGE:"instagram_biz_agent_consumer_handoff_message",IG_INTERACTIVE_THEME_VALUE_UPDATE:"ig_interactive_theme_value_update",IG_INTERACTIVE_THEME_AI_TERMS:"ig_interactive_theme_ai_terms",IG_INTERACTIVE_THEME_ADD_PARTICIPANT:"ig_interactive_theme_add_participant",GEN_AI_IGD_AI_LOOKUP_THREAD:"gen_ai_igd_ai_lookup_thread",GENAI_UGC_AI_PROFILE:"genai_ugc_ai_profile",CHANGE_THREAD_NAME:"change_thread_name",ADD_PARTICIPANTS_TO_GROUP:"add_participants_to_group",REMOVE_PARTICIPANT:"remove_participant",IG_PETS_NURTURE_ADMIN_TEXT:"ig_pets_nurture_admin_text",HORIZON_WORLDS_UPDATE_SUBSCRIPTION_MANAGEMENT:"horizon_worlds_update_subscription_management",BIZ_AI_AGENT:"biz_ai_agent",MARKETPLACE_GENERIC:"marketplace_generic",WTM_PAGE_NUDGE:"wtm_page_nudge",BIZ_AI_RECON_DISCLAIMER:"biz_ai_recon_disclaimer",BIZ_INBOX_AUTOMATION_LEAD_STAGE_UPDATE:"biz_inbox_automation_lead_stage_update",APPLUS_IDENTITY_NOTICE:"applus_identity_notice",MSGR_PSI_MESSAGE_SHARE:"msgr_psi_message_share",SUPPORT_BOT_AGENT_PLUS_DISCLAIMER:"support_bot_agent_plus_disclaimer",HORIZON_GAMING_ADMIN_TEXT:"horizon_gaming_admin_text",WORKCHAT_MIGRATED_MESSAGE:"workchat_migrated_message"});i.default=e}),66);
__d("MessagingTagUtils",["MercurySourceType","MessagingTagConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set(Object.values(r("MercurySourceType")));function s(t){for(var n of t)if(e.has(n))return n;return"source:unknown"}function u(e){for(var t of e){var n=t.split(r("MessagingTagConstants").app_id_root);if(n.length>1)return n[1].trim()}return null}function c(e,t){var n=[],o=u(e);return o&&r("MessagingTagConstants").orca_app_ids.indexOf(o)!==-1&&n.push("source:messenger"),r("MessagingTagConstants").chat_sources.indexOf(t)!==-1&&n.push("source:chat"),r("MessagingTagConstants").email_source===t&&n.push("source:email"),r("MessagingTagConstants").mobile_sources.indexOf(t)!==-1&&n.push("source:mobile"),e.indexOf("source:workchat:desktop")!==-1&&n.push("source:workchat:desktop"),n}l.getSourceFromTags=s,l.getSourceTags=c}),98);
__d("MessagingThreadType",[],(function(t,n,r,o,a,i){var e=Object.freeze({COMMUNITY_FOLDER:17,COMMUNITY_GROUP:18,COMMUNITY_GROUP_UNJOINED:19,COMMUNITY_CHANNEL_CATEGORY:20,COMMUNITY_PRIVATE_HIDDEN_JOINED_THREAD:21,COMMUNITY_PRIVATE_HIDDEN_UNJOINED_THREAD:22,COMMUNITY_BROADCAST_JOINED_THREAD:23,COMMUNITY_BROADCAST_UNJOINED_THREAD:24,COMMUNITY_GROUP_INVITED_UNJOINED:25,COMMUNITY_SUB_THREAD:26,COMMUNITY_ANNOUNCEMENT_JOINED_THREAD:27,COMMUNITY_ANNOUNCEMENT_UNJOINED_THREAD:28,DISCOVERABLE_PUBLIC_CHAT:150,DISCOVERABLE_PUBLIC_CHAT_UNJOINED:151,DISCOVERABLE_PUBLIC_BROADCAST_CHAT:152,DISCOVERABLE_PUBLIC_BROADCAST_CHAT_UNJOINED:153,DISCOVERABLE_PUBLIC_CHAT_V2:154,DISCOVERABLE_PUBLIC_CHAT_V2_UNJOINED:155,ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5,FOLDER:6,TINCAN_ONE_TO_ONE:7,TINCAN_GROUP_DISAPPEARING:8,CARRIER_MESSAGING_ONE_TO_ONE:10,CARRIER_MESSAGING_GROUP:11,TINCAN_ONE_TO_ONE_DISAPPEARING:13,PAGE_FOLLOW_UP:14,SECURE_MESSAGE_OVER_WA_ONE_TO_ONE:15,SECURE_MESSAGE_OVER_WA_GROUP:16,PINNED:101,LWG:102,XAC_GROUP:200,AI_BOT:201,GROUP_WITH_AI_BOT:202,BIZ_AI_AGENT:203,PHONE_NUMBER:204,META_AI_SIDE_CHAT:205,META_AI_NON_CANONICAL:206,GEMSTONE:225,TH_COMMUNITY_GROUP:226});i.default=e}),66);
__d("P2PPaymentRequestStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7,MANUALLY_MARKED_AS_COMPLETED:8});i.default=e}),66);
__d("P2PTransferStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({SYSTEM_FAILURE:0,PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19,PENDING_SENDER_IDV_REVIEW:20,PENDING_RECEIVER_IDV_REVIEW:21});i.default=e}),66);
__d("PaymentModulesClient",[],(function(t,n,r,o,a,i){var e=Object.freeze({DONATION_P4P:"donation_p4p",MOR_DONATIONS:"mor_donations",PPGF_DONATION:"ppgf_donation",DONATION_P4C:"donation_p4c",INSTANT_EXPERIENCES:"instant_experiences",BUSINESS_PLATFORM_COMMERCE:"business_platform_commerce",MESSENGER_OMNIM:"messenger_omnim",MESSENGER_PLATFORM:"messenger_platform",PAGES_COMMERCE:"pages_commerce",MESSAGING_COMMERCE:"messaging_commerce",SHIPPING_LABEL:"shipping_label",SYNCHRONOUS_COMPONENT_FLOW:"synchronous_component_flow",PAGES_SOLUTION:"pages_solution",CHECKOUT_EXPERIENCES:"checkout_experiences",C2C_CHECKOUT_EXPERIENCES:"c2c_checkout_experiences",MOBILE_TOP_UP:"mobile_top_up",MOCK:"mock",ADVERTISER_SUBSCRIPTION:"advertiser_subscription",NMOR_FB_BROWSER_PAY:"fb_browser_payment",P2M_MESSENGER:"p2m_messenger"});i.default=e}),66);
__d("ServicesCalendarSyncType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CLIENT_ONLY:"client_only",NO_CALENDAR_SYNC:"no_calendar_sync",SERVER_CONTINUOUS:"server_continuous",SERVER_SINGLE:"server_single"});i.default=e}),66);
__d("bs_caml_array",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){for(var r=new Array(n),o=0,a=t;o<n;)r[o]=e[a],o=o+1|0,a=a+1|0;return r}function l(e,t){for(;;){var n=t,r=e;if(!n)return r;t=n.tl,e=n.hd.length+r|0}}function s(e,t,n){for(;;){var r=n,o=t;if(!r)return;for(var a=r.hd,i=a.length,l=o,s=0;s<i;)e[l]=a[s],l=l+1|0,s=s+1|0;n=r.tl,t=l}}function u(e){var t=l(0,e),n=new Array(t);return s(n,0,e),n}function c(e,t,n){if(t<0||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};e[t]=n}function d(e,t){if(t<0||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return e[t]}function m(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function p(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function _(e,t,n,r,o){if(r<=t){for(var a=0;a<o;++a)n[a+r|0]=e[a+t|0];return}for(var i=o-1|0;i>=0;--i)n[i+r|0]=e[i+t|0]}function f(e){return e.slice(0)}i.dup=f,i.sub=e,i.concat=u,i.make=m,i.make_float=p,i.blit=_,i.get=d,i.set=c}),null);
__d("bs_curry",["bs_caml_array"],(function(t,n,r,o,a,i){"use strict";function e(t,r){for(;;){var o=r,a=t,i=a.length,l=i===0?1:i,s=o.length,u=l-s|0;if(u===0)return a.apply(null,o);if(u>=0)return(function(t,n){return function(r){return e(t,n.concat([r]))}})(a,o);r=n("bs_caml_array").sub(o,l,-u|0),t=a.apply(null,n("bs_caml_array").sub(o,0,l))}}function l(t,n){var r=t.length;if(r===1)return t(n);switch(r){case 1:return t(n);case 2:return function(e){return t(n,e)};case 3:return function(e,r){return t(n,e,r)};case 4:return function(e,r,o){return t(n,e,r,o)};case 5:return function(e,r,o,a){return t(n,e,r,o,a)};case 6:return function(e,r,o,a,i){return t(n,e,r,o,a,i)};case 7:return function(e,r,o,a,i,l){return t(n,e,r,o,a,i,l)};default:return e(t,[n])}}function s(e){var t=e.length;return t===1?e:function(t){return l(e,t)}}function u(t,n,r){var o=t.length;if(o===2)return t(n,r);switch(o){case 1:return e(t(n),[r]);case 2:return t(n,r);case 3:return function(e){return t(n,r,e)};case 4:return function(e,o){return t(n,r,e,o)};case 5:return function(e,o,a){return t(n,r,e,o,a)};case 6:return function(e,o,a,i){return t(n,r,e,o,a,i)};case 7:return function(e,o,a,i,l){return t(n,r,e,o,a,i,l)};default:return e(t,[n,r])}}function c(e){var t=e.length;return t===2?e:function(t,n){return u(e,t,n)}}function d(t,n,r,o){var a=t.length;if(a===3)return t(n,r,o);switch(a){case 1:return e(t(n),[r,o]);case 2:return e(t(n,r),[o]);case 3:return t(n,r,o);case 4:return function(e){return t(n,r,o,e)};case 5:return function(e,a){return t(n,r,o,e,a)};case 6:return function(e,a,i){return t(n,r,o,e,a,i)};case 7:return function(e,a,i,l){return t(n,r,o,e,a,i,l)};default:return e(t,[n,r,o])}}function m(e){var t=e.length;return t===3?e:function(t,n,r){return d(e,t,n,r)}}function p(t,n,r,o,a){var i=t.length;if(i===4)return t(n,r,o,a);switch(i){case 1:return e(t(n),[r,o,a]);case 2:return e(t(n,r),[o,a]);case 3:return e(t(n,r,o),[a]);case 4:return t(n,r,o,a);case 5:return function(e){return t(n,r,o,a,e)};case 6:return function(e,i){return t(n,r,o,a,e,i)};case 7:return function(e,i,l){return t(n,r,o,a,e,i,l)};default:return e(t,[n,r,o,a])}}function _(e){var t=e.length;return t===4?e:function(t,n,r,o){return p(e,t,n,r,o)}}function f(t,n,r,o,a,i){var l=t.length;if(l===5)return t(n,r,o,a,i);switch(l){case 1:return e(t(n),[r,o,a,i]);case 2:return e(t(n,r),[o,a,i]);case 3:return e(t(n,r,o),[a,i]);case 4:return e(t(n,r,o,a),[i]);case 5:return t(n,r,o,a,i);case 6:return function(e){return t(n,r,o,a,i,e)};case 7:return function(e,l){return t(n,r,o,a,i,e,l)};default:return e(t,[n,r,o,a,i])}}function g(e){var t=e.length;return t===5?e:function(t,n,r,o,a){return f(e,t,n,r,o,a)}}function h(t,n,r,o,a,i,l){var s=t.length;if(s===6)return t(n,r,o,a,i,l);switch(s){case 1:return e(t(n),[r,o,a,i,l]);case 2:return e(t(n,r),[o,a,i,l]);case 3:return e(t(n,r,o),[a,i,l]);case 4:return e(t(n,r,o,a),[i,l]);case 5:return e(t(n,r,o,a,i),[l]);case 6:return t(n,r,o,a,i,l);case 7:return function(e){return t(n,r,o,a,i,l,e)};default:return e(t,[n,r,o,a,i,l])}}function y(e){var t=e.length;return t===6?e:function(t,n,r,o,a,i){return h(e,t,n,r,o,a,i)}}function C(t,n,r,o,a,i,l,s){var u=t.length;if(u===7)return t(n,r,o,a,i,l,s);switch(u){case 1:return e(t(n),[r,o,a,i,l,s]);case 2:return e(t(n,r),[o,a,i,l,s]);case 3:return e(t(n,r,o),[a,i,l,s]);case 4:return e(t(n,r,o,a),[i,l,s]);case 5:return e(t(n,r,o,a,i),[l,s]);case 6:return e(t(n,r,o,a,i,l),[s]);case 7:return t(n,r,o,a,i,l,s);default:return e(t,[n,r,o,a,i,l,s])}}function b(e){var t=e.length;return t===7?e:function(t,n,r,o,a,i,l){return C(e,t,n,r,o,a,i,l)}}function v(t,n,r,o,a,i,l,s,u){var c=t.length;if(c===8)return t(n,r,o,a,i,l,s,u);switch(c){case 1:return e(t(n),[r,o,a,i,l,s,u]);case 2:return e(t(n,r),[o,a,i,l,s,u]);case 3:return e(t(n,r,o),[a,i,l,s,u]);case 4:return e(t(n,r,o,a),[i,l,s,u]);case 5:return e(t(n,r,o,a,i),[l,s,u]);case 6:return e(t(n,r,o,a,i,l),[s,u]);case 7:return e(t(n,r,o,a,i,l,s),[u]);default:return e(t,[n,r,o,a,i,l,s,u])}}function S(e){var t=e.length;return t===8?e:function(t,n,r,o,a,i,l,s){return v(e,t,n,r,o,a,i,l,s)}}i.app=e,i._1=l,i.__1=s,i._2=u,i.__2=c,i._3=d,i.__3=m,i._4=p,i.__4=_,i._5=f,i.__5=g,i._6=h,i.__6=y,i._7=C,i.__7=b,i._8=v,i.__8=S}),null);
__d("bs_belt_Option",["bs_caml_option","bs_curry"],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e!==void 0&&t(n("bs_caml_option").valFromOption(e)))return e}function l(t,r){return e(t,n("bs_curry").__1(r))}function s(e,t){if(e!==void 0)return t(n("bs_caml_option").valFromOption(e))}function u(e,t){return s(e,n("bs_curry").__1(t))}function c(e){if(e!==void 0)return n("bs_caml_option").valFromOption(e);throw{RE_EXN_ID:"Not_found",Error:new Error}}function d(e,t,r){return e!==void 0?r(n("bs_caml_option").valFromOption(e)):t}function m(e,t,r){return d(e,t,n("bs_curry").__1(r))}function p(e,t){if(e!==void 0)return n("bs_caml_option").some(t(n("bs_caml_option").valFromOption(e)))}function _(e,t){return p(e,n("bs_curry").__1(t))}function f(e,t){if(e!==void 0)return t(n("bs_caml_option").valFromOption(e))}function g(e,t){return f(e,n("bs_curry").__1(t))}function h(e,t){return e!==void 0?n("bs_caml_option").valFromOption(e):t}function y(e){return e!==void 0}function C(e){return e===void 0}function b(e,t,r){return e!==void 0?t!==void 0?r(n("bs_caml_option").valFromOption(e),n("bs_caml_option").valFromOption(t)):!1:t===void 0}function v(e,t,r){return b(e,t,n("bs_curry").__2(r))}function S(e,t,r){return e!==void 0?t!==void 0?r(n("bs_caml_option").valFromOption(e),n("bs_caml_option").valFromOption(t)):1:t!==void 0?-1:0}function R(e,t,r){return S(e,t,n("bs_curry").__2(r))}i.keepU=e,i.keep=l,i.forEachU=s,i.forEach=u,i.getExn=c,i.mapWithDefaultU=d,i.mapWithDefault=m,i.mapU=p,i.map=_,i.flatMapU=f,i.flatMap=g,i.getWithDefault=h,i.isSome=y,i.isNone=C,i.eqU=b,i.eq=v,i.cmpU=S,i.cmp=R}),null);
__d("bs_caml_bytes",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){if(t<0||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};e[t]=n}function l(e,t){if(t<0||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return e[t]}function s(e,t,n,r){if(!(n<=0))for(var o=t,a=n+t|0;o<a;++o)e[o]=r}function u(e){if(e<0)throw{RE_EXN_ID:"Invalid_argument",_1:"String.create",Error:new Error};for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function c(e,t,n,r,o){if(!(o<=0)){if(e===n){if(t<r){for(var a=(e.length-r|0)-1|0,i=o-1|0,l=a>i?i:a,s=l;s>=0;--s)e[r+s|0]=e[t+s|0];return}if(t<=r)return;for(var u=(e.length-t|0)-1|0,c=o-1|0,d=u>c?c:u,m=0;m<=d;++m)e[r+m|0]=e[t+m|0];return}var p=e.length-t|0;if(o<=p){for(var _=0;_<o;++_)n[r+_|0]=e[t+_|0];return}for(var f=0;f<p;++f)n[r+f|0]=e[t+f|0];for(var g=p;g<o;++g)n[r+g|0]=0}}function d(e){var t=0,n=e.length,r="",o=n;if(t===0&&n<=4096&&n===e.length)return String.fromCharCode.apply(null,e);for(var a=0;o>0;){for(var i=o<1024?o:1024,l=new Array(i),s=0;s<i;++s)l[s]=e[s+a|0];r=r+String.fromCharCode.apply(null,l),o=o-i|0,a=a+i|0}return r}function m(e,t,n,r,o){if(!(o<=0)){var a=e.length-t|0;if(o<=a){for(var i=0;i<o;++i)n[r+i|0]=e.charCodeAt(t+i|0);return}for(var l=0;l<a;++l)n[r+l|0]=e.charCodeAt(t+l|0);for(var s=a;s<o;++s)n[r+s|0]=0}}function p(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e.charCodeAt(r);return n}function _(e,t,n,r,o){for(;;){var a=n;if(a>=r)return o;var i=e[a],l=t[a];if(i>l)return 1;if(i<l)return-1;n=a+1|0}}function f(e,t){var n=e.length,r=t.length;return n===r?_(e,t,0,n,0):n<r?_(e,t,0,n,-1):_(e,t,0,r,1)}function g(e,t){var n=e.length,r=t.length;if(n===r)for(var o=0;;){var a=o;if(a===n)return!0;var i=e[a],l=t[a];if(i!==l)return!1;o=a+1|0}else return!1}function h(e,t){return f(e,t)>0}function y(e,t){return f(e,t)>=0}function C(e,t){return f(e,t)<0}function b(e,t){return f(e,t)<=0}i.caml_create_bytes=u,i.caml_fill_bytes=s,i.get=l,i.set=e,i.bytes_to_string=d,i.caml_blit_bytes=c,i.caml_blit_string=m,i.bytes_of_string=p,i.caml_bytes_compare=f,i.caml_bytes_greaterthan=h,i.caml_bytes_greaterequal=y,i.caml_bytes_lessthan=C,i.caml_bytes_lessequal=b,i.caml_bytes_equal=g}),null);
__d("bs_char",["bs_caml_bytes"],(function(t,n,r,o,a,i){"use strict";function e(e){if(e<0||e>255)throw{RE_EXN_ID:"Invalid_argument",_1:"Char.chr",Error:new Error};return e}function l(e){var t=0;if(e>=40){if(e===92)return"\\\\";t=e>=127?1:2}else if(e>=32){if(e>=39)return"\\'";t=2}else if(e>=14)t=1;else switch(e){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:t=1;break;case 13:return"\\r"}switch(t){case 1:var r=[0,0,0,0];return r[0]=92,r[1]=48+(e/100|0)|0,r[2]=48+(e/10|0)%10|0,r[3]=48+e%10|0,n("bs_caml_bytes").bytes_to_string(r);case 2:var o=[0];return o[0]=e,n("bs_caml_bytes").bytes_to_string(o)}}function s(e){return e>=65&&e<=90||e>=192&&e<=214||e>=216&&e<=222?e+32|0:e}function u(e){return e>=97&&e<=122||e>=224&&e<=246||e>=248&&e<=254?e-32|0:e}function c(e){return e>=65&&e<=90?e+32|0:e}function d(e){return e>=97&&e<=122?e-32|0:e}function m(e,t){return e-t|0}function p(e,t){return(e-t|0)===0}i.chr=e,i.escaped=l,i.lowercase=s,i.uppercase=u,i.lowercase_ascii=c,i.uppercase_ascii=d,i.compare=m,i.equal=p}),null);
__d("bs_bytes",["bs_caml","bs_caml_bytes","bs_caml_js_exceptions","bs_char","bs_curry"],(function(t,n,r,o,a,i){"use strict";var e,l;function s(e,t){var r=n("bs_caml_bytes").caml_create_bytes(e);return n("bs_caml_bytes").caml_fill_bytes(r,0,e,t),r}function u(e,t){for(var r=n("bs_caml_bytes").caml_create_bytes(e),o=0;o<e;++o)r[o]=n("bs_curry")._1(t,o);return r}var c=[];function d(e){var t=e.length,r=n("bs_caml_bytes").caml_create_bytes(t);return n("bs_caml_bytes").caml_blit_bytes(e,0,r,0,t),r}function m(e){return n("bs_caml_bytes").bytes_to_string(d(e))}function p(e){return d(n("bs_caml_bytes").bytes_of_string(e))}function _(e,t,r){if(t<0||r<0||t>(e.length-r|0))throw{RE_EXN_ID:"Invalid_argument",_1:"String.sub / Bytes.sub",Error:new Error};var o=n("bs_caml_bytes").caml_create_bytes(r);return n("bs_caml_bytes").caml_blit_bytes(e,t,o,0,r),o}function f(e,t,r){return n("bs_caml_bytes").bytes_to_string(_(e,t,r))}function g(e,t){var n=e+t|0,r=e<0,o=t<0,a=n<0;if(r){if(!o||a)return n;throw{RE_EXN_ID:"Invalid_argument",_1:"Bytes.extend",Error:new Error}}if(o)return n;if(a)throw{RE_EXN_ID:"Invalid_argument",_1:"Bytes.extend",Error:new Error};return n}function h(e,t,r){var o=g(g(e.length,t),r),a=n("bs_caml_bytes").caml_create_bytes(o),i=t<0?[-t|0,0]:[0,t],s=i[1],u=i[0],c=(l||(l=n("bs_caml"))).caml_int_min(e.length-u|0,o-s|0);return c>0&&n("bs_caml_bytes").caml_blit_bytes(e,u,a,s,c),a}function y(e,t,r,o){if(t<0||r<0||t>(e.length-r|0))throw{RE_EXN_ID:"Invalid_argument",_1:"String.fill / Bytes.fill",Error:new Error};return n("bs_caml_bytes").caml_fill_bytes(e,t,r,o)}function C(e,t,r,o,a){if(a<0||t<0||t>(e.length-a|0)||o<0||o>(r.length-a|0))throw{RE_EXN_ID:"Invalid_argument",_1:"Bytes.blit",Error:new Error};return n("bs_caml_bytes").caml_blit_bytes(e,t,r,o,a)}function b(e,t,r,o,a){if(a<0||t<0||t>(e.length-a|0)||o<0||o>(r.length-a|0))throw{RE_EXN_ID:"Invalid_argument",_1:"String.blit / Bytes.blit_string",Error:new Error};return n("bs_caml_bytes").caml_blit_string(e,t,r,o,a)}function v(e,t){for(var r=0,o=t.length;r<o;++r)n("bs_curry")._1(e,t[r])}function S(e,t){for(var r=0,o=t.length;r<o;++r)n("bs_curry")._2(e,r,t[r])}function R(e,t){if(e>=t)return e;throw{RE_EXN_ID:"Invalid_argument",_1:"Bytes.concat",Error:new Error}}function L(e,t,n){for(;;){var r=n,o=e;if(!r)return o;var a=r.tl,i=r.hd;if(!a)return i.length+o|0;n=a,e=R((i.length+t|0)+o|0,o)}}function E(e,t){if(!t)return c;for(var r=e.length,o=n("bs_caml_bytes").caml_create_bytes(L(0,r,t)),a=0,i=t;;){var l=i,s=a;if(!l)return o;var u=l.tl,d=l.hd;if(u){n("bs_caml_bytes").caml_blit_bytes(d,0,o,s,d.length),n("bs_caml_bytes").caml_blit_bytes(e,0,o,s+d.length|0,r),i=u,a=(s+d.length|0)+r|0;continue}return n("bs_caml_bytes").caml_blit_bytes(d,0,o,s,d.length),o}}function k(e,t){var r=e.length,o=t.length,a=n("bs_caml_bytes").caml_create_bytes(r+o|0);return n("bs_caml_bytes").caml_blit_bytes(e,0,a,0,r),n("bs_caml_bytes").caml_blit_bytes(t,0,a,r,o),a}function I(e){return e>13||e<9?e===32:e!==11}function T(e){for(var t=e.length,n=0;n<t&&I(e[n]);)n=n+1|0;for(var r=t-1|0;r>=n&&I(e[r]);)r=r-1|0;return r>=n?_(e,n,(r-n|0)+1|0):c}function D(e){for(var t=0,r=0,o=e.length;r<o;++r){var a=e[r];t=t+(a>=32?a>92||a<34?a>=127?4:1:a>91||a<35?2:1:a>=11?a!==13?4:2:a>=8?2:4)|0}if(t===e.length)return d(e);var i=n("bs_caml_bytes").caml_create_bytes(t);t=0;for(var l=0,s=e.length;l<s;++l){var u=e[l],c=0;if(u>=35)u!==92?u>=127?c=1:i[t]=u:c=2;else if(u>=32)u>=34?c=2:i[t]=u;else if(u>=14)c=1;else switch(u){case 8:i[t]=92,t=t+1|0,i[t]=98;break;case 9:i[t]=92,t=t+1|0,i[t]=116;break;case 10:i[t]=92,t=t+1|0,i[t]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:c=1;break;case 13:i[t]=92,t=t+1|0,i[t]=114;break}switch(c){case 1:i[t]=92,t=t+1|0,i[t]=48+(u/100|0)|0,t=t+1|0,i[t]=48+(u/10|0)%10|0,t=t+1|0,i[t]=48+u%10|0;break;case 2:i[t]=92,t=t+1|0,i[t]=u;break}t=t+1|0}return i}function x(e,t){var r=t.length;if(r===0)return t;for(var o=n("bs_caml_bytes").caml_create_bytes(r),a=0;a<r;++a)o[a]=n("bs_curry")._1(e,t[a]);return o}function $(e,t){var r=t.length;if(r===0)return t;for(var o=n("bs_caml_bytes").caml_create_bytes(r),a=0;a<r;++a)o[a]=n("bs_curry")._2(e,a,t[a]);return o}function P(e){return x(n("bs_char").uppercase_ascii,e)}function N(e){return x(n("bs_char").lowercase_ascii,e)}function M(e,t){if(t.length===0)return t;var r=d(t);return r[0]=n("bs_curry")._1(e,t[0]),r}function w(e){return M(n("bs_char").uppercase_ascii,e)}function A(e){return M(n("bs_char").lowercase_ascii,e)}function F(e,t,n,r){for(;;){var o=n;if(o>=t)throw{RE_EXN_ID:"Not_found",Error:new Error};if(e[o]===r)return o;n=o+1|0}}function O(e,t){return F(e,e.length,0,t)}function B(e,t,n,r){for(;;){var o=n;if(o>=t)return;if(e[o]===r)return o;n=o+1|0}}function W(e,t){return B(e,e.length,0,t)}function q(e,t,n){var r=e.length;if(t<0||t>r)throw{RE_EXN_ID:"Invalid_argument",_1:"String.index_from / Bytes.index_from",Error:new Error};return F(e,r,t,n)}function U(e,t,n){var r=e.length;if(t<0||t>r)throw{RE_EXN_ID:"Invalid_argument",_1:"String.index_from_opt / Bytes.index_from_opt",Error:new Error};return B(e,r,t,n)}function V(e,t,n){for(;;){var r=t;if(r<0)throw{RE_EXN_ID:"Not_found",Error:new Error};if(e[r]===n)return r;t=r-1|0}}function H(e,t){return V(e,e.length-1|0,t)}function G(e,t,n){if(t<-1||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rindex_from / Bytes.rindex_from",Error:new Error};return V(e,t,n)}function z(e,t,n){for(;;){var r=t;if(r<0)return;if(e[r]===n)return r;t=r-1|0}}function j(e,t){return z(e,e.length-1|0,t)}function K(e,t,n){if(t<-1||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rindex_from_opt / Bytes.rindex_from_opt",Error:new Error};return z(e,t,n)}function Q(e,t,r){var o=e.length;if(t<0||t>o)throw{RE_EXN_ID:"Invalid_argument",_1:"String.contains_from / Bytes.contains_from",Error:new Error};try{return F(e,o,t,r),!0}catch(e){var a=n("bs_caml_js_exceptions").internalToOCamlException(e);if(a.RE_EXN_ID==="Not_found")return!1;throw a}}function X(e,t){return Q(e,0,t)}function Y(e,t,r){if(t<0||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rcontains_from / Bytes.rcontains_from",Error:new Error};try{return V(e,t,r),!0}catch(e){var o=n("bs_caml_js_exceptions").internalToOCamlException(e);if(o.RE_EXN_ID==="Not_found")return!1;throw o}}var J=(e=n("bs_caml_bytes")).caml_bytes_compare;function Z(e){return x(n("bs_char").uppercase,e)}function ee(e){return x(n("bs_char").lowercase,e)}function te(e){return M(n("bs_char").uppercase,e)}function ne(e){return M(n("bs_char").lowercase,e)}var re=e.caml_bytes_equal,oe=e.bytes_to_string,ae=e.bytes_of_string;i.make=s,i.init=u,i.empty=c,i.copy=d,i.of_string=p,i.to_string=m,i.sub=_,i.sub_string=f,i.extend=h,i.fill=y,i.blit=C,i.blit_string=b,i.concat=E,i.cat=k,i.iter=v,i.iteri=S,i.map=x,i.mapi=$,i.trim=T,i.escaped=D,i.index=O,i.index_opt=W,i.rindex=H,i.rindex_opt=j,i.index_from=q,i.index_from_opt=U,i.rindex_from=G,i.rindex_from_opt=K,i.contains=X,i.contains_from=Q,i.rcontains_from=Y,i.uppercase=Z,i.lowercase=ee,i.capitalize=te,i.uncapitalize=ne,i.uppercase_ascii=P,i.lowercase_ascii=N,i.capitalize_ascii=w,i.uncapitalize_ascii=A,i.compare=J,i.equal=re,i.unsafe_to_string=oe,i.unsafe_of_string=ae}),null);
__d("bs_caml_string",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(t>=e.length||t<0)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return e.charCodeAt(t)}function l(e,t){return String.fromCharCode(t).repeat(e)}i.get=e,i.make=l}),null);
__d("bs_string",["bs_bytes","bs_caml","bs_caml_bytes","bs_caml_js_exceptions","bs_caml_string","bs_curry"],(function(t,n,r,o,a,i){"use strict";var e;function l(e,t){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").init(e,t))}function s(e,t,r){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").sub(n("bs_caml_bytes").bytes_of_string(e),t,r))}function u(e,t){if(e>=t)return e;throw{RE_EXN_ID:"Invalid_argument",_1:"String.concat",Error:new Error}}function c(e,t,n){for(;;){var r=n,o=e;if(!r)return o;var a=r.tl,i=r.hd;if(!a)return i.length+o|0;n=a,e=u((i.length+t|0)+o|0,o)}}function d(e,t,r,o,a){for(;;){var i=a,l=t;if(!i)return e;var s=i.tl,u=i.hd;if(s){n("bs_caml_bytes").caml_blit_string(u,0,e,l,u.length),n("bs_caml_bytes").caml_blit_string(r,0,e,l+u.length|0,o),a=s,t=(l+u.length|0)+o|0;continue}return n("bs_caml_bytes").caml_blit_string(u,0,e,l,u.length),e}}function m(e,t){if(!t)return"";var r=e.length;return n("bs_caml_bytes").bytes_to_string(d(n("bs_caml_bytes").caml_create_bytes(c(0,r,t)),0,e,r,t))}function p(e,t){for(var r=0,o=t.length;r<o;++r)n("bs_curry")._1(e,t.charCodeAt(r))}function _(e,t){for(var r=0,o=t.length;r<o;++r)n("bs_curry")._2(e,r,t.charCodeAt(r))}function f(e,t){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").map(e,n("bs_caml_bytes").bytes_of_string(t)))}function g(e,t){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").mapi(e,n("bs_caml_bytes").bytes_of_string(t)))}function h(e){return e>13||e<9?e===32:e!==11}function y(e){return e===""||!(h(e.charCodeAt(0))||h(e.charCodeAt(e.length-1|0)))?e:n("bs_caml_bytes").bytes_to_string(n("bs_bytes").trim(n("bs_caml_bytes").bytes_of_string(e)))}function C(e){var t=function(n){for(;;){var t=n;if(t>=e.length)return!1;var r=e.charCodeAt(t);if(r<32)return!0;if(r>92||r<34){if(r>=127)return!0;n=t+1|0;continue}if(r>91||r<35)return!0;n=t+1|0}};return t(0)?n("bs_caml_bytes").bytes_to_string(n("bs_bytes").escaped(n("bs_caml_bytes").bytes_of_string(e))):e}function b(e,t,n,r){for(;;){var o=n;if(o>=t)throw{RE_EXN_ID:"Not_found",Error:new Error};if(e.charCodeAt(o)===r)return o;n=o+1|0}}function v(e,t){return b(e,e.length,0,t)}function S(e,t,n,r){for(;;){var o=n;if(o>=t)return;if(e.charCodeAt(o)===r)return o;n=o+1|0}}function R(e,t){return S(e,e.length,0,t)}function L(e,t,n){var r=e.length;if(t<0||t>r)throw{RE_EXN_ID:"Invalid_argument",_1:"String.index_from / Bytes.index_from",Error:new Error};return b(e,r,t,n)}function E(e,t,n){var r=e.length;if(t<0||t>r)throw{RE_EXN_ID:"Invalid_argument",_1:"String.index_from_opt / Bytes.index_from_opt",Error:new Error};return S(e,r,t,n)}function k(e,t,n){for(;;){var r=t;if(r<0)throw{RE_EXN_ID:"Not_found",Error:new Error};if(e.charCodeAt(r)===n)return r;t=r-1|0}}function I(e,t){return k(e,e.length-1|0,t)}function T(e,t,n){if(t<-1||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rindex_from / Bytes.rindex_from",Error:new Error};return k(e,t,n)}function D(e,t,n){for(;;){var r=t;if(r<0)return;if(e.charCodeAt(r)===n)return r;t=r-1|0}}function x(e,t){return D(e,e.length-1|0,t)}function $(e,t,n){if(t<-1||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rindex_from_opt / Bytes.rindex_from_opt",Error:new Error};return D(e,t,n)}function P(e,t,r){var o=e.length;if(t<0||t>o)throw{RE_EXN_ID:"Invalid_argument",_1:"String.contains_from / Bytes.contains_from",Error:new Error};try{return b(e,o,t,r),!0}catch(e){var a=n("bs_caml_js_exceptions").internalToOCamlException(e);if(a.RE_EXN_ID==="Not_found")return!1;throw a}}function N(e,t){return P(e,0,t)}function M(e,t,r){if(t<0||t>=e.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rcontains_from / Bytes.rcontains_from",Error:new Error};try{return k(e,t,r),!0}catch(e){var o=n("bs_caml_js_exceptions").internalToOCamlException(e);if(o.RE_EXN_ID==="Not_found")return!1;throw o}}function w(e){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").uppercase_ascii(n("bs_caml_bytes").bytes_of_string(e)))}function A(e){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").lowercase_ascii(n("bs_caml_bytes").bytes_of_string(e)))}function F(e){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").capitalize_ascii(n("bs_caml_bytes").bytes_of_string(e)))}function O(e){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").uncapitalize_ascii(n("bs_caml_bytes").bytes_of_string(e)))}var B=(e||(e=n("bs_caml"))).caml_string_compare;function W(e,t){for(var n=0,r=t.length,o=t.length-1|0;o>=0;--o)t.charCodeAt(o)===e&&(n={hd:s(t,o+1|0,(r-o|0)-1|0),tl:n},r=o);return{hd:s(t,0,r),tl:n}}function q(e){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").uppercase(n("bs_caml_bytes").bytes_of_string(e)))}function U(e){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").lowercase(n("bs_caml_bytes").bytes_of_string(e)))}function V(e){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").capitalize(n("bs_caml_bytes").bytes_of_string(e)))}function H(e){return n("bs_caml_bytes").bytes_to_string(n("bs_bytes").uncapitalize(n("bs_caml_bytes").bytes_of_string(e)))}var G=n("bs_caml_string").make,z=n("bs_bytes").blit_string;function j(e,t){return e===t}i.make=G,i.init=l,i.sub=s,i.blit=z,i.concat=m,i.iter=p,i.iteri=_,i.map=f,i.mapi=g,i.trim=y,i.escaped=C,i.index=v,i.index_opt=R,i.rindex=I,i.rindex_opt=x,i.index_from=L,i.index_from_opt=E,i.rindex_from=T,i.rindex_from_opt=$,i.contains=N,i.contains_from=P,i.rcontains_from=M,i.uppercase=q,i.lowercase=U,i.capitalize=V,i.uncapitalize=H,i.uppercase_ascii=w,i.lowercase_ascii=A,i.capitalize_ascii=F,i.uncapitalize_ascii=O,i.compare=B,i.equal=j,i.split_on_char=W}),null);
__d("MessengerStoryAttachmentTransformer.bs",["fbt","CurrentUser","FundsAvailability","LeadGenInfoFieldTypes","MNCommerceBubbleType","MNCommerceCallToActionType","P2PPaymentRequestStatus","P2PTransferStatus","PaymentModulesClient","ServicesCalendarSyncType","URI","bs_belt_Option","bs_caml_array","bs_caml_format","bs_caml_option","bs_js_null_undefined","bs_string"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e){return e.map(function(e){var t=e.user_confirmation,n=t==null?[null,null,null,null,!1]:[t.cancel_button_label,t.continue_button_label,t.confirmation_message,t.confirmation_title,!0];return{action_link:e.action_link,action_objects:e.action_objects,action_type:r("bs_js_null_undefined").fromOption(r("MNCommerceCallToActionType")[e.action_open_type]),confirmation_cancel_label:n[0],confirmation_continue_label:n[1],confirmation_message:n[2],confirmation_title:n[3],cta_data:e.cta_data,id:e.id,is_disabled:e.is_disabled,is_mutable_by_server:e.is_mutable_by_server,logging_token:e.logging_token,page_id:e.page_id,render_style:e.render_style,should_show_user_confirmation:n[4],title:e.title,webview_metadata:{fallback_url:e.webview_metadata.fallback_url,messenger_extensions:e.webview_metadata.messenger_extensions,webview_height_ratio:e.webview_metadata.webview_height_ratio,webview_share_button:e.webview_metadata.webview_share_button}}})}function c(t){return t.map(function(t){var n=t.url,o=n==null?null:new(e||(e=r("URI")))(n).getUnqualifiedURI().toString();return{title:t.title,uri:o}})}function d(e){return e!=null&&e!==""?"#"+r("bs_string").sub(e,2,e.length-2|0):null}function m(e){return e==null?null:{height:e.height,src:e.uri,url:e.uri,width:e.width}}function p(e,t){var n=t.cover_photo,r;if(n==null)r=[null,null,null];else{var o=n.photo.image,a=o==null?[null,null]:[o.uri,{height:o.height,width:o.width}];r=[n.photo.id,a[0],a[1]]}var i=t.location,l=i==null?[null,null]:[i.latitude,i.longitude],s=t.overall_star_rating;return{address:t.address.single_line_full_address,category:t.top_category_name,coverPhotoDimensions:r[2],coverPhotoID:r[0],coverPhotoURL:r[1],latitude:l[0],longitude:l[1],name:t.name,pageID:t.id,priceRange:t.price_range_description,rating:s==null?null:s.value,viewerID:e}}function _(e){var t=e.group_commerce_item_seller,n=e.primary_photo,r;if(n==null)r=null;else{var o=n.image;r=o==null?null:o.uri}return{caption:e.group_commerce_item_description.text,desc:e.group_commerce_item_description.text,owner_id:t==null?null:t.id,price:e.formatted_price.text,text:e.group_commerce_item_description.text,thumb_url:r,title:e.group_commerce_item_title,url:e.url}}function f(e){return{app_name:e.application_name,artists:e.artist_names,audio_url:e.audio_url,duration_ms:e.duration_ms,title:e.music_title}}function g(e){var t=e.payment;return{desc:e.desc,display_total_cost:e.total_cost,id:e.id,merchant_name:e.merchant_name,name:e.name,payment_id:t==null?null:t.id,raw_amount:e.raw_amount,target_url:e.target_url,thumb_url:e.thumb_url,total_cost:{amount:r("bs_caml_format").caml_float_of_string(e.price_amount),currency:e.price_currency}}}function h(e){return{canDonate:e.canDonate,focusedCoverPhoto:e.focusedCoverPhoto,fundraiserDetailedProgressText:e.fundraiserDetailedProgressText,fundraiserID:e.fundraiserID,fundraiserSubtitleText:e.fundraiserSubtitleText,hasViewerDonated:e.hasViewerDonated}}function y(e){return{attach_type:"file",extension:e.extension,filesize:e.filesize,id:e.id,is_malicious:e.is_malicious,name:e.name,url:e.uri}}function C(e){return{attach_type:"video",extension:e.extension,filesize:e.filesize,height:e.height,id:e.id,name:e.filename,url:e.playable_url,url_shimhash:e.url_shimhash,width:e.width,preview_url:e.preview_url}}function b(e){return{call_to_actions:u(e.call_to_actions),default_action:e.default_action,desc:e.desc,id:e.id,image_aspect_ratio:e.image_aspect_ratio,item_url:e.item_url,metalines:{metaline_1:e.first_metaline,metaline_2:e.second_metaline,metaline_3:e.third_metaline},name:e.name,source:e.source,text:e.desc,thumb_url:e.thumb_url,title:e.name}}function v(e){var t=function(t){var e=t.services_vertical_info;if(e!=null)return{isEligibleForAppointmentCalendar:e.is_eligible_for_appointment_calendar,isEligibleForMBSCalendar:e.is_eligible_for_mbs_calendar,isPageSPEnabled:e.is_page_sp_enabled,timezoneName:e.time_zone_name}},n=e.page,o=n==null?[void 0,void 0,void 0]:[n.id,r("bs_js_null_undefined").fromOption(r("ServicesCalendarSyncType")[n.calendar_sync_type]),t(n)],a=e.native_component_flow_request,i;if(a==null)i=null;else{var l=a.page,u=a.page,c=a.page,d;if(c==null)d=void 0;else{var m=c.profile_picture;d=m==null?void 0:m.uri}var p=a.suggested_time_range,_=a.user,f=a.user,g=a.job_application,h=a.user,y;if(h==null)y=void 0;else{var C=h.profile_picture;y=C==null?void 0:C.uri}i={additionalInfo:a.additional_info,appointmentAddress:a.appointment_address,archivedStatus:a.archived_status,availability:a.availability,consumer_phone_number:a.consumer_phone_number,generalInfo:a.service_general_info,hasSavedToCalendar:a.has_saved_to_calendar,id:a.id,jobApplicationID:g!=null?g.id:void 0,pageID:l!=null?l.id:void 0,pageName:u!=null?u.name:void 0,pageProfilePic:d,preferredTimeRange:p==null?null:{end:p.end,start:p.start},productItems:a.services_product_items,recurMessage:a.recur_message,reminderBubbleText:a.reminder_bubble_text,requestAdminApprovalType:a.request_admin_approval_type,requestedTime:a.requested_time,requestFlowType:a.request_flow_type,specialRequest:a.special_request,status:a.booking_status_value,statusLabel:a.status,userID:_!=null?_.id:void 0,username:f!=null?f.short_name:void 0,userProfilePic:y}}var b=e.message_bubble_type,v;switch(b){case"ATTENDANCE_UPDATE":v=["Attendance Update",s._(/*BTDS*/"Comparecimento \u2014 atualiza\u00e7\u00e3o")];break;case"CANCELLED":v=["Cancelled",s._(/*BTDS*/"Cancelada")];break;case"DECLINED":v=["Declined",s._(/*BTDS*/"Recusada")];break;case"NO_SHOW":v=["No Show",s._(/*BTDS*/"N\u00e3o compareceu")];break;case"REQUESTED":v=["Requested",s._(/*BTDS*/"Solicita\u00e7\u00e3o de hora marcada")];break;case"SCHEDULEED":v=["Scheduled",s._(/*BTDS*/"Programado")];break;default:throw{_1:"Erroneous target status",Error:new Error,RE_EXN_ID:"Invalid_argument"}}var S=e.user;return{calendarSyncType:o[1],id:e.id,ls_xma_subtitle:e.ls_xma_subtitle,ls_xma_title:e.ls_xma_title,pageID:o[0],requestMetadata:i,servicesVerticalInfo:o[2],status:v[0],statusLabel:v[1],userID:S==null?"0":S.id,viewerID:r("CurrentUser").getAccountID()}}function S(e){return{has_booking_request_created:e.has_booking_request_created,id:e.id,page_id:e.page.id,time_ranges:e.formatted_available_time_ranges.map(function(e){return{end:e.end,start:e.start}}),user_id:e.consumer.id}}function R(e){return{id:e.id}}function L(e){return{coordinate:e.coordinate,expiration_time:e.expiration_time,is_expired:e.is_expired,live_location_id:e.live_location_id,location_title:e.location_title,sender:e.sender,sender_destination:e.sender_destination,stop_reason:e.stop_reason}}function E(e){return{sender_wec_name:e.sender_wec_name,sender_wec_number:e.sender_wec_number,sender_wec_number_fbid:e.sender_wec_number_fbid,sender_wec_number_formated:e.sender_wec_number_formated,templated_message_body:e.templated_message_body,templated_message_btn1_text:e.templated_message_btn1_text,templated_message_btn1_type:e.templated_message_btn1_type,templated_message_btn2_text:e.templated_message_btn2_text,templated_message_btn2_type:e.templated_message_btn2_type,templated_message_btn3_text:e.templated_message_btn3_text,templated_message_btn3_type:e.templated_message_btn3_type,templated_message_buttons:e.templated_message_buttons.map(k),templated_message_footer:e.templated_message_footer,templated_message_header_media:e.templated_message_header_media,templated_message_header_text:e.templated_message_header_text,templated_message_header_type:e.templated_message_header_type,templated_message_offer_text:e.templated_message_offer_text,templated_message_offer_has_expiration:e.templated_message_offer_has_expiration,templated_message_offer_expiration_time:e.templated_message_offer_expiration_time,templated_message_offer_is_offer_code_personalized:e.templated_message_offer_is_offer_code_personalized,templated_message_cards:e.templated_message_cards.map(I),templated_message_id:e.templated_message_id,templated_message_name:e.templated_message_name,wec_referral_body:e.wec_referral_body,wec_referral_headline:e.wec_referral_headline,wec_referral_media:e.wec_referral_media,wec_referral_media_type:e.wec_referral_media_type,wec_referral_url:e.wec_referral_url,wec_referral_has_admin_text:e.wec_referral_has_admin_text,wec_sticker_id:e.wec_sticker_id}}function k(e){return{text:e.text,type:e.type}}function I(e){return{title_type:e.title_type,sample_handle:e.sample_handle,body:e.body,button:k(e.button)}}function T(e){var t=e.preview,n=t==null?null:t.uri,r=e.large_preview,o=r==null?null:r.uri;return{attach_type:"photo",extension:e.extension,id:e.id,large_preview:e.large_preview,large_preview_url:o,preview:e.preview,preview_url:n}}function D(e){return{attach_type:"audio",duration:e.duration,extension:e.extension,filesize:e.filesize,id:e.id,name:e.filename,url:e.playable_url,url_shimhash:e.url_shimhash}}function x(e){var t=e.first_metaline;return{call_to_actions:u(e.call_to_actions),default_action:e.default_action,desc:e.description,id:e.id,image_aspect_ratio:e.image_aspect_ratio,item_url:e.target_url,media_blob_attachments:e.media_blob_attachments,metalines:t==null?{}:{metaline_1:t},name:e.name,source:e.source_name,text:e.description,thumb_url:e.image_url,title:e.name}}function $(e){var t=e.business_items.nodes.map(x),n=u(e.call_to_actions);return{call_to_actions:n,items:t,message:e.message}}function P(e){return{call_to_actions:u(e.call_to_actions),items:e.promotion_items.nodes.map(x),message:e.message}}function N(e){var t=e.structured_address.streets,n=e.partner_logo;return{account_holder_name:e.account_holder_name,adjustments:e.adjustments.map(function(e){return{adjustment_type:e.adjustment_type,display_adjustment_amount:e.adjustment_amount}}),cancellation_url:e.cancellation_url,items:e.items.nodes.map(x),merchant_name:e.merchant_name,messenger_commerce_bubble_type:r("bs_js_null_undefined").fromOption(r("MNCommerceBubbleType")[e.messenger_commerce_bubble_type]),order_id:e.order_id,order_time:e.order_time,order_url:e.order_url,partner_logo:n!=null?n.uri:void 0,payment_method:e.payment_method,receipt_id:e.receipt_id,recipient_name:e.recipient_name,shipping_cost:e.shipping_cost,shipping_method:e.shipping_method,status:e.status,structured_address:{city:e.structured_address.city,country:e.structured_address.country,postal_code:e.structured_address.postal_code,state:e.structured_address.state,street_1:r("bs_caml_array").get(t,0),street_2:r("bs_caml_array").get(t,1)},subtotal:e.subtotal,total_cost:e.total_cost,total_tax:e.total_tax}}function M(e,t){return{actor_id:e,buyer_name:t.buyer_name,click_action:t.click_action,components:t.components,invoicer_id:t.invoicer_id,is_last_attachment:t.is_last_attachment,is_viewer_seller:t.is_viewer_seller,item_list:t.item_list.map(function(e){return{description:e.description,image_urls:e.images.map(function(e){return e.uri}),item_id:e.item_id,name:e.name,quantity:e.quantity,subtitle:e.subtitle,unit_price:e.unit_price}}),payment_call_to_actions:t.payment_call_to_actions,payment_modules_client:r("bs_js_null_undefined").fromOption(r("PaymentModulesClient")[t.payment_modules_client]),payment_snippet:t.payment_snippet,payment_status_icon:t.payment_status_icon,payment_sub_statuses:t.payment_sub_statuses,payment_total:t.payment_total,product_detail:t.product_detail,should_show_new_xma:t.should_show_new_xma,summary_action:t.summary_action,user_facing_payment_status:t.user_facing_payment_status}}var w=function(t){var e=n("LeadGenInfoFieldTypes"),r={},o=[];for(var a of t.field_data_list){var i=a.field_type,l=a.label,s=a.values;i===e.CUSTOM||i===e.ZIP?o.push({label:l,values:s}):r[i]={label:l,values:s}}return r.questions=o,r};function A(e,t){var n=t.invite_recipient,r=n==null?null:n.id,o=t.invite_sender,a=o==null?null:o.id;return{is_viewer_recipient:e===r,quick_invite_id:t.id,recipient_id:r,sender_id:a}}function F(e){var t=function(t){return t==null?null:t.uri},n=e.listing_category,r=n==null?[null,null]:[n.offer_image,n.request_image];return{listingType:e.listing_type,mapURI:t(e.map_image),offerURI:t(r[0]),requestURI:t(r[1])}}function O(e){return{bubbleView:e.bubble_view,receiver:e.receiver,sender:e.sender,transfer_id:e.transfer_id}}function B(e){var t=e.receiver_profile,n;if(t==null)n=null;else{var o=t.profile_picture;n={full_name:t.name,id:t.id,name:t.short_name,picture:o==null?null:o.uri,profile_url:t.url}}var a=e.sender,i;if(a==null)i={};else{var l=a.profile_picture;i={full_name:a.full_name,id:a.id,name:a.name,picture:l==null?null:l.uri,profile_uri:a.url}}var s=e.transfer_context,u;if(s==null)u=[null,null];else{var c=s.transfer_theme;u=[s.memo_images.map(function(e){var t=e.image;return t==null?null:t.uri}),c==null?null:c.id]}var d=e.platform_item,m=d==null?null:{description:d.description,image:d.photos.map(function(e){var t=e.image;return t==null?null:t.uri}),name:d.name,refURL:d.url},p=e.amount_fb_discount;return{amount:e.transaction_amount.amount,amountWithSymbol:e.transaction_amount.formatted_amount,bubbleView:e.bubble_view,completedTime:e.completedTime,creationTime:e.creationTime,currencyCode:e.currency_amount.currency,discountAmount:p==null?null:p.formatted,fundsAvailability:r("bs_js_null_undefined").fromOption(r("FundsAvailability")[e.funds_availability]),groupThreadFBID:e.group_thread_fbid,memoPhotoURLs:u[0],memoText:e.memo_text,platform_item:m,receiver:n,sender:i,status:r("bs_js_null_undefined").fromOption(r("P2PTransferStatus")[e.transfer_status]),statusDescription:{markup:e.status_description},themeID:u[1],transfer_id:e.transfer_id,updatedTime:e.updatedTime}}function W(e){var t=e.requester,n;if(t==null)n=void 0;else{var o=t.profile_picture;n={full_name:t.name,id:t.id,name:t.short_name,picture:o==null?null:o.uri,profile_url:t.url}}var a=e.requestee,i;if(a==null)i=void 0;else{var l=a.profile_picture;i={full_name:a.name,id:a.id,name:a.short_name,picture:l==null?null:l.uri,profile_url:a.url}}var s=r("P2PPaymentRequestStatus")[e.request_status],u=e.transfer,c=u==null?[null,""]:[B(u),u.id],d=e.request_theme;return{amount:e.transaction_amount.amount,amountWithSymbol:e.amount.formatted,bubbleView:e.bubble_view,creationTime:e.creation_time,currency:e.amount.currency,currentStatus:s,groupThreadFBID:e.group_thread_fbid,id:e.id,memoText:e.memo_text,requestee:i,requester:n,statusDescription:{markup:e.status_description},themeID:d==null?null:d.id,transfer:c[0],transferID:c[1],updatedTime:e.updated_time}}function q(e){var t=W({amount:e.amount,bubble_view:e.bubble_view,creation_time:e.creation_time,group_thread_fbid:e.group_thread_fbid,id:e.id,memo_text:e.memo_text,request_status:e.request_status,request_theme:e.request_theme,requestee:e.requestee,requester:e.requester,status_description:e.status_description,transaction_amount:e.transaction_amount,transfer:e.transfer,updated_time:e.updated_time}),n={individualRequests:e.individual_requests.map(W)};return Object.assign(t,n)}function U(e,t,n){var o=t.media,a=o==null?null:o.animated_image,i=o==null?null:o.image,l={};t.properties.forEach(function(e){var t=e.value;l[e.key]=t==null?null:t.text});var s=t.target,u;if(s==null)u=null;else switch(s.TAG){case 0:u=F(s._0);break;case 1:u=O(s._0);break;case 2:u=B(s._0);break;case 3:u=q(s._0);break;case 4:u=M(e,s._0);break;case 5:u=P(s._0);break;case 6:u=$(s._0);break;case 8:u=w(s._0);break;case 9:u=L(s._0);break;case 10:u=A(e,s._0);break;case 11:u=v(s._0);break;case 12:u=S(s._0);break;case 13:u=R(s._0);break;case 14:var d=s._0,m=d.genie_sender,x=m==null?[null,null]:[m.messaging_actor.id,m.messaging_actor.name],W=x[0],U={action_links:[],deduplication_key:null,description:null,media:null,messaging_attribution:null,messenger_call_to_actions:[],messenger_generic_xma_template_extra_info:null,properties:[],source:null,style_list:[],subattachments:[],target:null,title_with_entities:null,url:null,xma_layout_info:null},H=t.media,G;if(H==null)G=null;else{var z=H.pack;if(z==null){var j=d.story_attachment;G=j==null||n==null?null:V(e,{genie_attachment:{genie_message:{story_attachment:U}},legacy_attachment_id:W,story_attachment:{action_links:n.action_links,deduplication_key:n.deduplication_key,description:n.description,media:n.media,messaging_attribution:n.messaging_attribution,messenger_call_to_actions:n.messenger_call_to_actions,messenger_generic_xma_template_extra_info:n.messenger_generic_xma_template_extra_info,properties:n.properties,source:n.source,style_list:n.style_list,subattachments:n.subattachments,target:n.target,title_with_entities:n.title_with_entities,url:n.url,xma_layout_info:n.xma_layout_info}})}else G=n==null?null:V(e,{genie_attachment:{genie_message:{story_attachment:U}},legacy_attachment_id:W,story_attachment:U})}u={attachment:G,genie_id:W,genie_name:x[1]};break;case 16:u=f(s._0);break;case 18:u=b(s._0);break;case 19:u=g(s._0);break;case 20:u=h(s._0);break;case 21:u=N(s._0);break;case 23:u=_(s._0);break;case 24:u=p(e,s._0);break;case 36:u=E(s._0);break;case 37:u=T(s._0);break;case 38:u=D(s._0);break;case 39:u=y(s._0);break;case 40:u=C(s._0);break;case 60:u=I(s._0);break;case 61:u=k(s._0);break;default:u=s._0}var K=t.target,Q=K==null||K.TAG!==5?null:0,X=t.description,Y=t.source,J=t.title_with_entities;return{action_links:c(t.action_links),deduplication_key:t.deduplication_key,description:X==null?null:X.text,label:Q,media:{animated_image:a==null?null:a.uri,animated_image_size:a==null?{height:null,width:null}:{height:a.height,width:a.width},duration:o==null?null:o.playable_duration,image:i==null?null:i.uri,image_size:i==null?{height:null,width:null}:{height:i.height,width:i.width},playable:o==null?null:o.is_playable,source:o==null?null:o.playable_url},messaging_attribution:t.messaging_attribution,messenger_ctas:t.messenger_call_to_actions.map(function(e){return{action_open_type:r("bs_js_null_undefined").fromOption(r("MNCommerceCallToActionType")[e.action_open_type]),action_title:e.title,action_url:e.action_link,id:e.id,is_disabled:e.is_disabled,is_high_confidence:r("bs_belt_Option").getWithDefault(r("bs_caml_option").nullable_to_opt(e.is_high_confidence),!1),is_mutable_by_server:e.is_mutable_by_server,native_url:e.native_url,page_id:r("bs_belt_Option").getWithDefault(r("bs_caml_option").nullable_to_opt(e.page_id),""),webview_metadata:{fallback_url:e.webview_metadata.fallback_url,messenger_extensions:e.webview_metadata.messenger_extensions,webview_height_ratio:e.webview_metadata.webview_height_ratio,webview_share_button:e.webview_metadata.webview_share_button}}}),messenger_generic_xma_template_extra_info:t.messenger_generic_xma_template_extra_info,properties:l,source:Y==null?null:Y.text,style_list:t.style_list,target:u,title:J==null?null:J.text,uri:t.url,xma_layout_info:t.xma_layout_info}}function V(e,t){var n=t.genie_attachment,r;if(n==null)r=null;else{var o=n.genie_message;if(o==null)r=null;else{var a=o.story_attachment;r=a==null?null:{action_links:a.action_links,deduplication_key:a.deduplication_key,description:a.description,media:a.media,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,messenger_generic_xma_template_extra_info:a.messenger_generic_xma_template_extra_info,properties:a.properties,source:a.source,style_list:a.style_list,subattachments:a.subattachments,target:a.target,title_with_entities:a.title_with_entities,url:a.url,xma_layout_info:a.xma_layout_info}}}var i=t.story_attachment,l;if(i==null)l=null;else{var s={action_links:[],deduplication_key:null,description:null,media:null,messaging_attribution:null,messenger_call_to_actions:[],messenger_generic_xma_template_extra_info:null,properties:[],source:null,style_list:[],subattachments:[],target:null,title_with_entities:null,url:null,xma_layout_info:null},u={share_id:t.legacy_attachment_id,subattachments:i.subattachments.map(function(t){return U(e,t,s)})},c={action_links:i.action_links,deduplication_key:i.deduplication_key,description:i.description,media:i.media,messaging_attribution:i.messaging_attribution,messenger_call_to_actions:i.messenger_call_to_actions,messenger_generic_xma_template_extra_info:i.messenger_generic_xma_template_extra_info,properties:i.properties,source:i.source,style_list:i.style_list,target:i.target,title_with_entities:i.title_with_entities,url:i.url,xma_layout_info:i.xma_layout_info},d=r==null?{action_links:i.action_links,deduplication_key:i.deduplication_key,description:i.description,media:i.media,messaging_attribution:i.messaging_attribution,messenger_call_to_actions:i.messenger_call_to_actions,messenger_generic_xma_template_extra_info:i.messenger_generic_xma_template_extra_info,properties:i.properties,source:i.source,style_list:i.style_list,subattachments:i.subattachments,target:i.target,title_with_entities:i.title_with_entities,url:i.url,xma_layout_info:i.xma_layout_info}:{action_links:r.action_links,deduplication_key:r.deduplication_key,description:r.description,media:r.media,messaging_attribution:r.messaging_attribution,messenger_call_to_actions:r.messenger_call_to_actions,messenger_generic_xma_template_extra_info:r.messenger_generic_xma_template_extra_info,properties:r.properties,source:r.source,style_list:r.style_list,subattachments:r.subattachments,target:r.target,title_with_entities:r.title_with_entities,url:r.url,xma_layout_info:r.xma_layout_info};l=Object.assign(u,U(e,c,d))}return{app_attribution:null,attach_type:"share",icon_type:null,large_preview_height:null,large_preview_url:null,large_preview_width:null,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:l,thumbnail_url:null,url:null}}l._getCallToActions=u,l._getActionLinks=c,l._getColor=d,l._getLogo=m,l._getPageTarget=p,l._getGroupCommerceProductItemTarget=_,l._getExternalSongTarget=f,l._getAgentSuggestionItemTarget=g,l._getFundraiserTarget=h,l._getWECFileTarget=y,l._getWECMessageVideoTarget=C,l._getRetailItemTarget=b,l._getPagesPlatformBookingMessageTarget=v,l._getServicesAppointmentAvailabilityTarget=S,l._getServicesGenericAdminTextTarget=R,l._getMessageLiveLocationTarget=L,l._getWECMessageTarget=E,l._getWECMessageButtonTarget=k,l._getWECMessageCardTarget=I,l._getWECMessageImageTarget=T,l._getWECMessageAudioTarget=D,l._getBusinessRetailItem=x,l._getMessengerBusinessMessageTarget=$,l._getMessengerRetailPromotionTarget=P,l._getMessengerRetailReceiptTarget=N,l._getPagesPlatformAttachmentTarget=M,l._getPagesPlatformLeadGenInfoTarget=w,l._getQuickInviteTarget=A,l._getCrisisListingTarget=F,l._getMoneyTransferTarget=O,l._getP2PTransferTarget=B,l._getP2PTransferRequestTarget=W,l._getP2PTransferRequestWithIndividualRequests=q,l.transformStoryAttachment=U,l.getExtensibleAttachmentPayload=V}),226);
__d("MessengerAttachmentTransformer.bs",["fbt","MessageSharedMediaIDStore.bs","MessengerStoryAttachmentTransformer.bs","bs_caml"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e){if(e.is_malicious){var t=s._(/*BTDS*/"Este anexo foi marcado como malicioso.");return{app_attribution:null,attach_type:"error",error_msg:t,icon_type:"attach:unknown",message_file_fbid:null,metadata:null,mime_type:null,name:null,preview:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,url_shimhash:null,url_skipshim:null}}var n=e.attribution_app,r;if(n==null)r=null;else{var o=n.square_logo;r={icon_url:o==null?null:o.uri,id:n.id,metadata:e.attribution_metadata,name:n.name}}var a=e.url;return{app_attribution:r,attach_type:"file",error_msg:void 0,icon_type:e.content_type,message_file_fbid:e.message_file_fbid,metadata:null,mime_type:e.mimetype,name:e.filename,preview:e.preview,preview_height:null,preview_url:e.preview_url,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:a==null?null:a,url_shimhash:e.url_shimhash,url_skipshim:e.url_skipshim}}function c(e,t,n){var r=e.chat_image,o=r==null?[null,null,null]:[r.uri,r.width,r.height],a=o[0],i=e.chat_image,l=i==null?null:{height:i.height,width:i.width},s=e.large_image,u=s==null?[null,null]:[s.uri,{height:s.height,width:s.width}],c=e.inbox_image,d=c==null?[null,null]:[c.uri,{height:c.height,width:c.width}],m=e.attribution_app,p;if(m==null)p=null;else{var _=m.square_logo;p={icon_url:_==null?null:_.uri,id:m.id,metadata:e.attribution_metadata,name:m.name}}return{app_attribution:p,attach_type:"video",icon_type:"attach:video",large_preview_height:null,large_preview_url:null,large_preview_width:null,metadata:{chat_preview:a,chat_size:l,dimensions:{height:e.original_dimensions.y,width:e.original_dimensions.x},duration:e.playable_duration_in_ms,fbid:e.legacy_attachment_id,inbox_preview:d[0],inbox_size:d[1],large_preview:u[0],large_size:u[1],pageid:n?t:void 0,render_as_sticker:e.video_type==="SPEAKING_STICKER"},name:e.filename,preview_height:o[2],preview_url:a,preview_width:o[1],rel:"async",share:null,thumbnail_url:a,url:e.playable_url}}function d(e){var t=e.attribution_app,n;if(t==null)n=null;else{var r=t.square_logo;n={icon_url:r==null?null:r.uri,id:t.id,metadata:e.attribution_metadata,name:t.name}}return{app_attribution:n,attach_type:"file",icon_type:"attach:music",large_preview_height:null,large_preview_url:null,large_preview_width:null,metadata:{duration:e.playable_duration_in_ms,isVoicemail:e.is_voicemail?"1":"0",type:e.audio_type==="VOICE_MESSAGE"?"fb_voice_message":e.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},name:e.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:e.playable_url,url_shimhash:e.url_shimhash,url_skipshim:e.url_skipshim}}function m(e,t,n){var r=e.preview_image,o=r==null?[null,null,null]:[r.uri,r.width,r.height],a=e.animated_image,i=a==null?null:a.uri,l=e.attribution_app,s;if(l==null)s=null;else{var u=l.square_logo;s={icon_url:u==null?null:u.uri,id:l.id,metadata:e.attribution_metadata,name:l.name}}return{app_attribution:s,attach_type:"animated_image",icon_type:"attach:image",large_preview_height:null,large_preview_url:null,large_preview_width:null,metadata:{dimensions:String(e.original_dimensions.x)+(","+String(e.original_dimensions.y)),fbid:e.legacy_attachment_id,image:i,pageid:n?t:void 0},name:e.filename,preview_height:o[2],preview_url:o[0],preview_width:o[1],rel:"async",share:null,thumbnail_url:i,title:e.title,url:i}}function p(e){var t=e.original_extension==="gif"?"animated_image":e.render_as_sticker?"third_party_sticker":"photo",n=e.preview,r=n==null?[null,null,null]:[n.uri,n.width,n.height],o;if(t==="photo"){var a=e.large_preview;o=a==null?[null,null,null]:[a.uri,a.width,a.height]}else o=[null,null,null];var i=e.attribution_app,l;if(i==null)l=null;else{var s=i.square_logo;l={icon_url:s==null?null:s.uri,id:i.id,metadata:e.attribution_metadata,name:i.name}}var u=e.thumbnail;return{app_attribution:l,attach_type:t,blurred_image_uri:e.blurred_image_uri,icon_type:"attach:image",large_preview_height:o[2],large_preview_url:o[0],large_preview_width:o[1],metadata:{dimensions:String(e.original_dimensions.x)+(","+String(e.original_dimensions.y)),fbid:e.legacy_attachment_id},name:e.filename,photo_encodings:e.photo_encodings,preview_height:r[2],preview_url:r[0],preview_width:r[1],rel:"async",share:null,thumbnail_url:u==null?null:u.uri,url:null}}function _(t,n){var o=t,a=n;if(t>=n){var i=(e||(e=r("bs_caml"))).caml_float_min(120,o/2),l=i/(o/2);return[i|0,a/2*l|0]}var s=(e||(e=r("bs_caml"))).caml_float_min(120,a/2),u=s/(a/2);return[o/2*u|0,s|0]}function f(e){var t=_(e.width,e.height),n=e.pack,r=e.padded_sprite_image,o=e.padded_sprite_image_2x,a=e.sprite_image,i=e.sprite_image_2x;return{app_attribution:null,attach_type:"sticker",icon_type:"attach:unknown",large_preview_height:null,large_preview_url:null,large_preview_width:null,metadata:{accessibilityLabel:e.label,frameCount:e.frame_count,frameRate:e.frame_rate,framesPerCol:e.frame_count>1?e.frames_per_column:1,framesPerRow:e.frame_count>1?e.frames_per_row:1,height:t[1],packID:n==null?null:n.id,paddedSpriteURI:r==null?null:r.uri,paddedSpriteURI2x:o==null?null:o.uri,share:null,spriteURI:a==null?null:a.uri,spriteURI2x:i==null?null:i.uri,stickerID:e.id,thumbnail_url:null,width:t[0]},name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,url:e.url}}function g(e,t){if(t!=null)return o("MessageSharedMediaIDStore.bs").setMessageIDForAttachmentID(e,t)}function h(e,t,n,r){var a=[],i={frame_count:0,frame_rate:0,frames_per_column:0,frames_per_row:0,height:0,id:"",label:"",pack:null,padded_sprite_image:null,padded_sprite_image_2x:null,sprite_image:null,sprite_image_2x:null,url:null,width:0},l=t.extensible_attachment,s;if(l==null)s=i;else{var _=l.story_attachment;if(_==null)s=i;else{var h=_.media;if(h==null)s=i;else{var y=h.__typename;s=y==="Sticker"?{frame_count:h.frame_count,frame_rate:h.frame_rate,frames_per_column:h.frames_per_column,frames_per_row:h.frames_per_row,height:h.height,id:h.id,label:h.label,pack:h.pack,padded_sprite_image:h.padded_sprite_image,padded_sprite_image_2x:h.padded_sprite_image_2x,sprite_image:h.sprite_image,sprite_image_2x:h.sprite_image_2x,url:h.url,width:h.width}:i}}}var C=s.id;C!=null&&C!==""&&a.push(f(s));var b=t.extensible_attachment;b!=null&&a.push(o("MessengerStoryAttachmentTransformer.bs").getExtensibleAttachmentPayload(e,b));var v=t.sticker;v!=null&&a.push(f(v));var S=t.blob_attachments;return S!=null&&S.forEach(function(t){switch(t.TAG){case 0:var o=t._0;g(o.legacy_attachment_id,n),a.push(p(o));return;case 1:var i=t._0;g(i.legacy_attachment_id,n),a.push(m(i,e,r));return;case 2:a.push(d(t._0));return;case 3:var l=t._0;g(l.legacy_attachment_id,n),a.push(c(l,e,r));return;case 4:a.push(u(t._0));return}}),a}l._getFilePayload=u,l._getVideoPayload=c,l._getAudioPayload=d,l._getAnimatedImagePayload=m,l._getImagePayload=p,l._getStickerDimensions=_,l.getStickerPayload=f,l._storeAttachmentMapping=g,l.transformAttachment=h}),226);
__d("MessengerGroupAdminModelStatus.bs",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e==null)return null;var t=e.toUpperCase();switch(t){case"NOT_SUPPORTED":return"not_supported";case"OPTIONAL":return"optional";case"REQUIRED":return"required";default:return null}}i.fromNullableString=e}),66);
__d("MessengerGroupThreadSubType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADMIN_MODEL_V2_THREAD:1,FB_GROUP_CHAT:2,MARKETPLACE_THREAD:3,SCHOOL_CHAT:4,DEPRECATED__WORK_SYNCED_CHAT:5,ADMIN_NOT_SUPPORTED_THREAD:6,BELL_SYNCED_CHAT:7,GAMES_APP_THREAD:8,VAULT_CHAT:9,VERSE_CHAT:10,GENERIC_COMMERCE_THREAD:11,USER_JOB_THREAD:12,APPROVAL_ENFORCED_CHATROOM_THREAD:14,PARENT_APPROVED_SHEPHERD_MANAGED_THREAD:15,CAMPUS_GROUP_THREAD:16,LOCAL_COMMUNITIES_THREAD:17,CHAT_FOR_ROOM_THREAD:18,GAMING_PLAY_SQUAD:19,CHAT_FOR_GROUP_ADMIN_TO_MEMBER_THREAD:20,EITM_BACKED_IG_1TO1_THREAD:21,LEARNING_SPACE:23,E2EE_GROUP_THREAD_METADATA:24,IGD_BC_PARTNERSHIP:25,E2EE_1TO1_THREAD_METADATA:26,JOBS_CAREER_GROUP_THREAD:27,IG_CREATOR_SUBSCRIBER_GROUP_THREAD:28,IG_CREATOR_SUBSCRIBER_BROADCAST_CHAT:29,BUSINESS_SUPPORT_THREAD:30,TAGGED_PII_DATA:31,IG_DISCOVERABLE_CHAT_THREAD:32,SUPPORT_MESSAGING_THREAD:33,DISCOVERABLE_PUBLIC_CHAT:34,DISCOVERABLE_PUBLIC_BROADCAST_CHAT:35,DISCOVERABLE_PUBLIC_CHAT_V2:36,IG_DISCOVERABLE_CHAT_THREAD_V2:37,OCULUS_MEDIA_MESSAGING:38,WORK_CHAT_THREAD_CENTRIC:39,COMMUNITY_MESSAGING_PUBLIC_THREAD:40,COMMUNITY_MESSAGING_ADMOD_THREAD:42,COMMUNITY_MESSAGING_BROADCAST_THREAD:43,IG_E2EE_GROUP_THREAD_METADATA:44,IG_NFT_BROADCAST_CHAT:45,STANDALONE_COMMUNITY_STANDARD_THREAD:46,IGD_GROUP:47,WORKCHAT_GROUP_THREAD:48,WORKROOM_GROUP_THREAD:49,OCULUS_GROUP_THREAD:50,INTEROP_GROUP:51,IG_BTV_E2EE_1TO1_THREAD_METADATA:52,COMMUNITY_MESSAGING_HELPER_BOT_THREAD:53,COMMUNITY_MESSAGING_SUB_THREAD:54,IG_GROUP_PROFILES:55,IG_PRIVATE_EVENT:56,WA_GENAI_BOT_MAILBOX_THREAD:57,MESSENGER_GENAI_BOT_MAILBOX_THREAD:58,IG_GENAI_BOT_MAILBOX_THREAD:59,E2EE_COMMUNITY_CHAT_METADATA:60,IG_SUBSCRIBER_SOCIAL_CHANNEL:61,IG_SOCIAL_CHANNEL:62,GENERIC_GENAI_BOT_MAILBOX_THREAD:63,GENAI_IMAGINE:64,FB_GENAI_BOT_MAILBOX_THREAD:65,ABRA_GENAI_BOT_MAILBOX_THREAD:66,GENAI_STUDIO_BOT_MAILBOX_THREAD:67,SHOPS_AI_ASSISTANT_THREAD:68,IG_E2EE_1TO1_THREAD_METADATA:69,IG_THREAD_WITH_BOT_PARTICIPANTS:70,IG_SUPPORT_MESSAGING_THREAD:71,MARKETPLACE_JOBS_THREAD:72,WA_SUPPORT_MESSAGING_THREAD:73,COMMUNITY_MESSAGING_ANNOUNCEMENT_THREAD:74,MSGR_DMA_INTEROP_GROUP_METADATA:75,IG_BOT_ACTIVITIES:76,MSGR_BOT_ACTIVITIES:77,MAIBA_GENAI_BOT_MAILBOX_THREAD:78,TH_1TO1:79,FBN_BUSINESS_1TO1:80,SALES_AI:81,TH_GROUP:82,MSGR_THREAD_WITH_BOT_PARTICIPANTS:83,FRLM_SUPPORT_MESSAGING_THREAD:84,META_AI_INCOGNITO_CONVO_BOT_MAILBOX_THREAD:85,MSGR_META_AI_SIDE_CHAT:86,MSGR_META_AI_NON_CANONICAL_THREAD:87,TH_LIVE_CHAT:88});i.default=e}),66);
__d("MessengerGroupsSyncStatus.bs",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e==null)return null;switch(e){case"OPT_IN":return"OPT_IN";case"OPT_OUT":return"OPT_OUT";case"PENDING_OPT_IN":return"PENDING_OPT_IN";case"PENDING_OPT_OUT":return"PENDING_OPT_OUT";case"UNSET":return"UNSET";case"UNSUPPORTED":return"UNSUPPORTED";default:return null}}i.fromNullableString=e}),66);
__d("P2PPaymentLogMessageSubtype",[],(function(t,n,r,o,a,i){var e=Object.freeze({SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired",REQUEST_REMINDER:"request_reminder",MONEY_RAIN_GAME_ENTRY_POINT:"money_rain_game_entry_point"});i.default=e}),66);
__d("getByPath",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=e;if(!t||!t.length)return r;for(var o=0;o<t.length;o++){var a=t[o];if(r&&typeof r!="string"&&typeof r!="number"&&a in r)r=r[a];else return n}return r}i.default=e}),66);
__d("MessengerMessageTransformer.bs",["CurrentUser","FBIDCheck","InstantGameUpdateXMATUpdateType","MNCommerceMessageType","MercuryIDs","MessageUnsendabilityStatus.bs","MessagingGenericAdminTextType","MessagingTagUtils","MessengerAttachmentTransformer.bs","P2PPaymentLogMessageSubtype","bs_caml_format","bs_caml_option","bs_js_null_undefined","getByPath"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.blob_attachments,n=[];return t!=null&&t.forEach(function(e){if(e.__typename==="MessageImage"){n.push({_0:{attribution_app:e.attribution_app,attribution_metadata:e.attribution_metadata,blurred_image_uri:e.blurred_image_uri,filename:e.filename,id:e.id,large_preview:e.large_preview,legacy_attachment_id:e.legacy_attachment_id,original_dimensions:e.original_dimensions,original_extension:e.original_extension,photo_encodings:e.photo_encodings,preview:e.preview,render_as_sticker:e.render_as_sticker,thumbnail:e.thumbnail},TAG:0});return}else if(e.__typename==="MessageAnimatedImage"){n.push({_0:{animated_image:e.animated_image,attribution_app:e.attribution_app,attribution_metadata:e.attribution_metadata,filename:e.filename,legacy_attachment_id:e.legacy_attachment_id,original_dimensions:e.original_dimensions,preview_image:e.preview_image,title:e.animated_image_caption},TAG:1});return}else if(e.__typename==="MessageAudio"){n.push({_0:{attribution_app:e.attribution_app,attribution_metadata:e.attribution_metadata,audio_type:e.audio_type,filename:e.filename,is_voicemail:e.is_voicemail,playable_duration_in_ms:e.playable_duration_in_ms,playable_url:e.playable_url,url_shimhash:e.url_shimhash,url_skipshim:e.url_skipshim},TAG:2});return}else if(e.__typename==="MessageVideo"){n.push({_0:{attribution_app:e.attribution_app,attribution_metadata:e.attribution_metadata,chat_image:e.chat_image,filename:e.filename,inbox_image:e.inbox_image,large_image:e.large_image,legacy_attachment_id:e.legacy_attachment_id,original_dimensions:e.original_dimensions,playable_duration_in_ms:e.playable_duration_in_ms,playable_url:e.playable_url,video_type:e.video_type},TAG:3});return}else if(e.__typename==="MessageFile"){n.push({_0:{attribution_app:e.attribution_app,attribution_metadata:e.attribution_metadata,content_type:e.content_type,filename:e.filename,is_malicious:e.is_malicious,message_file_fbid:e.message_file_fbid,mimetype:e.mimetype,preview:e.preview,preview_url:e.preview_url,url:e.url,url_shimhash:e.url_shimhash,url_skipshim:e.url_skipshim},TAG:4});return}else return}),n}function s(t,n,r){var a=n.call_capture_attachments;return a==null?[]:o("MessengerAttachmentTransformer.bs").transformAttachment(t,{blob_attachments:e({blob_attachments:a.edges.map(function(e){return e.node})}),extensible_attachment:null,sticker:null},n.message_id,r)}function u(e,t,n,o,a){var i;if(t.__typename==="GroupPollExtensibleMessageAdminText"){var l=t.question,u;if(l==null)u=[{},null];else{var c=babelHelpers.extends({},l);Object.assign(c,{options:l.options.nodes.map(function(e){var t=babelHelpers.extends({},e);return Object.assign(t,{total_count:e.voters.nodes.length,voters:e.voters.nodes.map(function(e){return e.id})})}),total_count:t.total_count}),u=[c,l.id]}i={message_type:r("MessagingGenericAdminTextType")[n],untypedData:{event_type:t.event_type.toLowerCase(),question_id:u[1],question_json:r("bs_js_null_undefined").fromOption(JSON.stringify(u[0]))}}}else if(t.__typename==="InstantGameUpdateExtensibleMessageAdminText"){var d;i={message_type:r("MessagingGenericAdminTextType")[n],untypedData:{collapsed_text:t.collapsed_text,cta_title:(d=r("getByPath"))(t,["instant_game_update_data","cta_title"]),cta_url:d(t,["instant_game_update_data","cta_url"]),custom_image_url:d(t,["instant_game_update_data","photo","image","uri"]),expanded_text:t.expanded_text,game_id:d(t,["game","id"]),leaderboard_json:t.leaderboard_json,template:d(t,["instant_game_update_data","template"]),update_type:r("InstantGameUpdateXMATUpdateType")[t.update_type]}}}else if(t.__typename==="MessengerAdContextAdminText")i={message_type:r("MessagingGenericAdminTextType")[n],untypedData:{ad_url:t.ad_url}};else if(t.__typename==="AdExtensibleMessageAdminText")i={message_type:r("MessagingGenericAdminTextType")[n],untypedData:{ad_client_token:t.ad_client_token,ad_id:t.ad_id,ad_preferences_link:t.ad_preferences_link,ad_properties:t.ad_properties}};else if(t.__typename==="MessengerCallLogExtensibleMessageAdminText")i={message_type:r("MessagingGenericAdminTextType")[n],untypedData:babelHelpers.extends({},t,{call_capture_attachments:s(e,t,a)})};else if(t.__typename==="ThemeColorExtensibleMessageAdminText"||t.__typename==="ThreadIconExtensibleMessageAdminText"||t.__typename==="ThreadNicknameExtensibleMessageAdminText"||t.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||t.__typename==="AddContactExtensibleMessageAdminText"||t.__typename==="RtcCallLogExtensibleMessageAdminText"||t.__typename==="GameScoreExtensibleMessageAdminText"||t.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||t.__typename==="MessengerGrowthGenericExtensibleMessageAdminText"||t.__typename==="PartiesInviteExtensibleMessageAdminText"||t.__typename==="AppointmentReminderExtensibleMessageAdminText"||t.__typename==="LinkCTAExtensibleMessageAdminText"||t.__typename==="MessengerLiveChatPluginURLUpdateAdminText"||t.__typename==="MessengerLiveChatPluginFBUserStartChatAdminText"||t.__typename==="MessengerLiveChatPluginGuestUserStartChatAdminText"||t.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||t.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||t.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||t.__typename==="MessengerIcebreakerVoteCastExtensibleMessageAdminText"||t.__typename==="PagesMarkAsPaidExtensibleMessageAdminText"||t.__typename==="PagesMarkAsPaidNewExtensibleMessageAdminText"||t.__typename==="WorkBotInstalledExtensibleMessageAdminText"||t.__typename==="WorkChatReminderLinkCTAExtensibleMessageAdminText"||t.__typename==="PageThreadActionSystemAddDetailsXMAT"||t.__typename==="MagicWordsExtensibleMessageAdminText"||t.__typename==="NotificationMessagesAdminText"||t.__typename==="PostSharedFromGroupExtensibleMessageAdminText"||t.__typename==="BizInboxFormBuilderSubmitNotifyAdminText"||t.__typename==="BizInboxDetectedOutcomesActivityAdminTextExtensibleMessageAdminText"||t.__typename==="InstantGameBotMessageSubscriptionManagementAdminText"||t.__typename==="InstantGameCustomUpdateMuteManagementAdminText")i={message_type:r("MessagingGenericAdminTextType")[n],untypedData:babelHelpers.extends({},t)};else if(t.__typename==="LightweightEventCreateExtensibleMessageAdminText"||t.__typename==="LightweightEventDeleteExtensibleMessageAdminText"||t.__typename==="LightweightEventNotifyBeforeEventExtensibleMessageAdminText"||t.__typename==="LightweightEventNotifyExtensibleMessageAdminText"||t.__typename==="LightweightEventUpdateExtensibleMessageAdminText"||t.__typename==="LightweightEventUpdateLocationExtensibleMessageAdminText"||t.__typename==="LightweightEventUpdateTimeExtensibleMessageAdminText"||t.__typename==="LightweightEventUpdateTitleExtensibleMessageAdminText"||t.__typename==="LightweightEventRSVPExtensibleMessageAdminText"){var m=t.event_reminder,p;if(m==null)p=void 0;else{var _=m.lightweight_event_creator,f=_!=null?_.id:void 0,g=m.location_page,h=g!=null?g.id:void 0,y=m.timezone_id,C=y!=null?y.timezone:void 0,b=m.location_coordinates,v=b==null?{latitude:void 0,longitude:void 0}:b,S=m.event_reminder_members,R=S!=null?S.edges:void 0;p={event_creator_id:f,event_end_time:m.end_time,event_id:m.id,event_location_id:h,event_location_name:m.location_name,event_seconds_to_notify_before:m.seconds_to_notify_before,event_time:m.time,event_timezone:C,event_title:m.event_title,event_track_rsvp:m.allows_rsvp,event_type:m.lightweight_event_type,guest_id:t.guest_id,guest_state_list:R,guest_status:t.guest_status,latitude:v.latitude,longitude:v.longitude}}i={message_type:r("MessagingGenericAdminTextType")[n],untypedData:p}}else i=t.__typename==="AdReplyMessageAdminText"?{message_type:r("MessagingGenericAdminTextType")[n],untypedData:{ad_url:t.ad_url,results_url:t.results_url,should_show_url:t.should_show_url}}:{message_type:r("MessagingGenericAdminTextType")[n],untypedData:void 0};return{log_message_body:o,log_message_data:i,log_message_type:"log:generic-admin-text"}}function c(e){return e.map(function(e){return e==="p2p_transfer"?"orion":e==="p2p_payment_request"?"orion_request":e})}function d(e){var t=e.target,n;if(t==null)n=null;else if(t.__typename==="CrisisListing")n={_0:{listing_category:t.listing_category,listing_type:t.listing_type,map_image:t.map_image},TAG:0};else if(t.__typename==="MoneyTransfer")n={_0:{bubble_view:t.bubble_view,receiver:t.receiver,sender:t.sender,transfer_id:t.transfer_id},TAG:1};else if(t.__typename==="PeerToPeerTransfer")n={_0:{amount_fb_discount:t.amount_fb_discount,bubble_view:t.bubble_view,completedTime:t.completedTime,creationTime:t.creationTime,currency_amount:t.currency_amount,funds_availability:t.funds_availability,group_thread_fbid:t.group_thread_fbid,id:t.id,memo_text:t.memo_text,platform_item:t.platform_item,receiver_profile:t.receiver_profile,sender:t.sender,status_description:t.status_description,transaction_amount:t.transaction_amount,transfer_context:t.transfer_context,transfer_id:t.transfer_id,transfer_status:t.transfer_status,updatedTime:t.updatedTime},TAG:2};else if(t.__typename==="PeerToPeerPaymentRequest")n={_0:{amount:t.amount,bubble_view:t.bubble_view,creation_time:t.creation_time,group_thread_fbid:t.group_thread_fbid,id:t.id,individual_requests:t.individual_requests,memo_text:t.memo_text,request_status:t.request_status,request_theme:t.request_theme,requestee:t.requestee,requester:t.requester,status_description:t.status_description,transaction_amount:t.transaction_amount,transfer:t.transfer,updated_time:t.updated_time},TAG:3};else if(t.__typename==="PaymentPlatformAttachment")n={_0:{buyer_name:t.buyer_name,click_action:t.click_action,components:t.components,invoicer_id:t.invoicer_id,is_last_attachment:t.is_last_attachment,is_viewer_seller:t.is_viewer_seller,item_list:t.item_list,payment_call_to_actions:t.payment_call_to_actions,payment_modules_client:t.payment_modules_client,payment_snippet:t.payment_snippet,payment_status_icon:t.payment_status_icon,payment_sub_statuses:t.payment_sub_statuses,payment_total:t.payment_total,product_detail:t.product_detail,should_show_new_xma:t.should_show_new_xma,summary_action:t.summary_action,user_facing_payment_status:t.user_facing_payment_status},TAG:4};else if(t.__typename==="MessengerRetailPromotion")n={_0:{call_to_actions:t.call_to_actions,message:t.message,promotion_items:t.promotion_items},TAG:5};else if(t.__typename==="MessengerBusinessMessage")n={_0:{business_items:t.business_items,call_to_actions:t.call_to_actions,message:t.message},TAG:6};else if(t.__typename==="Video")n={_0:{video_id:t.video_id},TAG:7};else if(t.__typename==="PagesPlatformLeadGenInfo")n={_0:{field_data_list:t.field_data_list},TAG:8};else if(t.__typename==="MessageLiveLocation")n={_0:{coordinate:t.coordinate,expiration_time:t.expiration_time,is_expired:t.is_expired,live_location_id:t.live_location_id,location_title:t.location_title,sender:t.sender,sender_destination:t.sender_destination,stop_reason:t.stop_reason},TAG:9};else if(t.__typename==="QuickInvite")n={_0:{id:t.id,invite_recipient:t.invite_recipient,invite_sender:t.invite_sender},TAG:10};else if(t.__typename==="PagesPlatformBookingMessage")n={_0:{id:t.id,ls_xma_subtitle:t.ls_xma_subtitle,ls_xma_title:t.ls_xma_title,message_bubble_type:t.message_bubble_type,native_component_flow_request:t.native_component_flow_request,page:t.page,user:t.user},TAG:11};else if(t.__typename==="ServicesAppointmentAvailability")n={_0:{consumer:t.consumer,formatted_available_time_ranges:t.formatted_available_time_ranges,has_booking_request_created:t.has_booking_request_created,id:t.id,page:t.page},TAG:12};else if(t.__typename==="ServicesGenericAdminText")n={_0:{id:t.id},TAG:13};else if(t.__typename==="GenieMessage")n={_0:{genie_sender:t.genie_sender,story_attachment:t.story_attachment},TAG:14};else if(t.__typename==="Event")n={_0:{canViewerJoin:t.canViewerJoin,canViewerWatch:t.canViewerWatch,connection_style:t.connection_style,event_place:t.event_place,eventID:t.eventID,guestStatus:t.guestStatus,name:t.name,profile_picture:t.profile_picture,social_context:t.social_context,start_timestamp:t.start_timestamp,timeString:t.timeString,watchStatus:t.watchStatus},TAG:15};else if(t.__typename==="ExternalSong")n={_0:{application_name:t.application_name,artist_names:t.artist_names,audio_url:t.audio_url,duration_ms:t.duration_ms,music_title:t.music_title},TAG:16};else if(t.__typename==="LightweightAction")n={_0:{lwa_state:t.lwa_state,lwa_type:t.lwa_type},TAG:17};else if(t.__typename==="MessengerRetailItem")n={_0:{call_to_actions:t.call_to_actions,default_action:t.default_action,desc:t.desc,first_metaline:t.first_metaline,id:t.id,image_aspect_ratio:t.image_aspect_ratio,item_url:t.item_url,name:t.name,second_metaline:t.second_metaline,source:t.source,third_metaline:t.third_metaline,thumb_url:t.thumb_url},TAG:18};else if(t.__typename==="AgentItemSuggestion")n={_0:{desc:t.desc,id:t.id,merchant_name:t.merchant_name,name:t.name,payment:t.payment,price_amount:t.price_amount,price_currency:t.price_currency,raw_amount:t.raw_amount,target_url:t.target_url,thumb_url:t.thumb_url,total_cost:t.total_cost},TAG:19};else if(t.__typename==="FundraiserPersonToCharity"||t.__typename==="FundraiserPersonForPerson"){var r=t.focused_cover_photo,o=t.fundraiser_detailed_progress_text,a=t.fundraiser_subtitle_text;n={_0:{canDonate:t.can_donate,focusedCoverPhoto:r==null?null:{data:{height:r.photo.image.height,width:r.photo.image.width},src:r.photo.image.uri},fundraiserDetailedProgressText:o==null?null:o.text,fundraiserID:t.id,fundraiserSubtitleText:a==null?null:a.text,hasViewerDonated:t.has_viewer_donated},TAG:20}}else n=t.__typename==="MessengerRetailReceipt"?{_0:{account_holder_name:t.account_holder_name,adjustments:t.retail_adjustments,cancellation_url:t.cancellation_url,items:t.retail_items,merchant_name:t.merchant_name,messenger_commerce_bubble_type:t.bubble_type,order_id:t.receipt_id,order_time:t.order_time_for_display,order_url:t.receipt_url,partner_logo:t.partner_log,payment_method:t.order_payment_method,receipt_id:t.id,recipient_name:t.recipient_name,shipping_cost:t.shipping_cost,shipping_method:t.shipping_method,status:t.status,structured_address:t.structured_address,subtotal:t.subtotal,total_cost:t.total,total_tax:t.tax},TAG:21}:t.__typename==="JobApplication"?{_0:{id:t.id},TAG:22}:t.__typename==="GroupCommerceProductItem"?{_0:{formatted_price:t.formatted_price,group_commerce_item_description:t.group_commerce_item_description,group_commerce_item_seller:t.group_commerce_item_seller,group_commerce_item_title:t.group_commerce_item_title,primary_photo:t.primary_photo,url:t.url},TAG:23}:t.__typename==="Page"?{_0:{address:t.address,cover_photo:t.cover_photo,id:t.id,location:t.location,name:t.name,overall_star_rating:t.overall_star_rating,price_range_description:t.price_range_description,top_category_name:t.top_category_name},TAG:24}:t.__typename==="MessengerEventReminder"?{_0:{event_title:t.event_title,is_active:t.is_active,time:t.time},TAG:25}:t.__typename==="AirlineBoardingPassCollectionMessageAttachment"?{_0:{boarding_pass_error_title_label:t.boarding_pass_error_title_label,boarding_pass_title_label:t.boarding_pass_title_label,boarding_passes:t.boarding_passes,boarding_time_label:t.boarding_time_label,departure_label:t.departure_label,flight_gate_label:t.flight_gate_label,flight_label:t.flight_label,flight_terminal_label:t.flight_terminal_label,logo:t.logo,message_cta_label:t.message_cta_label,passenger_names_label:t.passenger_names_label,passenger_seat_label:t.passenger_seat_label,share_cta_label:t.share_cta_label,tint_color:t.tint_color,view_boarding_pass_cta_label:t.view_boarding_pass_cta_label},TAG:26}:t.__typename==="AirlineCheckInReminderMessageAttachment"?{_0:{arrival_time_label:t.arrival_time_label,booking_number_label:t.booking_number_label,checkin_cta_label:t.checkin_cta_label,checkin_url:t.checkin_url,departure_time_label:t.departure_time_label,flight_infos:t.flight_infos,flight_label:t.flight_label,logo:t.logo,pnr_number:t.pnr_number,tint_color:t.tint_color},TAG:27}:t.__typename==="AirlineUpdateMessageAttachment"?{_0:{arrival_time_label:t.arrival_time_label,booking_number_label:t.booking_number_label,departure_time_label:t.departure_time_label,flight_gate_label:t.flight_gate_label,flight_info:t.flight_info,flight_label:t.flight_label,flight_status_label:t.flight_status_label,hightlighted_labels:t.hightlighted_labels,logo:t.logo,passenger_names_label:t.passenger_names_label,passenger_seat_label:t.passenger_seat_label,pnr_number:t.pnr_number,tint_color:t.tint_color,update_type:t.update_type},TAG:28}:t.__typename==="AirlineItineraryMessageAttachment"?{_0:{aircraft_type_label:t.aircraft_type_label,arrival_time_label:t.arrival_time_label,base_price_label:t.base_price_label,booking_number_label:t.booking_number_label,cabin_type_label:t.cabin_type_label,confirmation_number:t.confirmation_number,departure_time_label:t.departure_time_label,flight_confirmation_label:t.flight_confirmation_label,flight_date_label:t.flight_date_label,flight_label:t.flight_label,flight_terminal_label:t.flight_terminal_label,formatted_base_price:t.formatted_base_price,formatted_tax:t.formatted_tax,formatted_total:t.formatted_total,itemized_price_infos:t.itemized_price_infos,itinerary_error_title_label:t.itinerary_error_title_label,itinerary_legs:t.itinerary_legs,itinerary_title_label:t.itinerary_title_label,logo:t.logo,passenger_infos:t.passenger_infos,passenger_name_label:t.passenger_name_label,passenger_names_label:t.passenger_names_label,passenger_seat_label:t.passenger_seat_label,pnr_number:t.pnr_number,purchase_summary_label:t.purchase_summary_label,taxes_label:t.taxes_label,tint_color:t.tint_color,total_label:t.total_label,view_details_cta_label:t.view_details_cta_label},TAG:29}:t.__typename==="MessengerRetailShipmentTrackingEvent"?{_0:{bubble_type:t.bubble_type,id:t.id,messenger_commerce_location:t.messenger_commerce_location,shipment:t.shipment,shipment_tracking_event_type:t.shipment_tracking_event_type,tracking_event_description:t.tracking_event_description,tracking_event_time_for_display:t.tracking_event_time_for_display},TAG:30}:t.__typename==="MessengerRetailShipment"?{_0:{bubble_type:t.bubble_type,commerce_destination:t.commerce_destination,commerce_origin:t.commerce_origin,estimated_delivery_time_for_display:t.estimated_delivery_time_for_display,id:t.id,receipt:t.receipt,recipient:t.recipient,retail_carrier:t.retail_carrier,retail_shipment_items:t.retail_shipment_items,shipdate_for_display:t.shipdate_for_display,shipment_tracking_events:t.shipment_tracking_events,tracking_number:t.tracking_number},TAG:31}:t.__typename==="EventAttendanceConfirmation"?{_0:{attendee_answers:t.attendee_answers,event:t.event,id:t.id,num_guests:t.num_guests},TAG:33}:t.__typename==="LeadGenDeepLinkData"?{_0:{cover_image:t.cover_image,headline:t.headline,id:t.id,name:t.name,page:t.page},TAG:32}:t.__typename==="UserLeadGenInfo"?{_0:{field_data:t.field_data,id:t.id},TAG:34}:t.__typename==="WECMessageAudio"?{_0:{duration:t.duration,extension:t.extension,filename:t.filename,filesize:t.filesize,id:t.id,playable_url:t.playable_url,url_shimhash:t.url_shimhash},TAG:38}:t.__typename==="IceBreakerMessageAttachment"?{_0:{ad_id:t.ad_id,ice_breaker_messages:t.ice_breaker_messages,ice_breaker_title:t.ice_breaker_title},TAG:35}:t.__typename==="WECMessage"?{_0:{sender_wec_name:t.sender_wec_name,sender_wec_number:t.sender_wec_number,sender_wec_number_fbid:t.sender_wec_number_fbid,sender_wec_number_formated:t.sender_wec_number_formated,templated_message_body:t.templated_message_body,templated_message_btn1_text:t.templated_message_btn1_text,templated_message_btn1_type:t.templated_message_btn1_type,templated_message_btn2_text:t.templated_message_btn2_text,templated_message_btn2_type:t.templated_message_btn2_type,templated_message_btn3_text:t.templated_message_btn3_text,templated_message_btn3_type:t.templated_message_btn3_type,templated_message_buttons:t.templated_message_buttons,templated_message_footer:t.templated_message_footer,templated_message_header_media:t.templated_message_header_media,templated_message_header_text:t.templated_message_header_text,templated_message_header_type:t.templated_message_header_type,templated_message_offer_text:t.templated_message_offer_text,templated_message_cards:t.templated_message_cards,templated_message_offer_has_expiration:t.templated_message_offer_has_expiration,templated_message_offer_expiration_time:t.templated_message_offer_expiration_time,templated_message_offer_is_offer_code_personalized:t.templated_message_offer_is_offer_code_personalized,templated_message_id:t.templated_message_id,templated_message_name:t.templated_message_name,wec_referral_body:t.wec_referral_body,wec_referral_headline:t.wec_referral_headline,wec_referral_media:t.wec_referral_media,wec_referral_media_type:t.wec_referral_media_type,wec_referral_url:t.wec_referral_url,wec_referral_has_admin_text:t.wec_referral_has_admin_text,wec_sticker_id:t.wec_sticker_id},TAG:36}:t.__typename==="WECMessageCard"?{_0:{title_type:t.title_type,sample_handle:t.sample_handle,body:t.body,button:t.button},TAG:60}:t.__typename==="WECMessageButton"?{_0:{text:t.text,type:t.type},TAG:61}:t.__typename==="WECMessageImage"?{_0:{extension:t.extension,id:t.id,large_preview:t.large_preview,preview:t.preview},TAG:37}:t.__typename==="WECMessageFile"?{_0:{extension:t.extension,filesize:t.filesize,id:t.id,is_malicious:t.is_malicious,name:t.name,uri:t.uri},TAG:39}:t.__typename==="WECMessageVideo"?{_0:{extension:t.extension,filename:t.filename,filesize:t.filesize,height:t.height,id:t.id,playable_url:t.playable_url,url_shimhash:t.url_shimhash,width:t.width,preview_url:t.thumbnail_image.uri},TAG:40}:t.__typename==="MontageDirect"?{_0:{blob_media:t.blob_media,blob_media_type:t.blob_media_type,image:t.image,is_keep_disabled:t.is_keep_disabled,message_state:t.message_state},TAG:41}:t.__typename==="MBirthdayReminderAttachment"?{_0:{birthday_date:t.birthday_date,confidence:t.confidence,friend_id:t.friend_id},TAG:42}:t.__typename==="MPersonalRemindersList"?{_0:{has_more_upcoming_reminders:t.has_more_upcoming_reminders,personal_reminders:t.personal_reminders},TAG:43}:t.__typename==="MentorshipMessengerCurriculumStep"?{_0:{curriculum_message:t.curriculum_message,id:t.id,mentorship_program:t.mentorship_program,module_name:t.module_name,program_name:t.program_name,prompt:t.prompt,step_count:t.step_count,total_steps:t.total_steps},TAG:44}:t.__typename==="MentorshipMessengerDiscussionTopicSet"?{_0:{id:t.id,topics:t.topics},TAG:45}:t.__typename==="MentorshipMessengerLeavePrompt"?{_0:{id:t.id,mentorship_program:t.mentorship_program,xma_type:t.xma_type},TAG:46}:t.__typename==="MentorshipMessengerReminder"?{_0:{id:t.id,xma_type:t.xma_type},TAG:47}:t.__typename==="MentorshipMessengerSurvey"?{_0:{id:t.id,mentorship_program:t.mentorship_program,xma_disclaimer:t.xma_disclaimer,xma_title:t.xma_title,xma_type:t.xma_type},TAG:48}:t.__typename==="MentorshipMessengerProgressTracker"?{_0:{id:t.id,xma_body:t.xma_body,xma_title:t.xma_title,xma_type:t.xma_type},TAG:49}:t.__typename==="Story"?{_0:{actors:t.actors,attached_story:t.attached_story,attachments:t.attachments,creation_time:t.creation_time,description:t.description,feedback:t.feedback,message_richtext:t.message_richtext,post_id:t.post_id,reaction_count_reduced:t.reaction_count_reduced,title:t.title,to:t.to,top_reactions:t.top_reactions},TAG:50}:t.__typename==="User"?{_0:{cover_photo:t.cover_photo,id:t.id,name:t.name,profile_picture:t.profile_picture,subscribe_status:t.subscribe_status,type:t.__typename,work_info:t.work_info},TAG:51}:t.__typename==="Group"?{_0:{cover_photo:t.cover_photo,group_general_chat:t.group_general_chat,id:t.id,name:t.name,type:t.__typename,viewer_join_state:t.viewer_join_state,visibility:t.visibility,visibility_sentence:t.visibility_sentence,work_groups_sync_metadata:t.work_groups_sync_metadata},TAG:52}:t.__typename==="AppContent"?{_0:{app_integration:t.app_integration,attachment_icon:t.app_integration,attachment_type_name:t.attachment_type_name,content_uri:t.content_uri,file_type_category:t.file_type_category,id:t.id,link_preview_additional_data:t.link_preview_additional_data,privacy_status:t.privacy_status,type:t.__typename},TAG:53}:t.__typename==="OfferItem"?{_0:{id:t.id,type:t.__typename},TAG:54}:t.__typename==="CommerceProductItemShare"?{_0:{default_action:t.default_action,type:t.__typename},TAG:55}:t.__typename==="PostPurchaseOrderUpdateXma"?{_0:{order_id:t.order_id,order_progress:t.order_progress,type:t.__typename},TAG:56}:t.__typename==="InThreadMultiphotoItemCTAData"?{_0:{action_prefill:t.action_prefill,ad_id:t.ad_id,cta_title:t.cta_title,customer_id:t.customer_id,index:t.index,page_id:t.page_id,reply_image_uri:t.reply_image_uri,type:t.__typename},TAG:57}:t.__typename==="XFBP2MXMA"?{_0:{id:t.id,viewer_id:t.viewer_id},TAG:58}:t.__typename==="XFBPaymentInvoiceMediaMessageDetection"?{_0:{payment_confirmation_status:t.payment_confirmation_status},TAG:59}:null;return{action_links:e.action_links,deduplication_key:e.deduplication_key,description:e.description,media:e.media,messaging_attribution:e.messaging_attribution,messenger_call_to_actions:e.messenger_call_to_actions,messenger_generic_xma_template_extra_info:e.messenger_generic_xma_template_extra_info,properties:e.properties,source:e.source,style_list:c(e.style_list),target:n,title_with_entities:e.title_with_entities,url:e.url,xma_layout_info:e.xma_layout_info}}function m(e){var t=d({action_links:e.action_links,deduplication_key:e.deduplication_key,description:e.description,media:e.media,messaging_attribution:e.messaging_attribution,messenger_call_to_actions:e.messenger_call_to_actions,messenger_generic_xma_template_extra_info:e.messenger_generic_xma_template_extra_info,properties:e.properties,source:e.source,style_list:e.style_list,target:e.target,title_with_entities:e.title_with_entities,url:e.url,xma_layout_info:e.xma_layout_info});if(t==null)return null;var n=e.subattachments.map(d);return babelHelpers.extends({},t,{subattachments:n})}function p(e){var t=e.message;if(t==null)return[];var n=[];return t.ranges.forEach(function(e){var t=e.entity;if(t!=null){var r=t.id,o=t.thread_key;if(r==null){if(o==null)return;var a=o.thread_fbid;if(a==null)return;var i=t.__typename,l;switch(i){case"MessengerViewerGroupThread":l="t";break;case"User":l="p";break;default:l="n"}n.push({id:a,length:e.length,offset:e.offset,type:l});return}var s=t.__typename,u;switch(s){case"MessengerViewerGroupThread":u="t";break;case"User":u="p";break;default:u="n"}n.push({id:r,length:e.length,offset:e.offset,type:u})}}),n}function _(t,n,a,i){var l={};n.message_reactions.forEach(function(e){l[e.user.id]=e.reaction});var c=o("FBIDCheck").isUser_deprecated(n.message_sender.id),d=c?o("MessagingTagUtils").getSourceFromTags(n.tags_list):"source:unknown",f=c?o("MessagingTagUtils").getSourceTags(n.tags_list,d):[],g=n.message_id,h=a.thread_id,y=a.thread_fbid,C=a.other_user_fbid,b=h==null?y==null?C==null?null:o("MercuryIDs").getThreadIDFromUserID(C):o("MercuryIDs").getThreadIDFromThreadFBID(y):h,v=n.secondary_language_body,S=n.tags_list.some(function(e){return e==="action:copy_message"||e==="copy_self_message"||e==="action:copy_attachment"?!0:e==="copy_self_attachment"}),R=n.commerce_message_type,L=n.customizations,E=n.error_data,k=n.unsent_timestamp_precise,I=k==null||k==="0"?null:r("bs_js_null_undefined").fromOption(r("bs_caml_format").caml_float_of_string(k)),T=n.replied_to_message,D;if(T==null)D=null;else{var x=T.message;D=x==null?{message:null,status:T.status}:{message:r("bs_js_null_undefined").fromOption(r("bs_caml_option").some(_(t,x,a,i))),status:T.status}}var $=n.unsender,P={action_type:n.__typename==="UserMessage"?"ma-type:user-generated-message":"ma-type:log-message",ad_client_token:n.ad_client_token,ad_id:n.ad_id,attachments:null,author:o("MercuryIDs").getParticipantIDFromUserID(n.message_sender.id),author_email:n.message_sender.email,body:null,commerce_message_type:R==null?null:r("bs_js_null_undefined").fromOption(r("MNCommerceMessageType")[R]),creator_info:null,customizations:L==null?[]:L,ephemeral_ttl_mode:n.ttl,error_data:E==null?null:{description:E.description},folder:a.folder,has_attachment:null,is_filtered_content:n.tags_list.indexOf("filtered_content")!==-1,is_filtered_content_account:n.tags_list.indexOf("filtered_content_account")!==-1,is_filtered_content_bh:n.tags_list.indexOf("filtered_content_bh")!==-1,is_filtered_content_invalid_app:n.tags_list.indexOf("filtered_content_invalid_app")!==-1,is_filtered_content_quasar:n.tags_list.indexOf("filtered_content_quasar")!==-1,is_forwarded:S,is_one_way_sent:n.tags_list.some(function(e){return e==="one_way_message"}),is_sponsored:n.is_sponsored,is_spoof_warning:n.tags_list.indexOf("MTA:dmarc:fail")!==-1||n.tags_list.indexOf("spam:spoofing")!==-1||n.tags_list.indexOf("MTA:spoof_warning")!==-1,is_unread:n.unread,log_message_body:null,log_message_data:null,log_message_type:null,m_suggestions:n.m_suggestions,message_id:g,message_source:n.message_source_data,message_unsendability_status:o("MessageUnsendabilityStatus.bs").fromNullableString(n.message_unsendability_status),meta_ranges:null,montage_reply_data:n.montage_reply_data,offline_threading_id:n.offline_threading_id,other_user_fbid:a.other_user_fbid,platform_xmd:n.platform_xmd_encoded,preview_attachments:null,profile_ranges:p(n),ranges:null,raw_attachments:null,reactions:l,removed_timestamp:I,replied_to_message:D,secondary_language_body:v,skip_bump_thread:!1,source:d,source_tags:f,status:null,sticker_id:null,subject:null,tags:n.tags_list,thread_fbid:a.thread_fbid,thread_id:b,threading_id:null,timestamp:r("bs_caml_format").caml_float_of_string(n.timestamp_precise),unsender:$==null?null:{id:o("MercuryIDs").getParticipantIDFromUserID($.messaging_actor.id),name:$.messaging_actor.name,short_name:$.messaging_actor.short_name},verse_group_role_xmd:n.verse_group_role_xmd};if(n.__typename==="UserMessage"){var N=e(n),M=n.extensible_attachment,w;if(M==null)w=null;else{var A=M.genie_attachment,F;if(A==null)F=null;else{var O=A.genie_message,B;if(O==null)B=null;else{var W=O.story_attachment;B={story_attachment:W==null?null:m(W)}}F={genie_message:B}}var q=M.story_attachment;w={genie_attachment:F,legacy_attachment_id:M.legacy_attachment_id,story_attachment:q==null?null:m(q)}}var U=o("MessengerAttachmentTransformer.bs").transformAttachment(t,{blob_attachments:N,extensible_attachment:w,sticker:n.sticker},g,i),V=n.message,H=n.page_admin_sender;Object.assign(P,{attachments:U,body:V==null?null:V.text,creator_info:H==null?null:{creatorID:H.admin_id,creatorName:H.name,creatorType:H.sender_type,labelType:H.label_type,pageID:H.page_id,profileURI:H.profile_uri},has_attachment:U.length>0,meta_ranges:n.meta_ranges.map(function(e){return babelHelpers.extends({},e,{data:JSON.parse(e.data)})}),ranges:void 0,raw_attachments:null,subject:null})}else if(n.__typename==="VoiceCallMessage"||n.__typename==="VideoCallMessage"){var G=n.__typename,z=G==="VoiceCallMessage"?"log:phone-call":"log:video-call",j=n.message_sender.id,K=a.other_user_fbid,Q=K==null?null:o("MercuryIDs").getParticipantIDFromUserID(j===K?r("CurrentUser").getID():K),X=n.answered;Object.assign(P,{log_message_body:n.snippet,log_message_data:{answered:X==null?!1:X,call_capture_attachments:s(t,n,i),callee:Q,caller:o("MercuryIDs").getParticipantIDFromUserID(j)},log_message_type:z})}else if(n.__typename==="ThreadNameMessage")Object.assign(P,{log_message_body:n.snippet,log_message_data:{name:n.thread_name},log_message_type:"log:thread-name"});else if(n.__typename==="ThreadImageMessage"){var Y=n.image_with_metadata,J;if(Y==null)J=null;else{var Z=Y.preview;J={metadata:{dimensions:String(Y.original_dimensions.x)+(","+String(Y.original_dimensions.y)),fbid:Y.legacy_attachment_id},preview_url:Z==null?null:Z.uri}}Object.assign(P,{log_message_body:n.snippet,log_message_data:{image:J},log_message_type:"log:thread-image"})}else if(n.__typename==="ParticipantsAddedMessage"){var ee=n.participants_added;Object.assign(P,{log_message_body:n.snippet,log_message_data:{added_participants:ee==null?[]:ee.map(function(e){return o("MercuryIDs").getParticipantIDFromUserID(e.id)})},log_message_type:"log:subscribe"})}else if(n.__typename==="ParticipantLeftMessage"){var te=n.participants_removed;Object.assign(P,{log_message_body:n.snippet,log_message_data:{removed_participants:te==null?[]:te.map(function(e){return o("MercuryIDs").getParticipantIDFromUserID(e.id)})},log_message_type:"log:unsubscribe"})}else if(n.__typename==="GenericAdminTextMessage"){var ne=n.extensible_message_admin_text,re=n.extensible_message_admin_text_type;ne==null?re!=null&&Object.assign(P,{log_message_body:n.snippet,log_message_data:{message_type:r("MessagingGenericAdminTextType")[re],untypedData:void 0},log_message_type:"log:generic-admin-text"}):re!=null&&Object.assign(P,u(t,ne,re,n.snippet,i))}else if(n.__typename==="P2PPaymentRequestMessage"||n.__typename==="P2PPaymentMessage"){var oe=n.amount,ae=n.p2p_receiver,ie=n.p2p_sender,le=n.message_type;Object.assign(P,{log_message_body:n.snippet,log_message_data:{formattedAmount:oe==null?null:oe.formatted,receiverId:ae==null?null:o("MercuryIDs").getParticipantIDFromUserID(ae.id),senderId:ie==null?null:o("MercuryIDs").getParticipantIDFromUserID(ie.id),subtype:le==null?null:r("P2PPaymentLogMessageSubtype")[le],transfer_id:n.transfer_id},log_message_type:"log:orion"})}return P}l.unsafeCastBlobAttachments=e,l._getCallCaptureAttachments=s,l._getGenericAdminTextMessage=u,l._getStyleList=c,l.unsafeCastExtensibleAttachmentWithoutSubattachments=d,l.unsafeCastExtensibleAttachment=m,l._getProfileRanges=p,l.transformMessage=_}),98);
__d("MessengerObjectAssociationType",["keyMirror"],(function(t,n,r,o,a,i,l){"use strict";var e=r("keyMirror")({REGULAR_CHAT:null,GENERAL_CHAT:null});l.default=e}),98);
__d("MessengerParticipantsQuery.graphql",["relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"ids"},{defaultValue:null,kind:"LocalArgument",name:"source"}],t=[{kind:"Variable",name:"id",variableName:"ids"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"gender",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},l={alias:"big_image_src",args:[{kind:"Literal",name:"height",value:60},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:"profile_picture(height:60,width:60)"},s={alias:null,args:null,kind:"ScalarField",name:"short_name",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"is_viewer_friend",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"is_messenger_user",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"is_message_blocked_by_viewer",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"is_viewer_coworker",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"is_employee",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"is_aloha_proxy_confirmed",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"message_capabilities2_str",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"messenger_account_status_category",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"job_title",storageKey:null},C={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"work_community",plural:!1,selections:[o],storageKey:null},y],storageKey:null},b={kind:"InlineFragment",selections:[a,i,l,s,c,d,m,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_managing_parent",storageKey:null}],type:"NeoApprovedUser",abstractKey:null},v={kind:"InlineFragment",selections:[i,l,u,{alias:null,args:null,kind:"ScalarField",name:"accepts_messenger_user_feedback",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"is_messenger_platform_bot",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"is_viewer_subscribed_to_message_updates",storageKey:null},{alias:null,args:null,concreteType:"InstantGameChannelInfo",kind:"LinkedField",name:"instant_game_channel",plural:!1,selections:[{alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"application",plural:!1,selections:[n],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verification_status",storageKey:null}],type:"Page",abstractKey:null},S=[i,l,m],R={kind:"InlineFragment",selections:S,type:"SmsMessagingParticipant",abstractKey:null},L={kind:"InlineFragment",selections:[l,m],type:"InstagramMessagingUser",abstractKey:null},E=[l],k={kind:"InlineFragment",selections:E,type:"LiveChatOnlyPerson",abstractKey:null},I={kind:"InlineFragment",selections:S,type:"UnavailableMessagingActor",abstractKey:null},T={kind:"InlineFragment",selections:E,type:"UnifiedMessagingInstagramUser",abstractKey:null},D={alias:null,args:null,kind:"ScalarField",name:"is_blocked_by_viewer",storageKey:null},x=[i,l,u],$={kind:"InlineFragment",selections:x,type:"Group",abstractKey:null},P={kind:"InlineFragment",selections:x,type:"Event",abstractKey:null},N={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"WorkForeignEntityInfo",kind:"LinkedField",name:"work_foreign_entity_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"detail",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null}],type:"WorkForeignEntity",abstractKey:"__isWorkForeignEntity"},M=[i,l,s,m],w={kind:"InlineFragment",selections:M,type:"XFBWorkroomsBaseUser",abstractKey:"__isXFBWorkroomsBaseUser"},A={kind:"InlineFragment",selections:M,type:"XFBWorkroomsSystemUser",abstractKey:null},F={kind:"InlineFragment",selections:E,type:"MessengerCallGuestUser",abstractKey:null},O={kind:"InlineFragment",selections:E,type:"WorkVCEndpointUser",abstractKey:null},B={kind:"InlineFragment",selections:E,type:"WECMailboxAccount",abstractKey:null},W={kind:"InlineFragment",selections:E,type:"WECCustomer",abstractKey:null},q={alias:null,args:null,kind:"ScalarField",name:"wec_group_creation_time",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"wec_group_invite_link",storageKey:null},V={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[n,o],storageKey:null}],storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},G={alias:null,args:null,concreteType:"WorkUserInfo",kind:"LinkedField",name:"work_info",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"work_community",plural:!1,selections:[o,n],storageKey:null},y],storageKey:null},z={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[r,n,o],storageKey:null},n],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MessengerParticipantsQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"messaging_actors",plural:!0,selections:[n,r,o,{kind:"InlineFragment",selections:[a,i,l,s,u,c,d,m,p,_,f,g,h,C],type:"User",abstractKey:null},b,v,R,L,k,I,T,{kind:"InlineFragment",selections:[i,l,u,D,m,C],type:"ReducedMessagingActor",abstractKey:null},$,P,N,w,A,F,O,B,W,{kind:"InlineFragment",selections:[l,q,U,{alias:null,args:null,concreteType:"WECGroupParticipantsConnection",kind:"LinkedField",name:"wec_group_participants",plural:!1,selections:[V,H],storageKey:null},{alias:null,args:null,concreteType:"WECGroupAdminsConnection",kind:"LinkedField",name:"wec_group_admins",plural:!1,selections:[V],storageKey:null}],type:"WECGroupRecipient",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MessengerParticipantsQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"messaging_actors",plural:!0,selections:[r,{kind:"TypeDiscriminator",abstractKey:"__isMessagingActor"},n,o,{kind:"InlineFragment",selections:[a,i,l,s,u,c,d,m,p,_,f,g,h,G],type:"User",abstractKey:null},b,v,R,L,k,I,T,{kind:"InlineFragment",selections:[i,l,u,D,m,G],type:"ReducedMessagingActor",abstractKey:null},$,P,N,w,A,F,O,B,W,{kind:"InlineFragment",selections:[l,q,U,{alias:null,args:null,concreteType:"WECGroupParticipantsConnection",kind:"LinkedField",name:"wec_group_participants",plural:!1,selections:[z,H],storageKey:null},{alias:null,args:null,concreteType:"WECGroupAdminsConnection",kind:"LinkedField",name:"wec_group_admins",plural:!1,selections:[z],storageKey:null}],type:"WECGroupRecipient",abstractKey:null}],storageKey:null}]},params:{id:"7772514672872558",metadata:{},name:"MessengerParticipantsQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("MessengerThreadCannotReplyReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({BLOCKED:"blocked",MESSENGER_BLOCKEE:"messenger_blockee",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author",VIEWER_MUTED_IN_FBGROUP:"viewer_muted_in_fbgroup",VIEWER_IS_LIMITED_WORK_ACCOUNT:"viewer_is_limited_work_account",RECIPIENTS_IS_LIMITED_WORK_ACCOUNT:"recipients_is_limited_work_account",WORK_GARDEN_ARCHIVED:"work_garden_archived",PARTICIPANTS_IN_RESTRICTED_JURISDICTION:"participants_in_restricted_jurisdiction",BROADCAST_CHAT_READ_ONLY:"broadcast_chat_read_only",CM_PAGES_AP_PLUS_READ_ONLY:"cm_pages_ap_plus_read_only",VIEWER_CANNOT_PARTICIPATE_IN_FB_PUBLIC_GROUP:"viewer_cannot_participate_in_fb_public_group",PAUSED_THREAD:"paused_thread",PAUSED_BY_SOFT_ACTION:"paused_by_soft_action",PAUSED_BY_ADMINLESS_STANDALONE_COMMUNITY:"paused_by_adminless_standalone_community",BLOCKED_BY_CHAT_GOVERNANCE:"blocked_by_chat_governance",PARTNERSHIP_THREAD_DISABLED_FOR_VIEWER:"partnership_thread_disabled_for_viewer",PARTNERSHIP_THREAD_DISABLED_FOR_CREATOR:"partnership_thread_disabled_for_creator",PARTNERSHIP_THREAD_DISABLED_FOR_BRAND:"partnership_thread_disabled_for_brand",ANNOUNCEMENT_CHAT_READ_ONLY:"announcement_chat_read_only",PAUSED_FOR_CC_DEPRECATION:"paused_for_cc_deprecation",GEMSTONE_NO_MATCH_WITH_CONVERSATION:"gemstone_no_match_with_conversation"});i.default=e}),66);
__d("MessengerThreadCannotReplyReason.bs",["MessengerThreadCannotReplyReason"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null)return r("MessengerThreadCannotReplyReason")[e.toUpperCase()]}function s(e){if(e==null)return null;switch(e.TAG){case 1:return"recipients_not_loadable";case 0:case 2:return"blocked";case 3:return"messenger_blockee"}}l.fromName=e,l.fromMessageThreadCannotReplyReason=s}),98);
__d("bs_caml_obj",["bs_caml"],(function(t,n,r,o,a,i){"use strict";var e,l=function(t,n){for(var e in t)n(e)},s=function(t){if(Array.isArray(t)){for(var e=t.length,n=new Array(e),r=0;r<e;++r)n[r]=t[r];return t.TAG!==void 0&&(n.TAG=t.TAG),n}return Object.assign({},t)},u=function(t,n){var e;if(Array.isArray(n)){for(e=0;e<n.length;++e)t[e]=n[e];n.TAG!==void 0&&(t.TAG=n.TAG)}else for(var e in n)t[e]=n[e]};function c(t,r){if(t===r)return 0;var o=typeof t,a=typeof r;switch(o){case"boolean":if(a==="boolean")return(e||(e=n("bs_caml"))).caml_bool_compare(t,r);break;case"function":if(a==="function")throw{RE_EXN_ID:"Invalid_argument",_1:"compare: functional value",Error:new Error};break;case"number":if(a==="number")return(e||(e=n("bs_caml"))).caml_int_compare(t,r);break;case"string":return a==="string"?(e||(e=n("bs_caml"))).caml_string_compare(t,r):1;case"undefined":return-1;default:}switch(a){case"string":return-1;case"undefined":return 1;default:if(o==="boolean")return 1;if(a==="boolean")return-1;if(o==="function")return 1;if(a==="function")return-1;if(o==="number")return r===null||r.BS_PRIVATE_NESTED_SOME_NONE!==void 0?1:-1;if(a==="number")return t===null||t.BS_PRIVATE_NESTED_SOME_NONE!==void 0?-1:1;if(t===null)return r.BS_PRIVATE_NESTED_SOME_NONE!==void 0?1:-1;if(r===null)return t.BS_PRIVATE_NESTED_SOME_NONE!==void 0?-1:1;if(t.BS_PRIVATE_NESTED_SOME_NONE!==void 0)return r.BS_PRIVATE_NESTED_SOME_NONE!==void 0?d(t,r):-1;var i=t.TAG|0,l=r.TAG|0;if(i===248)return(e||(e=n("bs_caml"))).caml_int_compare(t[1],r[1]);if(i===251)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(i!==l)return i<l?-1:1;var s=t.length|0,u=r.length|0;if(s===u)if(Array.isArray(t))for(var m=0;;){var p=m;if(p===s)return 0;var _=c(t[p],r[p]);if(_!==0)return _;m=p+1|0}else return t instanceof Date&&r instanceof Date?t-r:d(t,r);else if(s<u)for(var f=0;;){var g=f;if(g===s)return-1;var h=c(t[g],r[g]);if(h!==0)return h;f=g+1|0}else for(var y=0;;){var C=y;if(C===u)return 1;var b=c(t[C],r[C]);if(b!==0)return b;y=C+1|0}}}function d(t,r){var o={contents:void 0},a={contents:void 0},i=function(t,n){var e=t[2],r=t[1];if(!Object.prototype.hasOwnProperty.call(r,n)||c(t[0][n],r[n])>0){var o=e.contents;if(!(o!==void 0&&n>=o)){e.contents=n;return}}},s=[t,r,a],u=function(t){return i(s,t)},d=[r,t,o],m=function(t){return i(d,t)};l(t,u),l(r,m);var p=o.contents,_=a.contents;return p!==void 0?_!==void 0?(e||(e=n("bs_caml"))).caml_string_compare(p,_):-1:_!==void 0?1:0}function m(e,t){if(e===t)return!0;var n=typeof e;if(n==="string"||n==="number"||n==="boolean"||n==="undefined"||e===null)return!1;var r=typeof t;if(n==="function"||r==="function")throw{RE_EXN_ID:"Invalid_argument",_1:"equal: functional value",Error:new Error};if(r==="number"||r==="undefined"||t===null)return!1;var o=e.TAG|0,a=t.TAG|0;if(o===248)return e[1]===t[1];if(o===251)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(o!==a)return!1;var i=e.length|0,s=t.length|0;if(i===s)if(Array.isArray(e))for(var u=0;;){var c=u;if(c===i)return!0;if(!m(e[c],t[c]))return!1;u=c+1|0}else{if(e instanceof Date&&t instanceof Date)return!(e>t||e<t);var d={contents:!0},p=function(n){if(!Object.prototype.hasOwnProperty.call(t,n)){d.contents=!1;return}},_=function(r){if(!Object.prototype.hasOwnProperty.call(e,r)||!m(t[r],e[r])){d.contents=!1;return}};return l(e,p),d.contents&&l(t,_),d.contents}else return!1}function p(e,t){return t!==null?m(e,t):e===t}function _(e,t){return t!==void 0?m(e,t):e===t}function f(e,t){return t==null?e===t:m(e,t)}function g(e,t){return!m(e,t)}function h(e,t){return c(e,t)>=0}function y(e,t){return c(e,t)>0}function C(e,t){return c(e,t)<=0}function b(e,t){return c(e,t)<0}function v(e,t){return c(e,t)<=0?e:t}function S(e,t){return c(e,t)>=0?e:t}i.caml_obj_dup=s,i.update_dummy=u,i.caml_compare=c,i.caml_equal=m,i.caml_equal_null=p,i.caml_equal_undefined=_,i.caml_equal_nullable=f,i.caml_notequal=g,i.caml_greaterequal=h,i.caml_greaterthan=y,i.caml_lessthan=b,i.caml_lessequal=C,i.caml_min=v,i.caml_max=S}),null);
__d("bs_array",["bs_caml_array","bs_caml_exceptions","bs_caml_js_exceptions","bs_caml_obj","bs_curry"],(function(t,n,r,o,a,i){"use strict";var e=n("bs_caml_array").make_float,l={};function s(e,t){if(e===0)return[];if(e<0)throw{RE_EXN_ID:"Invalid_argument",_1:"Array.init",Error:new Error};for(var r=n("bs_caml_array").make(e,n("bs_curry")._1(t,0)),o=1;o<e;++o)r[o]=n("bs_curry")._1(t,o);return r}function u(e,t,r){for(var o=n("bs_caml_array").make(e,[]),a=0;a<e;++a)o[a]=n("bs_caml_array").make(t,r);return o}function c(e){var t=e.length;return t===0?[]:n("bs_caml_array").sub(e,0,t)}function d(e,t){var r=e.length;return r===0?c(t):t.length===0?n("bs_caml_array").sub(e,0,r):e.concat(t)}function m(e,t,r){if(t<0||r<0||t>(e.length-r|0))throw{RE_EXN_ID:"Invalid_argument",_1:"Array.sub",Error:new Error};return n("bs_caml_array").sub(e,t,r)}function p(e,t,n,r){if(t<0||n<0||t>(e.length-n|0))throw{RE_EXN_ID:"Invalid_argument",_1:"Array.fill",Error:new Error};for(var o=t,a=t+n|0;o<a;++o)e[o]=r}function _(e,t,r,o,a){if(a<0||t<0||t>(e.length-a|0)||o<0||o>(r.length-a|0))throw{RE_EXN_ID:"Invalid_argument",_1:"Array.blit",Error:new Error};return n("bs_caml_array").blit(e,t,r,o,a)}function f(e,t){for(var r=0,o=t.length;r<o;++r)n("bs_curry")._1(e,t[r])}function g(e,t,r){if(t.length!==r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"Array.iter2: arrays must have the same length",Error:new Error};for(var o=0,a=t.length;o<a;++o)n("bs_curry")._2(e,t[o],r[o])}function h(e,t){var r=t.length;if(r===0)return[];for(var o=n("bs_caml_array").make(r,n("bs_curry")._1(e,t[0])),a=1;a<r;++a)o[a]=n("bs_curry")._1(e,t[a]);return o}function y(e,t,r){var o=t.length,a=r.length;if(o!==a)throw{RE_EXN_ID:"Invalid_argument",_1:"Array.map2: arrays must have the same length",Error:new Error};if(o===0)return[];for(var i=n("bs_caml_array").make(o,n("bs_curry")._2(e,t[0],r[0])),l=1;l<o;++l)i[l]=n("bs_curry")._2(e,t[l],r[l]);return i}function C(e,t){for(var r=0,o=t.length;r<o;++r)n("bs_curry")._2(e,r,t[r])}function b(e,t){var r=t.length;if(r===0)return[];for(var o=n("bs_caml_array").make(r,n("bs_curry")._2(e,0,t[0])),a=1;a<r;++a)o[a]=n("bs_curry")._2(e,a,t[a]);return o}function v(e){for(var t=e.length-1|0,n=0;;){var r=n,o=t;if(o<0)return r;n={hd:e[o],tl:r},t=o-1|0}}function S(e,t){for(;;){var n=t,r=e;if(!n)return r;t=n.tl,e=r+1|0}}function R(e){if(!e)return[];for(var t=n("bs_caml_array").make(S(0,e),e.hd),r=1,o=e.tl;;){var a=o,i=r;if(!a)return t;t[i]=a.hd,o=a.tl,r=i+1|0}}function L(e,t,r){for(var o=t,a=0,i=r.length;a<i;++a)o=n("bs_curry")._2(e,o,r[a]);return o}function E(e,t,r){for(var o=r,a=t.length-1|0;a>=0;--a)o=n("bs_curry")._2(e,t[a],o);return o}function k(e,t){for(var r=t.length,o=0;;){var a=o;if(a===r)return!1;if(n("bs_curry")._1(e,t[a]))return!0;o=a+1|0}}function I(e,t){for(var r=t.length,o=0;;){var a=o;if(a===r)return!0;if(!n("bs_curry")._1(e,t[a]))return!1;o=a+1|0}}function T(e,t){for(var r=t.length,o=0;;){var a=o;if(a===r)return!1;if(n("bs_caml_obj").caml_equal(t[a],e))return!0;o=a+1|0}}function D(e,t){for(var n=t.length,r=0;;){var o=r;if(o===n)return!1;if(e===t[o])return!0;r=o+1|0}}var x=n("bs_caml_exceptions").create("Array.Bottom");function $(e,t){for(var r=function(o,a){var r=((a+a|0)+a|0)+1|0,i=r;if((r+2|0)<o)return n("bs_curry")._2(e,n("bs_caml_array").get(t,r),n("bs_caml_array").get(t,r+1|0))<0&&(i=r+1|0),n("bs_curry")._2(e,n("bs_caml_array").get(t,i),n("bs_caml_array").get(t,r+2|0))<0&&(i=r+2|0),i;if((r+1|0)<o&&n("bs_curry")._2(e,n("bs_caml_array").get(t,r),n("bs_caml_array").get(t,r+1|0))<0)return r+1|0;if(r<o)return r;throw{RE_EXN_ID:x,_1:a,Error:new Error}},o=function(a,i,l){try{for(var o=i;;){var s=o,u=r(a,s);if(n("bs_curry")._2(e,n("bs_caml_array").get(t,u),l)<=0)return n("bs_caml_array").set(t,s,l);n("bs_caml_array").set(t,s,n("bs_caml_array").get(t,u)),o=u}}catch(e){var c=n("bs_caml_js_exceptions").internalToOCamlException(e);if(c.RE_EXN_ID===x)return n("bs_caml_array").set(t,c._1,l);throw c}},a=function(o,a){try{for(var e=a;;){var i=e,l=r(o,i);n("bs_caml_array").set(t,i,n("bs_caml_array").get(t,l)),e=l}}catch(e){var s=n("bs_caml_js_exceptions").internalToOCamlException(e);if(s.RE_EXN_ID===x)return s._1;throw s}},i=function(o,a){for(;;){var r=o,i=(r-1|0)/3|0;if(r===i)throw{RE_EXN_ID:"Assert_failure",_1:["array.ml",238,4],Error:new Error};if(n("bs_curry")._2(e,n("bs_caml_array").get(t,i),a)>=0)return n("bs_caml_array").set(t,r,a);if(n("bs_caml_array").set(t,r,n("bs_caml_array").get(t,i)),i<=0)return n("bs_caml_array").set(t,0,a);o=i}},l=t.length,s=((l+1|0)/3|0)-1|0;s>=0;--s)o(l,s,n("bs_caml_array").get(t,s));for(var u=l-1|0;u>=2;--u){var c=n("bs_caml_array").get(t,u);n("bs_caml_array").set(t,u,n("bs_caml_array").get(t,0)),i(a(u,0),c)}if(!(l<=1)){var d=n("bs_caml_array").get(t,1);return n("bs_caml_array").set(t,1,n("bs_caml_array").get(t,0)),n("bs_caml_array").set(t,0,d)}}function P(e,t){var r=function(o,a,i,l,s,u,c){for(var r=o+a|0,d=l+s|0,m=o,p=n("bs_caml_array").get(t,o),f=l,g=n("bs_caml_array").get(i,l),h=c;;){var y=h,C=g,b=f,v=p,S=m;if(n("bs_curry")._2(e,v,C)<=0){n("bs_caml_array").set(u,y,v);var R=S+1|0;if(R>=r)return _(i,b,u,y+1|0,d-b|0);h=y+1|0,p=n("bs_caml_array").get(t,R),m=R;continue}n("bs_caml_array").set(u,y,C);var L=b+1|0;if(L>=d)return _(t,S,u,y+1|0,r-S|0);h=y+1|0,g=n("bs_caml_array").get(i,L),f=L}},o=function(o,a,i,l){for(var r=0;r<l;++r){for(var s=n("bs_caml_array").get(t,o+r|0),u=(i+r|0)-1|0;u>=i&&n("bs_curry")._2(e,n("bs_caml_array").get(a,u),s)>0;)n("bs_caml_array").set(a,u+1|0,n("bs_caml_array").get(a,u)),u=u-1|0;n("bs_caml_array").set(a,u+1|0,s)}},a=function(n,i,l,s){if(s<=5)return o(n,i,l,s);var e=s/2|0,u=s-e|0;return a(n+e|0,i,l+e|0,u),a(n,t,n+u|0,e),r(n+u|0,e,i,l+e|0,u,i,l)},i=t.length;if(i<=5)return o(0,t,0,i);var l=i/2|0,s=i-l|0,u=n("bs_caml_array").make(s,n("bs_caml_array").get(t,0));return a(l,u,0,s),a(0,t,s,l),r(s,l,u,0,s,t,0)}var N=u,M=n("bs_caml_array").concat,w=P;i.make_float=e,i.init=s,i.make_matrix=u,i.create_matrix=N,i.append=d,i.concat=M,i.sub=m,i.copy=c,i.fill=p,i.blit=_,i.to_list=v,i.of_list=R,i.iter=f,i.iteri=C,i.map=h,i.mapi=b,i.fold_left=L,i.fold_right=E,i.iter2=g,i.map2=y,i.for_all=I,i.exists=k,i.mem=T,i.memq=D,i.sort=$,i.stable_sort=P,i.fast_sort=w,i.Floatarray=l}),null);
__d("bs_js_json",["bs_caml_option"],(function(t,n,r,o,a,i){"use strict";function e(e){var t=typeof e;return t==="string"?{TAG:0,_0:e}:t==="number"?{TAG:1,_0:e}:t==="boolean"?e===!0?1:0:e===null?2:Array.isArray(e)?{TAG:3,_0:e}:{TAG:2,_0:e}}function l(e,t){switch(t){case 0:return typeof e=="string";case 1:return typeof e=="number";case 2:return e!==null&&typeof e=="object"?!Array.isArray(e):!1;case 3:return Array.isArray(e);case 4:return typeof e=="boolean";case 5:return e===null}}function s(e){if(typeof e=="string")return e}function u(e){if(typeof e=="number")return e}function c(e){if(typeof e=="object"&&!Array.isArray(e)&&e!==null)return n("bs_caml_option").some(e)}function d(e){if(Array.isArray(e))return e}function m(e){if(typeof e=="boolean")return e}function p(e){if(e===null)return null}var _=function(t){for(var e=[t],n=[{kind:0,i:0,parent:e}];n.length!==0;){var r=n[n.length-1];r.kind===0?(r.val=r.parent[r.i],++r.i===r.parent.length&&n.pop()):n.pop();var o=r.val;if(typeof o=="object")if(Array.isArray(o)&&o.length!==0)n.push({kind:0,i:0,parent:o,val:void 0});else for(var a in o){if(a==="RE_PRIVATE_NONE"){r.kind===0?r.parent[r.i-1]=void 0:r.parent[r.i]=void 0;continue}n.push({kind:1,i:a,parent:o,val:o[a]})}}return e[0]};function f(e){return(function(e){var t=JSON.stringify(e,function(e,t){return t===void 0?{RE_PRIVATE_NONE:!0}:t});if(t===void 0)throw new TypeError("output is undefined");return t})(e)}function g(e){return _(JSON.parse(e))}i.classify=e,i.test=l,i.decodeString=s,i.decodeNumber=u,i.decodeObject=c,i.decodeArray=d,i.decodeBoolean=m,i.decodeNull=p,i.deserializeUnsafe=g,i.serializeExn=f}),null);
__d("MessengerServerPayloadTransformer.bs",["fbt","CurrentUser","FBIDForMercury","GenderConst","MercuryIDs","MessageThreadUnsendabilityStatus.bs","MessagingThreadType","MessengerAttachmentTransformer.bs","MessengerGroupAdminModelStatus.bs","MessengerGroupThreadSubType","MessengerGroupsSyncStatus.bs","MessengerMessageTransformer.bs","MessengerObjectAssociationType","MessengerThreadCannotReplyReason.bs","URI","bs_array","bs_belt_Option","bs_caml_array","bs_caml_format","bs_caml_option","bs_js_json","bs_js_null_undefined","bs_string","getByPath","isMessengerDotComURI"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e){var t=e.location_coordinates,n=t==null?[null,null]:[t.latitude,t.longitude],o=e.location_page,a;if(o==null)a=null;else{var i=o.address;a=i==null?null:i.full_address}var l=e.allows_rsvp?1:0,s=r("bs_array").fold_left(function(e,t){return e[t.node.id]=t.guest_list_state,e},{},e.event_reminder_members.edges),u=e.lightweight_event_creator;return{creator_id:u==null?null:u.id,event_members:s,event_time:e.time,event_type:e.lightweight_event_type,latitude:n[0],location_address:a,location_name:e.location_name,longitude:n[1],note:e.note,oid:e.id,related_event:e.related_event,repeat_mode:e.repeat_mode,seconds_to_notify_before:e.seconds_to_notify_before,status:e.lightweight_event_status,title:e.event_title,track_rsvp:l}}function c(t){var n=t.associated_object;if(n==null)return null;var o=n.action_link,a=n.group_general_chat,i=n.group_saves,l=n.profile_picture,s=n.verse_group_link;return{action_link:o==null?null:r("CurrentUser").isWorkUser()?o:new(e||(e=r("URI")))(o).setDomain("www.facebook.com"),approval_mode_toggleable:n.approval_mode_toggleable,event_place:n.event_place,group_general_chat:a==null?null:{id:a.id},group_saves:i==null?{count:0}:{count:i.count},id:n.id,mentorship_program:n.mentorship_program,name:n.name,privacy_mode:n.privacy_mode,profile_picture:l==null?null:{uri:l.uri},room_type:n.room_type,start_timestamp:n.start_timestamp,verse_group_link:s==null?null:new(e||(e=r("URI")))(s).setDomain("www.facebook.com")}}function d(e){var t=e.related_page_thread;if(t==null)return null;var n=t.custom_thread_tags.nodes.map(function(e){return{color:e.color,id:e.id,name:e.name}}),r=t.custom_thread_labels.nodes.map(function(e){return{color:e.label_color,data_silo:e.data_silo,id:e.id,label_source:e.label_source,name:e.name,is_ad_response_label:e.is_ad_response_label}}),o=t.corp_thread_labels.nodes.map(function(e){return{color:e.label_color,data_silo:e.data_silo,id:e.id,name:e.name,is_ai_label:e.is_ai_label,is_ai_handoff_label:e.is_ai_handoff_label,is_ad_response_label:e.is_ad_response_label}}),a=t.page,i=a==null?null:a.id;return{corpLabels:o,customLabels:r,customTags:n,flagged:t.is_flagged,pageID:i}}function m(e){var t=e.thread_key.other_user_id;if(t==null)return!1;var n=e.all_participants.edges;return r("bs_array").fold_left(function(e,n){var r=n.node.messaging_actor;return r.id===t?r.__typename==="User":e},!1,n)}function p(e){if(e.length===0)return null;var t={};return e.forEach(function(e){var n=e.nickname;if(n!=null){t[e.participant_id]=n;return}}),t}function _(e){return"#"+r("bs_string").sub(e,2,e.length-2|0)}function f(e){return e==null||e===""?null:_(e)}function g(e){return e.thread_key.thread_fbid}function h(e){return e.thread_key.other_user_id}function y(e){return r("bs_caml_option").nullable_to_opt(r("getByPath")(e,["messages","page_info"]))}function C(e){var t=r("CurrentUser").isWorkUser()?s._(/*BTDS*/"Usu\u00e1rio do Workplace"):s._(/*BTDS*/"Usu\u00e1rio do Facebook");return{accepts_messenger_user_feedback:!1,big_image_src:null,company_name:null,employee:!1,fbid:o("FBIDForMercury").ofStringExn(e),gender:r("GenderConst").UNKNOWN_SINGULAR,href:null,id:"fbid:"+e,image_src:null,instant_game_channel:null,is_aloha_proxy_confirmed:!1,is_business_enabled:!1,is_facebook_blocked:!0,is_friend:!1,is_messenger_blocked:!1,is_messenger_ignored:null,is_messenger_platform_bot:!1,is_messenger_user:!1,is_subscribed_to_page_updates:!1,is_viewer_managing_parent:!1,message_capabilities2:null,messenger_account_status_category:null,name:t,short_name:t,square_image_src:null,timezone:null,title:null,user_type:null,vanity:null,verification_status:null,wec_group_admins:[],wec_group_creation_time:null,wec_group_invite_link:null,wec_group_participant_count:null,wec_group_participants:[],work_foreign_entity_info:null}}function b(t){var n=t.profile_picture_url,a;if(n==null){var i=t.big_image_src;a=i==null?null:i.uri}else a=n;var l=t.accepts_messenger_user_feedback,s=t.work_info,u;if(s==null)u=null;else{var c=s.work_community,d=c==null?null:c.name,m=t.work_foreign_entity_info;u=d==null||m==null||m.type!=="FOREIGN"?null:d}var p=t.is_employee,_=t.gender,f=t.url,g;if(f==null)g=null;else{var h=r("isMessengerDotComURI")(new(e||(e=r("URI")))(f));g=h?new(e||(e=r("URI")))(f).getUnqualifiedURI().setDomain("www.facebook.com").setProtocol("https").toString():f}var y=t.is_aloha_proxy_confirmed,C=t.is_blocked_by_viewer,b=t.is_viewer_friend,v=t.is_message_blocked_by_viewer,S=t.is_messenger_platform_bot,R=t.is_messenger_user,L=t.is_viewer_subscribed_to_message_updates,E=t.is_viewer_managing_parent,k=t.message_capabilities2_str,I=t.messenger_account_status_category,T=t.work_info,D;if(T==null)D=null;else{var x=T.work_community,$=x==null?null:x.name,P=T.job_title;D=$==null?P==null?null:P:P==null||P.length===0?$:""+P+" \u2022 "+$}var N=t.__typename,M;switch(N){case"NeoApprovedUser":M="parent_approved_user";break;case"Page":M="page";break;case"ReducedMessagingActor":M="guest";break;case"User":M="user";break;case"WECCustomer":M="wec";break;default:M=null}var w=t.wec_group_admins,A=t.wec_group_creation_time,F=t.wec_group_invite_link,O=t.wec_group_participants,B=t.wec_group_participants,W=t.work_foreign_entity_info;return{accepts_messenger_user_feedback:l==null?!1:l,big_image_src:a,company_name:u,employee:p==null?!1:p,fbid:t.id,gender:_==null?r("GenderConst").NOT_A_PERSON:_==="MALE"?r("GenderConst").MALE_SINGULAR:_==="FEMALE"?r("GenderConst").FEMALE_SINGULAR:r("GenderConst").NOT_A_PERSON,href:g,id:"fbid:"+t.id,image_src:a,instant_game_channel:t.__typename==="Page"?t.instant_game_channel:null,is_aloha_proxy_confirmed:y==null?!1:y,is_business_enabled:t.__typename==="Page",is_facebook_blocked:C==null?!1:C,is_friend:b==null?!1:b,is_messenger_blocked:v==null?!1:v,is_messenger_ignored:null,is_messenger_platform_bot:S==null?!1:S,is_messenger_user:R==null?!1:R,message_capabilities2:k==null?null:k,messenger_account_status_category:I==null?null:I,is_subscribed_to_page_updates:L==null?!0:L,is_viewer_managing_parent:E==null?!1:E,name:t.name,short_name:r("bs_belt_Option").getWithDefault(r("bs_caml_option").nullable_to_opt(t.short_name),t.name),square_image_src:null,timezone:null,title:D,user_type:M,vanity:t.username,verification_status:t.verification_status,wec_group_admins:w==null?[]:w.nodes.map(function(e){return{id:o("MercuryIDs").getParticipantIDFromUserID(e.messaging_actor.id),name:e.messaging_actor.name}}),wec_group_creation_time:A==null?null:A,wec_group_invite_link:F==null?null:F,wec_group_participant_count:O==null?null:O.count,wec_group_participants:B==null?[]:B.nodes.map(function(e){return{id:o("MercuryIDs").getParticipantIDFromUserID(e.messaging_actor.id),name:e.messaging_actor.name}}),work_foreign_entity_info:W==null?null:W}}function v(e){return e.all_participants.edges.map(function(e){return b(e.node.messaging_actor)})}function S(e,t){var n=t.read_receipts;if(n!=null){var o={};return n.nodes.forEach(function(t){var n=t.actor;if(n!=null&&e!==n.id){o[n.id]={action:r("bs_caml_format").caml_float_of_string(t.action),watermark:r("bs_caml_format").caml_float_of_string(t.watermark)};return}}),r("bs_caml_option").some(o)}}function R(e){var t=e.delivery_receipts;return t==null?[]:t.nodes.sort(function(e,t){var n=r("bs_caml_format").caml_float_of_string(e.timestamp_precise),o=r("bs_caml_format").caml_float_of_string(t.timestamp_precise);return n>o?-1:n===o?0:1})}function L(e,t,n){var r=t.messages;if(r!=null)return r.nodes.map(function(r){return o("MessengerMessageTransformer.bs").transformMessage(e,r,{folder:t.folder.toLowerCase(),other_user_fbid:t.thread_key.other_user_id,thread_fbid:t.thread_key.thread_fbid,thread_id:null},n)})}function E(e,t,n){var a=t.last_message.nodes.map(function(e){var t=o("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(e),n=e.extensible_attachment,r;if(n==null)r=null;else{var a=n.genie_attachment,i;if(a==null)i=null;else{var l=a.genie_message,s;if(l==null)s=null;else{var u=l.story_attachment;s={story_attachment:u==null?null:o("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(u)}}i={genie_message:s}}var c=n.story_attachment;r={genie_attachment:i,legacy_attachment_id:n.legacy_attachment_id,story_attachment:c==null?null:o("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(c)}}return{blob_attachments:t,commerce_message_type:e.commerce_message_type,extensible_attachment:r,extensible_message_admin_text:e.extensible_message_admin_text,extensible_message_admin_text_type:e.extensible_message_admin_text_type,message_id:e.message_id,message_sender:e.message_sender,message_unsendability_status:e.message_unsendability_status,platform_xmd_encoded:e.platform_xmd_encoded,snippet:e.snippet,sticker:e.sticker,timestamp_precise:e.timestamp_precise}}),i={admin_model_status_string:t.admin_model_status_string,all_participants:t.all_participants,approval_mode:t.approval_mode,associated_object:t.associated_object,can_viewer_report:t.can_viewer_report,cannot_reply_reason:t.cannot_reply_reason,composer_input_disabled:t.composer_input_disabled,conversion_detection_data:t.conversion_detection_data,customization_enabled:t.customization_enabled,customization_info:t.customization_info,description:t.description,ephemeral_ttl_mode:t.ephemeral_ttl_mode,event_reminders:t.event_reminders,folder:t.folder,group_approval_queue:t.group_approval_queue,group_thread_subtype:t.group_thread_subtype,groups_sync_status_string:t.groups_sync_status_string,has_viewer_archived:t.has_viewer_archived,id:t.id,image:t.image,is_business_page_active:t.is_business_page_active,is_canonical_neo_user:t.is_canonical_neo_user,is_other_recipient_page:t.is_other_recipient_page,is_page_follow_up:t.is_page_follow_up,is_page_unresponded_thread:t.is_page_unresponded_thread,is_pin_protected:t.is_pin_protected,is_pinned:t.is_pinned,is_viewer_subscribed:t.is_viewer_subscribed,joinable_link:t.joinable_link,joinable_mode:t.joinable_mode,last_message:{nodes:a},last_read_receipt:t.last_read_receipt,linked_mentorship_programs:t.linked_mentorship_programs,marketplace_thread_data:t.marketplace_thread_data,mentions_mute_mode:t.mentions_mute_mode,message_count:t.messages_count,montage_thread:t.montage_thread,mute_until:t.mute_until,name:t.name,page_comm_item:t.page_comm_item,page_unsubscribe_status:t.page_unsubscribe_status,participant_add_mode_as_string:t.participant_add_mode_as_string,participants_event_status:t.participants_event_status,pinned_messages:t.pinned_messages,privacy_mode:t.privacy_mode,reactions_mute_mode:t.reactions_mute_mode,related_page_thread:t.related_page_thread,rtc_call_data:t.rtc_call_data,square_image:t.square_image,suggested_reply_data:t.suggested_reply_data,theme:t.thread_theme,thread_admins:t.thread_admins,thread_associated_job_applications:t.thread_associated_job_applications,thread_associated_page_admin:t.thread_associated_page_admin,thread_connectivity_data:t.thread_connectivity_data,thread_key:t.thread_key,thread_pin_timestamp:t.thread_pin_timestamp,thread_queue_enabled:t.thread_queue_enabled,thread_queue_metadata:t.thread_queue_metadata,thread_type:t.thread_type,thread_unsendability_status:t.thread_unsendability_status,unread_count:t.unread_count,unread_mentions_count:t.unread_mentions_count,updated_time_precise:t.updated_time_precise,work_groups_sync_metadata:t.work_groups_sync_metadata},l=i.customization_info,s;if(l==null)s=[null,null,null];else{var g=l.emoji;s=[f(l.outgoing_bubble_color),g==null?null:{emoji:g},p(l.participant_customizations)]}var h=s[0],y=i.theme,C;if(y==null)C=[h,h,h,[],null,void 0,null,null];else{var b=y.reaction_pack,S;if(b==null)S=void 0;else{var R=b.reaction_assets;S=R==null?void 0:R.nodes.map(function(e){return{keyframeAssetUri:e.keyframe_asset_uri,reactionEmoji:e.reaction_emoji,reactionName:e.reaction_name,staticAssetUri:e.static_asset.uri}})}var L=y.gradient_colors.length,E=_(y.fallback_color),k=o("FBIDForMercury").ofString(y.id),I=k!==void 0?r("bs_caml_option").valFromOption(k):null;if(L>0){var T=y.gradient_colors.map(_);C=[E,r("bs_caml_array").get(T,0),r("bs_caml_array").get(T,L-1|0),T,I,S,y.accessibility_label,y.reverse_gradients_for_radial]}else C=[E,E,E,[],I,S,y.accessibility_label,y.reverse_gradients_for_radial]}var D=i.page_comm_item,x=D==null?[null,null,null,null,null,[],!1,[],null,null,!1]:[D.comm_status,D.comm_source_id,D.id,D.subtitle,D.comm_item_owners,D.comm_icon_type,D.is_priority,D.biz_inbox_tags,D.priority_score,D.biz_inbox_suggested_reply,D.is_thread_currently_handled_by_ai_agent],$=i.last_message.nodes,P=$.length!==0?r("bs_caml_option").some($[0]):void 0,N=i.last_read_receipt.nodes,M=N.length!==0?r("bs_caml_option").some(N[0]):void 0,w;if(P!==void 0){var A=r("bs_caml_option").valFromOption(P);w=o("MessengerAttachmentTransformer.bs").transformAttachment(e,{blob_attachments:A.blob_attachments,extensible_attachment:A.extensible_attachment,sticker:A.sticker},A.message_id,n)}else w=[];var F;if(P!==void 0){var O=r("bs_caml_option").valFromOption(P).extensible_message_admin_text;if(O==null)F=null;else{var B=O.game;F=B==null?null:B.id}}else F=null;var W=o("MessengerThreadCannotReplyReason.bs").fromName(i.cannot_reply_reason),q=i.thread_key.other_user_id,U;if(q==null){var V=i.thread_key.thread_fbid;U=V==null?null:V}else U=q;var H=r("bs_array").fold_left(function(e,t){return e[t.id]=0,e},{},i.thread_admins),G=r("bs_array").fold_left(function(e,t){var n=t.node.messaging_actor.id,r=t.admin_type,o=e[n];return r!=null&&o!==void 0&&(e[n]=r),e},H,i.all_participants.edges),z=i.thread_queue_metadata,j=i.group_approval_queue,K=i.group_thread_subtype,Q=i.montage_thread,X=i.image,Y=i.thread_key.other_user_id,J;if(P!==void 0){var Z=r("bs_caml_option").valFromOption(P).platform_xmd_encoded;if(Z==null)J=!1;else{var ee;try{ee=JSON.parse(Z)}catch(e){ee={}}var te=r("bs_js_json").classify(ee);J=typeof te=="number"||te.TAG!==2?!1:te._0.landing_exp!==void 0}}else J=!1;var ne=i.thread_queue_metadata,re=i.event_reminders.nodes,oe=i.linked_mentorship_programs,ae=i.marketplace_thread_data,ie;if(ae==null)ie=null;else{var le=ae.buyer,se=ae.for_sale_item,ue;if(se==null)ue=null;else{var ce=se.primary_photo,de;if(ce==null)de=null;else{var me=ce.image;de=me==null?null:me.uri}var pe=se.product_item,_e=se.location,fe;if(_e==null)fe=null;else{var ge=_e.reverse_geocode;fe={reverse_geocode:ge==null?null:{city:ge.city,state:ge.state}}}var he=se.formatted_price,ye=se.product_item;ue={c2c_shipping_eligible:se.c2c_shipping_eligible,delivery_types:se.delivery_types,id:se.id,image_uri:de,inventory_count:se.inventory_count,is_commerce_post_item:pe==null?!1:pe.is_commerce_post_item,is_pending:se.is_pending,is_shipping_offered:se.is_shipping_offered,is_sold:se.is_sold,location:fe,price:he==null?null:he.text,product_item_id:ye==null?null:ye.id,story_id:se.story_id,title:se.group_commerce_item_title,url:se.url}}var Ce=ae.rating_state,be=ae.seller,ve;if(be==null)ve=!1;else{var Se=be.marketplace_c2c_shipping_seller;ve=Se==null?!1:Se.is_eligible}var Re=ae.seller;ie={buyer_fbid:le==null?null:le.id,for_sale_item:ue,is_eligible_to_rate:Ce==null?null:Ce.is_eligible_to_rate,is_seller_eligible_for_shipping:ve,seller_added_labels:ae.seller_added_labels.map(function(e){return{label_string:e.label_string,label_type:e.label_type}}),seller_fbid:Re==null?null:Re.id,thread_fbid:U}}var Le=i.name,Ee=i.associated_object,ke;if(Ee==null)ke=null;else{var Ie=Ee.group_general_chat;ke=Ie==null||U==null?null:Ie.id===U?r("MessengerObjectAssociationType").GENERAL_CHAT:r("MessengerObjectAssociationType").REGULAR_CHAT}var Te=i.pinned_messages,De=i.rtc_call_data,xe;if(De==null)xe=null;else{var $e=De.initiator;xe={call_state:De.call_state,initiator_fbid:$e==null?null:r("bs_js_null_undefined").fromOption(o("FBIDForMercury").ofString($e.id)),server_info_data:De.server_info_data}}var Pe=i.square_image,Ne=i.thread_associated_job_applications,Me=i.thread_type,we=i.work_groups_sync_metadata,Ae;if(we==null)Ae=null;else{var Fe=we.fb_group;Ae=Fe==null?null:Fe}return{accessibility_label:C[6],admin_model_status:o("MessengerGroupAdminModelStatus.bs").fromNullableString(i.admin_model_status_string),admins:G,approval_mode:i.approval_mode,approval_queue_ids:z==null?[]:z.approval_requests.nodes.map(function(e){return o("MercuryIDs").getParticipantIDFromUserID(o("FBIDForMercury").ofStringExn(e.id))}),associated_object:c(i),biz_inbox_suggested_reply:x[9],is_thread_currently_handled_by_ai_agent:x[10],biz_inbox_tags:x[7],can_reply:W===void 0,can_viewer_report:i.can_viewer_report,cannot_reply_reason:W!==void 0?W:null,comm_icon_type:x[5],comm_item_owners:x[4],comm_source_id:x[1],comm_status:x[0],composer_input_disabled:i.composer_input_disabled,conversion_detection_data:i.conversion_detection_data,custom_like_icon:s[1],custom_nickname:s[2],customization_enabled:i.customization_enabled,description:i.description,ephemeral_ttl_mode:i.ephemeral_ttl_mode,folder:i.folder.toLowerCase(),footer_color:C[2],game_id:F,gradient_colors:C[3],graphql_token:i.id,group_approval_queue:j==null?null:j.nodes,group_thread_subtype:K==null?null:r("bs_js_null_undefined").fromOption(r("MessengerGroupThreadSubType")[K]),groups_sync_status:o("MessengerGroupsSyncStatus.bs").fromNullableString(i.groups_sync_status_string),has_email_participant:W!==void 0?W==="has_email_participant":!1,has_montage:Q!=null,header_color:C[1],image_src:X==null?null:X.uri,is_archived:i.has_viewer_archived,is_business_page_active:i.is_business_page_active,is_canonical:Y!=null,is_canonical_neo_user:i.is_canonical_neo_user,is_canonical_user:m(i),is_from_weak_entry_point:J,is_other_recipient_page:i.is_other_recipient_page,is_page_follow_up:i.is_page_follow_up,is_page_unresponded_thread:i.is_page_unresponded_thread,is_pin_protected:i.is_pin_protected,is_pinned:i.is_pinned,is_priority:x[6],is_subscribed:i.is_viewer_subscribed,is_thread_queue_enabled:ne!=null,joinable_link:i.joinable_link,joinable_mode:{link:i.joinable_mode.link,mode:r("bs_caml_format").caml_int_of_string(i.joinable_mode.mode)},last_message_admin_text_type:P!==void 0?r("bs_caml_option").valFromOption(P).extensible_message_admin_text_type:null,last_message_id:null,last_message_timestamp:P!==void 0?r("bs_caml_format").caml_float_of_string(r("bs_caml_option").valFromOption(P).timestamp_precise):0,last_message_type:P!==void 0?r("bs_caml_option").valFromOption(P).commerce_message_type:null,last_message_unsendability_status:P!==void 0?r("bs_caml_option").valFromOption(P).message_unsendability_status:null,last_read_timestamp:M!==void 0?r("bs_caml_format").caml_float_of_string(r("bs_caml_option").valFromOption(M).timestamp_precise):0,lightweight_event:re.length!==0?u(re[0]):null,lightweight_events:r("bs_array").fold_left(function(e,t){return e[t.id]=u(t),e},{},i.event_reminders.nodes),linked_mentorship_programs:oe==null?null:oe,marketplace_thread_data:ie,mentions_mute_mode:i.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,message_count:i.message_count,mute_until:i.mute_until,name:Le==null?"":Le,object_association_type:ke,other_user_fbid:i.thread_key.other_user_id,page_comm_item_id:x[2],page_thread_info:d(i),page_unsubscribe_status:i.page_unsubscribe_status,participant_add_mode:i.participant_add_mode_as_string,participants:i.all_participants.edges.map(function(e){return o("MercuryIDs").getParticipantIDFromUserID(e.node.messaging_actor.id)}),participants_event_status:i.participants_event_status,pinned_messages:Te==null?null:Te.map(function(t){var n=t.message;return{message:n==null?null:o("MessengerMessageTransformer.bs").transformMessage(e,n,{folder:i.folder.toLowerCase(),other_user_fbid:i.thread_key.other_user_id,thread_fbid:i.thread_key.thread_fbid,thread_id:null},!1),message_id:t.message_id,pinning_time:t.pinning_time}}),preloaded_participants:v(t),priority_score:x[8],reactions:C[5],reactions_mute_mode:i.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,read_only:W!==void 0?W==="read_only":!1,recipients_loadable:W!==void 0?W!=="recipients_not_loadable":!0,reverse_gradients_for_radial:C[7],rtc_call_data:xe,server_timestamp:r("bs_caml_format").caml_float_of_string(i.updated_time_precise),snippet:P!==void 0?r("bs_caml_option").valFromOption(P).snippet:null,snippet_attachments:w,snippet_sender:P!==void 0?o("MercuryIDs").getParticipantIDFromUserID(r("bs_caml_option").valFromOption(P).message_sender.messaging_actor.id):null,solid_color:C[0],square_image_src:Pe==null?null:Pe.uri,subtitle:x[3],suggested_reply_data:i.suggested_reply_data,theme_id:C[4],thread_associated_job_applications:Ne==null?null:Ne,thread_associated_page_admin:i.thread_associated_page_admin,thread_connectivity_data:i.thread_connectivity_data,thread_fbid:U,thread_id:"",thread_pin_timestamp:i.thread_pin_timestamp,thread_type:Me==null?null:r("bs_js_null_undefined").fromOption(r("MessagingThreadType")[Me]),thread_unsendability_status:o("MessageThreadUnsendabilityStatus.bs").fromNullableString(i.thread_unsendability_status),timestamp:r("bs_caml_format").caml_float_of_string(i.updated_time_precise),unread_count:i.unread_count,unread_mentions_count:i.unread_mentions_count,work_associated_group:Ae}}var k=g,I=h,T=y,D=C,x=b,$=v,P=S,N=R,M=L,w=E;l.getThreadFBID=k,l.getOtherUserID=I,l.getMessagePageInfo=T,l.getBlockedParticipant=D,l.transformParticipant=x,l.transformParticipants=$,l.transformReadReceipts=P,l.transformDeliveryReceipts=N,l.transformMessages=M,l.transformThread=w}),226);
__d("XGraphQLBatchAPIController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/api/graphqlbatch/",{queries:{type:"String"},batch_name:{type:"String"},scheduler:{type:"Enum",enumType:1},shared_params:{type:"String"},fb_api_req_friendly_name:{type:"String"}})}),null);
__d("getBizInboxThreadsRelayQueryMigration",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("22425")}l.default=e}),98);
__d("getBizInboxUnifiedThreadsQuery",["BizInboxGating"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("BizInboxGating").shouldLoadIGDOnMsys()?0:16}function s(){return!o("BizInboxGating").shouldLoadIGDOnMsys()}function u(){return o("BizInboxGating").shouldLoadIGDOnMsys()?!1:e()>0}function c(){return!o("BizInboxGating").shouldLoadIGDOnMsys()}function d(){return o("BizInboxGating").shouldLoadIGDOnMsys(),!1}l.getUnifiedThreadsQueryLimit=e,l.getShouldUnifyContextCardQueries=s,l.getShouldUnifyThreadQueries=u,l.getShouldUnifyConfigQueries=c,l.getShouldLazyLoadContextCardQueries=d}),98);
__d("MessengerWebGraphQLHelper",["errorCode","ActorURI","AsyncRequest","DTSG","DTSGParser","Deferred","FBLogger","WebGraphQLConfig","XGraphQLBatchAPIController","cr:2148","cr:2703","cr:4351","getAsyncParams","getBizInboxThreadsRelayQueryMigration","getBizInboxUnifiedThreadsQuery","getErrorSafe","justknobx","nullthrows","react-relay"],(function(t,n,r,o,a,i,l,s){"use strict";var e="for (;;);",u=e.length;function c(e,t){return m([e],t)[0]}function d(e,t,o){var a=n("react-relay"),i=a.fetchQuery,l=n("cr:2148")==null?void 0:n("cr:2148").getForActorID(o),s=new(r("Deferred")),u=s.getPromise();return i(r("nullthrows")(l),e,t.variables).subscribe({start:function(){},complete:function(){},error:function(t){s.reject({data:{},errors:[{message:t.message,severity:"CRITICAL",error:t}]})},next:function(t){t?s.resolve(t):s.reject({data:{},errors:[{message:"Unexpected response received from server.",severity:"CRITICAL",response:t}]})}}),u}function m(t,a){var i=a==null?void 0:a.actorID;if(t.length===1&&i){var l,s;if(n("cr:4351")){var c,m=(c=a==null?void 0:a.batchName)!=null?c:"",_=t[0].variables,f=n("cr:4351").getUnifiedChannelFromMercuryOperations(m,_.source);if(f&&m&&(m==="MessengerGraphQLThreadlistFetcher"||m==="MessengerGraphQLThreadFetcher")&&_.source&&n("cr:4351").shouldUseUnifiedQuery(f,_)&&o("getBizInboxUnifiedThreadsQuery").getShouldUnifyThreadQueries())return[n("cr:4351").execUnifiedQuery(f)]}if((n("cr:2703")==null?void 0:n("cr:2703").params.id)===((l=t[0])==null?void 0:l.id)&&!((s=t[0])!=null&&s.variables.before)&&r("getBizInboxThreadsRelayQueryMigration")())return[d(n("cr:2703"),t[0],i)]}var g={},h={},y=t.map(function(e,t){var n="o"+t;g[n]={doc_id:r("nullthrows")(e.id),query_params:e.variables};var o=new(r("Deferred"));return h[n]=o,o.getPromise()}),C=babelHelpers.extends({},r("getAsyncParams")("POST"));a&&a.actorID!=null&&(C[o("ActorURI").PARAMETER_ACTOR]=a.actorID);var b=a&&a.batchName?{batch_name:a.batchName}:{},v=new(r("AsyncRequest"))().setURI(r("XGraphQLBatchAPIController").getURIBuilder().getURI()).setOption("suppressEvaluation",!0).setMethod("POST").setRequestHeader("Content-Type","application/x-www-form-urlencoded").setData(babelHelpers.extends({},b,C,{queries:JSON.stringify(g)})).setHandler(function(t){var n=t.getPayload(),a=n.response;try{if(a.startsWith(e)){var i=a.substring(u),l=JSON.parse(i);if(l.error==1357001){Object.keys(h).forEach(function(e){h[e].isSettled()||h[e].reject({data:{},errors:[{message:"Not logged in.",severity:"CRITICAL",should_end_session:!0}]})});return}}r("DTSGParser").updateFromAsyncResponse(a);var s=a.split("\r\n");s.pop();var c=s.map(function(e){return JSON.parse(e)});c.forEach(function(e){return Object.keys(e).forEach(function(t){var n=h[t];if(n){var r=e[t];if(r.extensions){var a,i=(a=r.extensions)==null?void 0:a.dtsg_token;i&&o("DTSG").setToken(i)}p(r)?n.resolve(r.data):r.errors?n.reject(r):r.data?n.resolve(r.data):n.reject({data:{},errors:[{message:"Unexpected response received from server.",severity:"CRITICAL",response:r}]})}})})}catch(e){var d=r("getErrorSafe")(e);r("FBLogger")("webgraphql").catching(d).mustfix("Bad response: ","%s%s",a.substr(0,250),a.length>250?"[truncated]":"")}Object.keys(h).forEach(function(e){h[e].isSettled()||h[e].reject({data:{},errors:[{message:"No response received from server.",severity:"CRITICAL"}]})})}).setTimeoutHandler(r("WebGraphQLConfig").timeout,function(){Object.keys(h).forEach(function(e){h[e].isSettled()||h[e].reject({data:{},errors:[{message:"Request timed out.",severity:"CRITICAL"}]})})}).setErrorHandler(function(e){var t=e.getErrorDescription();Object.keys(h).forEach(function(n){h[n].isSettled()||h[n].reject({data:{},errors:[{message:t,severity:"CRITICAL",error:e.getError()}]})})});return a&&a.msgrRegion&&v.setRequestHeader("X-MSGR-Region",a.msgrRegion),v.setAllowCrossPageTransition(!0),v.send(),y}function p(e){var t,n;return r("justknobx")._("1886")&&(t=e==null||(n=e.errors)==null?void 0:n.every(function(e){var t;return e==null||(t=e.path)==null?void 0:t.includes("message_capabilities2")}))!=null?t:!1}l.exec=c,l.execRelayQuery=d,l.execAll=m}),98);
__d("MessengerParticipantsFetcher.bs",["MessengerParticipantsQuery.graphql","MessengerServerPayloadTransformer.bs","MessengerWebGraphQLHelper","ODS","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return o("MessengerWebGraphQLHelper").exec({id:r("MessengerParticipantsQuery.graphql").params.id,variables:t},{actorID:null,batchName:"MessengerParticipantsFetcher",msgrRegion:null}).catch(function(t){return(s||(s=o("ODS"))).bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.failure"),(e||(e=n("Promise"))).reject(t)}).then(function(e){(s||(s=o("ODS"))).bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.success");var n=[],r=new Set;e.messaging_actors.forEach(function(e){if(e!=null){var t=o("MessengerServerPayloadTransformer.bs").transformParticipant(e);r.add(t.fbid),n.push(t)}});var a=t.ids.filter(function(e){return!r.has(e)});return a.length>0&&a.forEach(function(e){n.push(o("MessengerServerPayloadTransformer.bs").getBlockedParticipant(e))}),n})}l.$$fetch=u}),98);
__d("bs_js_int",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e===t}var l=2147483647,s=-2147483648;i.equal=e,i.max=l,i.min=s}),null);
__d("bs_js_math",["bs_js_int"],(function(t,n,r,o,a,i){"use strict";function e(e){return Math.ceil(e)}function l(e){return e>n("bs_js_int").max?n("bs_js_int").max:e<n("bs_js_int").min?n("bs_js_int").min:Math.ceil(e)}function s(e){return Math.floor(e)}function u(e){return e>n("bs_js_int").max?n("bs_js_int").max:e<n("bs_js_int").min?n("bs_js_int").min:Math.floor(e)}function c(e,t){return u(Math.random()*(t-e|0))+e|0}var d=l,m=u;i.unsafe_ceil=e,i.ceil_int=l,i.ceil=d,i.unsafe_floor=s,i.floor_int=u,i.floor=m,i.random_int=c}),null);
__d("bs_belt_Array",["bs_caml","bs_caml_option","bs_curry","bs_js_math"],(function(t,n,r,o,a,i){"use strict";var e;function l(e,t){if(t>=0&&t<e.length)return n("bs_caml_option").some(e[t])}function s(e,t){if(!(t>=0&&t<e.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",27,4],Error:new Error};return e[t]}function u(e,t,n){return t>=0&&t<e.length?(e[t]=n,!0):!1}function c(e,t,n){if(!(t>=0&&t<e.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",33,2],Error:new Error};e[t]=n}function d(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e){for(var t=e.length,r=0;r<t;++r)d(e,r,n("bs_js_math").random_int(r,t))}function p(e){var t=e.slice(0);return m(t),t}function _(e){for(var t=e.length,n=0,r=0,o=t/2|0;r<o;++r)d(e,n+r|0,((n+t|0)-r|0)-1|0)}function f(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[(t-1|0)-r|0];return n}function g(e,t){if(e<=0)return[];for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function h(e,t){if(e<=0)return[];for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r);return n}function y(e,t){return h(e,n("bs_curry").__1(t))}function C(e,t){var n=h(e,t);return m(n),n}function b(e,t){return C(e,n("bs_curry").__1(t))}function v(e,t){var n=t-e|0;if(n<0)return[];for(var r=new Array(n+1|0),o=0;o<=n;++o)r[o]=e+o|0;return r}function S(e,t,n){var r=t-e|0;if(r<0||n<=0)return[];for(var o=(r/n|0)+1|0,a=new Array(o),i=e,l=0;l<o;++l)a[l]=i,i=i+n|0;return a}function R(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,a=new Array(o),i=0;i<o;++i)a[i]=[e[i],t[i]];return a}function L(e,t,n){for(var r=e.length,o=t.length,a=r<o?r:o,i=new Array(a),l=0;l<a;++l)i[l]=n(e[l],t[l]);return i}function E(e,t,r){return L(e,t,n("bs_curry").__2(r))}function k(e,t){for(var n=e.length,r=t.length,o=new Array(n+r|0),a=0;a<n;++a)o[a]=e[a];for(var i=0;i<r;++i)o[n+i|0]=t[i];return o}function I(e){for(var t=e.length,n=0,r=0;r<t;++r)n=n+e[r].length|0;var o=new Array(n);n=0;for(var a=0;a<t;++a)for(var i=e[a],l=0,s=i.length;l<s;++l)o[n]=i[l],n=n+1|0;return o}function T(t,r,o){if(o<=0)return[];var a=t.length,i=r<0?(e||(e=n("bs_caml"))).caml_int_max(a+r|0,0):r,l=a-i|0,s=l<o?l:o;if(s<=0)return[];for(var u=new Array(s),c=0;c<s;++c)u[c]=t[i+c|0];return u}function D(t,r){for(var o=t.length,a=r<0?(e||(e=n("bs_caml"))).caml_int_max(o+r|0,0):r,i=o-a|0,l=new Array(i),s=0;s<i;++s)l[s]=t[a+s|0];return l}function x(t,r,o,a){if(!(o<=0)){var i=t.length,l=r<0?(e||(e=n("bs_caml"))).caml_int_max(i+r|0,0):r,s=i-l|0,u=s<o?s:o;if(!(u<=0))for(var c=l,d=l+u|0;c<d;++c)t[c]=a}}function $(e,t,n,r,o){if(r<=t){for(var a=0;a<o;++a)n[a+r|0]=e[a+t|0];return}for(var i=o-1|0;i>=0;--i)n[i+r|0]=e[i+t|0]}function P(t,r,o,a,i){var l=t.length,s=o.length,u=r<0?(e||(e=n("bs_caml"))).caml_int_max(l+r|0,0):r,c=a<0?(e||(e=n("bs_caml"))).caml_int_max(s+a|0,0):a,d=(e||(e=n("bs_caml"))).caml_int_min(i,e.caml_int_min(l-u|0,s-c|0));if(c<=u){for(var m=0;m<d;++m)o[m+c|0]=t[m+u|0];return}for(var p=d-1|0;p>=0;--p)o[p+c|0]=t[p+u|0]}function N(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n])}function M(e,t){return N(e,n("bs_curry").__1(t))}function w(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;++o)r[o]=t(e[o]);return r}function A(e,t){return w(e,n("bs_curry").__1(t))}function F(e,t){for(var r=e.length,o=0,a;a===void 0&&o<r;){var i=e[o];t(i)&&(a=n("bs_caml_option").some(i)),o=o+1|0}return a}function O(e,t){return F(e,n("bs_curry").__1(t))}function B(e,t){for(var n=e.length,r=0,o;o===void 0&&r<n;){var a=e[r];t(a)&&(o=r),r=r+1|0}return o}function W(e,t){return B(e,n("bs_curry").__1(t))}function q(e,t){for(var n=e.length,r=new Array(n),o=0,a=0;a<n;++a){var i=e[a];t(i)&&(r[o]=i,o=o+1|0)}return r.length=o,r}function U(e,t){return q(e,n("bs_curry").__1(t))}function V(e,t){for(var n=e.length,r=new Array(n),o=0,a=0;a<n;++a){var i=e[a];t(i,a)&&(r[o]=i,o=o+1|0)}return r.length=o,r}function H(e,t){return V(e,n("bs_curry").__2(t))}function G(e,t){for(var r=e.length,o=new Array(r),a=0,i=0;i<r;++i){var l=e[i],s=t(l);s!==void 0&&(o[a]=n("bs_caml_option").valFromOption(s),a=a+1|0)}return o.length=a,o}function z(e,t){return G(e,n("bs_curry").__1(t))}function j(e,t){for(var n=0,r=e.length;n<r;++n)t(n,e[n])}function K(e,t){return j(e,n("bs_curry").__2(t))}function Q(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;++o)r[o]=t(o,e[o]);return r}function X(e,t){return Q(e,n("bs_curry").__2(t))}function Y(e,t,n){for(var r=t,o=0,a=e.length;o<a;++o)r=n(r,e[o]);return r}function J(e,t,r){return Y(e,t,n("bs_curry").__2(r))}function Z(e,t,n){for(var r=t,o=e.length-1|0;o>=0;--o)r=n(r,e[o]);return r}function ee(e,t,r){return Z(e,t,n("bs_curry").__2(r))}function te(t,r,o,a){for(var i=o,l=(e||(e=n("bs_caml"))).caml_int_min(t.length,r.length),s=l-1|0;s>=0;--s)i=a(i,t[s],r[s]);return i}function ne(e,t,r,o){return te(e,t,r,n("bs_curry").__3(o))}function re(e,t,n){for(var r=t,o=0,a=e.length;o<a;++o)r=n(r,e[o],o);return r}function oe(e,t,r){return re(e,t,n("bs_curry").__3(r))}function ae(e,t){for(var n=e.length,r=0;;){var o=r;if(o===n)return!0;if(!t(e[o]))return!1;r=o+1|0}}function ie(e,t){return ae(e,n("bs_curry").__1(t))}function le(e,t){for(var n=e.length,r=0;;){var o=r;if(o===n)return!1;if(t(e[o]))return!0;r=o+1|0}}function se(e,t){return le(e,n("bs_curry").__1(t))}function ue(e,t,n,r,o){for(;;){var a=n;if(a===o)return!0;if(!r(e[a],t[a]))return!1;n=a+1|0}}function ce(t,r,o){return ue(t,r,0,o,(e||(e=n("bs_caml"))).caml_int_min(t.length,r.length))}function de(e,t,r){return ce(e,t,n("bs_curry").__2(r))}function me(t,r,o){for(var a=0,i=(e||(e=n("bs_caml"))).caml_int_min(t.length,r.length);;){var l=a;if(l===i)return!1;if(o(t[l],r[l]))return!0;a=l+1|0}}function pe(e,t,r){return me(e,t,n("bs_curry").__2(r))}function _e(e,t,n){var r=e.length,o=t.length;return r===o?ue(e,t,0,n,r):!1}function fe(e,t,r){return _e(e,t,n("bs_curry").__2(r))}function ge(e,t,n){var r=e.length,o=t.length;if(r>o)return 1;if(r<o)return-1;for(var a=0;;){var i=a;if(i===r)return 0;var l=n(e[i],t[i]);if(l!==0)return l;a=i+1|0}}function he(e,t,r){return ge(e,t,n("bs_curry").__2(r))}function ye(e,t){for(var n=e.length,r=0,o=0,a=new Array(n),i=new Array(n),l=0;l<n;++l){var s=e[l];t(s)?(a[r]=s,r=r+1|0):(i[o]=s,o=o+1|0)}return a.length=r,i.length=o,[a,i]}function Ce(e,t){return ye(e,n("bs_curry").__1(t))}function be(e){for(var t=e.length,n=new Array(t),r=new Array(t),o=0;o<t;++o){var a=e[o];n[o]=a[0],r[o]=a[1]}return[n,r]}function ve(e,t,n){var r=e.length;if(r===0)return"";for(var o=r-1|0,a=0,i="";;){var l=i,s=a;if(s===o)return l+n(e[s]);i=l+(n(e[s])+t),a=s+1|0}}function Se(e,t,r){return ve(e,t,n("bs_curry").__1(r))}i.get=l,i.getExn=s,i.set=u,i.setExn=c,i.shuffleInPlace=m,i.shuffle=p,i.reverseInPlace=_,i.reverse=f,i.make=g,i.range=v,i.rangeBy=S,i.makeByU=h,i.makeBy=y,i.makeByAndShuffleU=C,i.makeByAndShuffle=b,i.zip=R,i.zipByU=L,i.zipBy=E,i.unzip=be,i.concat=k,i.concatMany=I,i.slice=T,i.sliceToEnd=D,i.fill=x,i.blit=P,i.blitUnsafe=$,i.forEachU=N,i.forEach=M,i.mapU=w,i.map=A,i.getByU=F,i.getBy=O,i.getIndexByU=B,i.getIndexBy=W,i.keepU=q,i.keep=U,i.keepWithIndexU=V,i.keepWithIndex=H,i.keepMapU=G,i.keepMap=z,i.forEachWithIndexU=j,i.forEachWithIndex=K,i.mapWithIndexU=Q,i.mapWithIndex=X,i.partitionU=ye,i.partition=Ce,i.reduceU=Y,i.reduce=J,i.reduceReverseU=Z,i.reduceReverse=ee,i.reduceReverse2U=te,i.reduceReverse2=ne,i.reduceWithIndexU=re,i.reduceWithIndex=oe,i.joinWithU=ve,i.joinWith=Se,i.someU=le,i.some=se,i.everyU=ae,i.every=ie,i.every2U=ce,i.every2=de,i.some2U=me,i.some2=pe,i.cmpU=ge,i.cmp=he,i.eqU=_e,i.eq=fe}),null);
__d("MessengerParticipants.bs",["fbt","CurrentUser","FBIDForMercury","ImmutableObject","MercuryAssert","MercuryIDs","MercuryVanityIDMap.bs","MessengerParticipantsFetcher.bs","ODS","Promise","bs_belt_Array","bs_caml_obj","bs_caml_option","bs_curry","bs_js_null_undefined","immutable"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={contents:1},c={},d=new Set,m={},p=function(t,n){return delete t[n],0},_=function(t,n){return delete t[n],0};function f(e){var t=n("CurrentUser").getAppID();return n("CurrentUser").isWorkUser()||t===0x5a31088e0c758.toString()?l._(/*BTDS*/"Usu\u00e1rio do Workplace"):n("CurrentUser").isWorkroomsUser()||t===424940172743869 .toString()?l._(/*BTDS*/"Workrooms User"):l._(/*BTDS*/"Usu\u00e1rio do Facebook")}function g(e){var t=e.user_type;if(t==null||!(n("bs_caml_obj").caml_equal(t,"user")||n("bs_caml_obj").caml_equal(t,"friend")))return e;var r=e.href,o=e.vanity;if(r!=null||o!=null)return e;var a=f();return Object.assign(e,{name:a,short_name:a})}function h(e){Object.keys(c).forEach(function(e){return _(c,e)})}function y(e){var t=e.id,r=e.vanity;r!=null&&n("MercuryVanityIDMap.bs").set(r,t);var o=c[t];o!==void 0?c[t]=n("ImmutableObject").set(n("bs_caml_option").valFromOption(o),e):c[t]=new(n("ImmutableObject"))(g(e))}function C(e){var t=e.participants;if(t!=null){t.map(y);return}}function b(e){var t=e.preloaded_participants;if(t!=null){t.map(y);return}}function v(t,r,o){var a={},i=[];if(t.forEach(function(e){var t=c[e];t!==void 0?a[e]=n("bs_caml_option").valFromOption(t):i.push(e)}),i.length!==0){var l=[];i.forEach(function(e){if(!d.has(e)){var t=n("MercuryIDs").getUserIDFromParticipantID(e);if(t!=null){l.push(t),d.add(e);return}}});var _=u.contents.toString();return m[_]=[t,o],u.contents=u.contents+1|0,l.length>0&&n("MessengerParticipantsFetcher.bs").$$fetch({ids:l,source:r}).then(function(t){return t.forEach(function(e){c[e.id]=new(n("ImmutableObject"))(e);var t=e.id,r=e.vanity;r!=null&&n("MercuryVanityIDMap.bs").set(r,t),d.delete(t)}),Object.keys(m).forEach(function(e){var t=m[e];if(t!==void 0){var r=t[0],o={};if(r.forEach(function(e){var t=c[e];if(t!==void 0){o[e]=n("bs_caml_option").valFromOption(t);return}}),Object.keys(o).length===r.length)return p(m,e),t[1](o)}}),(e||(e=n("ODS"))).bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.success"),(s||(s=n("Promise"))).resolve()}).catch(function(t){return(e||(e=n("ODS"))).bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.failure"),(s||(s=n("Promise"))).resolve()}),_}return o(a),null}function S(e,t){return v(e,null,t)}function R(e,t){return n("MercuryAssert").isParticipantID(e),v([e],null,function(r){var o=r[e];if(o!==void 0)return n("bs_curry")._1(t,n("bs_caml_option").valFromOption(o))})}function L(e){return n("bs_js_null_undefined").fromOption(c[e])}function E(e,t){var r=[],o=[];if(e.forEach(function(e){var t=L(e);t==null?r.push(e):o.push(t)}),r.length===0)return[o,null];var a=v(r,null,function(r){return n("bs_curry")._1(t,n("bs_belt_Array").keepMap(e,function(e){return n("bs_caml_option").nullable_to_opt(L(e))}))});return[o,a]}function k(e,t){var r=function(t){return n("immutable").Map(t.map(function(e){return[e.id,e]}))},o=function(o){return n("bs_curry")._1(t,r(o))},a=E(e,o);return[r(a[0]),a[1]]}function I(e){return p(m,e)}function T(e){if(e==null)return null;if(n("MercuryVanityIDMap.bs").hasVanity(e)){var t=n("MercuryVanityIDMap.bs").getID(e);return t==null?null:t}var r=/^\d+$/;if(!r.test(e))return null;var o=n("FBIDForMercury").ofString(e);return o!==void 0?n("MercuryIDs").getParticipantIDFromUserID(n("bs_caml_option").valFromOption(o)):null}i.reset=h,i.addParticipants=C,i.addPreloadedParticipants=b,i.getDefaultName=f,i.get=R,i.getNow=L,i.getMultiWithSource=v,i.getMulti=S,i.getMultiEager=E,i.getMultiEagerMap=k,i.removeCallback=I,i.getIDFromVanityOrFBID=T}),130);
__d("OperaOverlayConfigLayer",["OverlayConfigLayerBuilder","OverlayConfigLayerSource","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=new(r("OverlayConfigLayerBuilder"))(r("OverlayConfigLayerSource").BROWSER);return e.setZenonSdpTransformConfigDisableOpusStereo(!0),e.setZenonSdpTransformConfigPreserveH264(r("gkx")("25201")),e.build()})(),s=e;l.default=s}),98);
__d("OverlayConfigDefaults",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze([1,0,0,20,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,640,360,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,0,0,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,0,1,-1,-1,-1,-1,-1,-1,1,1,0,2e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,16e3,2e4,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6e4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,120,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),l=e;i.default=l}),66);
__d("OverlayConfigDefaultsLayer",["OverlayConfigDefaults","OverlayConfigLayerSource"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.getLayerSource=function(){return r("OverlayConfigLayerSource").DEFAULT},t.getValue=function(t){return r("OverlayConfigDefaults")[t]},t.logExposure=function(t){},e})();l.default=e}),98);
__d("OverlayConfigLayerManager",["FBLogger","OverlayConfigConstants","OverlayConfigDefaultsLayer"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=[new(r("OverlayConfigDefaultsLayer"))]}var t=e.prototype;return t.getValue=function(t){for(var e=this.$1.length-1;e>=0;e--){var n=this.$1[e].getValue(t);if(n>r("OverlayConfigConstants").OverlayConfigNotPresentFlagValue)return n}throw r("FBLogger")("rtc_www").mustfixThrow("OverlayConfigLayerManager: No value found for id %s",String(t))},t.addLayer=function(t){return this.$1.push(t),this.$1.length-1},t.replaceLayer=function(t,n){if(t===0)throw r("FBLogger")("rtc_www").mustfixThrow("OverlayConfigLayerManager: Tried to replace default layer!");if(this.$1[t]==null)throw r("FBLogger")("rtc_www").mustfixThrow("OverlayConfigLayerManager: Layer does not exist at index %s",String(t));this.$1[t]=n},t.clone=function(){var t=new e;return t.$1=this.$1.slice(),t},e})();l.default=e}),98);
__d("OverlayConfigManager",["Configs","OverlayConfigLayerManager"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("Configs")).ExampleConfig,s=e.PreferredCaptureConfig,u=e.ZenonSdpTransformConfig,c=e.ZenonPeerConnectionConfig,d=e.ZenonStartCallImmediatelyConfig,m=e.ZenonGeneralizedIdentityConfig,p=e.ZenonMultiCallSupportConfig,_=e.ZenonPlatformSupportConfig,f=e.ZenonSimulcastConfig,g=e.DynamicRuleConfig,h=e.SignalingPingConfig,y=e.NetEqAiConfig,C=(function(){function e(){this.layerManager=new(n("OverlayConfigLayerManager"))}var t=e.prototype;return t.getExampleConfig=function(){return new l(this.layerManager)},t.getPreferredCaptureConfig=function(){return new s(this.layerManager)},t.getZenonSdpTransformConfig=function(){return new u(this.layerManager)},t.getZenonPeerConnectionConfig=function(){return new c(this.layerManager)},t.getZenonStartCallImmediatelyConfig=function(){return new d(this.layerManager)},t.getZenonGeneralizedIdentityConfig=function(){return new m(this.layerManager)},t.getZenonMultiCallSupportConfig=function(){return new p(this.layerManager)},t.getZenonPlatformSupportConfig=function(){return new _(this.layerManager)},t.getZenonSimulcastConfig=function(){return new f(this.layerManager)},t.getDynamicRuleConfig=function(){return new g(this.layerManager)},t.getSignalingPingConfig=function(){return new h(this.layerManager)},t.getNetEqAiConfig=function(){return new y(this.layerManager)},e})();a.exports=C}),null);
__d("OverlayConfigManagerWithServerLayer",["OverlayConfigManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this)||this,n.$OverlayConfigManagerWithServerLayer$p_1=-1,t!=null&&(n.layerManager=t.layerManager.clone()),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.setServerLayer=function(t){if(this.$OverlayConfigManagerWithServerLayer$p_1>-1){this.layerManager.replaceLayer(this.$OverlayConfigManagerWithServerLayer$p_1,t);return}this.$OverlayConfigManagerWithServerLayer$p_1=this.layerManager.addLayer(t)},t})(r("OverlayConfigManager"));l.default=e}),98);
__d("PsiClientSearchTypesTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({INDIVIDUAL_CHATS_ONLY:0,INDIVIDUAL_AND_GROUP_CHATS:1}),s=e({TEXT:1,IMAGE:2,VIDEO:3,AUDIO:4,CONTACT:5,LOCATION:6,LINK:7,DOCUMENT:8,GIF:9,STICKER:10,PAYMENT_REQUEST:11,POLL:12,EVENT:13,MEDIA_ALBUM:14,PRODUCT:15,PTT:16}),u=e({UNKNOWN:0,INDIVIDUAL:1,GROUP:2,OTHER:3}),c=e({USER:1,ASSISTANT:2}),d=e({UNKNOWN:0,OPEN:1,TEE:2});a.exports={ChatRole:c,InfraStackType:d,PSIConversationType:u,PSIToolQueryPlanScope:l,TEEMessageType:s}}),null);
__d("PsiClientSearchTypesSerializers",["PsiClientSearchTypesTypes","ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{conversations:[],queries:[]}}function u(){return{}}function c(){return{messages:[]}}function d(){return{}}function m(){return{}}function p(){return{}}function _(){return{}}function f(t,n){if(n.writeStructBegin("PSIToolQueryPlan"),n.writeFieldBegin({fname:"conversations",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),t.conversations!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:t.conversations.length});for(var o of t.conversations)n.writeString(o);n.writeListEnd()}else{var a=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:a.length});for(var i of a)n.writeString(i);n.writeListEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"queries",ftype:e.LIST,fid:2}),t.queries!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:t.queries.length});for(var l of t.queries)n.writeString(l);n.writeListEnd()}else{var s=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRING,size:s.length});for(var u of s)n.writeString(u);n.writeListEnd()}if(n.writeFieldEnd(),t.timeStart!=null&&(n.writeFieldBegin({fname:"timeStart",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32(t.timeStart),n.writeFieldEnd()),t.timeEnd!=null&&(n.writeFieldBegin({fname:"timeEnd",ftype:(e||(e=r("ThriftTypes"))).I32,fid:4}),n.writeI32(t.timeEnd),n.writeFieldEnd()),t.maxRelevant!=null&&(n.writeFieldBegin({fname:"maxRelevant",ftype:(e||(e=r("ThriftTypes"))).I32,fid:5}),n.writeI32(t.maxRelevant),n.writeFieldEnd()),t.maxRelevantPerQuery!=null&&(n.writeFieldBegin({fname:"maxRelevantPerQuery",ftype:(e||(e=r("ThriftTypes"))).I32,fid:6}),n.writeI32(t.maxRelevantPerQuery),n.writeFieldEnd()),t.minRelevantPerQuery!=null&&(n.writeFieldBegin({fname:"minRelevantPerQuery",ftype:(e||(e=r("ThriftTypes"))).I32,fid:7}),n.writeI32(t.minRelevantPerQuery),n.writeFieldEnd()),t.distanceThreshold!=null&&(n.writeFieldBegin({fname:"distanceThreshold",ftype:(e||(e=r("ThriftTypes"))).FLOAT,fid:8}),n.writeFloat(t.distanceThreshold),n.writeFieldEnd()),t.contextWindowAbove!=null&&(n.writeFieldBegin({fname:"contextWindowAbove",ftype:(e||(e=r("ThriftTypes"))).I32,fid:9}),n.writeI32(t.contextWindowAbove),n.writeFieldEnd()),t.contextWindowBelow!=null&&(n.writeFieldBegin({fname:"contextWindowBelow",ftype:(e||(e=r("ThriftTypes"))).I32,fid:10}),n.writeI32(t.contextWindowBelow),n.writeFieldEnd()),t.includeLastNMessages!=null&&(n.writeFieldBegin({fname:"includeLastNMessages",ftype:(e||(e=r("ThriftTypes"))).I32,fid:11}),n.writeI32(t.includeLastNMessages),n.writeFieldEnd()),t.maxTotal!=null&&(n.writeFieldBegin({fname:"maxTotal",ftype:(e||(e=r("ThriftTypes"))).I32,fid:12}),n.writeI32(t.maxTotal),n.writeFieldEnd()),t.inclusionIds!=null){n.writeFieldBegin({fname:"inclusionIds",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:13}),n.writeListBegin({etype:e.I64,size:t.inclusionIds.length});for(var c of t.inclusionIds)n.writeI64(BigInt(c));n.writeListEnd(),n.writeFieldEnd()}if(t.exclusionIds!=null){n.writeFieldBegin({fname:"exclusionIds",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:14}),n.writeListBegin({etype:e.I64,size:t.exclusionIds.length});for(var d of t.exclusionIds)n.writeI64(BigInt(d));n.writeListEnd(),n.writeFieldEnd()}if(t.query_scope!=null){var m;n.writeFieldBegin({fname:"query_scope",ftype:(e||(e=r("ThriftTypes"))).I32,fid:15}),n.writeI32((m=t.query_scope)!=null?m:0),n.writeFieldEnd()}if(t.timeStartMs!=null&&(n.writeFieldBegin({fname:"timeStartMs",ftype:(e||(e=r("ThriftTypes"))).I64,fid:16}),n.writeI64(BigInt(t.timeStartMs)),n.writeFieldEnd()),t.timeEndMs!=null&&(n.writeFieldBegin({fname:"timeEndMs",ftype:(e||(e=r("ThriftTypes"))).I64,fid:17}),n.writeI64(BigInt(t.timeEndMs)),n.writeFieldEnd()),t.queryType!=null&&(n.writeFieldBegin({fname:"queryType",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:18}),n.writeString(t.queryType),n.writeFieldEnd()),t.disambiguationQuestion!=null&&(n.writeFieldBegin({fname:"disambiguationQuestion",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:19}),n.writeString(t.disambiguationQuestion),n.writeFieldEnd()),t.threadIdsToInclude!=null){n.writeFieldBegin({fname:"threadIdsToInclude",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:20}),n.writeListBegin({etype:e.STRING,size:t.threadIdsToInclude.length});for(var p of t.threadIdsToInclude)n.writeString(p);n.writeListEnd(),n.writeFieldEnd()}if(t.threadIdsToExclude!=null){n.writeFieldBegin({fname:"threadIdsToExclude",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:21}),n.writeListBegin({etype:e.STRING,size:t.threadIdsToExclude.length});for(var _ of t.threadIdsToExclude)n.writeString(_);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function g(t,n){if(n.writeStructBegin("TEEMessage"),t.type!=null){var o;n.writeFieldBegin({fname:"type",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((o=t.type)!=null?o:0),n.writeFieldEnd()}if(t.text!=null&&(n.writeFieldBegin({fname:"text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.text),n.writeFieldEnd()),t.senderName!=null&&(n.writeFieldBegin({fname:"senderName",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.senderName),n.writeFieldEnd()),t.timestamp_seconds!=null&&(n.writeFieldBegin({fname:"timestamp_seconds",ftype:(e||(e=r("ThriftTypes"))).I64,fid:4}),n.writeI64(BigInt(t.timestamp_seconds)),n.writeFieldEnd()),t.timezone_offset_hour!=null&&(n.writeFieldBegin({fname:"timezone_offset_hour",ftype:(e||(e=r("ThriftTypes"))).I32,fid:5}),n.writeI32(t.timezone_offset_hour),n.writeFieldEnd()),t.senderId!=null&&(n.writeFieldBegin({fname:"senderId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:6}),n.writeI64(BigInt(t.senderId)),n.writeFieldEnd()),t.distances!=null){n.writeFieldBegin({fname:"distances",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:7}),n.writeListBegin({etype:e.DOUBLE,size:t.distances.length});for(var a of t.distances)n.writeDouble(a);n.writeListEnd(),n.writeFieldEnd()}if(t.messageId!=null&&(n.writeFieldBegin({fname:"messageId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:8}),n.writeString(t.messageId),n.writeFieldEnd()),t.expandedFromMessageIds!=null){n.writeFieldBegin({fname:"expandedFromMessageIds",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:9}),n.writeListBegin({etype:e.STRING,size:t.expandedFromMessageIds.length});for(var i of t.expandedFromMessageIds)n.writeString(i);n.writeListEnd(),n.writeFieldEnd()}t.isE2ee!=null&&(n.writeFieldBegin({fname:"isE2ee",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:10}),n.writeBool(t.isE2ee),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function h(t,n){if(n.writeStructBegin("PSIConversation"),t.conversationName!=null&&(n.writeFieldBegin({fname:"conversationName",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.conversationName),n.writeFieldEnd()),n.writeFieldBegin({fname:"messages",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),t.messages!=null){n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:t.messages.length});for(var o of t.messages)g(o,n);n.writeListEnd()}else{var a=[];n.writeListBegin({etype:(e||(e=r("ThriftTypes"))).STRUCT,size:a.length});for(var i of a)g(i,n);n.writeListEnd()}if(n.writeFieldEnd(),t.conversationId!=null&&(n.writeFieldBegin({fname:"conversationId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(BigInt(t.conversationId)),n.writeFieldEnd()),t.chatType!=null){var l;n.writeFieldBegin({fname:"chatType",ftype:(e||(e=r("ThriftTypes"))).I32,fid:4}),n.writeI32((l=t.chatType)!=null?l:0),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function y(t,n){if(n.writeStructBegin("PSIToolQueryData"),t.conversations!=null){n.writeFieldBegin({fname:"conversations",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRUCT,size:t.conversations.length});for(var o of t.conversations)h(o,n);n.writeListEnd(),n.writeFieldEnd()}t.queryType!=null&&(n.writeFieldBegin({fname:"queryType",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.queryType),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(t,n){if(n.writeStructBegin("ChatMessage"),t.role!=null){var o;n.writeFieldBegin({fname:"role",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((o=t.role)!=null?o:0),n.writeFieldEnd()}t.content!=null&&(n.writeFieldBegin({fname:"content",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.content),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function b(t,n){if(n.writeStructBegin("AIChatResponsePSIMetadata"),t.psiToolQueryPlan!=null&&(n.writeFieldBegin({fname:"psiToolQueryPlan",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),f(t.psiToolQueryPlan,n),n.writeFieldEnd()),t.nextTurnDestination!=null){var o;n.writeFieldBegin({fname:"nextTurnDestination",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),n.writeI32((o=t.nextTurnDestination)!=null?o:0),n.writeFieldEnd()}t.skipReplayPrompt!=null&&(n.writeFieldBegin({fname:"skipReplayPrompt",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:3}),n.writeBool(t.skipReplayPrompt),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function v(t,n){if(n.writeStructBegin("AIChatRequestPSIMetadata"),t.psiToolQueryData!=null&&(n.writeFieldBegin({fname:"psiToolQueryData",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),y(t.psiToolQueryData,n),n.writeFieldEnd()),t.conversationHistory!=null){n.writeFieldBegin({fname:"conversationHistory",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.conversationHistory.length});for(var o of t.conversationHistory)C(o,n);n.writeListEnd(),n.writeFieldEnd()}if(t.previousTurnDestination!=null){var a;n.writeFieldBegin({fname:"previousTurnDestination",ftype:(e||(e=r("ThriftTypes"))).I32,fid:3}),n.writeI32((a=t.previousTurnDestination)!=null?a:0),n.writeFieldEnd()}t.timezone_offset_hour!=null&&(n.writeFieldBegin({fname:"timezone_offset_hour",ftype:(e||(e=r("ThriftTypes"))).I32,fid:4}),n.writeI32(t.timezone_offset_hour),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function S(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).LIST){n.conversations=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=t.readString();n.conversations.push(c)}}else t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.queries=[];for(var d=t.readListBegin(),m=0;m<d.size;m++){var p=t.readString();n.queries.push(p)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.timeStart=t.readI32():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.timeEnd=t.readI32():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.maxRelevant=t.readI32():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I32?n.maxRelevantPerQuery=t.readI32():t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).I32?n.minRelevantPerQuery=t.readI32():t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).FLOAT?n.distanceThreshold=t.readFloat():t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).I32?n.contextWindowAbove=t.readI32():t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).I32?n.contextWindowBelow=t.readI32():t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).I32?n.includeLastNMessages=t.readI32():t.skip(i);break;case 12:i===(e||(e=r("ThriftTypes"))).I32?n.maxTotal=t.readI32():t.skip(i);break;case 13:if(i===(e||(e=r("ThriftTypes"))).LIST){n.inclusionIds=[];for(var _=t.readListBegin(),f=0;f<_.size;f++){var g=t.readI64().toString();n.inclusionIds.push(g)}}else t.skip(i);break;case 14:if(i===(e||(e=r("ThriftTypes"))).LIST){n.exclusionIds=[];for(var h=t.readListBegin(),y=0;y<h.size;y++){var C=t.readI64().toString();n.exclusionIds.push(C)}}else t.skip(i);break;case 15:i===(e||(e=r("ThriftTypes"))).I32?n.query_scope=o("PsiClientSearchTypesTypes").PSIToolQueryPlanScope.cast(t.readI32()):t.skip(i);break;case 16:i===(e||(e=r("ThriftTypes"))).I64?n.timeStartMs=t.readI64().toString():t.skip(i);break;case 17:i===(e||(e=r("ThriftTypes"))).I64?n.timeEndMs=t.readI64().toString():t.skip(i);break;case 18:i===(e||(e=r("ThriftTypes"))).STRING?n.queryType=t.readString():t.skip(i);break;case 19:i===(e||(e=r("ThriftTypes"))).STRING?n.disambiguationQuestion=t.readString():t.skip(i);break;case 20:if(i===(e||(e=r("ThriftTypes"))).LIST){n.threadIdsToInclude=[];for(var b=t.readListBegin(),v=0;v<b.size;v++){var S=t.readString();n.threadIdsToInclude.push(S)}}else t.skip(i);break;case 21:if(i===(e||(e=r("ThriftTypes"))).LIST){n.threadIdsToExclude=[];for(var R=t.readListBegin(),L=0;L<R.size;L++){var E=t.readString();n.threadIdsToExclude.push(E)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.conversations===void 0&&(n.conversations=[]),n.queries===void 0&&(n.queries=[]),n}function R(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.type=o("PsiClientSearchTypesTypes").TEEMessageType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.text=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.senderName=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I64?n.timestamp_seconds=t.readI64().toString():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.timezone_offset_hour=t.readI32():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).I64?n.senderId=t.readI64().toString():t.skip(i);break;case 7:if(i===(e||(e=r("ThriftTypes"))).LIST){n.distances=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=t.readDouble();n.distances.push(c)}}else t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).STRING?n.messageId=t.readString():t.skip(i);break;case 9:if(i===(e||(e=r("ThriftTypes"))).LIST){n.expandedFromMessageIds=[];for(var d=t.readListBegin(),m=0;m<d.size;m++){var p=t.readString();n.expandedFromMessageIds.push(p)}}else t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).BOOL?n.isE2ee=t.readBool():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function L(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.conversationName=t.readString():t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.messages=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=R(t);n.messages.push(c)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I64?n.conversationId=t.readI64().toString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.chatType=o("PsiClientSearchTypesTypes").PSIConversationType.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.messages===void 0&&(n.messages=[]),n}function E(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.conversations=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=L(t);n.conversations.push(u)}}else t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.queryType=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function k(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.role=o("PsiClientSearchTypesTypes").ChatRole.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.content=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function I(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiToolQueryPlan=S(t):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.nextTurnDestination=o("PsiClientSearchTypesTypes").InfraStackType.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).BOOL?n.skipReplayPrompt=t.readBool():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function T(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiToolQueryData=E(t):t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.conversationHistory=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=k(t);n.conversationHistory.push(c)}}else t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).I32?n.previousTurnDestination=o("PsiClientSearchTypesTypes").InfraStackType.cast(t.readI32()):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.timezone_offset_hour=t.readI32():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}l.PSIToolQueryPlan$DefaultConstructor=s,l.TEEMessage$DefaultConstructor=u,l.PSIConversation$DefaultConstructor=c,l.PSIToolQueryData$DefaultConstructor=d,l.ChatMessage$DefaultConstructor=m,l.AIChatResponsePSIMetadata$DefaultConstructor=p,l.AIChatRequestPSIMetadata$DefaultConstructor=_,l.serializePSIToolQueryPlan=f,l.serializeTEEMessage=g,l.serializePSIConversation=h,l.serializePSIToolQueryData=y,l.serializeChatMessage=C,l.serializeAIChatResponsePSIMetadata=b,l.serializeAIChatRequestPSIMetadata=v,l.deserializePSIToolQueryPlan=S,l.deserializeTEEMessage=R,l.deserializePSIConversation=L,l.deserializePSIToolQueryData=E,l.deserializeChatMessage=k,l.deserializeAIChatResponsePSIMetadata=I,l.deserializeAIChatRequestPSIMetadata=T}),98);
__d("RPWebUXEventType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CLICK:"click",IMPRESSION:"impression"});i.default=e}),66);
__d("ZenonCallsContext",["ZenonCallSDK","err","immutable","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=new(r("ZenonCallSDK"))({relayEnvironment:null}),c=s.createContext({calls:new Map,callSDK:u,callTimers:r("immutable").Map(),currentCallInstanceSDK:u.createCall(),e2eeModel:null,endCallHooks:new Set,isE2eeMandated:!1,setCurrentCallInstanceSDK:function(){throw r("err")("setCurrentCallInstanceSDK is not implemented!")},setE2eeModel:function(){throw r("err")("setE2eeModel is not implemented!")}}),d=c;l.default=d}),98);
__d("ZenonDataMessageTopics",[],(function(t,n,r,o,a,i){"use strict";var e="rtc_av_escalation_decline";i.AV_ESCALATION_DECLINE_DATA_MESSAGE_TOPIC=e}),66);
__d("ZenonE2eeMandatedStateManager",["$InternalEnum","E2eeStateTypes","MultiwaySharedTypes","ZenonActorHooks","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum").Mirrored(["NONE","ONLY_INFRA_MANDATED_EXP_CONTROL","ONLY_INFRA_MANDATED_EXP_TEST","INFRA_AND_PRODUCT_MANDATED"]),s=null,u=(function(){function t(){this.$1=e.NONE}var n=t.prototype;return n.processE2eeMandatedStateFromProductAndRing=function(t,n){this.$1=this.$2(t,n)},n.areBothInfraAndProductE2eeMandated=function(){return this.$1===e.INFRA_AND_PRODUCT_MANDATED},n.isInfraE2eeMandated=function(){return this.areBothInfraAndProductE2eeMandated()||this.$3()},n.$3=function(){return this.$1===e.ONLY_INFRA_MANDATED_EXP_TEST},n.processE2eeMandatedStateFromE2eeServerUpdate=function(n){this.areBothInfraAndProductE2eeMandated()||n===o("E2eeStateTypes").InfraMandatedExpStatus.TEST&&this.$1===e.ONLY_INFRA_MANDATED_EXP_TEST||n===o("E2eeStateTypes").InfraMandatedExpStatus.CONTROL&&this.$1===e.ONLY_INFRA_MANDATED_EXP_CONTROL||(this.$1=e.NONE)},n.isEligibleForE2eeInfraMandatedExperiment=function(){var e,t;return(e=(t=r("qex")._("138"))!=null?t:r("qex")._("192"))!=null?e:!1},n.isP2pMediaPathPreferredForInfraMandatedExperiment=function(){var e,t;return this.$3()&&((e=(t=r("qex")._("531"))!=null?t:r("qex")._("532"))!=null?e:!1)},n.getE2eeInfraMandatedExpStatus=function(){switch(this.$1){case e.INFRA_AND_PRODUCT_MANDATED:case e.NONE:return o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.NOT_SET;case e.ONLY_INFRA_MANDATED_EXP_CONTROL:return o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.CONTROL;case e.ONLY_INFRA_MANDATED_EXP_TEST:return o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.TEST}},n.$2=function(n,r){if(n)return e.INFRA_AND_PRODUCT_MANDATED;if(o("ZenonActorHooks").ZenonActor.getAppID()===436761779744620 .toString()||!this.isEligibleForE2eeInfraMandatedExperiment())return e.NONE;var t=this.$4();if(r==null)return t;var a=this.$5(r);return a===e.NONE?e.NONE:a===e.ONLY_INFRA_MANDATED_EXP_CONTROL?t===e.ONLY_INFRA_MANDATED_EXP_TEST?e.NONE:e.ONLY_INFRA_MANDATED_EXP_CONTROL:t===e.ONLY_INFRA_MANDATED_EXP_CONTROL?e.NONE:e.ONLY_INFRA_MANDATED_EXP_TEST},n.$4=function(){var t=this.$6();return t===o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.TEST?e.ONLY_INFRA_MANDATED_EXP_TEST:t===o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.CONTROL?e.ONLY_INFRA_MANDATED_EXP_CONTROL:e.NONE},n.$6=function(){var e;return(e=r("qex")._("196"))!=null?e:r("qex")._("227")},n.$5=function(n){return n===o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.TEST?e.ONLY_INFRA_MANDATED_EXP_TEST:n===o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.CONTROL?e.ONLY_INFRA_MANDATED_EXP_CONTROL:e.NONE},t})();function c(){return s==null&&(s=new u),s}var d=c();l.default=d}),98);
__d("ZenonE2ee",["CompactSerializer","CurrentUser","E2eeStateSerializers","FrameEncryptionWasmTypes","QuickPerformanceLogger","ZenonAuditedCheckpointLogId","ZenonE2eeMandatedStateManager","ZenonInfraActionsLogger","ZenonODSLogger","asyncToGeneratorRuntime","cr:1490","cr:2025","cr:4452","cr:5740","cr:5761","err","getErrorSafe","qex","qpl","shouldUseInsertableStreams"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(e=(s=(u=(c=n("cr:4452"))!=null?c:n("cr:5740"))!=null?u:n("cr:1490"))!=null?s:n("cr:2025"))!=null?e:n("cr:5761");r("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] E2EE module loaded: "+String(m!=null)});var p=null,_="dtls_verification_failed_",f="dtls_generation_error_",g="e2ee_validation_error_",h="1",y=(function(){function e(){this.$1=!1,this.$5={isGroupE2eeEnabled:!1,isP2pE2eeEnabled:!1,isRemoteUserMWS:!1}}var t=e.prototype;return t.createE2eeComponents=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i,l){var s,u=this;l===void 0&&(l=!1);var c=t.getSignalingModel().getSignalingID();(d||(d=r("QuickPerformanceLogger"))).markerStart(r("qpl")._(398998698,"1355"),+c),d.markerAnnotate(r("qpl")._(398998698,"1355"),{bool:{isE2eeInfraMandated:r("ZenonE2eeMandatedStateManager").isInfraE2eeMandated(),isE2eeMandated:r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated(),isTestUser:o("CurrentUser").isTestUser()},string:{hostname:window.location.hostname}},{instanceKey:+c});var p=window.setTimeout(function(){(d||(d=r("QuickPerformanceLogger"))).markerEnd(r("qpl")._(398998698,"1355"),113,+c)},6e3);this.$1=l,this.$2=a,this.$3=t.getSignalingModel().getMediaModeManager();var _=(s=r("qex")._("1722"))!=null?s:!1;if(!r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated()&&!r("ZenonE2eeMandatedStateManager").isInfraE2eeMandated()&&!_&&(m=null),m==null){(d||(d=r("QuickPerformanceLogger"))).markerPoint(r("qpl")._(398998698,"1355"),"zenon_e2ee_core_is_null",{instanceKey:+c}),d.markerEnd(r("qpl")._(398998698,"1355"),4158,+c);return}var f=function(t,n){u.terminateCallIfE2eeViolation(t,n)};try{yield m.createE2eeComponents(r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated(),e,t,n,f,i,l)}catch(e){throw window.clearTimeout(p),(d||(d=r("QuickPerformanceLogger"))).markerPoint(r("qpl")._(398998698,"1355"),"exception_during_creating_e2ee_components",{instanceKey:+c}),d.markerEnd(r("qpl")._(398998698,"1355"),87,+c),r("ZenonInfraActionsLogger").logError({checkpoint:"[ZenonE2ee] exception during creating e2ee components",error:""+r("getErrorSafe")(e).message,errorDomain:"createE2eeComponents"}),e}window.clearTimeout(p),d.markerEnd(r("qpl")._(398998698,"1355"),2,+c)});function t(t,n,r,o,a,i){return e.apply(this,arguments)}return t})(),t.getE2eeComponents=function(){return m},t.isE2eeStackReady=function(){var e,t;return(e=(t=m)==null?void 0:t.isE2eeStackReady())!=null?e:!1},t.getE2eeComponentCreationFailureMessage=function(){var e,t;return(e=(t=m)==null?void 0:t.getE2eeComponentCreationFailureMessage())!=null?e:"zenon e2ee core is null"},t.getSecureFrameManager=function(){var e;return(e=m)==null?void 0:e.getSecureFrameManager()},t.getSecureDataMessageManager=function(){var e;return(e=m)==null?void 0:e.getSecureDataMessageManager()},t.updateRemoteUserId=function(t){this.$4=t,this.$5.isRemoteUserMWS=t===h},t.shouldUseE2eeWorker=function(){return this.$1},t.getCurrentMediaMode=function(){var e;return(e=this.$3)==null?void 0:e.getMediaMode()},t.freeCallScopedResources=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;yield(e=m)==null?void 0:e.freeCallScopedResources()});function t(){return e.apply(this,arguments)}return t})(),t.getEncryptionKeysManagerState=function(){var e;return(e=m)==null||(e=e.getEncryptionKeysManager())==null?void 0:e.getState()},t.canSkipFrameEncryption=function(){return!this.$5.isRemoteUserMWS&&this.$5.isP2pE2eeEnabled},t.processE2eeServerState=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n;if(r("shouldUseInsertableStreams")()){if(e==null||e.byteLength===0)throw r("err")("Server state should never be empty!");var a=o("CompactSerializer").deserialize(e,o("E2eeStateSerializers").deserializeE2eeServerState);r("ZenonE2eeMandatedStateManager").processE2eeMandatedStateFromE2eeServerUpdate(a.serverInfraMandatedExpStatus),yield(t=m)==null?void 0:t.cacheIdentityKeys(a),yield(n=m)==null||(n=n.getEncryptionKeysManager())==null?void 0:n.processE2eeServerState(e);var i=this.getEncryptionKeysManagerState();this.$5.isGroupE2eeEnabled=(i==null?void 0:i.sfuE2eeNegotiationState)===0}});function t(t){return e.apply(this,arguments)}return t})(),t.processE2eeMessage=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t;yield(t=m)==null||(t=t.getEncryptionKeysManager())==null?void 0:t.processE2eeMessage(e)});function t(t){return e.apply(this,arguments)}return t})(),t.terminateCallIfE2eeViolation=function(t,n){var e,a,i,l;if((e=m)!=null&&e.isE2eeStackReady())switch(t){case o("FrameEncryptionWasmTypes").ZenonE2eeComponent.INSERTABLE_STREAMS:(a=this.$2)==null||a.call(this,n);break;case o("FrameEncryptionWasmTypes").ZenonE2eeComponent.WASM:(i=this.$2)==null||i.call(this,n);break;case o("FrameEncryptionWasmTypes").ZenonE2eeComponent.PRE_REMOTE_SDP:case o("FrameEncryptionWasmTypes").ZenonE2eeComponent.POST_REMOTE_SDP:{var s;if(!r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated()||this.$5.isGroupE2eeEnabled&&this.$5.isRemoteUserMWS||this.$5.isP2pE2eeEnabled&&!this.$5.isRemoteUserMWS)return;var u="E2EE state validation failed at "+t+", GROUP e2ee: "+this.$5.isGroupE2eeEnabled.toString()+", P2P E2EE "+this.$5.isP2pE2eeEnabled.toString()+", sfu mode: "+this.$5.isRemoteUserMWS.toString();r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__E2EE,checkpoint:"[ZSFM] [E2EE] "+u+"."}),r("ZenonODSLogger").logE2eeCounter(g+t),(s=this.$2)==null||s.call(this,u);break}case o("FrameEncryptionWasmTypes").ZenonE2eeComponent.P2P:if(this.$5.isGroupE2eeEnabled&&this.$5.isRemoteUserMWS||!r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated())return;break;case o("FrameEncryptionWasmTypes").ZenonE2eeComponent.GROUP:if(this.$5.isP2pE2eeEnabled&&!this.$5.isRemoteUserMWS||!r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated())return;(l=this.$2)==null||l.call(this,n);break}},t.onMediaDataChannelReady=function(){var e;return(e=m)==null||(e=e.getEncryptionKeysManager())==null?void 0:e.onMediaDataChannelReady()},t.getSerializedE2eeClientState=function(){var e;return r("shouldUseInsertableStreams")()?(e=m)==null||(e=e.getEncryptionKeysManager())==null?void 0:e.getSerializedE2eeClientState():null},t.onLocalSdpSet=function(t){var e;return(e=m)==null||(e=e.getEncryptionKeysManager())==null?void 0:e.onLocalSdpSet(t)},t.generateDtlsAuthenticationInfo=function(t){var e,n=(e=m)==null||(e=e.getDtlsAuthenticationManager())==null?void 0:e.generateDtlsAuthenticationInfo(t);if(n==null&&this.getCurrentMediaMode()==="p2p"){var o,a,i=(o=(a=this.getP2pE2eeMetrics())==null?void 0:a.gen_dtls_auth_info_status)!=null?o:"";r("ZenonODSLogger").logE2eeCounter(f+i)}return n},t.getP2pE2eeMetrics=function(){var e;return(e=m)==null||(e=e.getDtlsAuthenticationManager())==null?void 0:e.getP2pE2eeMetrics()},t.verifyDtlsAuthenticationInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n,o;yield(t=m)==null?void 0:t.cacheSingleIdentityKey((n=m)==null||(n=n.getDtlsAuthenticationManager())==null?void 0:n.getRemoteDeviceId(e),this.$4);var a=(o=m)==null||(o=o.getDtlsAuthenticationManager())==null?void 0:o.verifyDtlsAuthenticationInfo(e,this.$4);if(a!==!0&&this.getCurrentMediaMode()==="p2p"){var i,l,s=(i=(l=this.getP2pE2eeMetrics())==null?void 0:l.verify_dtls_auth_info_status)!=null?i:"";r("ZenonODSLogger").logE2eeCounter(_+s)}return this.$5.isP2pE2eeEnabled=a===!0,a});function t(t){return e.apply(this,arguments)}return t})(),e})();function C(){return p==null&&(p=new y),p}var b=C();l.default=b}),98);
__d("shouldUseInsertableStreams",["ZenonE2ee","ZenonE2eeMandatedStateManager","ZenonRTWebBrowserFeatureSupport","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e;if(r("ZenonE2eeMandatedStateManager").isInfraE2eeMandated())return!0;var t=(e=r("qex")._("1722"))!=null?e:!1,n=r("gkx")("24013"),a=t||n;return r("ZenonE2ee").isE2eeStackReady()&&o("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()&&a}l.default=e}),98);
__d("ZenonMediaStatsSourcePreM86",[],(function(t,n,r,o,a,i){"use strict";var e=["firCount","nackCount","packetsLost","pliCount","qpSum","sliCount","timestamp"],l=["audioLevel","concealedSamples","concealmentEvents","frameHeight","framesDropped","framesReceived","frameWidth","insertedSamplesForDeceleration","interruptionCount","jitterBufferDelay","jitterBufferEmittedCount","removedSamplesForAcceleration","sumOfSquaredFramesDuration","totalAudioEnergy","totalFramesDuration","totalInterruptionDuration","totalSamplesDuration","totalSamplesReceived"],s=["burstDiscardCount","burstDiscardRate","burstLossCount","burstPacketsDiscarded","burstPacketsLost","bytesReceived","decoderImplementation","delayedPacketOutageSamples","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","framesDecoded","gapDiscardRate","gapLossRate","headerBytesReceived","jitter","jitterBufferMinimumDelay","jitterBufferTargetDelay","keyFramesDecoded","lastPacketReceivedTimestamp","packetsDiscarded","packetsReceived","packetsRepaired","relativePacketArrivalDelay","retransmittedBytesReceived","retransmittedPacketsReceived","roundTripTime","silentConcealedSamples","totalDecodeTime","totalInterFrameDelay","totalProcessingDelay","totalSquaredInterFrameDelay"],u=["bytesSent","framesEncoded","framesSent","headerBytesSent","hugeFramesSent","keyFramesEncoded","packetsSent","qualityLimitationResolutionChanges","retransmittedBytesSent","retransmittedPacketsSent","targetBitrate","totalEncodedBytesTarget","totalEncodeTime","totalPacketSendDelay"];i.RTP_STATS=e,i.TRACK_STATS=l,i.INBOUND_RTP_STATS=s,i.OUTBOUND_RTP_STATS=u}),66);
__d("ZenonRenderedView",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({THUMBNAIL:1,GRID:2,PINNED:3}),l=e;i.default=l}),66);
__d("ZenonMediaStatsConfig",["UserAgent","ZenonMediaStatsSource","ZenonMediaStatsSourcePreM86","ZenonRenderedView"],(function(t,n,r,o,a,i,l){"use strict";var e={contentType:"audio",remote:!1,trackId:"globalStatsTrackId"},s=e.trackId,u=e.contentType,c={contentType:"audio",remote:!1,trackId:"pinnedAudioStatsTrackId"},d={contentType:"video",remote:!1,trackId:"pinnedVideoStatsTrackId"},m={contentType:"audio",remote:!1,trackId:"outboundAudioStatsTrackId"},p=m.trackId,_={contentType:"screen_audio",remote:!1,trackId:"outboundScreenAudioStatsTrackId"},f=_.trackId,g={contentType:"screen",remote:!1,trackId:"outboundScreenStatsTrackId"},h=g.trackId,y={contentType:"video",remote:!1,trackId:"outboundVideoStatsTrackId"},C=y.trackId,b=0,v=6e4,S={AUDIO_DECODING_NORMAL:"audioDecodingNormal",AUDIO_DECODING_PLC:"audioDecodingPLC",AUDIO_DECODING_PLCCNG:"audioDecodingPLCCNG",AUDIO_DEV_IS_STALLED:"audioDevIsStalled",AUDIO_DEV_REC_STALLS:"audioDevRecStalls",AUDIO_DEV_STALL_DURATION:"audioDevStallDuration",AUDIO_DEV_TOTAL_STALLS:"audioDevTotalStalls",AUDIO_LOG_LEVEL:"audioLogLevel",AUDIO_LOG_LEVEL_COUNT:"audioLogLevelCount",AUDIO_LOUDNESS_LEVEL:"audioLoudnessLevel",AUDIO_SEND_ECHO_CONFIDENCE:"audioSendEchoConfidence",AUDIO_SEND_ECHO_CROSS_CORRELATION:"audioSendEchoCrossCorrelation",AUDIO_SEND_ECHO_DELAY:"audioSendEchoDelay",AUDIO_SEND_ECHO_ERL:"audioSendEchoErl",AUDIO_SEND_ECHO_LPB_RMS:"audioSendEchoLpbRms",AUDIO_SEND_ECHO_RMS:"audioSendEchoRms",AUDIO_SEND_GOLDEN_ECHO_CONFIDENCE:"audioSendGoldenEchoConfidence",AUDIO_SEND_LT_ECHO_CONFIDENCE:"audioSendLtEchoConfidence",AUDIO_SEND_LT_ECHO_DELAY:"audioSendLtEchoDelay",AUDIO_SEND_LT_ECHO_DELAY_ENTROPY:"audioSendLtEchoDelayEntropy",AUDIO_SEND_LT_ECHO_ERL:"audioSendLtEchoErl",AUDIO_SEND_LT_ECHO_FRAMES_PERCENTAGE:"audioSendLtEchoFramesPercentage",AV_SYNC:"avSync",AV_SYNC_ABS:"avSyncAbs",AV_SYNC_COUNT:"avSyncCount",AV_SYNC_OOB:"avSyncOob",FRAME_RATE_MEAN:"framerateMean",PACKETS_LOST_CORRECTED:"packetsLostCorrected",RENDERED_VIEW:"renderedView",SIMULCAST_LAYER_CHANGES:"simulcast_layer_changes",VIDEO_ACTUAL_ENCODED_BITRATE:"videoActualEncodedBitrate",VIDEO_CAPTURE_FRAME_COUNT:"captureFrameCount",VIDEO_CAPTURE_IS_STALLED:"videoCaptureIsStalled",VIDEO_CAPTURE_STALL_DURATION:"videoCaptureStallDuration",VIDEO_CAPTURE_TOTAL_STALLS:"videoCaptureTotalStalls",VIDEO_CONVERTED_QP_SUM:"videoConvertedQpSum",VIDEO_DECODE_IS_STALLED:"videoDecodeIsStalled",VIDEO_DECODE_STALL_DURATION:"videoDecodeStallDuration",VIDEO_DECODE_TIME:"videoDecodeTime",VIDEO_DECODE_TOTAL_STALLS:"videoDecodeTotalStalls",VIDEO_DECODED_BYTES:"videoDecodedBytes",VIDEO_ENCODE_IS_STALLED:"videoEncodeIsStalled",VIDEO_ENCODE_STALL_DURATION:"videoEncodeStallDuration",VIDEO_ENCODE_TOTAL_STALLS:"videoEncodeTotalStalls",VIDEO_FREEZE_COUNT:"videoFreezeCount",VIDEO_FREEZE_DURATION:"videoFreezeDuration",VIDEO_FREEZE_DURATION_500MS:"videoFreezeDuration500ms",VIDEO_PAUSE_COUNT:"videoPauseCount",VIDEO_PAUSE_DURATION:"videoPauseDuration",VIDEO_QP:"qp",VIDEO_RECEIVE_IS_STALLED:"videoReceiveIsStalled",VIDEO_RECEIVE_STALL_DURATION:"videoReceiveStallDuration",VIDEO_RECEIVE_TOTAL_STALLS:"videoReceiveTotalStalls",VIDEO_RECEIVER_QUALITY_SCORE:"videoReceiverQualityScore",VIDEO_RENDER_IS_STALLED:"videoRenderIsStalled",VIDEO_RENDER_STALL_DURATION:"videoRenderStallDuration",VIDEO_RENDER_TOTAL_STALLS:"videoRenderTotalStalls",VIDEO_SENT_IS_STALLED:"videoSentIsStalled",VIDEO_SENT_STALL_DURATION:"videoSentStallDuration",VIDEO_SENT_TOTAL_STALLS:"videoSentTotalStalls",VIDEO_SUM_CAPTURE_PIXEL:"videoSumCapturePixel",VIDEO_SUM_PIXEL:"videoSumPixel"},R={AUDIO_NETEQ_WAIT_TIME:"audioNeteqWaitTime",AUDIO_PACKET_LOSS_RATE:"audioPacketLossRate",AUDIO_PLC_CNG_RATE:"audioPlcCngRate",AUDIO_PLC_RATE:"audioPlcRate",GLOBAL_AUDIO_BITRATE:"globalAudioBitrate",GLOBAL_BATTERY_USAGE:"globalBatteryUsage",GLOBAL_CPU_USAGE:"globalCpuUsage",GLOBAL_VIDEO_BITRATE:"globalVideoBitrate",HEAP_SIZE_LIMIT:"heapSizeLimit",HEAP_TOTAL_SIZE:"heapTotalSize",HEAP_USED_SIZE:"heapUsedSize",ROUND_TRIP_TIME:"roundTripTime",VIDEO_AV_SYNC_ABS:"videoAvSyncAbs",VIDEO_AV_SYNC_OOB:"videoAvSyncOob",VIDEO_CROPPING_RATIO:"videoCroppingRatio",VIDEO_ENCODED_FRAME_RATE:"encodedFrameRate",VIDEO_FRAME_RATE:"videoFrameRate",VIDEO_FREEZE_COUNT_PER_MIN:"videoFreezeCountPerMin",VIDEO_FREEZE_DURATION_PER_MIN:"videoFreezeDurationPerMin",VIDEO_NETEQ_WAIT_TIME:"videoNeteqWaitTime",VIDEO_PACKET_LOSS_RATE:"videoPacketLossRate",VIDEO_QP:"videoQP",VIDEO_QUALITY:"videoQuality",VIDEO_RENDER_SCALE_RATIO:"videoRenderScaleRatio"},L=["bytesReceived","bytesSent","consentRequestsSent","concealedSamples","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","firCount","framesDecoded","framesEncoded","framesReceived","framesSent","headerBytesReceived","insertedSamplesForDeceleration","jitterBufferDelay","jitterBufferEmittedCount","jitterBufferMinimumDelay","jitterBufferTargetDelay","keyFramesDecoded","keyFramesEncoded","nackCount","packetsDiscarded","packetsLost","packetsReceived","packetsSent","pauseCount","pliCount","qpSum","requestsReceived","requestsSent","retransmittedBytesReceived","retransmittedBytesSent","retransmittedPacketsReceived","removedSamplesForAcceleration","responsesReceived","responsesSent","silentConcealedSamples","timestamp","totalAudioEnergy","totalDecodeTime","totalEncodedBytesTarget","totalEncodeTime","totalInterFrameDelay","totalPacketSendDelay","totalPausesDuration","totalProcessingDelay","totalSamplesDuration","totalSamplesReceived","totalSquaredInterFrameDelay",S.AUDIO_DECODING_NORMAL,S.AUDIO_DECODING_PLC,S.AUDIO_DECODING_PLCCNG,S.AUDIO_LOG_LEVEL,S.AUDIO_LOG_LEVEL_COUNT,S.AUDIO_LOUDNESS_LEVEL,S.AUDIO_DEV_REC_STALLS,S.AUDIO_DEV_STALL_DURATION,S.AUDIO_DEV_TOTAL_STALLS,S.AV_SYNC_COUNT,S.AV_SYNC_OOB,S.PACKETS_LOST_CORRECTED,S.SIMULCAST_LAYER_CHANGES,S.VIDEO_CAPTURE_FRAME_COUNT,S.VIDEO_FREEZE_COUNT,S.VIDEO_FREEZE_DURATION,S.VIDEO_FREEZE_DURATION_500MS,S.VIDEO_PAUSE_COUNT,S.VIDEO_PAUSE_DURATION,S.VIDEO_SUM_CAPTURE_PIXEL,S.VIDEO_SUM_PIXEL,S.VIDEO_CONVERTED_QP_SUM,S.VIDEO_DECODED_BYTES,S.VIDEO_DECODE_TIME,S.VIDEO_CAPTURE_STALL_DURATION,S.VIDEO_CAPTURE_TOTAL_STALLS,S.VIDEO_DECODE_STALL_DURATION,S.VIDEO_DECODE_TOTAL_STALLS,S.VIDEO_ENCODE_STALL_DURATION,S.VIDEO_ENCODE_TOTAL_STALLS,S.VIDEO_RECEIVE_STALL_DURATION,S.VIDEO_RECEIVE_TOTAL_STALLS,S.VIDEO_RENDER_STALL_DURATION,S.VIDEO_RENDER_TOTAL_STALLS,S.VIDEO_SENT_STALL_DURATION,S.VIDEO_SENT_TOTAL_STALLS],E=["audioLevel","availableOutgoingBitrate","currentRoundTripTime","frameHeight","frameWidth","framesPerSecond","height","jitter","remoteTimestamp","roundTripTime","totalRoundTripTime","width",S.AUDIO_DEV_IS_STALLED,S.RENDERED_VIEW,S.FRAME_RATE_MEAN,S.AV_SYNC,S.AV_SYNC_ABS,S.VIDEO_ACTUAL_ENCODED_BITRATE,S.VIDEO_QP,S.VIDEO_CAPTURE_IS_STALLED,S.VIDEO_DECODE_IS_STALLED,S.VIDEO_ENCODE_IS_STALLED,S.VIDEO_RECEIVE_IS_STALLED,S.VIDEO_RENDER_IS_STALLED,S.VIDEO_SENT_IS_STALLED,S.VIDEO_RECEIVER_QUALITY_SCORE,S.AUDIO_SEND_ECHO_CONFIDENCE,S.AUDIO_SEND_ECHO_DELAY,S.AUDIO_SEND_ECHO_ERL,S.AUDIO_SEND_ECHO_RMS,S.AUDIO_SEND_ECHO_LPB_RMS,S.AUDIO_SEND_ECHO_CROSS_CORRELATION,S.AUDIO_SEND_GOLDEN_ECHO_CONFIDENCE,S.AUDIO_SEND_LT_ECHO_CONFIDENCE,S.AUDIO_SEND_LT_ECHO_DELAY,S.AUDIO_SEND_LT_ECHO_DELAY_ENTROPY,S.AUDIO_SEND_LT_ECHO_ERL,S.AUDIO_SEND_LT_ECHO_FRAMES_PERCENTAGE],k=["availableOutgoingBitrate","bytesReceived","bytesSent","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","firCount","frameHeight","framesDecoded","framesEncoded","framesPerSecond","framesReceived","framesSent","frameWidth","headerBytesReceived","height","insertedSamplesForDeceleration","jitter","jitterBufferDelay","jitterBufferEmittedCount","nackCount","keyFramesDecoded","packetsDiscarded","packetsLost","packetsReceived","packetsSent","pliCount","qpSum","remoteTimestamp","removedSamplesForAcceleration","retransmittedBytesReceived","retransmittedPacketsReceived","roundTripTime","totalAudioEnergy","totalDecodeTime","totalEncodeTime","totalInterFrameDelay","totalPacketSendDelay","totalProcessingDelay","totalRoundTripTime","totalSamplesDuration","totalSamplesReceived","totalSquaredInterFrameDelay","width",S.AUDIO_DECODING_NORMAL,S.AUDIO_DECODING_PLC,S.AUDIO_DECODING_PLCCNG,S.AUDIO_DEV_REC_STALLS,S.AUDIO_DEV_STALL_DURATION,S.AUDIO_DEV_TOTAL_STALLS,S.VIDEO_ACTUAL_ENCODED_BITRATE,S.VIDEO_CAPTURE_STALL_DURATION,S.VIDEO_CAPTURE_TOTAL_STALLS,S.VIDEO_DECODE_STALL_DURATION,S.VIDEO_DECODE_TOTAL_STALLS,S.VIDEO_ENCODE_STALL_DURATION,S.VIDEO_ENCODE_TOTAL_STALLS,S.VIDEO_RECEIVE_STALL_DURATION,S.VIDEO_RECEIVE_TOTAL_STALLS,S.VIDEO_RENDER_STALL_DURATION,S.VIDEO_RENDER_TOTAL_STALLS,S.VIDEO_SENT_STALL_DURATION,S.VIDEO_SENT_TOTAL_STALLS,S.PACKETS_LOST_CORRECTED,S.VIDEO_CAPTURE_FRAME_COUNT,S.VIDEO_FREEZE_COUNT,S.VIDEO_FREEZE_DURATION,S.VIDEO_FREEZE_DURATION_500MS,S.VIDEO_PAUSE_COUNT,S.VIDEO_PAUSE_DURATION,S.VIDEO_SUM_CAPTURE_PIXEL,S.VIDEO_SUM_PIXEL,S.VIDEO_CONVERTED_QP_SUM,S.VIDEO_DECODED_BYTES,S.VIDEO_DECODE_TIME,S.SIMULCAST_LAYER_CHANGES,S.AUDIO_DEV_IS_STALLED,S.VIDEO_CAPTURE_IS_STALLED,S.VIDEO_DECODE_IS_STALLED,S.VIDEO_ENCODE_IS_STALLED,S.VIDEO_RECEIVE_IS_STALLED,S.VIDEO_RENDER_IS_STALLED,S.VIDEO_SENT_IS_STALLED,S.FRAME_RATE_MEAN,S.AV_SYNC,S.AV_SYNC_ABS,S.AUDIO_SEND_ECHO_CONFIDENCE,S.AUDIO_SEND_ECHO_DELAY,S.AUDIO_SEND_ECHO_ERL,S.AUDIO_SEND_ECHO_RMS,S.AUDIO_SEND_ECHO_LPB_RMS,S.AUDIO_SEND_ECHO_CROSS_CORRELATION,S.AUDIO_SEND_GOLDEN_ECHO_CONFIDENCE,S.AUDIO_SEND_LT_ECHO_CONFIDENCE,S.AUDIO_SEND_LT_ECHO_DELAY,S.AUDIO_SEND_LT_ECHO_DELAY_ENTROPY,S.AUDIO_SEND_LT_ECHO_ERL,S.AUDIO_SEND_LT_ECHO_FRAMES_PERCENTAGE],I=["audioLevel","availableOutgoingBitrate","bytesReceived","bytesSent","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","firCount","frameHeight","framerateMean","framesDecoded","framesEncoded","framesPerSecond","framesReceived","framesSent","frameWidth","headerBytesReceived","height","insertedSamplesForDeceleration","jitter","jitterBufferDelay","jitterBufferEmittedCount","jitterBufferMinimumDelay","jitterBufferTargetDelay","keyFramesEncoded","nackCount","packetsDiscarded","packetsLost","packetsReceived","packetsSent","pliCount","qpSum","remoteTimestamp","removedSamplesForAcceleration","retransmittedBytesReceived","retransmittedPacketsReceived","roundTripTime","silentConcealedSamples","totalAudioEnergy","totalDecodeTime","totalEncodedBytesTarget","totalEncodeTime","totalProcessingDelay","totalRoundTripTime","width",S.VIDEO_QP,S.VIDEO_CAPTURE_IS_STALLED,S.VIDEO_ENCODE_IS_STALLED,S.VIDEO_SENT_IS_STALLED,S.AUDIO_SEND_ECHO_CONFIDENCE,S.AUDIO_SEND_ECHO_DELAY,S.AUDIO_SEND_ECHO_ERL,S.AUDIO_SEND_ECHO_RMS,S.AUDIO_SEND_ECHO_LPB_RMS,S.AUDIO_SEND_ECHO_CROSS_CORRELATION,S.AUDIO_SEND_GOLDEN_ECHO_CONFIDENCE,S.AUDIO_SEND_LT_ECHO_CONFIDENCE,S.AUDIO_SEND_LT_ECHO_DELAY,S.AUDIO_SEND_LT_ECHO_DELAY_ENTROPY,S.AUDIO_SEND_LT_ECHO_ERL,S.AUDIO_SEND_LT_ECHO_FRAMES_PERCENTAGE,S.VIDEO_RENDER_IS_STALLED],T=[S.AUDIO_DECODING_PLCCNG,S.AUDIO_DECODING_PLC],D=["consentRequestsSent","estimatedPlayoutTimestamp","estimatedPlayoutTimestamp_delta","fecPacketsDiscarded","fecPacketsReceived","headerBytesReceived","jitterBufferDelay_delta","jitterBufferDelay","jitterBufferEmittedCount","keyFramesEncoded","nackCount","packetsDiscarded","packetsLost","packetsReceived","packetsSent","qpSum_delta","requestsReceived","requestsSent","responsesReceived","responsesSent","retransmittedBytesReceived","retransmittedPacketsReceived","totalAudioEnergy","totalProcessingDelay"],x={audioLevel:1e4,jitter:1e3,totalAudioEnergy:1e4,totalDecodeTime:1e3,totalEncodeTime:1e3,totalSamplesDuration:1e3},$=["availableOutgoingBitrate","consentRequestsSent","requestsReceived","requestsSent","responsesReceived","responsesSent"],P=["audioLevel","packetsLost","totalAudioEnergy","totalSamplesDuration"],N=[5,50,95],M=["bandwidth","rtt"];function w(){return r("UserAgent").isBrowser("Chrome < 86")||r("UserAgent").isBrowser("Edge (Chromium Based) < 86")||r("UserAgent").isBrowser("Edge PWA (Chromium Based) < 86")||r("UserAgent").isBrowser("Opera < 72")}function A(){return i.exports.isPreChromium86()?o("ZenonMediaStatsSourcePreM86").TRACK_STATS:o("ZenonMediaStatsSource").TRACK_STATS}function F(){return i.exports.isPreChromium86()?o("ZenonMediaStatsSourcePreM86").INBOUND_RTP_STATS:o("ZenonMediaStatsSource").INBOUND_RTP_STATS}function O(){return i.exports.isPreChromium86()?o("ZenonMediaStatsSourcePreM86").OUTBOUND_RTP_STATS:o("ZenonMediaStatsSource").OUTBOUND_RTP_STATS}function B(){return o("ZenonMediaStatsSource").REMOTE_OUTBOUND_RTP_STATS}function W(){return i.exports.isPreChromium86()?o("ZenonMediaStatsSourcePreM86").RTP_STATS:o("ZenonMediaStatsSource").RTP_STATS}function q(){return o("ZenonMediaStatsSource").CANDIDATE_PAIR_STATS}function U(){return o("ZenonMediaStatsSource").MEDIA_SOURCE_STATS}function V(){return o("ZenonMediaStatsSource").SSRC_STATS}function H(){return o("ZenonMediaStatsSource").VIDEO_BWE_STATS}l.GLOBAL_STATS_TRACK_INFO=e,l.GLOBAL_STATS_TRACKID=s,l.GLOBAL_STATS_CONTENT_TYPE=u,l.GLOBAL_STATS_RENDERED_VIEW=r("ZenonRenderedView").GRID,l.PINNED_AUDIO_STATS_TRACK_INFO=c,l.PINNED_VIDEO_STATS_TRACK_INFO=d,l.OUTBOUND_AUDIO_STATS_TRACK_INFO=m,l.OUTBOUND_AUDIO_STATS_TRACKID=p,l.OUTBOUND_SCREEN_AUDIO_STATS_TRACK_INFO=_,l.OUTBOUND_SCREEN_AUDIO_STATS_TRACKID=f,l.OUTBOUND_SCREEN_STATS_TRACK_INFO=g,l.OUTBOUND_SCREEN_STATS_TRACKID=h,l.OUTBOUND_VIDEO_STATS_TRACK_INFO=y,l.OUTBOUND_VIDEO_STATS_TRACKID=C,l.VOICE_ENERGY_THRESHOLD=b,l.AV_SYNC_CUTOFF=v,l.DERIVED_METRICS=S,l.PER_STREAM_AGG_METRICS=R,l.CUMULATIVE_STATS=L,l.DELTA_STATS=E,l.STATS_REQUESTED=k,l.TSLOG_STATS_REQUESTED=I,l.TSLOG_DERIVED_STATS_REQUESTED=T,l.TSLOG_STATS_TO_SUPPRESS=D,l.TSLOG_METRIC_SCALE=x,l.TSLOG_STATS_REQUESTED_FROM_CANDIDATE_PAIR=$,l.RULE_VIOLATION_ALLOWLIST=P,l.PERCENTILES_REQUESTED=N,l.NETWORK_HEALTH_STATS=M,l.isPreChromium86=w,l.getTrackStats=A,l.getInboundRtpStats=F,l.getOutboundRtpStats=O,l.getRemoteOutboundRtpStats=B,l.getRtpStats=W,l.getCandidatePairStats=q,l.getMediaSourceStats=U,l.getSsrcStats=V,l.getVideoBweStats=H}),98);
__d("ZenonMediaStatsSource",["ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=["averageRtcpInterval","firCount","frameBitDepth","frameHeight","frameWidth","nackCount","packetsLost","pliCount","qpSum","remoteId","sliCount","timestamp","trackId"],s=["bytesSent","encoderImplementation","framesEncoded","framesSent","headerBytesSent","hugeFramesSent","keyFramesEncoded","lastPacketSentTimestamp","mediaSourceId","packetsSent","perDscpPacketsSent","qualityLimitationDurations","qualityLimitationReason","qualityLimitationResolutionChanges","retransmittedBytesSent","retransmittedPacketsSent","rid","senderId","targetBitrate","totalEncodedBytesTarget","totalEncodeTime","totalPacketSendDelay"],u=["audioLevel","burstDiscardCount","burstDiscardRate","burstLossCount","burstPacketsDiscarded","burstPacketsLost","bytesReceived","concealedSamples","concealmentEvents","decoderImplementation","delayedPacketOutageSamples","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","fractionLost","framesDecoded","framesDropped","framesReceived","gapDiscardRate","gapLossRate","headerBytesReceived","insertedSamplesForDeceleration","jitter","jitterBufferDelay","jitterBufferEmittedCount","jitterBufferMinimumDelay","jitterBufferTargetDelay","keyFramesDecoded","lastPacketReceivedTimestamp","packetsDiscarded","packetsDuplicated","packetsFailedDecryption","packetsReceived","packetsRepaired","pauseCount","perDscpPacketsReceived","receiverId","relativePacketArrivalDelay","removedSamplesForAcceleration","retransmittedBytesReceived","retransmittedPacketsReceived","roundTripTime","silentConcealedSamples","totalAudioEnergy","totalDecodeTime","totalInterFrameDelay","totalPausesDuration","totalProcessingDelay","totalSamplesDuration","totalSamplesReceived","totalSquaredInterFrameDelay"],c=["remoteTimestamp"],d=["interruptionCount","sumOfSquaredFramesDuration","totalFramesDuration","totalInterruptionDuration"],m=["availableOutgoingBitrate","consentRequestsSent","currentRoundTripTime","requestsReceived","requestsSent","responsesReceived","responsesSent","totalRoundTripTime"],p=["audioLevel","framesPerSecond","height","totalAudioEnergy","totalSamplesDuration","width"],_=["audioDecodingPLC","audioDecodingPLCCNG","decodingNormal","packetsLost"],f=[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ACTUAL_ENCODED_BITRATE];l.RTP_STATS=e,l.OUTBOUND_RTP_STATS=s,l.INBOUND_RTP_STATS=u,l.REMOTE_OUTBOUND_RTP_STATS=c,l.TRACK_STATS=d,l.CANDIDATE_PAIR_STATS=m,l.MEDIA_SOURCE_STATS=p,l.SSRC_STATS=_,l.VIDEO_BWE_STATS=f}),98);
__d("ZenonNetworkQualityMonitor",["$InternalEnum","UserAgent","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMediaStatsConfig","ZenonNetworkQualityIndicatorConfigSitevarConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=2,s=(function(){function t(){var e,t,n,o;this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$7=[],this.$8=u.Good,this.$9=new Map,this.$1=this.$15(),this.$2=this.$16(),this.$10=(e=r("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_poor_packet_loss_rate_threshold)!=null?e:Number.POSITIVE_INFINITY,this.$11=(t=r("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_fair_packet_loss_rate_threshold)!=null?t:Number.POSITIVE_INFINITY,this.$12=(n=r("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_jitter_threshold)!=null?n:Number.POSITIVE_INFINITY,this.$13=(o=r("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_avsync_threshold)!=null?o:Number.POSITIVE_INFINITY,this.$14=r("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_use_disconnected_check||!1,r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"ZenonNetworkQualityMonitor constructed: rtt "+this.$1+", packetLoss "+this.$2})}var n=t.prototype;return n.$16=function(){var e;return(e=r("ZenonNetworkQualityIndicatorConfigSitevarConfig").packet_loss_rate_threshold)!=null?e:Number.POSITIVE_INFINITY},n.$15=function(){var e;return(e=r("ZenonNetworkQualityIndicatorConfigSitevarConfig").rtt_threshold)!=null?e:Number.POSITIVE_INFINITY},n.$17=function(t,n){if(t!=null){var e=t.deltaStat[n];if(e!=null){var r,o=(r=e.getLastAddedValue())!=null?r:0;return o>this.$5&&(this.$5=o),o>this.$1}}return!1},n.$18=function(t,n,r){var e=t<0?0:t/(t+n);return e>this.$6&&(this.$6=e),e>=r},n.$19=function(t){if(t!=null){var e=t.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ACTUAL_ENCODED_BITRATE];if(e!=null){var n;this.$4=(n=e.getLastAddedValue())!=null?n:0}}},n.$20=function(t,n,r,o){if(t!=null&&r!=="packetsSent"){var e=t.cumulativeStat[n],a=t.cumulativeStat[r];if(e!=null&&a!=null)return this.$18(e.getDeltaFromLastUpdate(),a.getDeltaFromLastUpdate(),o)}return!1},n.$21=function(t,n){var e=this,r=n.packetLostKey,o=n.packetsKey,a=n.rttKey;return Array.from(t.values()).some(function(t){var n=e.$20(t,r,o,e.$2);return e.$19(t),n||e.$17(t,a)})},n.getMetricKeys=function(t){return{packetLostKey:o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED,packetsKey:t?"packetsSent":"packetsReceived",rttKey:r("UserAgent").isBrowser("Chrome")||r("UserAgent").isBrowser("Opera")?"currentRoundTripTime":"roundTripTime"}},n.getCount=function(){return this.$3},n.getCurrentBitrate=function(){return this.$4},n.getAvgBitrateDuringBadNetwork=function(){var e=this.$7.reduce(function(e,t){return e+t},0),t=this.$7.length;return t===0?0:e/t},n.$22=function(n,o){if(o)return this.$8=u.Poor,this.$7.push(this.$4),this.$8;if(n!=null){var t=this.$3,a=this.$21(n,this.getMetricKeys(!0)),i=this.$21(n,this.getMetricKeys(!1));a||i?this.$3<e&&this.$3++:this.$3>0&&this.$3--,this.$3>=e?(this.$8=u.Poor,this.$7.push(this.$4)):this.$3<=0?(t!==this.$3&&this.$3===0&&this.$8!==u.Good&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[Network] Bad network window with avg bitrate: "+this.getAvgBitrateDuringBadNetwork()+", max rtt: "+this.$5+", max packet loss: "+this.$6}),this.$7=[],this.$8=u.Good):this.$3>=1&&this.$8===u.Poor&&this.$7.push(this.$4)}return this.$8},n.$23=function(t,n){var e=this;if(t==null)return this.$9=new Map,this.$9;var r=this.$9,o=new Map;return t.forEach(function(t,a){if(t.remote!==!1){var i=r.get(a)==null,l=[e.$24(t),e.$25(n),e.$26(t),e.$27(t,i),e.$28(t,i)],s=u.Excellent,c=[];l.forEach(function(e){e.quality<s&&(s=e.quality);var t=e.reason;t!=null&&c.push(t)}),o.set(a,{quality:s,reasons:new Set(c)})}}),this.$9},n.$28=function(t,n){var e;if(!this.$14||t.contentType!=="video"||t.isMuted===!0||n)return{quality:u.Excellent};var r=(e=t.cumulativeStat.packetsReceived)==null?void 0:e.getDeltaFromLastUpdate();return r===0?{quality:u.Disconnected,reason:c.ZERO_PACKETS_RECEIVED}:{quality:u.Excellent}},n.$25=function(t){return t?{quality:u.Disconnected,reason:c.ICE_DISCONNECTED}:{quality:u.Excellent}},n.$26=function(t){var e,n=(e=t.cumulativeStat.jitter)==null?void 0:e.getDeltaFromLastUpdate();return t.contentType==="audio"&&n!=null&&n>this.$12?{quality:u.Fair,reason:c.JITTER}:{quality:u.Excellent}},n.$27=function(t,n){var e,r;if(n)return{quality:u.Excellent};var a=(e=t.cumulativeStat.packetsReceived)==null?void 0:e.getDeltaFromLastUpdate(),i=(r=t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED])==null?void 0:r.getDeltaFromLastUpdate();return a==null||i==null?{quality:u.Excellent}:this.$18(i,a,this.$10)?{quality:u.Poor,reason:c.PACKET_LOSS}:this.$18(i,a,this.$11)?{quality:u.Fair,reason:c.PACKET_LOSS}:{quality:u.Excellent}},n.$24=function(t){var e,n=(e=t.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC])==null?void 0:e.getLastAddedValue();return n!=null&&n>this.$13?{quality:u.Fair,reason:c.AV_SYNC}:{quality:u.Excellent}},n.determineNetworkStatus=function(t,n){var e=this.$22(t,n);return e===u.Poor&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[Network] Showing poor network indicator with current bitrate: "+this.getCurrentBitrate()}),{local:e,remote:this.$23(t,n)}},t})(),u=n("$InternalEnum")({Excellent:4,Good:3,Fair:2,Poor:1,Disconnected:0}),c=n("$InternalEnum").Mirrored(["PACKET_LOSS","ZERO_PACKETS_RECEIVED","END_TO_END_LANTENCY","AV_SYNC","JITTER","ICE_DISCONNECTED"]);l.ZenonNetworkQualityMonitor=s,l.ZenonNetworkQuality=u,l.ZenonNetworkQualityReason=c}),98);
__d("ZenonRemoteVideoRenderingEnabledAtom",["Decoil"],(function(t,n,r,o,a,i,l){"use strict";var e=o("Decoil").atom({default:!0,key:"ZenonCallsDecoil_ZenonRemoteVideoRenderingEnabledAtom"});l.default=e}),98);
__d("ZenonScreenSharingAvailabilityType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["AudioCallUnsupported","Available","GroupCallUnsupported","Unknown"]),l=e;i.default=l}),66);
__d("ZenonThreadContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null),c=u;l.default=c}),98);
__d("ZenonThreadType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({OneToOne:"ONE_TO_ONE",Group:"GROUP",Other:"OTHER"}),l=e;i.default=l}),66);
__d("ZenonThreadHooks",["MercuryIDs","ZenonThreadContext","ZenonThreadType","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useDebugValue,d=s.useMemo;function m(){var e=u(r("ZenonThreadContext")),t=e?e.id:null;return c(t),t}function p(){var e=u(r("ZenonThreadContext")),t=e?e.participants:[];return c(t),t}function _(){var e,t,n=u(r("ZenonThreadContext")),a=(e=n==null||(t=n.mercuryThread)==null?void 0:t.participants)!=null?e:null,i=d(function(){return a?a.map(function(e){return o("MercuryIDs").getUserIDFromParticipantID(e)}).filter(Boolean):[]},[a]);return c(i),i}function f(){var e=u(r("ZenonThreadContext")),t=e?e.imageUrl:null;return c(t),t}function g(){var e,t=u(r("ZenonThreadContext")),n=(e=t==null?void 0:t.type)!=null?e:r("ZenonThreadType").Other;return c(n),n}function h(){var e=u(r("ZenonThreadContext")),t=e?e.name:null;return c(t),t}function y(){var e=u(r("ZenonThreadContext")),t=e?e.hasOngoingCall:null;return c(t),t}function C(){var e=u(r("ZenonThreadContext")),t=e?e.mercuryThread:null;return c(t),t}l.useThreadFBID=m,l.useThreadAndCallParticipants=p,l.useThreadParticipants=_,l.useThreadImage=f,l.useThreadType=g,l.useThreadName=h,l.useOngoingCall=y,l.useMercuryThread=C}),98);
__d("ZenonTransportType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SIGNALING","SCTP","SIGNALING_AND_SCTP"]);i.ZenonTransportType=e}),66);
__d("ZenonUsers",["$InternalEnum","MercuryIDs","MessengerParticipants.bs","Promise","immutable","isStringNullOrEmpty","memoizeWithArgs","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=n("$InternalEnum").Mirrored(["Guest","User","Page","ParentApprovedUser","WhatsApp"]),u=r("memoizeWithArgs")(function(e){var t,n=e.big_image_src,r=e.fbid,o=e.gender,a=e.href,i=e.image_src,l=e.message_capabilities2,s=e.messenger_account_status_category,u=e.name,d=e.short_name,m=e.user_type,p=e.vanity;return Object.freeze({gender:o,id:r,messageCapabilities2:l!=null?l:null,messengerAccountStatusCategory:s!=null?s:null,name:u,profilePictureUrl:(t=n!=null?n:i)!=null?t:null,profileUrl:a!=null?a:null,shortName:d,userType:c(m),vanity:p!=null?p:null})},function(e){var t=e.fbid;return t}),c=function(t){var e=t;return e==="guest"?s.Guest:e==="page"?s.Page:e==="parent_approved_user"?s.ParentApprovedUser:e==="wec"?s.WhatsApp:s.User},d=function(t){var e=t[0],n=t[1];return[r("nullthrows")(o("MercuryIDs").getUserIDFromParticipantID(e)),u(n)]};function m(t){return new(e||(e=n("Promise")))(function(e){var n=t.map(function(e){return o("MercuryIDs").getParticipantIDFromUserID(e)});o("MessengerParticipants.bs").getMulti(n,function(t){e(r("immutable").Map(t).mapEntries(d))})})}function p(t){var r=t.map(function(e){return o("MercuryIDs").getParticipantIDFromUserID(e)}),a=null,i=null,l=o("MessengerParticipants.bs").getMultiEagerMap(r,function(e){var t=e.mapEntries(d);a?a(t):i=t}),s=l[0],u=l[1];return[s.mapEntries(d),u!=null?new(e||(e=n("Promise")))(function(e){i?e(i):a=e}):null]}function _(t){return r("isStringNullOrEmpty")(t)?(e||(e=n("Promise"))).resolve(null):new(e||(e=n("Promise")))(function(e){o("MessengerParticipants.bs").get(o("MercuryIDs").getParticipantIDFromUserID(t),function(t){e(t?u(t):null)})})}function f(e){if(r("isStringNullOrEmpty")(e))return null;var t=o("MessengerParticipants.bs").getNow(o("MercuryIDs").getParticipantIDFromUserID(e));return t?u(t):null}l.ZenonUserType=s,l.getMulti=m,l.getMultiEager=p,l.get=_,l.getNow=f}),98);
__d("ZenonUsersHooks",["ZenonUsers","immutable","promiseDone","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useDebugValue,c=s.useEffect,d=s.useLayoutEffect,m=s.useRef,p=s.useState;function _(e){var t=m(e),n=p(r("immutable").Map()),a=n[0],i=n[1];return c(function(){return function(){t.current=null}},[]),d(function(){t.current=e;var n=o("ZenonUsers").getMultiEager(e),l=n[0],s=n[1];l.equals(a)===!1&&i(l),s&&r("promiseDone")(s,function(e){var n=t.current;n&&i(function(t){return t.withMutations(function(t){n.forEach(function(n){var r=e.get(n);r&&t.set(n,r)})})})})},[e,a]),u(a),a}function f(e,t){return _(e)}function g(e){var t=m(e),n=p(function(){return o("ZenonUsers").getNow(e)}),a=n[0],i=n[1];return c(function(){t.current=e},[e]),c(function(){return function(){t.current=null}},[]),c(function(){var n=o("ZenonUsers").getNow(e);if(n!==a){i(n);return}r("promiseDone")(o("ZenonUsers").get(e),function(n){t.current===e&&i(n)})},[e,a]),u(a),a}l.useZenonUsers=_,l.useZenonUsersFromThread=f,l.useZenonUser=g}),98);
__d("findInMap",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n of e){var r=n[0],o=n[1];if(t(o,r))return o}}i.default=e}),66);
__d("ZenonCallsHooks",["CacheStorage","Decoil","E2eeMetricsSerializers","FBLogger","UserAgent","ZenonActorHooks","ZenonBackgroundBlurHooks","ZenonCallsContext","ZenonCallsModelTypes","ZenonDataMessageTopics","ZenonE2ee","ZenonNetworkQualityMonitor","ZenonRemoteVideoRenderingEnabledAtom","ZenonScreenSharingAvailabilityType","ZenonThreadHooks","ZenonTransportType","ZenonUsers","ZenonUsersHooks","asyncToGeneratorRuntime","filterMap","findInMap","getErrorSafe","immutable","justknobx","promiseDone","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useDebugValue,m=s.useEffect,p=s.useMemo,_=s.useRef,f=s.useState,g="RTC_LS_CALL_SUMMARY_",h="ls_summary";function y(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e){return t.addLocalTrack(e)},[t])}function C(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e){return r("promiseDone")(t.approveParticipants(e))},[t])}function b(){var e=$e.useConnectedRemoteUsersIDs(),t=$e.useCurrentCall(),n=0;return t&&e.forEach(function(e){var r=t.participants.get(e);if(r!=null){var o=r.trackIDs.filter(function(e){var n;return(n=t.mediaTracks.get(e))==null?void 0:n.enabled}).map(function(e){var n,r;return(n=(r=t.mediaTracks.get(e))==null?void 0:r.contentType)!=null?n:null});o.includes("screen_audio")&&(n+=1)}}),n}function v(){var e,t=c(r("ZenonCallsContext")),n=t.callTimers,o=t.currentCallInstanceSDK,a=o.getClientCallID_DEPRECATED(),i=(e=n.get(a))!=null?e:null;return d(i),i}function S(e){var t=null,n=Me();if(n){var r;t=(r=n.get(e))!=null?r:null}return d(t),t}function R(){var e=Me();return e!=null?e:r("immutable").Map()}function L(){var e=Me(),t=p(function(){return e===null?[]:Array.from(e.keys()).sort()},[e]);return d(t),t}function E(e){if(typeof e=="function")throw r("FBLogger")("rtc_www").mustfixThrow("Functional state types will break useCallSpecificState!");var t=c(r("ZenonCallsContext")),n=t.currentCallInstanceSDK,o=n.getClientCallID_DEPRECATED(),a=f(function(){return r("immutable").Map([[o,e]])}),i=a[0],l=a[1],s=u(function(t){l(typeof t=="function"?function(n){return n.set(o,t(n.get(o,e)))}:i.set(o,t))},[o,e,i]);return m(function(){i.has(o)||l(i.set(o,e))},[o,e,i]),[i.get(o,e),s]}function k(){var e=$e.useCurrentCall(),t=e?e.callState:o("ZenonCallsModelTypes").ZenonCallState.New;return d(t),t}function I(){var e,t,n=(e=(t=$e.useCurrentCall())==null?void 0:t.features.canAddParticipants)!=null?e:!1;return d(n),n}function T(){var e,t;return(e=(t=$e.useCurrentCall())==null?void 0:t.clientEndpointId)!=null?e:""}function D(){var e,t=$e.useCurrentCall(),n=(e=t==null?void 0:t.collisionContext)!=null?e:null;return d(n),n}function x(e){var t=Me(e),n=p(function(){if(t!==null&&t.size>0){var e=t.filter(function(e){var t=e.state;return t===o("ZenonCallsModelTypes").ZenonCallParticipantState.Connected});return Array.from(e.keys()).sort()}return[]},[t]);return d(n),n}function $(){var e=o("ZenonActorHooks").useZenonActor(),t=e[0],n=Me(),r=p(function(){return n===null?0:n.filter(function(e){var n=e.id,r=e.state;return n!==t&&r===o("ZenonCallsModelTypes").ZenonCallParticipantState.Connected}).size},[t,n]);return d(r),r}function P(){var e=o("ZenonActorHooks").useZenonActor(),t=e[0],n=Me(),a=p(function(){return n!==null&&n.size>0?n.filter(function(e){var n=e.id,r=e.state;return n!==t&&r===o("ZenonCallsModelTypes").ZenonCallParticipantState.Connected}):r("immutable").Map()},[t,n]);return d(a),a}function N(){var e=o("ZenonActorHooks").useZenonActor(),t=e[0],n=Me(),r=p(function(){return n===null?[]:n.filter(function(e){var n=e.id,r=e.state;return n!==t&&r===o("ZenonCallsModelTypes").ZenonCallParticipantState.Connected}).map(function(e){return e.id}).toArray()},[t,n]);return d(r),r}function M(){var e=$e.useCurrentCall();if(e){var t,n=(t=e.stateSyncOutputStates.get("coplay"))==null?void 0:t.data;return{eligibleParticipants:(n==null?void 0:n.eligibleParticipants)||[],matchState:(n==null?void 0:n.matchState)||null}}return null}function w(){var e,t=o("ZenonActorHooks").useZenonActor(),n=t[0],r=Me();return(e=r==null?void 0:r.get(n))!=null?e:null}function A(){var e,t=$e.useCurrentCall(),n=o("ZenonActorHooks").useZenonActor(),r=n[0];return(e=t==null?void 0:t.userIdToNodeIdMap.get(r))!=null?e:null}function F(e,t){var n=c(r("ZenonCallsContext")),a=n.currentCallInstanceSDK,i=$e.useCallState();m(function(){return i===o("ZenonCallsModelTypes").ZenonCallState.Connected&&r("promiseDone")(a.createDataMessageSubscription(e,t)),function(){r("promiseDone")(a.removeDataMessageSubscription(e,t))}},[i,a,e,t])}function O(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK,n=$e.useConnectedRemoteUsersIDs();return u(function(){r("promiseDone")(t.sendGenericDataMessage(o("ZenonDataMessageTopics").AV_ESCALATION_DECLINE_DATA_MESSAGE_TOPIC,"",{recipientIDs:n},o("ZenonTransportType").ZenonTransportType.SCTP))},[t,n])}function B(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e){return r("promiseDone")(t.denyParticipants(e))},[t])}function W(){var e,t=$e.useCurrentCall(),n=(e=t==null?void 0:t.features.dominantSpeaker)!=null?e:null;return d(n),n}function q(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK,n=e.endCallHooks,a=o("ZenonBackgroundBlurHooks").useOriginalVideoTrack();return u(function(e,o){a==null||a.webrtcTrack.stop(),r("promiseDone")(t.endCall(e,o)),n.forEach(function(t){return t(e,o)})},[t,n,a==null?void 0:a.webrtcTrack])}function U(){var e,t=$e.useCurrentCall(),n=(e=t==null?void 0:t.endCallReason)!=null?e:null;return d(n),n}function V(){var e,t=$e.useCurrentCall(),n=(e=t==null?void 0:t.endCallDetails)!=null?e:null;return d(n),n}function H(){var e,n=c(r("ZenonCallsContext")),a=n.currentCallInstanceSDK,i=a.getMediaMode(),l=a.getSignalingProtocol(),s=r("ZenonE2ee").shouldUseE2eeWorker(),u=(e=r("ZenonE2ee").getP2pE2eeMetrics())!=null?e:o("E2eeMetricsSerializers").P2pE2eeMetrics$DefaultConstructor(),d=a.getEncryptionKeysManagerState().sfuE2eeNegotiationState,p=f(null),_=p[0],g=p[1],h=function(){var e=a.getSCTPDataChannelState("data");g(e!=null?e:null)};return m(function(){var e=t.setInterval(h,1e3);return function(){return t.clearInterval(e)}},void 0),{isAsyncE2ee:s,mediaMode:i,p2pE2eeMetrics:u,sctpDataChannelStatus:_,sfuE2eeNegotiationState:d,signalingProtocol:l}}function G(){var e=_(!0),o=f(null),a=o[0],i=o[1],l=c(r("ZenonCallsContext")),s=l.currentCallInstanceSDK,u=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield s.getEncryptionKeysManagerState().e2eeStats;i(e?babelHelpers.extends({},e):null)});return function(){return e.apply(this,arguments)}})();return m(function(){e.current&&(e.current=!1,u());var n=t.setInterval(u,1e3);return function(){return t.clearInterval(n)}},void 0),a}function z(){var e,t=(e=Ne().find(function(e){return e.contentType==="screen_audio"}))!=null?e:null;return d(t),t}function j(){var e,t=c(r("ZenonCallsContext")),n=t.calls,o=t.currentCallInstanceSDK,a=(e=n.get(o.getClientCallID_DEPRECATED()))!=null?e:null;return d(a),a}function K(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return t.getEncryptionKeysManagerState()}function Q(){var e=$e.useConnectedRemoteUsersIDs(),t=o("ZenonUsersHooks").useZenonUsers(e);return t.some(function(e){return e.userType===o("ZenonUsers").ZenonUserType.ParentApprovedUser})}function X(){var e=$e.useCurrentCall(),t=e!=null&&e.isVideoCall?"video":"audio";return d(t),t==="audio"}function Y(e){var t=$e.useCallParticipant(e),n=o("ZenonThreadHooks").useThreadParticipants();return p(function(){return(t==null?void 0:t.participantType)===o("ZenonCallsModelTypes").ZenonCallParticipantType.Guest||!n.includes(e)},[t,e,n])}function J(e,t){var n=o("Decoil").useDecoilValue(r("ZenonRemoteVideoRenderingEnabledAtom")),a=$e.useCurrentCall(),i=a==null?void 0:a.participants.get(e),l=a==null?void 0:a.mediaTracks,s=p(function(){var e=null;if(l&&(t!=="video"||n)&&i){var r;e=(r=i.trackIDs.map(function(e){return l.get(e)}).find(function(e){return e!=null&&e.contentType===t&&e.enabled&&e.webrtcTrack.readyState==="live"}))!=null?r:null}return e},[l,n,t,i]);return d(s),s}function Z(e,t){var n=$e.useCurrentCall(),r=[];if(n){var o=n.participants.get(e);o&&(r=o.trackIDs.map(function(e){return n.mediaTracks.get(e)}).filter(Boolean).filter(function(e){return e.contentType===t&&e.enabled&&e.webrtcTrack.readyState==="live"}))}return d(r),r}function ee(e){var t=$e.useLiveMediaTrack(e,"video"),n=$e.useSupportMultipleStreams(),r=$e.useLiveMediaTrack(e,"screen");return n&&(t=r!=null?r:t),t}function te(e){var t=$e.useCurrentCall();if(t){var n=t.participants.get(e);if(n)return n.isVideoSubscribed}return!1}function ne(){var e,t=(e=Ne().find(function(e){return e.contentType==="audio"}))!=null?e:null;return d(t),t}function re(){var e,t=(e=Ne().find(function(e){return e.contentType==="screen"}))!=null?e:null;return d(t),t}function oe(){var e,t=(e=Ne().find(function(e){return e.contentType==="video"}))!=null?e:null;return d(t),t}function ae(e,t){var n=$e.useCurrentCall(),r=null;if(n){var o=n.participants.get(e);if(o){var a;r=(a=o.trackIDs.map(function(e){return n.mediaTracks.get(e)}).find(function(e){return e!=null&&e.contentType===t}))!=null?a:null}}return d(r),r}function ie(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e){return t.muteTrack(e)},[t])}function le(){var e=c(r("ZenonCallsContext")),t=e.endCallHooks;return u(function(e){t.add(e)},[t])}function se(){var e,t=((e=$e.useCurrentCall())==null?void 0:e.features.networkStatus.local)===o("ZenonNetworkQualityMonitor").ZenonNetworkQuality.Poor;return d(t),t}function ue(){var e=$e.useCurrentCall(),t=$e.useSupportMultipleStreams(),n=null;if(t){var o;n=e===null?null:(o=r("findInMap")(e.remoteMediaTracks,function(e){return e.contentType==="screen"&&e.enabled}))!=null?o:null}return d(n),n}function ce(){var e=$e.useIsAudioCall(),t=$e.useCurrentCall(),n=$e.useSupportMultipleStreams(),o=!e&&t!==null&&n?Array.from(r("filterMap")(t.remoteMediaTracks,function(e){return e.contentType==="screen"&&e.enabled}).values()):[];return d(o),o}function de(){var e=o("Decoil").useDecoilValue(r("ZenonRemoteVideoRenderingEnabledAtom")),t=$e.useIsAudioCall(),n=$e.useCurrentCall(),a=e&&!t&&n!==null?Array.from(r("filterMap")(n.remoteMediaTracks,function(e){return e.contentType==="video"&&e.enabled}).values()):[];return d(a),a}function me(){var e=$e.useCurrentCall(),t=e!==null?Array.from(r("filterMap")(e.remoteMediaTracks,function(e){return e.contentType==="audio"&&e.enabled}).values()):[];return d(t),t}function pe(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e){return t.removeLocalTrack(e)},[t])}function _e(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e){t!=null&&r("promiseDone")(t.removeParticipants(e))},[t])}function fe(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e,n){return t.replaceLocalTrack(e,n)},[t])}function ge(){var e,t=$e.useCurrentCall();return(e=t==null?void 0:t.responseSubCode)!=null?e:null}function he(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e,n){t!=null&&r("promiseDone")(t.ringParticipants(e,n))},[t])}function ye(){var e,t=$e.useCurrentCall(),n=(e=t==null?void 0:t.rtpReceivers_I_KNOW_WHAT_I_AM_DOING)!=null?e:[];return Pe("useRtpReceivers"),d(n),n}function Ce(){var e,t=$e.useCurrentCall(),n=(e=t==null?void 0:t.rtpSenders_I_KNOW_WHAT_I_AM_DOING)!=null?e:[];return Pe("useRtpSenders"),d(n),n}function be(){var e,t,n=(e=(t=$e.useCurrentCall())==null?void 0:t.features.screenSharingAvailability)!=null?e:r("ZenonScreenSharingAvailabilityType").Unknown;return r("UserAgent").isBrowser("Oculus Browser")&&(n=r("ZenonScreenSharingAvailabilityType").Unknown),d(n),n}function ve(){var e,t=$e.useCollisionContext();return(e=t==null?void 0:t.serverInfoData)!=null?e:null}function Se(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e,n){r("promiseDone")(t.subscribeToRemoteVideo(e,n))},[t])}function Re(){var e,t,n,o=c(r("ZenonCallsContext")),a=o.calls,i=o.currentCallInstanceSDK,l=a.get(i.getClientCallID_DEPRECATED()),s=(e=l==null?void 0:l.features.supportMultipleStreams)!=null?e:!1,u=Array.from((t=l==null||(n=l.mediaTracks)==null?void 0:n.values())!=null?t:[]).some(function(e){return e.contentType!=="audio"});return d(s&&u),s&&u}function Le(){var e,t,n,o,a=c(r("ZenonCallsContext")),i=a.calls,l=a.currentCallInstanceSDK,s=i.get(l.getClientCallID_DEPRECATED()),u=s==null?void 0:s.features.supportConstrainedDevices;return{frameRate:(e=u==null?void 0:u.frameRate)!=null?e:void 0,height:(t=u==null?void 0:u.height)!=null?t:void 0,isEnabled:(n=u==null?void 0:u.isEnabled)!=null?n:!1,width:(o=u==null?void 0:u.width)!=null?o:void 0}}function Ee(){var e=c(r("ZenonCallsContext")),t=e.currentCallInstanceSDK;return u(function(e){return t.unmuteTrack(e)},[t])}function ke(){var e=$e.useCallParticipantsIDs(),t=o("ZenonThreadHooks").useThreadName();return e.length<=2&&t==null}function Ie(){var e=$e.useCallParticipantsIDs();return e.length}function Te(){var e=r("justknobx")._("4080"),t=De(),n=xe();return e?n:t}function De(){var e,t=$e.useCurrentCall();return(e=t==null?void 0:t.participants.filter(function(e){return e.state===o("ZenonCallsModelTypes").ZenonCallParticipantState.Connected}).every(function(e){try{var t;return e.userCapabilities!=null&&e.userCapabilities.length>0&&((t=JSON.parse(e.userCapabilities))==null?void 0:t.screen_sharing)===!0}catch(e){var n=r("getErrorSafe")(e);return r("FBLogger")("rtc_www").catching(n).mustfix("ZenonCallsHooks.useIsScreensharingCapabilityEnabled: Unable to parse userCapabilities"),!1}}))!=null?e:!1}function xe(){var e,t,n=$e.useCurrentCall(),a=P(),i=(e=a.filter(function(e){return e.state===o("ZenonCallsModelTypes").ZenonCallParticipantState.Connected}).every(function(e){try{var t;return e.userCapabilities!=null&&e.userCapabilities.length>0&&((t=JSON.parse(e.userCapabilities))==null?void 0:t.screen_sharing)===!0}catch(e){var n=r("getErrorSafe")(e);return r("FBLogger")("rtc_www").catching(n).mustfix("ZenonCallsHooks.useIsScreensharingCapabilityEnabled: Unable to parse userCapabilities"),!1}}))!=null?e:!1,l=(t=n==null?void 0:n.features.screenSharingEnabled)!=null?t:!1;return i&&l}var $e={useAddLocalTrack:y,useApproveParticipants:C,useAudioSharingRemoteUsersCount:b,useCallConnectedTime:v,useCallParticipant:S,useCallParticipants:R,useCallParticipantsIDs:L,useCallSpecificState:E,useCallState:k,useCanAddParticipants:I,useClientEndpointId:T,useCollisionContext:D,useConnectedCallParticipantsIDs:x,useConnectedRemoteUserCount:$,useConnectedRemoteUsers:P,useConnectedRemoteUsersIDs:N,useCoplayOutputState:M,useCurrentParticipant:w,useCurrentUserNodeId:A,useDataMessageSubscription:F,useDeclineVideoEscalation:O,useDenyParticipants:B,useDominantSpeakerID_DEPRECATED:W,useEndCall:q,useEndCallReason:U,useEndCallDetails:V,useGetDebugInfo:H,useGetE2eeStats:G,useGetScreenAudio:z,useCurrentCall:j,useGetEncryptionKeysManagerState:K,useHasActiveCall:we,useHasParentApprovedParticipants:Q,useIsAudioCall:X,useIsGuest:Y,useLiveMediaTrack:J,useLiveMediaTracks_DEBUG:Z,useLiveScreenOrVideoTrack:ee,useIsVideoSubscribed:te,useLocalAudio:ne,useLocalScreen:re,useLocalVideo:oe,useMediaTrack_DEBUG:ae,useMuteTrack:ie,useOnCallEnded:le,usePoorConnectionStatus:se,useRemoteScreen:ue,useRemoteScreenTracks:ce,useRemoteVideoTracks:de,useRemoteAudioTracks:me,useRemoveLocalTrack:pe,useRemoveParticipants:_e,useReplaceLocalTrack:fe,useResponseSubCode:ge,useRingParticipants:he,useRtpReceivers_I_KNOW_WHAT_I_AM_DOING:ye,useRtpSenders_I_KNOW_WHAT_I_AM_DOING:Ce,useScreenSharingAvailability:be,useServerInfoData:ve,useSubscribeToRemoteVideo:Se,useSupportMultipleStreams:Re,useSupportConstrainedDevice:Le,useUnmuteTrack:Ee,useIsTwoPersonCall:ke,useParticipantsCount:Ie,useIsScreensharingCapabilityEnabled:Te};function Pe(e){m(function(){r("FBLogger")("ZenonCallsHooks").event(e)},[e])}function Ne(){var e,t=$e.useCurrentCall();return Array.from((e=t==null?void 0:t.localMediaTracks.values())!=null?e:[])}function Me(e){var t,n=$e.useCurrentCall(),r=e!=null?e:n,o=(t=r==null?void 0:r.participants)!=null?t:null;return d(o),o}function we(){var e=r("justknobx")._("4056"),t=new(r("CacheStorage"))("localstorage",g),n=t.get(h);if(!n||Object.keys(n).length===0)return!1;var o=Object.values(n)[0];if(!o||Object.keys(o).length===0)return!1;var a=Object.values(o)[0].__t;return!(a<Date.now()-e)}var Ae=$e;l.default=Ae}),98);
__d("RPWebUXLoggerSurfaceContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext("unknown");l.RPWebUXSurfaceLoggerContext=u}),98);
__d("RpWebUxEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4962"),s=o("FalcoLoggerInternal").create("rp_web_ux_event",e),u=s;l.default=u}),98);
__d("ZenonLoggingContext",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({annotations:{},callTrigger:"",codebaseVersion:"",deviceID:"",isCaller:null,isCheckpointDomainLogged:function(t){throw r("FBLogger")("rtc_www").mustfixThrow("isCheckpointDomainsLogged is not implemented!")},isErrorDomainLogged:function(t){throw r("FBLogger")("rtc_www").mustfixThrow("isErrorDomainLogged is not implemented!")},page:"",peerID:null,roomID:"",setCallTrigger:function(t){throw r("FBLogger")("rtc_www").mustfixThrow("setCallTrigger is not implemented!")},setCheckpointDomainLogged:function(t){throw r("FBLogger")("rtc_www").mustfixThrow("setCheckpointDomainsLogged is not implemented!")},setErrorDomainLogged:function(t){throw r("FBLogger")("rtc_www").mustfixThrow("setErrorDomainLogged is not implemented!")},setIsCaller:function(t){throw r("FBLogger")("rtc_www").mustfixThrow("setIsCaller is not implemented!")},signalingID:null,startTimer:function(t){throw r("FBLogger")("rtc_www").mustfixThrow("startTimer is not implemented!")},stopTimer:function(t){throw r("FBLogger")("rtc_www").mustfixThrow("stopTimer is not implemented!")}}),c=u;l.default=c}),98);
__d("RPWebUXLogger",["RPWebUXLoggerSurfaceContext","RpWebUxEventFalcoEvent","ZenonCallsContext","ZenonCallsHooks","ZenonLoggingContext","react","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useRef;function m(){var e=_();return u(function(t){e(babelHelpers.extends({},t,{eventType:"click"}))},[e])}function p(e){var t=_();return r("useSinglePartialViewImpression")({onImpressionStart:function(){return t(babelHelpers.extends({},e,{eventType:"impression"}))}})}function _(){var e=c(r("ZenonLoggingContext")),t=e.isCaller,n=e.signalingID,a=c(o("RPWebUXLoggerSurfaceContext").RPWebUXSurfaceLoggerContext),i=d(a),l=c(r("ZenonCallsContext")),s=d(l),m=l.currentCallInstanceSDK.getMediaMode(),p=l.currentCallInstanceSDK.getConferenceName(),_=r("ZenonCallsHooks").useIsAudioCall(),f=r("ZenonCallsHooks").useServerInfoData(),g=r("ZenonCallsHooks").useConnectedRemoteUsersIDs();return u(function(e){var o=e.component,a=e.eventName,l=e.eventType;r("RpWebUxEventFalcoEvent")==null||r("RpWebUxEventFalcoEvent").log(function(){return{call_media_mode:m,call_media_type:_?"audio":"video",client_session_id:n==null?null:String(n),client_timestamp_ms:Date.now().toString(),component:o,conference_name:p,event_name:a,event_type:l!=null?l:"click",is_caller:t,is_e2ee_mandated:s.current.isE2eeMandated,other_user_ids:g,server_info_data:f,surface:i.current}})},[m,p,_,t,g,f,n])}var f={useClickEventLogger:m,useImpressionEventLoggerRef:p};l.default=f}),98);
__d("RtcWebUserActionsDebugFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744337"),s=o("FalcoLoggerInternal").create("rtc_web_user_actions_debug",e),u=s;l.default=u}),98);
__d("RtcWebUserActionsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1744338"),s=o("FalcoLoggerInternal").create("rtc_web_user_actions",e),u=s;l.default=u}),98);
__d("ZenonMachineToQPLEvent",["qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s={ConnectionStateMachine:(e=r("qpl"))._(64243854,"2452"),ParentSignalingClient:e._(64234815,"1094"),PeerConnectionStateMachine:e._(64239068,"6172"),SignalingStateMachine:e._(64245348,"8823")};l.default=s}),98);
__d("ZenonDebugLogger",["ChannelClientID","CurrentUser","FBLogger","IGDWebUtils","Log","LogHistory","ODS","QuickLogActionType","QuickPerformanceLogger","RpWebStateMachineLoggingBlocklist.experimental","UserAgentData","WebDriverConfig","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonLoggingUtils","ZenonMachineToQPLEvent","ZenonODSLogger","formatDate","isEmployeeTestUserZenonLogging"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=null,c=(function(){function t(){var e;this.$1=o("LogHistory").getInstance("webrtc"),this.$2=o("ChannelClientID").getID(),this.$3=JSON.stringify({browser:(e=r("UserAgentData")).browserName,browser_version:e.browserFullVersion,device:e.deviceName,msg_source:"web",os:e.platformName,os_version:e.platformFullVersion,version:2});var t=r("CurrentUser").getAppID();t!=null&&o("IGDWebUtils").isInstagramWebSupportedApp(Number(t))?this.$4=parseInt(t,10):this.$4=0xc815778a650a,this.$5=new Set(r("RpWebStateMachineLoggingBlocklist.experimental").EVENT_TYPES),this.$6=new Set(r("RpWebStateMachineLoggingBlocklist.experimental").STATES)}t.getInstance=function(){return u||(u=new t),u},t.getFBLogger=function(t){var e,n;return t===void 0&&(t={}),r("FBLogger")("rpweb").addMetadata("RT_WEB","CALL_ID",""+((e=t.signalingID)!=null?e:"null")).addMetadata("RT_WEB","PEER_ID",""+((n=t.peerID)!=null?n:"null"))};var n=t.prototype;return n.$7=function(t,n,a){n===void 0&&(n=!0);var e=r("formatDate")(new Date,"[H:i:s:X]",{skipPatternLocalization:!0});r("WebDriverConfig").isJestE2ETestRun&&o("Log").debug(t),this.$1.log("Console",e+" "+t),n&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] "+t,messageID:a})},n.$8=function(t,n,o){var e=r("formatDate")(new Date,"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+t+". StateMachineID:  "+(n!=null?n:""));var a={auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"[ZP] "+t+".",stateMachineID:n};o!=null&&(a.messageID=o),r("ZenonInfraActionsLogger").logCheckpoint(a)},n.$9=function(t,n,a,i){i===void 0&&(i=0);var e=r("ZenonMachineToQPLEvent")==null?void 0:r("ZenonMachineToQPLEvent")[t];e&&(s||(s=r("QuickPerformanceLogger")))&&r("QuickLogActionType")&&o("ZenonLoggingUtils").shouldAllowLogging()&&(a==="terminated"?(s||(s=r("QuickPerformanceLogger"))).markerEnd(e,2,i):(s||(s=r("QuickPerformanceLogger"))).markerPoint(e,n,{data:{string:{data:a}},instanceKey:i}))},n.$10=function(t){return isNaN(+t)?0:+t},n.getLogHistory=function(){return this.$1},n.logStateMachine=function(t,n,o,a,i){if(r("isEmployeeTestUserZenonLogging")()&&!this.$5.has(o)){var e="["+t+"] [Current State: "+n+"] Processing event: "+o,l={auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:""+e,stateMachineID:a};i!=null&&(l.messageID=i),r("ZenonInfraActionsLogger").logCheckpoint(l),this.$9(t,o,n,this.$10(a))}},n.logStateMachineTransition=function(t,n,o,a,i,l,s,u){if(!(this.$6.has(o)||this.$5.has(i))&&r("isEmployeeTestUserZenonLogging")()){var e="";l!=null&&l.length===1&&l[0].type==="defer"?e="["+t+"] [[DEFERRED] "+i+" did not trigger transition. Current state remains "+o:o!==a?e="["+t+"] [[PROCESSED] "+i+" caused transition from "+(a||"")+" to "+o+".":n?e="["+t+"] [[PROCESSED] "+i+" did not trigger transition. Current state remains "+o:(e="["+t+"] [[DROPPED] "+i+" did not trigger transition. Current state remains "+o,this.$11(t)),this.$8(e,s,u)}},n.startQPL=function(t,n){n===void 0&&(n=0),(s||(s=r("QuickPerformanceLogger")))&&o("ZenonLoggingUtils").shouldAllowLogging()&&(s||(s=r("QuickPerformanceLogger"))).markerStart(t,this.$10(n))},n.endQPL=function(t,n){n===void 0&&(n=0),(s||(s=r("QuickPerformanceLogger")))&&r("QuickLogActionType")&&o("ZenonLoggingUtils").shouldAllowLogging()&&(s||(s=r("QuickPerformanceLogger"))).markerEnd(t,2,this.$10(n))},n.logConsole=function(t){this.$7(t,!1)},n.logMQTTStateChange=function(t){var e="mqtt_client_state_"+t;r("ZenonODSLogger").logCounter(e),r("isEmployeeTestUserZenonLogging")()&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] onMQTTStateChanged: "+t+", document.visibility: "+document.visibilityState+", document.hasFocus: "+String(document.hasFocus())+", navigator.onLine: "+String(navigator.onLine)})},n.logMQTTConnectStats=function(t,n){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] MQTT Connection time: "+String(t)+"ms, Retry Count: "+String(n)})},n.$11=function(n){(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_state_machine",n+"_event_dropped"),e.flush()},t})();l.default=c}),98);
__d("ZenonLoggingSurfaceContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext("call_container");l.default=u}),98);
__d("ZenonLoggingHooks",["FBLogger","RtcWebUserActionsDebugFalcoEvent","RtcWebUserActionsFalcoEvent","ZenonCallsContext","ZenonCallsHooks","ZenonCallsModelTypes","ZenonDebugLogger","ZenonLoggingContext","ZenonLoggingSurfaceContext","ZenonLoggingUtils","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useEffect,m=s.useRef;function p(){var e=c(r("ZenonLoggingContext"));return u(function(t){e.setIsCaller(t)},[e])}function _(){var e=c(r("ZenonLoggingContext"));return u(function(t){e.setCallTrigger(t)},[e])}function f(e){var t=E();d(function(){t({component:e})},[e,t])}function g(e,t){t===void 0&&(t=!0);var n=E(),r=m(!1);return u(function(){t&&r.current===!0||(n({component:e}),r.current=!0)},[e,n,t])}function h(e){var t=E();d(function(){e!=null&&t({component:e})},[e,t])}function y(e,t){var n=k();return u(function(r){return n({component:t}),e(r)},[e,t,n])}function C(){var e=I();return u(function(t){return e({checkpoint:t})},[e])}function b(e){var t=c(r("ZenonLoggingContext")),n=t.isErrorDomainLogged,o=t.setErrorDomainLogged,a=L();return u(function(t){n(e)||(o(e),a({errorDomain:e,errorType:t.toString()}),r("FBLogger")("rtc_www").catching(t).warn(e))},[e,n,a,o])}function v(){var e=L();return u(function(t){var n=t.checkpoint,o=t.error,a=t.errorDomain;e({checkpoint:n,errorDomain:a,errorType:o.toString()}),o instanceof Error?r("FBLogger")("rtc_www").catching(o).warn(n):r("FBLogger")("rtc_www").warn(n+"_"+o.toString())},[e])}function S(e){var t=c(r("ZenonLoggingContext")),n=t.isCheckpointDomainLogged,o=t.setCheckpointDomainLogged,a=I();return u(function(){n(e)||(o(e),a({checkpoint:e}))},[e,n,a,o])}function R(e,t){var n=c(r("ZenonLoggingContext")),o=n.startTimer,a=n.stopTimer,i=u(function(){return o(e)},[e,o]),l=I(),s=u(function(){var n=t!=null?t:e,r=a(e);return l({checkpoint:n+"_timerEnd",timeElapsed:r}),r},[t,l,e,a]);return[i,s]}function L(){var e=T();return u(function(t){return e(babelHelpers.extends({eventName:"error"},t))},[e])}function E(){var e=T();return u(function(t){return e(babelHelpers.extends({eventName:"impression"},t))},[e])}function k(){var e=T();return u(function(t){return e(babelHelpers.extends({eventName:"tap"},t))},[e])}function I(){var e=T();return u(function(t){return e(babelHelpers.extends({eventName:"checkpoint"},t))},[e])}function T(){var e=D(),t=c(r("ZenonCallsContext")),n=t.isE2eeMandated;return u(function(t){if(!(n||!o("ZenonLoggingUtils").shouldAllowLogging())){e(t,r("RtcWebUserActionsDebugFalcoEvent"));var a=e(t,r("RtcWebUserActionsFalcoEvent"));x(t.eventName,a)}},[n,e])}function D(){var e=c(r("ZenonLoggingSurfaceContext")),t=r("ZenonCallsHooks").useCallState(),n=c(r("ZenonCallsContext")),o=c(r("ZenonLoggingContext")),a=r("ZenonCallsHooks").useIsAudioCall(),i=m(e),l=m(t),s=m(n),d=m(o),p=m(a);return i.current=e,l.current=t,s.current=n,d.current=o,p.current=a,u(function(e,t){var n,r,o,a=s.current,u=a.calls,c=a.currentCallInstanceSDK,m=p.current?"audio":"video",_=d.current.signalingID==null?void 0:String(d.current.signalingID),f=(n=d.current.roomID)!=null?n:c==null?void 0:c.getConferenceName(),g=d.current.isCaller,h=d.current.page,y=d.current.deviceID,C=d.current.callTrigger,b=d.current.codebaseVersion,v=d.current.peerID,S=(r=u.get(c.getClientCallID_DEPRECATED()))==null?void 0:r.collisionContext.serverInfoData,R={call_id:_,call_trigger:C,call_type:"mw",checkpoint:e.checkpoint,client_time:Date.now().toString(),codebase_version:b,component:e.component,conference_name:f,conference_state:$(l.current),device_id:y,error_domain:e.errorDomain,error_type:e.errorType,event:e.eventName,event_time_elapsed:(o=e.timeElapsed)==null?void 0:o.toString(),is_caller:g,media_type:m,page:P(h),peer_id:v,server_info_data:S,surface:i.current};return t.log(function(){return R}),R},[])}function x(e,t){var n=e==null?"null":e;r("ZenonDebugLogger").getInstance().getLogHistory().log(n,JSON.stringify(t))}function $(e){switch(e){case o("ZenonCallsModelTypes").ZenonCallState.New:return"NEW";case o("ZenonCallsModelTypes").ZenonCallState.Connecting:return"CONNECTING";case o("ZenonCallsModelTypes").ZenonCallState.Connected:return"CONNECTED";case o("ZenonCallsModelTypes").ZenonCallState.Terminating:return"TERMINATING";case o("ZenonCallsModelTypes").ZenonCallState.Terminated:return"TERMINATED";case o("ZenonCallsModelTypes").ZenonCallState.PendingApproval:return"PENDING_APPROVAL"}}function P(e){switch(e){case"messenger_dot_com":case"facebook":case"mweb":case"workplace":return e;default:return null}}l.useSetIsCaller=p,l.useSetCallTrigger=_,l.useImpressionLogging=f,l.useImpressionLogger=g,l.useImpressionLoggingOptional=h,l.useClickLogging=y,l.useCheckpointLogging=C,l.useErrorLoggingOnceForDomain=b,l.useErrorLogging=v,l.useCheckpointLoggingOnceForDomain=S,l.useTimerLogging=R}),98);
__d("ZenonCall",["ZenonCallsModelTypes","ZenonNetworkQualityMonitor","ZenonScreenSharingAvailabilityType","immutable"],(function(t,n,r,o,a,i){"use strict";var e,l=n("ZenonCallsModelTypes").ZenonCallState,s=n("ZenonNetworkQualityMonitor").ZenonNetworkQuality,u=(e=n("immutable")).Record({callState:l.New,clientCallId:"",clientEndpointId:"",collisionContext:{groupThreadID:null,peerID:null,serverInfoData:null},endCallDetails:null,endCallReason:null,features:{canAddParticipants:!1,canApproveCollaborationSpaceJoinRequests:!0,cowatchEnabled:!1,cowatchGroupEnabled:!1,dominantSpeaker:null,multiwayVideoEscalation:!1,networkStatus:{local:s.Good,remote:new Map},screenSharingAvailability:n("ZenonScreenSharingAvailabilityType").Available,screenSharingEnabled:!1,supportConstrainedDevices:{frameRate:null,height:null,isEnabled:!1,width:null},supportMultipleStreams:!1},isVideoCall:!1,localCallId:"",localMediaTracks:new Map,mediaTracks:new Map,participants:e.Map(),remoteMediaTracks:new Map,remoteScreenSharingUserIDs:e.OrderedSet(),responseSubCode:null,rtpReceivers_I_KNOW_WHAT_I_AM_DOING:[],rtpSenders_I_KNOW_WHAT_I_AM_DOING:[],selfParticipantID:"0",sharedCallId:null,stateSyncInputStates:e.Map(),stateSyncOutputStates:e.Map(),userIdToNodeIdMap:new Map}),c=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(u),d=c;i.default=d}),66);
__d("ZenonConnectionStateTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({KEEP_ALL_PARTICIPANTS:0,REMOVE_DUPLICATED:1,DISCONNECT_DUPLICATED:2});i.ZenonDuplicatedParticipantsProcessingMode=e}),66);
__d("ZenonSignalingConstants",[],(function(t,n,r,o,a,i){"use strict";var e="/t_rtc_multi",l="config_engine",s="D3F4U1T_F8_TR4CK";i.T_RTC_MULTI_MQTT_TOPIC=e,i.CONFIG_ENGINE_STATE_SYNC_TOPIC=l,i.DEFAULT_TRACK=s}),66);
__d("ZenonCallsModelEmitter",["EventEmitter","ZenonActorHooks","ZenonCall","ZenonCallsModelTypes","ZenonConnectionStateTypes","ZenonDismissReason","ZenonParticipantState","ZenonSignalingConstants","filterMap","immutable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=100,u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.$ZenonCallsModelEmitter$p_1=new Map,t.$ZenonCallsModelEmitter$p_2=new Map,t.$ZenonCallsModelEmitter$p_3=null,t.$ZenonCallsModelEmitter$p_4=null,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.emitCallsModel=function(t,n){var e=this;this.$ZenonCallsModelEmitter$p_3!==null?this.$ZenonCallsModelEmitter$p_2.set(t,n):(this.$ZenonCallsModelEmitter$p_5(t,n),this.$ZenonCallsModelEmitter$p_3=window.setTimeout(function(){e.$ZenonCallsModelEmitter$p_2.forEach(function(t,n){e.$ZenonCallsModelEmitter$p_5(n,t)}),e.$ZenonCallsModelEmitter$p_2.clear(),e.$ZenonCallsModelEmitter$p_3=null},s))},n.getCurrentClientCallID_DO_NOT_USE=function(){return this.$ZenonCallsModelEmitter$p_4},n.setCurrentClientCallID=function(t){this.$ZenonCallsModelEmitter$p_4=t},n.$ZenonCallsModelEmitter$p_5=function(t,n){var e=this.$ZenonCallsModelEmitter$p_1.get(t),a=new(r("ZenonCall"))({callState:this.$ZenonCallsModelEmitter$p_6(n),clientCallId:t,clientEndpointId:n.clientEndpointId,collisionContext:babelHelpers.extends({},n.collisionContext),endCallDetails:this.$ZenonCallsModelEmitter$p_7(n),endCallReason:this.$ZenonCallsModelEmitter$p_8(n),features:n.currentUserCapabilities,isVideoCall:this.$ZenonCallsModelEmitter$p_9(n,e),localCallId:n.localCallId,localMediaTracks:this.$ZenonCallsModelEmitter$p_10(n),mediaTracks:this.$ZenonCallsModelEmitter$p_11(n),participants:this.$ZenonCallsModelEmitter$p_12(n),remoteMediaTracks:this.$ZenonCallsModelEmitter$p_13(n),rtpReceivers_I_KNOW_WHAT_I_AM_DOING:this.$ZenonCallsModelEmitter$p_14(n),rtpSenders_I_KNOW_WHAT_I_AM_DOING:this.$ZenonCallsModelEmitter$p_15(n),selfParticipantID:o("ZenonActorHooks").ZenonActor.getID(),sharedCallId:n.getRemoteSignalingId(),stateSyncInputStates:this.$ZenonCallsModelEmitter$p_16(n),stateSyncOutputStates:this.$ZenonCallsModelEmitter$p_17(n),userIdToNodeIdMap:this.$ZenonCallsModelEmitter$p_18(n)});this.$ZenonCallsModelEmitter$p_1=new Map(this.$ZenonCallsModelEmitter$p_1).set(t,a),this.emitCallsModelDelegate(this.$ZenonCallsModelEmitter$p_1)},n.emitCallsModelDelegate=function(t){this.emit("callsModelUpdate",t)},n.$ZenonCallsModelEmitter$p_6=function(t){return d[t.connectionState]},n.$ZenonCallsModelEmitter$p_7=function(t){var e;return(e=t.dismissDetails)==null?void 0:e.detailedReasonFromMW},n.$ZenonCallsModelEmitter$p_8=function(t){return t.dismissDetails!=null&&t.dismissDetails.dismissReason!=null?o("ZenonDismissReason").dismissToEndCallReason(t.dismissDetails.dismissReason):null},n.$ZenonCallsModelEmitter$p_10=function(t){return r("filterMap")(this.$ZenonCallsModelEmitter$p_11(t),function(e){return e.remote===!1})},n.$ZenonCallsModelEmitter$p_13=function(t){return r("filterMap")(this.$ZenonCallsModelEmitter$p_11(t),function(e){return e.remote===!0})},n.$ZenonCallsModelEmitter$p_11=function(t){return t.getTracks()},n.$ZenonCallsModelEmitter$p_12=function(t){var e=t.getUserToTracksMap(),n=t.getTracks(),a=t.getExistingParticipantIds(),i=t.actorRepresentatives,l=this.$ZenonCallsModelEmitter$p_19(t),s=r("immutable").Map().withMutations(function(s){l.forEach(function(l,u){var c,d,m=r("immutable").Set((c=e.get(u))==null?void 0:c.keys()).filter(function(e){return n.has(e)}).toArray(),p=m.map(function(e){return n.get(e)}).filter(Boolean).map(function(e){return babelHelpers.extends({},e)});s.set(u,{id:u,isExistingParticipant:a.has(u),isVideoSubscribed:t.getIsUserVideoSubscribed(u),nodeId:t.convertUserIdToNodeId(u),participantType:o("ZenonCallsModelTypes").ZenonCallParticipantType.Messenger,representativeID:(d=i.get(u))!=null?d:null,state:o("ZenonParticipantState").toCallParticipantState(l),trackIDs:m,tracks:p,userCapabilities:t.getUserCapabilities(u)})})});return this.$ZenonCallsModelEmitter$p_20(s,t)},n.$ZenonCallsModelEmitter$p_20=function(t,n){var e=t.get(n.selfParticipantID);if(!e)return t;var r=babelHelpers.extends({},e,{id:o("ZenonActorHooks").ZenonActor.getID()});return t.delete(n.selfParticipantID).set(r.id,r)},n.$ZenonCallsModelEmitter$p_16=function(t){return r("immutable").Map(t.getStateSyncInputs())},n.$ZenonCallsModelEmitter$p_17=function(t){return r("immutable").Map(t.getStateSyncOutputs())},n.$ZenonCallsModelEmitter$p_15=function(t){var e=[].concat(t.getRtpSenders_I_KNOW_WHAT_I_AM_DOING());return e},n.$ZenonCallsModelEmitter$p_14=function(t){var e=[].concat(t.getRtpReceivers_I_KNOW_WHAT_I_AM_DOING());return e},n.$ZenonCallsModelEmitter$p_18=function(t){return t.getUserIdToNodeIdMap()},n.getCallsModel=function(){return this.$ZenonCallsModelEmitter$p_1},n.$ZenonCallsModelEmitter$p_21=function(t){var e=t.actorRepresentatives,n=t.getConsolidatedParticipantStates(),r=new Map;return n.forEach(function(t,n){var a,i=(a=e.get(n))!=null?a:null;if(i!==null&&t<=o("ZenonParticipantState").ZenonParticipantState.CONNECTED){var l,s,u=(l=r.get(i))!=null?l:o("ZenonParticipantState").ZenonParticipantState.UNKNOWN;r.set(i,(s=o("ZenonParticipantState").ZenonParticipantState.cast(Math.max(u,t)))!=null?s:o("ZenonParticipantState").ZenonParticipantState.UNKNOWN)}}),r},n.$ZenonCallsModelEmitter$p_19=function(t){var e=t.getConsolidatedParticipantStates(),n=t.duplicatedParticipantsProcessingMode;if(n===o("ZenonConnectionStateTypes").ZenonDuplicatedParticipantsProcessingMode.KEEP_ALL_PARTICIPANTS)return e;var r=this.$ZenonCallsModelEmitter$p_21(t),a=t.actorRepresentatives,i=new Map;return e.forEach(function(e,t){var l,s=(l=r.get(t))!=null?l:null;if(s!==null)s!==o("ZenonParticipantState").ZenonParticipantState.CONNECTING&&s!==o("ZenonParticipantState").ZenonParticipantState.CONNECTED?i.set(t,s):n===o("ZenonConnectionStateTypes").ZenonDuplicatedParticipantsProcessingMode.DISCONNECT_DUPLICATED&&i.set(t,o("ZenonParticipantState").ZenonParticipantState.DISCONNECTED);else{var u,c=(u=a.get(t))!=null?u:null;(c===null||e===o("ZenonParticipantState").ZenonParticipantState.CONNECTING||e===o("ZenonParticipantState").ZenonParticipantState.CONNECTED)&&i.set(t,e)}}),i},n.$ZenonCallsModelEmitter$p_9=function(t,n){return(n==null?void 0:n.isVideoCall)||this.$ZenonCallsModelEmitter$p_22(t)},n.$ZenonCallsModelEmitter$p_22=function(t){var e=this.$ZenonCallsModelEmitter$p_11(t),n=!1;return e.forEach(function(e){return n=n||(e.contentType==="video"||e.contentType==="screen")&&e.enabled&&e.webrtcTrack.readyState==="live"&&e.trackId!==o("ZenonSignalingConstants").DEFAULT_TRACK}),n},t})(r("EventEmitter")),c=new u,d=Object.freeze({clientInitiatedRenegotiation:(e=o("ZenonCallsModelTypes")).ZenonCallState.Connected,creatingSdp:e.ZenonCallState.Connecting,init:e.ZenonCallState.New,peerConnectionRestarting:e.ZenonCallState.Connected,pendingApproval:e.ZenonCallState.PendingApproval,sdpNegotiated:e.ZenonCallState.Connected,sdpSet:e.ZenonCallState.Connecting,serverInitiatedRenegotiating:e.ZenonCallState.Connected,terminated:e.ZenonCallState.Terminated,waitingForIncoming:e.ZenonCallState.New});l.CALLS_MODEL_EMITTER_DELAY_MS=s,l.CallsModelEmitterInstance=c,l.CONNECTION_STATE_TO_CALL_STATE_MAP=d}),98);
__d("ZenonCapabilities",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t,n,r,o,a,i,l,s,u={AddParticipantEnabled:(t=e.addParticipantEnabled)!=null?t:!1,GROUP_COWATCH:(n=e.cowatchGroupEnabled)!=null?n:!1,MultipleVideoStreamsAllowed:(r=e.multipleVideoStreamsAllowed)!=null?r:!1,MW_AV_ESCALATION:(o=e.multiwayVideoEscalation)!=null?o:!1,canApproveCollaborationSpaceJoinRequests:(a=e.canApproveCollaborationSpaceJoinRequests)!=null?a:!1,cowatch:(i=e.cowatchEnabled)!=null?i:!1,screen_sharing:(l=e.screenSharingEnabled)!=null?l:!1,sctpSecondPc:(s=e.sctpSecondPcEnabled)!=null?s:!1};return JSON.stringify(u)}i.capabilitiesToString=e}),66);
__d("ZenonConnectionInitState",["Promise","ZenonBrowsers","ZenonCapabilities","ZenonParticipantState","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a){var i,l=[];if(a.type!=="createConnection")return{};var s=a.payload.direction==="outgoing",u=a.payload,c=u.appMessages,d=u.callMedia,m=u.dataChannels,p=u.hasOfferInRing,_=u.initialSyncStates,f=u.isSecondaryJoinRole,g=u.serializedInitialSyncStates,h=u.tracks,y=u.usersToRing,C=u.usersToRingFromRingRequest,b=s?y:C;t.updateConnectionModel(function(e){b==null||b.forEach(function(t){e.updateParticipantState(t,o("ZenonParticipantState").ZenonParticipantState.CONTACTING),e.updatePreferredCaptureConfigs()}),e.registerTrackFetcher(function(){return t.peerConnectionManager.getTracks()}),e.registerRtpSendersFetcher(function(){return t.peerConnectionManager.getRtpSenders()}),e.registerRtpReceiversFetcher(function(){return t.peerConnectionManager.getRtpReceivers()}),h==null||h.forEach(function(t){e.addLocalTrackToTrackMap({enabled:t.enabled,participantID:e.selfParticipantID,trackID:t.trackId,type:t.contentType})})}),s&&r("promiseDone")(t.signalingClient.sendInvite(y,c));var v=t.getConnectionModel(),S=v.currentUserCapabilities,R=v.selfParticipantID,L={addParticipantEnabled:S.canAddParticipants,canApproveCollaborationSpaceJoinRequests:S.canApproveCollaborationSpaceJoinRequests,cowatchEnabled:S.cowatchEnabled,cowatchGroupEnabled:S.cowatchGroupEnabled,multipleVideoStreamsAllowed:S.supportMultipleStreams,multiwayVideoEscalation:S.multiwayVideoEscalation,screenSharingEnabled:S.screenSharingEnabled},E=o("ZenonCapabilities").capabilitiesToString(L);l.push(t.signalingClient.sendClientInfo(new Map([[R,E]]),_,g,f));var k=t.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode();h&&l.push(t.peerConnectionManager.addLocalTracks(h,k,d,s));var I=k==="sfu"||s;t.peerConnectionManager.setShouldEstablishDataChannel(I);var T=k==="sfu"||k==="p2p"&&((i=t.signalingClient.getSignalingModel().getRoomInfo().context)==null?void 0:i.peerID)==null||!o("ZenonBrowsers").isSctpdataChannelDisabled();return m&&m.forEach(function(e){T&&l.push(t.peerConnectionManager.createDataChannel(e,k))}),t.peerConnectionManager.getSupportsSimulcastOverSignaling()&&r("promiseDone")(t.peerConnectionManager.createDataMessageSubscription("signalingVideoUploadUpdate",function(e){return t.peerConnectionManager.onSimulcastSignalingDataMessage(e)})),(s||p!==!0)&&l.push(t.peerConnectionManager.applyLocalSdp()),(e||(e=n("Promise"))).all(l).then(function(){return a.onSuccess()}).catch(function(e){return a.onError(e)}),{callMedia:d}}l.onCreateConnection=s}),98);
__d("ZenonConnectionPeerConnectionRestartingState",["RpWebPeerConnectionEndDelay","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonMediaActionLogger","ZenonParticipantState","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(t.type==="sdpReceived"){var n=t.payload,o=n.e2eeServerState,a=n.mediaStates,i=n.messageID,l=n.onProcessed,s=n.renegotiationOffer,u=n.sdp,c=n.sdpOriginLocalId,d=n.source;e.updateConnectionModel(function(e){e.updateTrackMapFromMediaStates(a.tracks,u.type==="pranswer")}),r("promiseDone")(e.secondaryPeerConnectionManager.applyRemoteSdp(u,a,d,s,c,l,i,o))}}function s(e,t){var n;if(t.type!=="connectionEstablished"||t.payload.peerConnectionRole!=="secondary")return{};var a=e.peerConnectionManager,i=e.secondaryPeerConnectionManager,l=e.signalingClient,s=e.updateConnectionModel,u=l.getSignalingModel(),c=u.getMediaModeManager(),d=c.getMediaMode(),m=i.getTracks();a.getTracks().forEach(function(e){var t=m.get(e.trackId);!e.remote&&t!=null&&e.enabled!==t.enabled&&(r("ZenonMediaActionLogger").logEvent({checkpoint:"media track out of sync during pc transition"}),e.webrtcTrack.enabled?r("promiseDone")(i.unmuteLocalTrack(e.trackId)):r("promiseDone")(i.muteLocalTrack(e.trackId)))}),i.renegotiateNullSenderTransport(),i.setTrackListenersFromManager(a),i.swapPeerConnectionEventHandlers(a);var p=d==="sfu"||((n=u.getRoomInfo().context)==null?void 0:n.peerID)!=null&&e.getConnectionModel().connectionDirection==="outgoing";i.setIceRestartEligible(p),e.sctpHelper.setupSctpChannelApi(l.getSignalingModel().getSignalingID(),l.getSignalingModel().getMediaModeManager(),i),r("promiseDone")(l.sendClientEvent(o("ZenonMWMessageTypes").ZenonMWClientEventType.MEDIA_CONNECTED)),s(function(e){e.registerTrackFetcher(function(){return i.getTracks()}),e.registerRtpSendersFetcher(function(){return i.getRtpSenders()}),e.registerRtpReceiversFetcher(function(){return i.getRtpReceivers()}),e.updateParticipantState(e.selfParticipantID,o("ZenonParticipantState").ZenonParticipantState.CONNECTED),e.updatePreferredCaptureConfigs()}),e.logEvent({name:"callConnected"}),e.logEvent({name:"connectionReady"});var _=r("setTimeout")(function(){r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Issuing delayed end call to previous peer connection"}),r("promiseDone")(a.end(!1))},r("RpWebPeerConnectionEndDelay").DELAY);return d==="sfu"?(e.logEvent({name:"callEscalated"}),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"secondaryConnectionEstablished: SFU escalation complete"})):r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"secondaryConnectionEstablished: De-escalation complete"}),c.onPeerConnectionEstablished(),{activePeerConnection:"primary",bufferTimeout:_,peerConnectionManager:i,secondaryPeerConnectionManager:a}}l.onSdpReceived=e,l.onSecondaryConnectionEstablished=s}),98);
__d("ZenonConnectionSMGuards",["ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonScreenShare"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(t.type!=="addLocalTracks"||e.getConnectionModel().currentUserCapabilities.supportMultipleStreams)return!1;var n=t.payload.tracks;return o("ZenonScreenShare").isScreenSharingTrack(n)?Array.from(e.getConnectionModel().getTracks().values()).some(function(e){return!e.remote&&(e.contentType==="video"||e.contentType==="screen")}):!1}function s(e,t){return t.type==="createConnection"&&t.payload.direction==="incoming"}function u(e,t){return t.type==="createConnection"&&t.payload.direction==="outgoing"}function c(e,t){if(t.type!=="removeLocalTrack"||e.getConnectionModel().currentUserCapabilities.supportMultipleStreams)return!1;var n=t.payload.trackID,r=e.getConnectionModel().getTracks().get(n);return r==null||!o("ZenonScreenShare").isScreenSharingTrack([r])?!1:Array.from(e.getConnectionModel().getTracks().values()).some(function(e){return e.trackId!==r.trackId&&!e.remote&&(e.contentType==="video"||e.contentType==="screen")})}function d(e,t){return t.type==="sdpReceived"&&t.payload.sdp.type==="answer"}function m(e,t){return t.type==="sdpReceived"&&t.payload.sdp.type==="pranswer"}function p(e,t){return t.type==="sdpReceived"&&t.payload.sdp.type==="offer"}function _(e,t){return t.type==="sdpReceived"&&(t.payload.sdp.type==="answer"||t.payload.sdp.type==="offer"&&t.payload.mediaPath===o("ZenonMWMessageTypes").ZenonMWMediaPath.P2P)}function f(e,t){return t.payload!=null&&t.payload.peerConnectionRole!=null&&t.payload.peerConnectionRole===e.activePeerConnection}function g(e,t){return t.payload!=null&&t.payload.peerConnectionRole!=null&&t.payload.peerConnectionRole==="secondary"}function h(e,t){var n=t.type==="mediaUpdateResponseReceived"&&t.payload.cancelNegotiations;return t.type==="mediaUpdateResponseReceived"&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"[ZP] cancel negotiations called with: "+String(t.payload.cancelNegotiations)}),n}l.addScreenShareTrackWithReplaceGuard=e,l.incomingConnectionGuard=s,l.outgoingConnectionGuard=u,l.removeScreenShareTrackWithReplaceGuard=c,l.sdpAnswerReceiveGuard=d,l.sdpPrAnswerReceiveGuard=m,l.sdpOfferReceiveGuard=p,l.sdpAnswerOrP2POfferReceiveGuard=_,l.activePeerConnectionGuard=f,l.secondaryPeerConnectionGuard=g,l.cancelNegotiationsGuard=h}),98);
__d("ZenonConnectionSdpNegotiatedState",["Promise","ZenonBrowsers","ZenonScreenShare","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o){if(!(o.type!=="addLocalTracks"&&o.type!=="initiateAddLocalTracks")){var a=[],i=o.payload.tracks;a.push(t.peerConnectionManager.addLocalTracks(i,t.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode(),t.callMedia)),a.push(t.peerConnectionManager.applyLocalSdp()),t.updateConnectionModel(function(e){i.forEach(function(t){e.addLocalTrackToTrackMap({enabled:t.enabled,participantID:e.selfParticipantID,trackID:t.trackId,type:t.contentType})})}),r("promiseDone")((e||(e=n("Promise"))).all(a),o.onSuccess,o.onError)}}function u(e,t){if(t.type==="addLocalTracks"){var n=t.payload.tracks;o("ZenonScreenShare").isScreenSharingTrack(n)&&(r("promiseDone")(e.peerConnectionManager.addLocalTracks(n,e.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode(),e.callMedia)),e.updateConnectionModel(function(e){n.forEach(function(t){e.addLocalTrackToTrackMap({enabled:t.enabled,participantID:e.selfParticipantID,trackID:t.trackId,type:t.contentType})})}))}}function c(e,t){if(t.type!=="initiatePeerConnectionRestarting")return{};var n=e.bufferTimeout,a=e.peerConnectionManager,i=e.secondaryPeerConnectionManager;window.clearTimeout(n),r("promiseDone")(i.restart()),r("promiseDone")(i.setLocalMediaStateVersion(a.getLocalMediaStateVersion()));var l=e.signalingClient.getSignalingModel().getMediaModeManager(),s=l.getMediaMode();r("promiseDone")(i.addLocalTracks(Array.from(a.getTracks().values()).filter(function(e){return!e.remote}),s,e.callMedia));var u=t.payload.hasRemoteOffer,c=s==="sfu",d=c||!u;return e.secondaryPeerConnectionManager.setShouldEstablishDataChannel(d),a.setIceRestartEligible(!1),(c||!o("ZenonBrowsers").isSctpdataChannelDisabled())&&a.getDataChannelLabels().forEach(function(e){var t=a.getDataChannelOptions(e);r("promiseDone")(i.createDataChannel(e,s,t))}),e.secondaryPeerConnectionManager.getSupportsSimulcastOverSignaling()&&r("promiseDone")(e.secondaryPeerConnectionManager.createDataMessageSubscription("signalingVideoUploadUpdate",function(t){return e.secondaryPeerConnectionManager.onSimulcastSignalingDataMessage(t)})),u||r("promiseDone")(i.applyLocalSdp()),l.onInitiatePeerConnectionRestarting(),{activePeerConnection:"secondary",bufferTimeout:null}}function d(t,o){if(!(o.type!=="removeLocalTrack"&&o.type!=="initiateRemoveLocalTrack")){var a=[],i=o.payload.trackID;a.push(t.peerConnectionManager.removeLocalTrack(i)),a.push(t.peerConnectionManager.applyLocalSdp()),t.updateConnectionModel(function(e){e.removeLocalTrackFromTrackMap(i)}),r("promiseDone")((e||(e=n("Promise"))).all(a),o.onSuccess,o.onError)}}function m(e,t){if(t.type==="removeLocalTrack"){var n=t.payload.trackID;r("promiseDone")(e.peerConnectionManager.removeLocalTrack(n),t.onSuccess,t.onError),e.updateConnectionModel(function(e){e.removeLocalTrackFromTrackMap(n)})}}function p(e,t){if(t.type==="replaceLocalTrack"){var n=t.payload,o=n.preserveOriginal,a=n.replacementTrack,i=n.trackIDToReplace;o!=null?r("promiseDone")(e.peerConnectionManager.replaceLocalTrack(i,a,o),t.onSuccess,t.onError):r("promiseDone")(e.peerConnectionManager.replaceLocalTrack(i,a),t.onSuccess,t.onError),e.updateConnectionModel(function(e){e.removeLocalTrackFromTrackMap(i),e.addLocalTrackToTrackMap({enabled:a.enabled,participantID:e.selfParticipantID,trackID:a.trackId,type:a.contentType})})}}l.onAddLocalTracks=s,l.onAddScreenShareLocalTrack=u,l.onInitiatePeerConnectionRestarting=c,l.onRemoveLocalTrack=d,l.onRemoveScreenShareLocalTrack=m,l.onReplaceLocalTrack=p}),98);
__d("ZenonConnectionSdpSetState",["ZenonMWMessageTypes","ZenonParticipantState","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t.type==="connectionEstablished"&&(r("promiseDone")(e.signalingClient.sendClientEvent(o("ZenonMWMessageTypes").ZenonMWClientEventType.MEDIA_CONNECTED)),e.updateConnectionModel(function(e){e.updateParticipantState(e.selfParticipantID,o("ZenonParticipantState").ZenonParticipantState.CONNECTED),e.updatePreferredCaptureConfigs()}),e.logEvent({name:"callConnected"}),e.logEvent({name:"connectionReady"}))}l.onConnectionEstablished=e}),98);
__d("RTCIceCandidate",[],(function(t,n,r,o,a,i){"use strict";var e=window.RTCIceCandidate||window.mozRTCIceCandidate;i.default=e}),66);
__d("ZenonPeerConnectionConstants",[],(function(t,n,r,o,a,i){"use strict";var e="SCTP_MEDIA_SERVER_ID",l=new Set(["connected","completed"]),s=new Set(["disconnected","failed"]),u=new Set(["new","checking","closed"]);i.SCTP_MEDIA_SERVER_ID=e,i.CONNECTED_STATES=l,i.DISCONNECTED_STATES=s,i.INDETERMINANT_STATES=u}),66);
__d("ZenonSCTPConstants",[],(function(t,n,r,o,a,i){"use strict";var e="data",l="signaling_channel",s="media_server_failover",u="media_subscriptions",c="sctp_emoji_reaction",d="sctp_raise_hand",m="sctp_polls",p="render_resolution",_="simulcast",f="E2eeKeyMediaChannel",g="E2eeKey",h="nodeid_notification",y="rt.raise_hands.ctrl.u",C="rt.raise_hands.uot",b="genai_media_stats",v="genai_connect_state",S="genai_state_delivery",R="genai_client_input",L="genai_user_context",E=new Set([l,s,u,_,h]),k=new Set([y,C]);i.SCTP_DATA_TOPIC=e,i.SCTP_SIGNALING_TOPIC=l,i.SCTP_FAILOVER_TOPIC=s,i.SCTP_MEDIA_SUBSCRIPTIONS=u,i.SCTP_EMOJI_REACTIONS=c,i.SCTP_RAISE_HAND=d,i.SCTP_ROOMS_POLLS=m,i.SCTP_RRR=p,i.SIMULCAST_TOPIC=_,i.E2EE_DATA_MESSAGE_MEDIA_CHANNEL_TOPIC=f,i.E2EE_DATA_MESSAGE_TOPIC=g,i.NODEID_NOTIFICATION_TOPIC=h,i.RAISE_HANDS_CONTROL_TOPIC=y,i.RAISE_HANDS_UNORDERED_TOPIC=C,i.GENAI_MEDIA_STATS_TOPIC=b,i.GENAI_CONNECT_STATE_TOPIC=v,i.GENAI_STATE_DELIVERY_TOPIC=S,i.GENAI_CLIENT_INPUT_TOPIC=R,i.GENAI_USER_CONTEXT_TOPIC=L,i.SFU_ONLY_DATA_CHANNELS=E,i.P2P_ALLOWED_DATA_CHANNELS=k}),66);
__d("ZenonConnectionSharedActions",["DateConsts","Promise","RTCIceCandidate","ZenonActorHooks","ZenonAppProvider","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonDismissReason","ZenonE2ee","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonParticipantState","ZenonPeerConnectionConstants","ZenonSCTPConstants","ZenonTransportType","performanceNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=1*o("DateConsts").MS_PER_SEC;function c(e,t){if(t.type==="addParticipants"){var n=!1,a=t.payload,i=a.groupThreadId,l=a.usersToRing;e.updateConnectionModel(function(e){var t=e.getConsolidatedParticipantStates();l.forEach(function(r){V(r,t)||(e.updateParticipantState(r,o("ZenonParticipantState").ZenonParticipantState.CONTACTING),n=!0)})}),n?r("promiseDone")(e.signalingClient.sendAddParticipantsMessage(l,i),t.onSuccess,t.onError):t.onSuccess()}}function d(e,t){if(t.type==="answerReady"){var n=t.payload,o=n.mediaStates,a=n.sdp;e.logEvent({name:"answerSent"}),r("promiseDone")(e.signalingClient.sendSdp(a,o))}}function m(e,t){if(t.type==="capabilitiesReceived"){var n=t.payload.capabilities;e.updateConnectionModel(function(e){e.updateCurrentUserCapabilities(n)})}}function p(e,t){if(t.type==="clientInfoReceived"){var n=t.payload,r=n.actorRepresentatives,a=n.mediaPath,i=n.userCapabilities;e.updateConnectionModel(function(e){e.updateAllParticipantsCapabilities(i)}),e.updateConnectionModel(function(e){r.forEach(function(t,n){e.actorRepresentatives.set(n,t)})}),a!==o("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN&&e.logEvent({mediaPath:a,name:"setMediaPath"})}}function _(e,t){if(!(t.type!=="connectionDestroyed"||t.payload.error===null)){var n=o("ZenonDismissReason").mediaErrorToDismissReason(t.payload.error);e.updateConnectionModel(function(e){e.updateParticipantState(e.selfParticipantID,o("ZenonParticipantState").ZenonParticipantState.DISCONNECTED),e.dismissDetails={dismissReason:n}}),r("promiseDone")(r("ZenonE2ee").freeCallScopedResources()),r("promiseDone")(e.signalingClient.sendDismiss(n)),e.logEvent({name:"connectionDestroyed"}),e.logEvent({endCallReason:n,endCallSubreason:t.payload.error?t.payload.error:"",isRemoteEnded:!1,name:"callEnded"})}}function f(e,t){if(t.type!=="connectionDropped")return{};var n=(s||(s=r("performanceNow")))();return e.updateConnectionModel(function(e){V(e.selfParticipantID,e.getConsolidatedParticipantStates())&&e.updateParticipantState(e.selfParticipantID,o("ZenonParticipantState").ZenonParticipantState.CONNECTING)}),{disconnectTime:n}}function g(e,t){if(t.type!=="createDataMessageSubscription")return{};var n=t.payload.dataChannelLabel,a=t.payload.messageHandler,i=t.payload.onSctpChannelOpenCallback,l=new Map(e.dataMessageSubscriptions),s=new Set(l.get(n));s.add(a),l.set(n,s);var u=e.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode(),c=e.peerConnectionManager.getDataChannelOpenCount()>0,d=u==="sfu"||u==="p2p"&&o("ZenonBrowsers").isMidCallSCTPSupported()||c;return d&&r("promiseDone")(e.peerConnectionManager.createDataChannel(n,u,t.payload.dataChannelOptions)),i!=null&&e.peerConnectionManager.subscribeDataChannelOpen(i,n),t.onSuccess(),{dataMessageSubscriptions:l}}function h(e,t){if(t.type==="dataMessageReceived"){var n=e.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode(),r=t.payload,a=r.dataChannelLabel,i=r.dataMessage,l=r.peerConnectionRole;if(!(n==="p2p"&&l!=null&&!o("ZenonSCTPConstants").P2P_ALLOWED_DATA_CHANNELS.has(a))){var s=e.dataMessageSubscriptions.get(a);s&&s.forEach(function(e){return e(i)})}}}function y(t,a){if(a.type==="endConnection"){var i=(s||(s=r("performanceNow")))(),l=a.payload,c=l.detailedReasonFromMW,d=l.dismissReason,m=l.dismissReasonSetByRemote,p=l.dismissSubreason,_=l.shouldInformPeer;t.updateConnectionModel(function(e){e.getConsolidatedParticipantStates().forEach(function(t,n){e.updateParticipantState(n,o("ZenonParticipantState").ZenonParticipantState.DISCONNECTED)}),e.dismissDetails={detailedReasonFromMW:c,dismissReason:d,dismissSubreason:p}});var f=[];f.push(r("ZenonE2ee").freeCallScopedResources()),_&&f.push(t.signalingClient.sendDismiss(d));var g=p;i-t.disconnectTime<u&&(g=g!=null?g.concat(", disconnect less than 1 second"):"disconnect less than 1 second"),t.logEvent({endCallReason:d,endCallSubreason:g,isRemoteEnded:m,name:"callEnded"}),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Issuing end call to peer connection due to dismiss received"}),f.push(t.peerConnectionManager.end(!0)),r("promiseDone")((e||(e=n("Promise"))).all(f),a.onSuccess,a.onError)}}function C(e,t){t.type==="forceEncodingEnabled"&&r("promiseDone")(e.peerConnectionManager.forceEncodingEnabled(t.payload.enabled),t.onSuccess,t.onError)}function b(e,t){var n,o;if(t.type==="iceCandidateReady"){var a=t.payload.candidate,i={candidateSdpString:a.candidate,sdpMid:(n=a.sdpMid)!=null?n:"",sdpMLineIndex:(o=a.sdpMLineIndex)!=null?o:0};r("promiseDone")(e.signalingClient.sendIceCandidate(i))}}function v(e,t){if(t.type==="iceCandidateReceived"){var n=t.payload,o={candidate:n.candidateSdpString,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex},a=e.activePeerConnection,i=e.peerConnectionManager,l=e.secondaryPeerConnectionManager,s=a==="primary"?i:l;r("promiseDone")(s.applyRemoteIceCandidate(new(r("RTCIceCandidate"))(o)))}}function S(e,t){if(t.type==="mediaStateUpdateProcessing"){var n=t.payload,o=n.enabled,a=n.isRemote,i=n.trackID;a?r("promiseDone")(o?e.peerConnectionManager.unmuteRemoteTrack(i):e.peerConnectionManager.muteRemoteTrack(i),t.onSuccess,t.onError):r("promiseDone")(o?e.peerConnectionManager.unmuteLocalTrack(i):e.peerConnectionManager.muteLocalTrack(i),t.onSuccess,t.onError)}}function R(e,t){t.type==="localMediaStateUpdateReady"&&r("promiseDone")(e.signalingClient.sendMediaUpdate(t.payload.mediaStates),t.onSuccess,t.onError)}function L(e,t){t.type==="mediaUpdateReceived"&&r("promiseDone")(e.peerConnectionManager.applyMediaUpdate(t.payload.mediaStates))}function E(e,t){if(t.type==="mediaUpdateResponseReceived"){var n=t.payload,a=n.cancelNegotiations,i=n.responseStatusCode,l=n.responseSubCode,s=n.retryAfter;if(l!=null&&i!==o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK){a&&r("promiseDone")(e.peerConnectionManager.cancelPendingNegotiation());var u=new Set([o("ZenonMWMessageTypes").ZenonMWResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING,o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_PATH,o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_MEDIA_STATUS,o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CONFLICTING_SESSION_DESCRIPTION,o("ZenonMWMessageTypes").ZenonMWResponseSubCode.UNKNOWN]);u.has(l)&&r("promiseDone")(e.peerConnectionManager.localMediaStateUpdateRetry(s!=null?s:0))}else e.peerConnectionManager.clearRetryCount()}}function k(e,t){if(t.type==="addLocalTracks"){var n=t.onError,o=t.onSuccess,a=t.payload,i={onError:n,onSuccess:o,payload:a,type:"initiateAddLocalTracks"};r("promiseDone")(e.signalingClient.initiateClientRenegotiation(i))}else if(t.type==="removeLocalTrack"){var l=t.onError,s=t.onSuccess,u=t.payload,c={onError:l,onSuccess:s,payload:u,type:"initiateRemoveLocalTrack"};r("promiseDone")(e.signalingClient.initiateClientRenegotiation(c))}}function I(e,t){t.type==="offerReady"&&(t.payload.connectionDirection==="incoming"&&e.logEvent({name:"answerSent"}),r("promiseDone")(e.signalingClient.sendSdp(t.payload.sdp,t.payload.mediaStates)))}function T(e,t){t.type==="offerReady"&&(r("promiseDone")(e.peerConnectionManager.cancelPendingNegotiation()),r("promiseDone")(e.peerConnectionManager.localMediaStateUpdateRetry(0)))}function D(e,t){if(t.type==="participantUpdateReceived"){var n=t.payload,r=n.participantStates,o=n.sctpUserIdNodeIdMap;e.updateConnectionModel(function(t){t.updateFromUserIdToNodeIdMap(o),r.forEach(function(n,r){r!==t.selfParticipantID&&(t.updateParticipantState(r,n),H(n)&&e.logEvent({name:"atLeastOneParticipantAlerted"}),G(n)&&(e.logEvent({name:"atLeastOneParticipantAnswered"}),t.updatePreferredCaptureConfigs()))})}),j(e.getConnectionModel())}}function x(e,t){if(t.type!=="removeDataMessageSubscription")return{};var n=t.payload.dataChannelLabel,r=t.payload.messageHandler,o=new Map(e.dataMessageSubscriptions),a=new Set(o.get(n));return a.delete(r),o.set(n,a),t.onSuccess(),{dataMessageSubscriptions:o}}function $(e,t){if(t.type==="removeParticipants"){var n=t.payload.usersToRemove;r("promiseDone")(e.signalingClient.sendRemoveParticipantsRequest(n),t.onSuccess,t.onError)}}function P(e,t){if(t.type==="connectionRoomUpdateReceived"){var n=t.payload.context;e.updateConnectionModel(function(e){e.collisionContext=n})}}function N(e,t){if(t.type==="sdpReceived"){var n=t.payload,o=n.e2eeServerState,a=n.mediaStates,i=n.messageID,l=n.onProcessed,s=n.renegotiationOffer,u=n.sdp,c=n.sdpOriginLocalId,d=n.source;r("promiseDone")(e.peerConnectionManager.applyRemoteSdp(u,a,d,s,c,l,i,o)),e.updateConnectionModel(function(e){e.updateTrackMapFromMediaStates(a.tracks,u.type==="pranswer"),e.updateExistingParticipantsFromMediaStateTracks(a.tracks);var t=[],n=e.getRemoteUserToTracksMap();n.forEach(function(e,n){var r=Array.from(e.entries());r=r.filter(function(e){var t=e[0],n=e[1];return n.type!=="audio"}),r.length>0&&t.push(n)}),U(e,t)}),u.type==="answer"?e.logEvent({name:"answerSdpReceived"}):u.type==="offer"?e.logEvent({name:"offerSdpReceived"}):u.type==="pranswer"&&e.logEvent({name:"prAnswerSdpReceived"});var m=z(e.currentSubscriptionRequest,e);X(m,e,t)}}function M(e,t){var n,a,i,l;if(t.type==="sendGenericDataMessage"){var s=t.onError,u=t.onSuccess,c=t.payload,d=c.data,m=c.recipients,p=c.topic,_=c.transportType;switch(_){case o("ZenonTransportType").ZenonTransportType.SIGNALING:r("promiseDone")(W(e,p,d,(n=m.recipientIDs)!=null?n:[],(a=m.serviceRecipients)!=null?a:[]),u,s);break;case o("ZenonTransportType").ZenonTransportType.SCTP:r("promiseDone")(q(e,p,d,m),u,s);break;case o("ZenonTransportType").ZenonTransportType.SIGNALING_AND_SCTP:r("promiseDone")(W(e,p,d,(i=m.recipientIDs)!=null?i:[],(l=m.serviceRecipients)!=null?l:[]),u,s),q(e,p,d,m);break}}}function w(e,t){if(t.type==="stateSyncUnsubscribe"){var n=t.payload.topic;r("promiseDone")(e.signalingClient.sendStateSyncUnsubscribe(n),t.onSuccess,t.onError)}}function A(e,t){if(t.type==="stateSyncUpdate"){var n=t.payload,o=n.inputData,a=n.topic;r("promiseDone")(e.signalingClient.sendStateSyncUpdate(a,o),t.onSuccess,t.onError)}}function F(e,t){if(t.type==="stopLocalTrack"){var n=t.payload.trackID;r("promiseDone")(e.peerConnectionManager.stopLocalTrack(n),t.onSuccess,t.onError)}}function O(e,t){if(t.type!=="subscriptionRequest")return{};var n=t.payload;if(JSON.stringify(n)!==JSON.stringify(e.currentSubscriptionRequest)){var r=[];n.subscriptions.forEach(function(e){r.push(e.user)}),e.updateConnectionModel(function(e){U(e,r)})}var o=z(n,e);return X(o,e,t),{currentSubscriptionRequest:n}}function B(e,t){if(t.type==="userApprovalRequest"){var n=t.payload,o=n.approvalStatus,a=n.targetUsers;r("promiseDone")(e.signalingClient.sendUsersApprovalRequest(o,a),t.onSuccess,t.onError)}}function W(e,t,n,r,o){return e.signalingClient.sendGenericDataMessage(t,n,r,o)}function q(t,r,a,i){return Y(r,t)?t.peerConnectionManager.sendDataMessage(r,{message:a,recipients:i,sender:o("ZenonActorHooks").ZenonActor.getID()}):(e||(e=n("Promise"))).resolve()}function U(e,t){e.clearAllUserVideoSubscriptions(),t.forEach(function(t){e.updateUserVideoSubscription(t,!0)})}function V(e,t){var n=t.get(e);return n===o("ZenonParticipantState").ZenonParticipantState.CONNECTED}function H(e){switch(e){case o("ZenonParticipantState").ZenonParticipantState.UNKNOWN:case o("ZenonParticipantState").ZenonParticipantState.CONTACTING:case o("ZenonParticipantState").ZenonParticipantState.UNREACHABLE:case o("ZenonParticipantState").ZenonParticipantState.PARTICIPANT_LIMIT_REACHED:case o("ZenonParticipantState").ZenonParticipantState.RING_TYPE_UNSUPPORTED:return!1;case o("ZenonParticipantState").ZenonParticipantState.RINGING:case o("ZenonParticipantState").ZenonParticipantState.CONNECTING:case o("ZenonParticipantState").ZenonParticipantState.CONNECTED:case o("ZenonParticipantState").ZenonParticipantState.DISCONNECTED:case o("ZenonParticipantState").ZenonParticipantState.IN_ANOTHER_CALL:case o("ZenonParticipantState").ZenonParticipantState.NO_ANSWER:case o("ZenonParticipantState").ZenonParticipantState.REJECTED:case o("ZenonParticipantState").ZenonParticipantState.CONNECTION_DROPPED:case o("ZenonParticipantState").ZenonParticipantState.PENDING_APPROVAL:case o("ZenonParticipantState").ZenonParticipantState.APPROVED:case o("ZenonParticipantState").ZenonParticipantState.FAILED_APPROVAL:case o("ZenonParticipantState").ZenonParticipantState.HANGUP_IN_WAITING_ROOM:case o("ZenonParticipantState").ZenonParticipantState.ACCEPTING:case o("ZenonParticipantState").ZenonParticipantState.ADDING:case o("ZenonParticipantState").ZenonParticipantState.APPROVING:case o("ZenonParticipantState").ZenonParticipantState.DENYING:case o("ZenonParticipantState").ZenonParticipantState.PRECONNECTING:case o("ZenonParticipantState").ZenonParticipantState.REMOVING:case o("ZenonParticipantState").ZenonParticipantState.RECONNECTING:return!0}}function G(e){switch(e){case o("ZenonParticipantState").ZenonParticipantState.UNKNOWN:case o("ZenonParticipantState").ZenonParticipantState.CONTACTING:case o("ZenonParticipantState").ZenonParticipantState.UNREACHABLE:case o("ZenonParticipantState").ZenonParticipantState.PARTICIPANT_LIMIT_REACHED:case o("ZenonParticipantState").ZenonParticipantState.RING_TYPE_UNSUPPORTED:case o("ZenonParticipantState").ZenonParticipantState.RINGING:case o("ZenonParticipantState").ZenonParticipantState.DISCONNECTED:case o("ZenonParticipantState").ZenonParticipantState.IN_ANOTHER_CALL:case o("ZenonParticipantState").ZenonParticipantState.NO_ANSWER:case o("ZenonParticipantState").ZenonParticipantState.REJECTED:case o("ZenonParticipantState").ZenonParticipantState.PENDING_APPROVAL:case o("ZenonParticipantState").ZenonParticipantState.APPROVED:case o("ZenonParticipantState").ZenonParticipantState.FAILED_APPROVAL:case o("ZenonParticipantState").ZenonParticipantState.HANGUP_IN_WAITING_ROOM:case o("ZenonParticipantState").ZenonParticipantState.ACCEPTING:case o("ZenonParticipantState").ZenonParticipantState.ADDING:case o("ZenonParticipantState").ZenonParticipantState.APPROVING:case o("ZenonParticipantState").ZenonParticipantState.DENYING:case o("ZenonParticipantState").ZenonParticipantState.PRECONNECTING:case o("ZenonParticipantState").ZenonParticipantState.REMOVING:return!1;case o("ZenonParticipantState").ZenonParticipantState.CONNECTING:case o("ZenonParticipantState").ZenonParticipantState.RECONNECTING:case o("ZenonParticipantState").ZenonParticipantState.CONNECTED:case o("ZenonParticipantState").ZenonParticipantState.CONNECTION_DROPPED:return!0}}function z(e,t){var n,a=t.getConnectionModel(),i=e==null?void 0:e.subscriptions,l=(n=e==null?void 0:e.includeDominantSpeaker)!=null?n:!0,s;i==null?s=K(a):s=Q(i,a);var u=s,c=u.trackSubscriptions,d=u.warnings;return d.length>0&&r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"[ZP] Subscription request warnings: "+JSON.stringify(d),errorDomain:"ZenonConnectionSharedActions_makeSubscriptionList"}),l&&c.push({type:o("ZenonMWMessageTypes").ZenonMWSubscriptionType.DOMINANT_SPEAKER}),c}function j(e){var t=e.getConsolidatedParticipantStates();try{var n=Object.fromEntries(t),o="[ZP] Consolidated participant states are: "+JSON.stringify(n);r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:o})}catch(e){r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"[ZP] failed to stringify consolidated state"})}}function K(e){var t=e.getRemoteUserToTracksMap();t.forEach(function(e,t){var n=t+": \n	";e.forEach(function(e,t){n+=JSON.stringify(Object.entries(e))+"\n"}),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"[ZP] usersToTracksMap in subscribe to All Users "+n})});var n=[],a=[];return t.forEach(function(t,r){e.clearFailedSubscriptionTimer(r);var a=Array.from(t.entries());a=a.filter(function(e){var t=e[0],n=e[1];return n.type!=="audio"}),a.forEach(function(e){var t=e[0],r=e[1];n.push({options:{videoQuality:o("ZenonMWMessageTypes").ZenonMWVideoQuality.MEDIUM},trackId:t,type:o("ZenonMWMessageTypes").ZenonMWSubscriptionType.TRACK})})}),{trackSubscriptions:n,warnings:a}}function Q(e,t){var n=t.getRemoteUserToTracksMap();n.forEach(function(e,t){var n=t+": \n	";e.forEach(function(e,t){n+=JSON.stringify(Object.entries(e))+"\n"}),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"[ZP] usersToTracksMap in subscribe to Remote Users "+n})});var a=[],i=[];return e.forEach(function(e){var l=e.user,s=e.videoQuality;if(l===t.selfParticipantID){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"[ZP] Forfeiting subscription request for self user ID: "+l});return}var u=n.get(l);if(!u){a.push({msg:"userToTrackMap not found",user:l}),t.startFailedSubscriptionTimer(l);return}if(u.size===0){a.push({msg:"userToTrackMap is empty",user:l}),t.startFailedSubscriptionTimer(l);return}t.clearFailedSubscriptionTimer(l);var c=Array.from(u.entries()),d=c.filter(function(e){var t=e[0],n=e[1];return n.type!=="audio"&&n.enabled===!1});d.length>0&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"[ZP] Subscribing to muted video track: "+JSON.stringify(d)}),c=c.filter(function(e){var t=e[0],n=e[1];return n.type!=="audio"}),c.forEach(function(e){var t=e[0],n=e[1];i.push({options:{videoQuality:s},trackId:t,type:o("ZenonMWMessageTypes").ZenonMWSubscriptionType.TRACK})})}),{trackSubscriptions:i,warnings:a}}function X(e,t,n){if(o("ZenonAppProvider").isOculusCastingSite()){r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__E2EE,checkpoint:"[ZP] dropping subscription request"});return}var a=t.peerConnectionManager.getDataChannelState(o("ZenonSCTPConstants").SCTP_MEDIA_SUBSCRIPTIONS)==="open",i=a&&Y(o("ZenonSCTPConstants").SCTP_MEDIA_SUBSCRIPTIONS,t);if(i){var l=JSON.stringify({subscriptionMessagePayload:e}),s={message:l,recipients:{recipientIDs:[o("ZenonPeerConnectionConstants").SCTP_MEDIA_SERVER_ID]},sender:t.getConnectionModel().selfParticipantID};r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__E2EE,checkpoint:"[ZP][SCTP] sending subscription request: "+l}),r("promiseDone")(t.peerConnectionManager.sendDataMessage(o("ZenonSCTPConstants").SCTP_MEDIA_SUBSCRIPTIONS,s),n.onSuccess,n.onError)}i||r("promiseDone")(t.signalingClient.sendSubscriptionRequest(e),n.onSuccess,n.onError)}function Y(e,t){var n=t.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode(),r=t.activePeerConnection==="primary",a=o("ZenonSCTPConstants").SFU_ONLY_DATA_CHANNELS.has(e),i=a&&n==="p2p",l=a&&!r&&n==="sfu";return!(i||l)}l.onAddParticipants=c,l.onAnswerReady=d,l.onCapabilitiesReceived=m,l.onClientInfoReceived=p,l.onConnectionDestroyed=_,l.onConnectionDropped=f,l.onCreateDataMessageSubscription=g,l.onDataMessageReceived=h,l.onEndConnection=y,l.onForceEncodingEnabled=C,l.onIceCandidateReady=b,l.onIceCandidateReceived=v,l.onMediaStateUpdateProcessing=S,l.onLocalMediaStateUpdateReady=R,l.onMediaUpdateReceived=L,l.onMediaUpdateResponseReceived=E,l.initiateClientRenegotiation=k,l.onOfferReady=I,l.onOfferReadyCancel=T,l.onParticipantUpdateReceivedEvent=D,l.onRemoveDataMessageSubscription=x,l.onRemoveParticipants=$,l.onRoomContextUpdateReceived=P,l.onSdpReceived=N,l.onSendGenericDataMessage=M,l.onStateSyncUnsubscribe=w,l.onStateSyncUpdate=A,l.onStopLocalTrack=F,l.onSubscriptionRequest=O,l.onUserApprovalRequest=B,l.makeSubscriptionList=z,l.sendSubscriptions=X}),98);
__d("ZenonConnectionTerminatedState",["ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){n.type==="sdpReceived"&&(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_signaling","received_sdp_request_in_connection_terminated_state")}l.onSdpReceived=s}),98);
__d("ZenonRequestedMediaType",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["Audio","Video","Audiovideo","None","Unknown"]),l=e;i.default=l}),66);
__d("ZenonDeferrableStateMachine",["DateConsts","clearTimeout","setTimeout","xstate"],(function(t,n,r,o,a,i,l){"use strict";var e=30*o("DateConsts").MS_PER_SEC;function s(t,n){var a=n===void 0?{}:n,i=a.deferTimeout,l=a.onDeferTimeout,s=[],u=new Map,c=o("xstate").interpret(t.withConfig({actions:{defer:function(n,o){s.push(o),l&&u.set(o,r("setTimeout")(function(){l(o)},i!=null?i:e))}}})).onTransition(function(e){var t;if(e.value!==((t=e.history)==null?void 0:t.value)){var n=s;for(s=[];n.length>0;){var o=n.shift();c.send(o),r("clearTimeout")(u.get(o)),u.delete(o)}}}).start();return c}l.interpret=s}),98);
__d("ZenonMWMessageMap",["ZenonMWMessageTypes"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=Object.freeze((e={},e[(s=o("ZenonMWMessageTypes")).ZenonMWSignalingPayloadType.JOIN]="JOIN",e[s.ZenonMWSignalingPayloadType.SERVER_MEDIA_UPDATE]="SERVER_MEDIA_UPDATE",e[s.ZenonMWSignalingPayloadType.ICE_CANDIDATE]="ICE_CANDIDATE",e[s.ZenonMWSignalingPayloadType.HANGUP]="HANGUP",e[s.ZenonMWSignalingPayloadType.RING]="RING",e[s.ZenonMWSignalingPayloadType.DISMISS]="DISMISS",e[s.ZenonMWSignalingPayloadType.CONFERENCE_STATE]="CONFERENCE_STATE",e[s.ZenonMWSignalingPayloadType.ADD_PARTICIPANTS]="ADD_PARTICIPANTS",e[s.ZenonMWSignalingPayloadType.SUBSCRIPTION]="SUBSCRIPTION",e[s.ZenonMWSignalingPayloadType.CLIENT_MEDIA_UPDATE]="CLIENT_MEDIA_UPDATE",e[s.ZenonMWSignalingPayloadType.DATA_MESSAGE]="DATA_MESSAGE",e[s.ZenonMWSignalingPayloadType.REMOVE_PARTICIPANTS]="REMOVE_PARTICIPANTS",e[s.ZenonMWSignalingPayloadType.PING]="PING",e[s.ZenonMWSignalingPayloadType.NOTIFY]="NOTIFY",e[s.ZenonMWSignalingPayloadType.CONNECT]="CONNECT",e[s.ZenonMWSignalingPayloadType.CLIENT_EVENT]="CLIENT_EVENT",e[s.ZenonMWSignalingPayloadType.UNSUBSCRIBE]="UNSUBSCRIBE",e[s.ZenonMWSignalingPayloadType.UPDATE]="UPDATE",e[s.ZenonMWSignalingPayloadType.APPROVAL]="APPROVAL",e[s.ZenonMWSignalingPayloadType.WAKEUP]="WAKEUP",e)),c=u;l.default=c}),98);
__d("ZenonMWMessageQPLLogger",["DateConsts","QPLMsgTypesSitevarConfig","QPLUserFlow","ZenonLoggingUtils","ZenonMWMessageMap","ZenonMWMessageReliabilityLogTypes","ZenonTransportChannelStatus","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=30*o("DateConsts").MS_PER_SEC,s=new Map,u=new(r("ZenonTransportChannelStatus"));function c(e,t,n){var a,i,l,s,u,c;if(o("ZenonLoggingUtils").shouldAllowLogging()){var d=e.jsonPayload.header,L=r("ZenonMWMessageMap")[d.type].toLowerCase();if(r("QPLMsgTypesSitevarConfig").QPL_MSG_TYPES.includes(L)){var E=m(d.transactionId);switch(t){case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:p(E,L,{connectionState:(a=n==null?void 0:n.connectionState)!=null?a:"",peerConnectionState:(i=n==null?void 0:n.peerConnectionState)!=null?i:"",signalingState:(l=n==null?void 0:n.signalingState)!=null?l:""},e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:_(E);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:f(E,e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:g(E,e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:h(E,e,n==null?void 0:n.errorMessage);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:y(E,L,{connectionState:(s=n==null?void 0:n.connectionState)!=null?s:"",peerConnectionState:(u=n==null?void 0:n.peerConnectionState)!=null?u:"",signalingState:(c=n==null?void 0:n.signalingState)!=null?c:""},e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST:C(E);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED:b(E,n==null?void 0:n.errorMessage);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:v(E,e);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT:S(E,n==null?void 0:n.smEvent);return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT:R(E,n==null?void 0:n.smEvent);return;default:return}}}}function d(e,t){o("ZenonLoggingUtils").shouldAllowLogging()&&r("QPLUserFlow").addAnnotations(r("qpl")._(398988976,"737"),{string:babelHelpers.extends({},t)},{instanceKey:+e})}function m(e){var t=isNaN(+e)?0:+e,n=9223372036854776e3;return Math.round(t%n)}function p(t,n,o,a){var i=u.getTransportName()+"State",l=babelHelpers.extends({},o,{messageType:n});if(l[i]=u.getConnectionState(),r("QPLUserFlow").start(r("qpl")._(398988976,"737"),{annotations:{int:{retryCount:a.jsonPayload.header.retryCount},int_array:{messageTags:a.jsonPayload.header.messageTags},string:l},instanceKey:t,timeoutInMs:e}),a.jsonPayload.body.serverMediaUpdateRequest){var c=a.jsonPayload.body.serverMediaUpdateRequest,d=c.answer,m=c.offer,p=c.update;r("QPLUserFlow").addAnnotations(r("qpl")._(398988976,"737"),{string:{sdpType:m?"offer":d?"answer":p?"delta":"empty"}},{instanceKey:t})}var _=function(n){r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),u.getTransportName()+"_"+n,{instanceKey:t})},f=u.addListener("connectionStateEvent",_);s.set(t,f)}function _(e){r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"processed_request",{instanceKey:e})}function f(e,t){var n=t.jsonPayload.header,o=n.responseStatusCode,a=n.responseSubCode;r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"sending_response",{instanceKey:e}),r("QPLUserFlow").addAnnotations(r("qpl")._(398988976,"737"),{int:{responseStatusCode:o,responseSubCode:a}},{instanceKey:e})}function g(e,t){var n=t.jsonPayload.header,o=n.responseStatusCode,a=n.responseSubCode;r("QPLUserFlow").endSuccess(r("qpl")._(398988976,"737"),{annotations:{int:{responseStatusCode:o,responseSubCode:a}},instanceKey:e});var i=s.get(e);i&&(u.removeListener(i),s.delete(e))}function h(e,t,n){var o=t.jsonPayload.header,a=o.responseStatusCode,i=o.responseSubCode;r("QPLUserFlow").endFailure(r("qpl")._(398988976,"737"),"send_response_failed",{annotations:{int:{responseStatusCode:a,responseSubCode:i},string:{errorMessage:n}},instanceKey:e});var l=s.get(e);l&&(u.removeListener(l),s.delete(e))}function y(t,n,o,a){var i=u.getTransportName()+"State",l=babelHelpers.extends({},o,{messageType:n});l[i]=u.getConnectionState(),r("QPLUserFlow").start(r("qpl")._(398988976,"737"),{annotations:{int:{retryCount:a.jsonPayload.header.retryCount},int_array:{messageTags:a.jsonPayload.header.messageTags},string:l},instanceKey:t,timeoutInMs:e})}function C(e){r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"sending_request",{instanceKey:e})}function b(e,t){r("QPLUserFlow").endFailure(r("qpl")._(398988976,"737"),"send_request_failed",{annotations:{string:{errorMessage:t}},instanceKey:e})}function v(e,t){var n=t.jsonPayload.header,o=n.responseStatusCode,a=n.responseSubCode;r("QPLUserFlow").endSuccess(r("qpl")._(398988976,"737"),{annotations:{int:{responseStatusCode:o,responseSubCode:a}},instanceKey:e})}function S(e,t){t!=null&&r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"sent_sm_event:"+t,{instanceKey:e})}function R(e,t){t!=null&&r("QPLUserFlow").addPoint(r("qpl")._(398988976,"737"),"processed_sm_event:"+t,{instanceKey:e})}l.log=c,l.updateState=d}),98);
__d("ZenonMWMessageReliabilityLogger",["ODS","ZenonMWMessageMap","ZenonMWMessageQPLLogger","ZenonMWMessageReliabilityLogTypes"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Map,u=new Map,c=new Map;function d(e){c.set(e,!0)}function m(e,t,n){var r=u.get(e);r&&k(r,t,n)}function p(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST)}function _(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST)}function f(e){v(e)||k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK)}function g(e){v(e)||k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION)}function h(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST)}function y(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_REQUEST)}function C(e){v(e)?k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE):k(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST)}function b(e,t){var n=v(e)?o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_RESPONSE_FAILED:o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SEND_REQUEST_FAILED;k(e,n,{errorMessage:t})}function v(e){var t=e.jsonPayload.header;return t.responseStatusCode!=null}function S(e){var t=isNaN(+e)?0:+e,n=9223372036854776e3;return Math.round(t%n)}function R(t,n){var a=t.jsonPayload.header,i=r("ZenonMWMessageMap")[a.type].toLowerCase(),l=v(t)?"response":"request";switch(n){case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_REQUEST:case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.RECEIVED_RESPONSE:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","receive_"+l+"_"+i),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSING_REQUEST:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","processing_"+l+"_"+i),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_REQUEST:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","processed_"+l+"_"+i),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENDING_RESPONSE:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","sending_"+l+"_"+i),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_TRANSLATION:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_translation_"+l+"_"+i),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.REQUEST_AFTER_NULL_CHECK:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","after_null_check_"+l+"_"+i),(e||(e=o("ODS"))).flush();return;case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_RESPONSE:case o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_REQUEST:(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","sent_"+l+"_"+i),(e||(e=o("ODS"))).flush();return;default:return}}var L={connectionState:"",peerConnectionState:"",signalingState:""};function E(e){var t=babelHelpers.extends({},L,e);if(L.connectionState!==t.connectionState||L.peerConnectionState!==t.peerConnectionState||L.signalingState!==t.signalingState){L=t;for(var n of s.keys())o("ZenonMWMessageQPLLogger").updateState(n,e)}}function k(e,t,n){var r,a=e.jsonPayload.header,i=(r=s.get(a.transactionId))!=null?r:new Set;s.set(a.transactionId,i),!(t!==o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT&&t!==o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT&&i.has(t))&&(i.add(t),u.set(a.transactionId,e),R(e,t),o("ZenonMWMessageQPLLogger").log(e,t,babelHelpers.extends({},n,L)))}l.setE2eeIsMandatedForCall=d,l.logEventForTxid=m,l.logReceivedMessage=p,l.logProcessingMessage=_,l.logMessageAfterNullCheck=f,l.logMessageAfterTranslation=g,l.logProcessedMessage=h,l.logSendingMessage=y,l.logSentMessage=C,l.logSendMessageFailed=b,l.updateState=E}),98);
__d("ZenonStateMachineBase",["ZenonAuditedCheckpointLogId","ZenonDebugLogger","ZenonDeferrableStateMachine","ZenonInfraActionsLogger","ZenonMWMessageReliabilityLogTypes","ZenonMWMessageReliabilityLogger","ZenonMWThriftMessageReliabilityLogger","xstate"],(function(t,n,r,o,a,i,l){"use strict";var e={actions:["defer"]},s=(function(){function e(e){var t=e.base,n=e.logging,a=e.machine;this.$1=n.name,this.$2=t.initState,this.loggingId=n.loggingId,this.$3=n.getTransactionId,this.$4=n.loggingStateName,this.$5=n.loggableEvents;var i={context:a.context,initial:a.initialState,states:a.states},l={guards:t.guards},s={onDeferTimeout:function(t){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"["+n.shortname+"] "+t.type+" was deferred for too long"})}},u=o("xstate").Machine(i,l);this.sm=o("ZenonDeferrableStateMachine").interpret(u,s)}var t=e.prototype;return t.processEvent=function(t){this.logEvent(t),this.sm.send(t)},t.logEvent=function(t,n){if(r("ZenonDebugLogger").getInstance().logStateMachine(this.$1,this.getState(),t.type,this.loggingId.toString(),n),this.$5.includes(t.type)){var e=this.$3(t);if(e!=null){var a={smEvent:this.$1+"."+t.type};o("ZenonMWMessageReliabilityLogger").logEventForTxid(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT,a),o("ZenonMWThriftMessageReliabilityLogger").logEventForTxid(e,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.SENT_SM_EVENT,a)}}},t.logTransaction=function(t,n){var e,r;if(o("ZenonMWMessageReliabilityLogger").updateState((e={},e[this.$4]=this.getState(),e)),o("ZenonMWThriftMessageReliabilityLogger").updateState((r={},r[this.$4]=this.getState(),r)),this.$5.includes(t.type)){var a=this.$3(t);if(a!=null){var i={smEvent:this.$1+"."+t.type};o("ZenonMWMessageReliabilityLogger").logEventForTxid(a,n,i),o("ZenonMWThriftMessageReliabilityLogger").logEventForTxid(a,n,i)}}},t.logTransition=function(t,n){var e;r("ZenonDebugLogger").getInstance().logStateMachineTransition(this.$1,t.changed,t.value,(e=t.history)==null?void 0:e.value,t.event.type,t.actions,this.loggingId.toString(),n)},t.getContext=function(){return this.sm.state.context},t.getState=function(){var e=this.sm.state.toStrings();return e.length>0?e[0]:this.$2},t.ifDroppedEvent=function(t,n){var e,r=t.actions,o=t.changed,a=t.event,i=t.value,l=(e=t.history)==null?void 0:e.value;(r==null||r.length===0)&&i===l&&!o&&n(a)},e})();l.defer=e,l.ZenonStateMachineBase=s}),98);
__d("ZenonConnectionStateMachine",["ZenonConnectionInitState","ZenonConnectionPeerConnectionRestartingState","ZenonConnectionSMGuards","ZenonConnectionSdpNegotiatedState","ZenonConnectionSdpSetState","ZenonConnectionSharedActions","ZenonConnectionTerminatedState","ZenonDebugLogger","ZenonInfraActionsLogger","ZenonMWMessageReliabilityLogTypes","ZenonRequestedMediaType","ZenonStateMachineBase","err","qpl","xstate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m={activePeerConnection:"primary",bufferTimeout:null,callMedia:r("ZenonRequestedMediaType").Unknown,currentSubscriptionRequest:null,dataMessageSubscriptions:new Map,disconnectTime:0},p={loggingStateName:"connectionState",name:"ConnectionStateMachine",shortname:"Connection"},_=(function(e){function t(t,n){var a;return n===void 0&&(n="init"),a=e.call(this,{base:{guards:o("ZenonConnectionSMGuards"),initState:"init"},logging:babelHelpers.extends({},p,{eventToLogTimeoutsOn:"sdpReceived",getTransactionId:function(t){var e;return(e=t.payload)==null?void 0:e.messageID},loggableEvents:["sdpReceived"],loggingId:+t.signalingClient.getSignalingModel().getSignalingID()}),machine:{context:babelHelpers.extends({},m,t),initialState:n,states:U}})||this,a.sm.onTransition(function(e){var n;r("ZenonInfraActionsLogger").updateCachedValues({connectionState:e.value}),a.logTransition(e),((n=e.history)==null?void 0:n.value)!==e.value&&t.updateConnectionModel(function(t){t.updateConnectionState(e.value)}),a.logTransaction(e.event,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT),a.ifDroppedEvent(e,function(e){return e.onError(r("err")("event was dropped: "+e.type))})}),r("ZenonDebugLogger").getInstance().startQPL(r("qpl")._(64243854,"2452"),a.loggingId),a}return babelHelpers.inheritsLoose(t,e),t})((e=o("ZenonStateMachineBase")).ZenonStateMachineBase),f={actions:[(s=o("ZenonConnectionSharedActions")).onAddParticipants]},g={actions:[s.onMediaStateUpdateProcessing]},h={actions:[s.onMediaUpdateReceived]},y={actions:[s.onMediaUpdateResponseReceived]},C={actions:[s.onStopLocalTrack]},b={actions:[s.onLocalMediaStateUpdateReady]},v={actions:[s.onEndConnection],target:"terminated"},S={actions:[s.onCapabilitiesReceived]},R={actions:[s.onClientInfoReceived]},L={actions:[s.onParticipantUpdateReceivedEvent]},E={actions:[s.onRemoveParticipants]},k={actions:[s.onIceCandidateReady]},I={actions:[(u=o("xstate")).assign(s.onCreateDataMessageSubscription)]},T={actions:[u.assign(s.onRemoveDataMessageSubscription)]},D={actions:[s.onDataMessageReceived]},x={actions:[s.onRoomContextUpdateReceived]},$={actions:[s.onIceCandidateReceived]},P={actions:[s.onConnectionDestroyed],cond:(c=o("ZenonConnectionSMGuards")).activePeerConnectionGuard,target:"terminated"},N={actions:[u.assign(s.onConnectionDropped)],cond:c.activePeerConnectionGuard},M={actions:[o("ZenonConnectionSdpSetState").onConnectionEstablished]},w={actions:[s.onStateSyncUnsubscribe]},A={actions:[s.onStateSyncUpdate]},F={actions:[u.assign(s.onSubscriptionRequest)]},O={actions:[s.onSendGenericDataMessage]},B={actions:[s.onUserApprovalRequest]},W={actions:[s.onForceEncodingEnabled]},q={actions:[u.assign((d=o("ZenonConnectionSdpNegotiatedState")).onInitiatePeerConnectionRestarting)],target:"peerConnectionRestarting"},U={init:{on:{connectionDestroyed:P,createConnection:[{actions:[u.assign(o("ZenonConnectionInitState").onCreateConnection)],cond:c.outgoingConnectionGuard,target:"creatingSdp"},{actions:[u.assign(o("ZenonConnectionInitState").onCreateConnection)],cond:c.incomingConnectionGuard,target:"waitingForIncoming"}],endConnection:v,capabilitiesReceived:S,clientInfoReceived:R,connectionRoomUpdateReceived:x,dataMessageReceived:D,forceEncodingEnabled:W,iceCandidateReady:k,iceCandidateReceived:$,mediaStateUpdateProcessing:g,localMediaStateUpdateReady:b,mediaUpdateReceived:h,participantUpdateReceived:L,removeDataMessageSubscription:T,removeParticipants:E,sendGenericDataMessage:O,stateSyncUnsubscribe:w,stateSyncUpdate:A,stopLocalTrack:C,userApprovalRequest:B,addLocalTracks:e.defer,addParticipants:e.defer,createDataMessageSubscription:e.defer,mediaUpdateResponseReceived:e.defer,removeLocalTrack:e.defer,replaceLocalTrack:e.defer,sdpReceived:e.defer,subscriptionRequest:e.defer}},waitingForIncoming:{on:{connectionDestroyed:P,endConnection:v,sdpReceived:[{actions:[s.onSdpReceived],cond:c.sdpOfferReceiveGuard,target:"creatingSdp"}],offerReady:[{actions:[s.onOfferReady],target:"sdpSet"}],capabilitiesReceived:S,clientInfoReceived:R,connectionRoomUpdateReceived:x,createDataMessageSubscription:I,dataMessageReceived:D,forceEncodingEnabled:W,iceCandidateReady:k,iceCandidateReceived:$,mediaStateUpdateProcessing:g,localMediaStateUpdateReady:b,mediaUpdateReceived:h,participantUpdateReceived:L,removeDataMessageSubscription:T,removeParticipants:E,sendGenericDataMessage:O,stateSyncUnsubscribe:w,stateSyncUpdate:A,stopLocalTrack:C,userApprovalRequest:B,addLocalTracks:e.defer,addParticipants:e.defer,initiateAddLocalTracks:e.defer,initiateRemoveLocalTrack:e.defer,mediaUpdateResponseReceived:e.defer,removeLocalTrack:e.defer,replaceLocalTrack:e.defer,subscriptionRequest:e.defer}},creatingSdp:{on:{answerReady:[{actions:[s.onAnswerReady],target:"sdpNegotiated"}],connectionDestroyed:P,endConnection:v,offerReady:[{actions:[s.onOfferReady],target:"sdpSet"}],capabilitiesReceived:S,clientInfoReceived:R,connectionRoomUpdateReceived:x,createDataMessageSubscription:I,dataMessageReceived:D,forceEncodingEnabled:W,iceCandidateReady:k,iceCandidateReceived:$,mediaStateUpdateProcessing:g,localMediaStateUpdateReady:b,mediaUpdateReceived:h,participantUpdateReceived:L,removeDataMessageSubscription:T,removeParticipants:E,sendGenericDataMessage:O,stateSyncUnsubscribe:w,stateSyncUpdate:A,stopLocalTrack:C,userApprovalRequest:B,addLocalTracks:e.defer,addParticipants:e.defer,initiateAddLocalTracks:e.defer,initiateRemoveLocalTrack:e.defer,mediaUpdateResponseReceived:e.defer,removeLocalTrack:e.defer,replaceLocalTrack:e.defer,sdpReceived:e.defer,subscriptionRequest:e.defer}},sdpSet:{on:{connectionDestroyed:P,endConnection:v,initiatePeerConnectionRestarting:q,pendingApproval:[{target:"pendingApproval"}],remoteSdpSet:{target:"sdpNegotiated"},capabilitiesReceived:S,clientInfoReceived:R,connectionDropped:N,connectionEstablished:[{actions:[o("ZenonConnectionSdpSetState").onConnectionEstablished]}],connectionRoomUpdateReceived:x,createDataMessageSubscription:I,dataMessageReceived:D,forceEncodingEnabled:W,iceCandidateReady:k,iceCandidateReceived:$,mediaStateUpdateProcessing:g,localMediaStateUpdateReady:b,mediaUpdateReceived:h,mediaUpdateResponseReceived:y,participantUpdateReceived:L,removeDataMessageSubscription:T,removeParticipants:E,sdpReceived:[{actions:[s.onSdpReceived],cond:c.sdpAnswerReceiveGuard},{actions:[s.onSdpReceived],cond:c.sdpPrAnswerReceiveGuard},babelHelpers.extends({},e.defer,{cond:c.sdpOfferReceiveGuard})],sendGenericDataMessage:O,stateSyncUnsubscribe:w,stateSyncUpdate:A,stopLocalTrack:C,userApprovalRequest:B,addLocalTracks:e.defer,addParticipants:e.defer,replaceLocalTrack:e.defer,removeLocalTrack:e.defer,initiateAddLocalTracks:e.defer,initiateRemoveLocalTrack:e.defer,subscriptionRequest:e.defer}},pendingApproval:{on:{connectionDestroyed:P,endConnection:v,initiatePeerConnectionRestarting:q,mediaUpdateReceived:h,stateSyncUnsubscribe:w,stateSyncUpdate:A,addLocalTracks:e.defer,addParticipants:e.defer,capabilitiesReceived:e.defer,clientInfoReceived:e.defer,connectionRoomUpdateReceived:e.defer,createDataMessageSubscription:e.defer,dataMessageReceived:e.defer,forceEncodingEnabled:e.defer,iceCandidateReady:e.defer,iceCandidateReceived:e.defer,initiateAddLocalTracks:e.defer,initiateRemoveLocalTrack:e.defer,mediaStateUpdateProcessing:e.defer,localMediaStateUpdateReady:e.defer,mediaUpdateResponseReceived:e.defer,participantUpdateReceived:e.defer,removeDataMessageSubscription:e.defer,removeLocalTrack:e.defer,replaceLocalTrack:e.defer,stopLocalTrack:e.defer,subscriptionRequest:e.defer}},sdpNegotiated:{on:{connectionDestroyed:P,endConnection:v,initiatePeerConnectionRestarting:q,initiateAddLocalTracks:{actions:[d.onAddLocalTracks],target:"clientInitiatedRenegotiation"},initiateRemoveLocalTrack:{actions:[d.onRemoveLocalTrack],target:"clientInitiatedRenegotiation"},offerReady:{actions:[s.onOfferReady],target:"clientInitiatedRenegotiation"},sdpReceived:{actions:[s.onSdpReceived],cond:c.sdpOfferReceiveGuard,target:"serverInitiatedRenegotiating"},addLocalTracks:[{actions:[d.onAddScreenShareLocalTrack],cond:c.addScreenShareTrackWithReplaceGuard},{actions:[s.initiateClientRenegotiation]}],addParticipants:f,capabilitiesReceived:S,clientInfoReceived:R,connectionDropped:N,connectionEstablished:M,connectionRoomUpdateReceived:x,createDataMessageSubscription:I,dataMessageReceived:D,forceEncodingEnabled:W,iceCandidateReady:k,iceCandidateReceived:$,mediaStateUpdateProcessing:g,localMediaStateUpdateReady:b,mediaUpdateReceived:h,mediaUpdateResponseReceived:y,participantUpdateReceived:L,removeDataMessageSubscription:T,removeLocalTrack:[{actions:[d.onRemoveScreenShareLocalTrack],cond:c.removeScreenShareTrackWithReplaceGuard},{actions:[s.initiateClientRenegotiation]}],removeParticipants:E,replaceLocalTrack:{actions:[d.onReplaceLocalTrack]},sendGenericDataMessage:O,stateSyncUnsubscribe:w,stateSyncUpdate:A,stopLocalTrack:C,subscriptionRequest:F,userApprovalRequest:B}},serverInitiatedRenegotiating:{on:{connectionDestroyed:P,endConnection:v,serverRenegotiationFinished:[{target:"sdpNegotiated"}],answerReady:[{actions:[s.onAnswerReady]}],connectionDropped:N,connectionEstablished:M,connectionRoomUpdateReceived:x,dataMessageReceived:D,iceCandidateReady:k,iceCandidateReceived:$,mediaStateUpdateProcessing:g,localMediaStateUpdateReady:b,offerReady:{actions:[s.onOfferReadyCancel]},sendGenericDataMessage:O,stopLocalTrack:C,userApprovalRequest:B,addLocalTracks:e.defer,addParticipants:e.defer,capabilitiesReceived:e.defer,clientInfoReceived:e.defer,createDataMessageSubscription:e.defer,forceEncodingEnabled:e.defer,initiateAddLocalTracks:e.defer,initiatePeerConnectionRestarting:e.defer,initiateRemoveLocalTrack:e.defer,mediaUpdateReceived:e.defer,mediaUpdateResponseReceived:e.defer,participantUpdateReceived:e.defer,removeDataMessageSubscription:e.defer,removeLocalTrack:e.defer,removeParticipants:e.defer,replaceLocalTrack:e.defer,stateSyncUnsubscribe:e.defer,stateSyncUpdate:e.defer,subscriptionRequest:e.defer}},clientInitiatedRenegotiation:{on:{connectionDestroyed:P,endConnection:v,mediaUpdateResponseReceived:[{actions:[s.onMediaUpdateResponseReceived],cond:c.cancelNegotiationsGuard,target:"sdpNegotiated"},{actions:[s.onMediaUpdateResponseReceived]}],remoteSdpSet:{target:"sdpNegotiated"},capabilitiesReceived:S,clientInfoReceived:R,connectionDropped:N,connectionEstablished:[{actions:[o("ZenonConnectionSdpSetState").onConnectionEstablished]}],connectionRoomUpdateReceived:x,createDataMessageSubscription:I,dataMessageReceived:D,forceEncodingEnabled:W,iceCandidateReady:k,iceCandidateReceived:$,mediaUpdateReceived:h,offerReady:{actions:[s.onOfferReady]},participantUpdateReceived:L,removeDataMessageSubscription:T,removeParticipants:E,sdpReceived:[{actions:[s.onSdpReceived],cond:c.sdpAnswerReceiveGuard},e.defer],sendGenericDataMessage:O,stateSyncUnsubscribe:w,stateSyncUpdate:A,userApprovalRequest:B,addLocalTracks:e.defer,addParticipants:e.defer,initiateAddLocalTracks:e.defer,initiatePeerConnectionRestarting:e.defer,initiateRemoveLocalTrack:e.defer,mediaStateUpdateProcessing:e.defer,localMediaStateUpdateReady:e.defer,removeLocalTrack:e.defer,replaceLocalTrack:e.defer,stopLocalTrack:e.defer,subscriptionRequest:e.defer}},peerConnectionRestarting:{on:{connectionDestroyed:babelHelpers.extends({},P,{cond:c.secondaryPeerConnectionGuard}),connectionEstablished:{actions:[u.assign(o("ZenonConnectionPeerConnectionRestartingState").onSecondaryConnectionEstablished)],cond:c.secondaryPeerConnectionGuard,target:"sdpNegotiated"},endConnection:v,initiatePeerConnectionRestarting:q,addParticipants:f,answerReady:{actions:[s.onAnswerReady]},capabilitiesReceived:S,clientInfoReceived:R,connectionDropped:N,connectionRoomUpdateReceived:x,dataMessageReceived:babelHelpers.extends({},D,{cond:c.secondaryPeerConnectionGuard}),iceCandidateReady:babelHelpers.extends({},k,{cond:c.secondaryPeerConnectionGuard}),iceCandidateReceived:$,mediaStateUpdateProcessing:g,localMediaStateUpdateReady:babelHelpers.extends({},b,{cond:c.secondaryPeerConnectionGuard}),offerReady:{actions:[s.onOfferReady],cond:c.secondaryPeerConnectionGuard},participantUpdateReceived:L,removeDataMessageSubscription:T,removeParticipants:E,sdpReceived:[{actions:[o("ZenonConnectionPeerConnectionRestartingState").onSdpReceived],cond:c.sdpAnswerOrP2POfferReceiveGuard},e.defer],sendGenericDataMessage:O,stateSyncUnsubscribe:w,stateSyncUpdate:A,stopLocalTrack:C,userApprovalRequest:B,addLocalTracks:e.defer,createDataMessageSubscription:e.defer,forceEncodingEnabled:e.defer,initiateAddLocalTracks:e.defer,initiateRemoveLocalTrack:e.defer,mediaUpdateReceived:e.defer,mediaUpdateResponseReceived:e.defer,removeLocalTrack:e.defer,replaceLocalTrack:e.defer,subscriptionRequest:e.defer}},terminated:{on:{sdpReceived:[{actions:[o("ZenonConnectionTerminatedState").onSdpReceived]}]}}};l.default=_}),98);
__d("ZenonConnectionStateModel",["DateConsts","ZenonAppProvider","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonConnectionStateTypes","ZenonInfraActionsLogger","ZenonNetworkQualityMonitor","ZenonParticipantState","ZenonPeerConnectionConstants","ZenonRTWebBrowserFeatureSupport","ZenonScreenShare","ZenonScreenSharingAvailabilityType"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,a,i,l,s,u){var c,d,m;s===void 0&&(s={groupThreadID:null,peerID:null,serverInfoData:null}),u===void 0&&(u="init"),this.$13=new Map,this.$15=new Map,this.$16=new Map,this.$17=new Map([[o("ZenonPeerConnectionConstants").SCTP_MEDIA_SERVER_ID,-1]]),this.$18=new Map([[-1,o("ZenonPeerConnectionConstants").SCTP_MEDIA_SERVER_ID]]),this.selfParticipantID=(c=e.getActorID())!=null?c:e.getUserInfo().userID,this.collisionContext=s,this.clientEndpointId=n,this.localCallId=a,this.connectionDirection=i,this.connectionState=u,this.actorRepresentatives=new Map,this.duplicatedParticipantsProcessingMode=(d=o("ZenonConnectionStateTypes").ZenonDuplicatedParticipantsProcessingMode.cast(l.getZenonGeneralizedIdentityConfig().getDuplicatedParticipantsProcessingMode()))!=null?d:o("ZenonConnectionStateTypes").ZenonDuplicatedParticipantsProcessingMode.REMOVE_DUPLICATED,this.currentUserCapabilities={canAddParticipants:!1,canApproveCollaborationSpaceJoinRequests:!0,cowatchEnabled:!0,cowatchGroupEnabled:!0,dominantSpeaker:null,multiwayVideoEscalation:l.getZenonPlatformSupportConfig().isMultiwayAvEscalationEnabled()&&o("ZenonBrowsers").supportsMWAVEscalation(),networkStatus:{local:o("ZenonNetworkQualityMonitor").ZenonNetworkQuality.Good,remote:new Map},screenSharingAvailability:o("ZenonRTWebBrowserFeatureSupport").isReplaceTrackSupported()?r("ZenonScreenSharingAvailabilityType").Available:r("ZenonScreenSharingAvailabilityType").Unknown,screenSharingEnabled:(m=o("ZenonAppProvider").isInstagramApp())!=null?m:void 0,supportConstrainedDevices:{frameRate:null,height:null,isEnabled:!1,width:null},supportMultipleStreams:!o("ZenonScreenShare").screenShareWithReplaceTrack()},this.$1=l,this.$6=function(){return new Map},this.$7=function(){return[]},this.$8=function(){return[]},this.$9=function(){return e.getStateSyncStore().getInputStates()},this.$10=function(){return e.getStateSyncStore().getOutputStates()},this.$11=new Map,this.$2=t,this.$2.set(this.selfParticipantID,o("ZenonParticipantState").ZenonParticipantState.DISCONNECTED),this.$3=new Set,this.$5=new Map(this.$2),this.$12=null,this.$14=new Map,this.$4=new Map,this.$19=e}var t=e.prototype;return t.overrideCurrentUserCapabilities=function(t){this.currentUserCapabilities=t},t.startFailedSubscriptionTimer=function(t){if(this.$13.get(t)==null){var e=15;this.$13.set(t,window.setTimeout(function(){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",checkpoint:"[ZP] Failed subscription request for user: "+t+"\n            was never retried after "+e+" seconds",errorDomain:"ZenonConnectionStateModel_startFailedSubscriptionTimer"})},e*o("DateConsts").MS_PER_SEC))}},t.clearFailedSubscriptionTimer=function(t){var e=this.$13.get(t);e!=null&&(window.clearTimeout(e),this.$13.delete(t))},t.getConsolidatedParticipantStates=function(){return this.$5},t.getConnectedParticipantIDs=function(){var e=this;return new Set(Array.from(this.$5.keys()).filter(function(t){return e.$5.get(t)===o("ZenonParticipantState").ZenonParticipantState.CONNECTED}))},t.getRemoteConnectedParticipantIDs=function(){var e=this;return new Set(Array.from(this.$5.keys()).filter(function(t){return t!==e.selfParticipantID&&e.$5.get(t)===o("ZenonParticipantState").ZenonParticipantState.CONNECTED}))},t.updateParticipantState=function(t,n){if(this.$2.set(t,n),!this.$3.has(t)&&(this.$5=this.$5.set(t,n),n!==o("ZenonParticipantState").ZenonParticipantState.CONNECTED&&this.$12!=null&&this.$12.has(t))){var e;(e=this.$12)==null||e.delete(t)}},t.updateConnectionState=function(t){this.connectionState=t},t.updatePreferredCaptureConfigs=function(){var e=this.$1.getPreferredCaptureConfig();e.isEnabledForZenon()&&(this.currentUserCapabilities=babelHelpers.extends({},this.currentUserCapabilities,{supportConstrainedDevices:{frameRate:e.getFps(),height:e.getHeightPx(),isEnabled:e.isEnabled(),width:e.getWidthPx()}}))},t.updateCurrentUserCapabilities=function(t){t.addParticipantEnabled!=null&&(this.currentUserCapabilities=babelHelpers.extends({},this.currentUserCapabilities,{canAddParticipants:t.addParticipantEnabled})),t.cowatchEnabled!=null&&(this.currentUserCapabilities=babelHelpers.extends({},this.currentUserCapabilities,{cowatchEnabled:t.cowatchEnabled})),t.cowatchGroupEnabled!=null&&(this.currentUserCapabilities=babelHelpers.extends({},this.currentUserCapabilities,{cowatchGroupEnabled:t.cowatchGroupEnabled})),t.multipleVideoStreamsAllowed!=null&&(this.currentUserCapabilities=babelHelpers.extends({},this.currentUserCapabilities,{supportMultipleStreams:t.multipleVideoStreamsAllowed})),t.multiwayVideoEscalation!=null&&(this.currentUserCapabilities=babelHelpers.extends({},this.currentUserCapabilities,{multiwayVideoEscalation:t.multiwayVideoEscalation})),t.screenSharingEnabled!=null&&(this.currentUserCapabilities=babelHelpers.extends({},this.currentUserCapabilities,{screenSharingEnabled:t.screenSharingEnabled}))},t.updateAllParticipantsCapabilities=function(t){for(var e of t){var n=e[0],r=e[1];this.$4.set(n,r)}},t.getUserCapabilities=function(t){var e;return(e=this.$4.get(t))!=null?e:""},t.updateNetworkStatus=function(t){this.currentUserCapabilities=babelHelpers.extends({},this.currentUserCapabilities,{networkStatus:t})},t.updateConsolidatedParticipantStates=function(){var e=new Map(this.$2);this.$3.forEach(function(t){e.set(t,o("ZenonParticipantState").ZenonParticipantState.CONNECTED)}),this.$5=e},t.getTracks=function(){return this.$6()},t.registerTrackFetcher=function(t){this.$6=t},t.getRtpSenders_I_KNOW_WHAT_I_AM_DOING=function(){return this.$7()},t.registerRtpSendersFetcher=function(t){this.$7=t},t.getRtpReceivers_I_KNOW_WHAT_I_AM_DOING=function(){return this.$8()},t.registerRtpReceiversFetcher=function(t){this.$8=t},t.getStateSyncInputs=function(){return this.$9()},t.getStateSyncOutputs=function(){return this.$10()},t.getUserToTracksMap=function(){return this.$11},t.getRemoteUserToTracksMap=function(){var e=this;return new Map(Array.from(this.$11.entries()).filter(function(t){var n=t[0];return n!==e.selfParticipantID}))},t.getExistingParticipantIds=function(){return this.$12||new Set},t.addLocalTrackToTrackMap=function(t){this.$20(t,this.selfParticipantID)},t.$20=function(t,n){var e,r=(e=this.$11.get(n))!=null?e:new Map;r.set(t.trackID,t),this.$11.set(n,r)},t.removeLocalTrackFromTrackMap=function(t){var e,n=(e=this.$11.get(this.selfParticipantID))!=null?e:new Map;n.delete(t)},t.updateTrackMapFromMediaStates=function(t,n){var e=this;n===void 0&&(n=!1),this.$3=new Set,t.forEach(function(t){var r=t.participantID;r!=null&&(e.$20(t,r),n||e.$3.add(r))}),this.updateConsolidatedParticipantStates()},t.updateExistingParticipantsFromMediaStateTracks=function(t){if(this.$12==null){var e=new Set;t.forEach(function(t){var n=t.participantID;n!=null&&e.add(n)}),this.$12=e}},t.getIsUserVideoSubscribed=function(t){var e;return(e=this.$14.get(t))!=null?e:!1},t.updateUserVideoSubscription=function(t,n){this.$14.set(t,n)},t.clearAllUserVideoSubscriptions=function(){this.$14=new Map},t.getRemoteSignalingId=function(){return this.$19.getRemoteSignalingID()},t.updateFromUserIdToNodeIdMap=function(t){this.$15=t,this.$16=new Map(Array.from(this.$15,function(e){return[e[1],e[0]]}))},t.updateFromNodeIdToUserIdMap=function(t){this.$16=t,this.$15=new Map(Array.from(this.$16,function(e){return[e[1],e[0]]}))},t.getUserIdToNodeIdMap=function(){return this.$15},t.registerDataMessageService=function(t,n){this.$17.set(t,n),this.$18.set(n,t)},t.convertServiceIdToNodeId=function(t){return this.$17.get(t)},t.convertUserIdToNodeId=function(t){return this.$15.get(t)},t.convertNodeIdtoUserId=function(t){var e;return(e=this.$16.get(t))!=null?e:this.$18.get(t)},t.userIds=function(){return Array.from(this.$15.keys())},e})();l.default=e}),98);
__d("ZenonLogPromiseRejection",["FBLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t===void 0&&(t=!1),e.catch(function(e){if(r("FBLogger")("rtc_www").catching(e).debug(e.message),t&&r("gkx")("1083"))throw e})}l.default=e}),98);
__d("ZenonConnectionStatePeerConnectionDelegate",["Promise","ZenonLogPromiseRejection"],(function(t,n,r,o,a,i,l){"use strict";var e,s={connectionDestroyed:function(o,a,i){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{error:i,peerConnectionRole:a},type:"connectionDestroyed"})}))},connectionDropped:function(o,a){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{peerConnectionRole:a},type:"connectionDropped"})}))},connectionEstablished:function(o,a){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{peerConnectionRole:a},type:"connectionEstablished"})}))},createDataMessageSubscription:function(o,a,i){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{dataChannelLabel:a,messageHandler:i},type:"createDataMessageSubscription"})}))},dataChannelMesageReceived:function(o,a,i,l){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{dataChannelLabel:i,dataMessage:l,peerConnectionRole:a},type:"dataMessageReceived"})}))},removeDataMessageSubscription:function(o,a,i){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{dataChannelLabel:a,messageHandler:i},type:"removeDataMessageSubscription"})}))},sendIceCandidate:function(o,a,i){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{candidate:i,peerConnectionRole:a},type:"iceCandidateReady"})}))},sendLocalMediaStateUpdate:function(o,a,i){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{mediaStates:i,peerConnectionRole:a},type:"localMediaStateUpdateReady"})}))},sendRemoteSdpSet:function(o,a){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{peerConnectionRole:a},type:"remoteSdpSet"})}))},sendSdpReady:function(o,a,i,l,s,u){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){var n={tracks:[],version:i.version};l.forEach(function(e){var t={enabled:e.enabled,participantID:s,trackID:e.trackId,type:e.contentType};n.tracks.push(t)});var r={connectionDirection:u,mediaStates:n,peerConnectionRole:a,sdp:i};i.type==="offer"?o.processEvent({onError:t,onSuccess:e,payload:r,type:"offerReady"}):o.processEvent({onError:t,onSuccess:e,payload:r,type:"answerReady"})}))},setPeerConnectionEventHandlers:function(t,n,r,o,a){t.setPeerConnectionEventHandlers({onConnectionDestroyed:function(t){return s.connectionDestroyed(n,r,t)},onConnectionDropped:function(){return s.connectionDropped(n,r)},onConnectionEstablished:function(){return s.connectionEstablished(n,r)},onCreateDataMessageSubscription:function(t,r){return s.createDataMessageSubscription(n,t,r)},onDataChannelMessageReceived:function(t,o){return s.dataChannelMesageReceived(n,r,t,o)},onIceCandidateReady:function(t){return s.sendIceCandidate(n,r,t)},onLocalMediaStateUpdate:function(t){return s.sendLocalMediaStateUpdate(n,r,t)},onLocalSdpSet:function(t,i){return s.sendSdpReady(n,r,t,i,o().selfParticipantID,a)},onRemoteSdpSet:function(){return s.sendRemoteSdpSet(n,r)},onRemoveDataMessageSubscription:function(t,r){return s.removeDataMessageSubscription(n,t,r)}})}},u=s;l.default=u}),98);
__d("ZenonConnectionStateSignalingDelegate",["Promise","ZenonLogPromiseRejection"],(function(t,n,r,o,a,i,l){"use strict";var e,s={onCapabilitiesReceived:function(o,a,i){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{capabilities:a,escalationConferenceName:i},type:"capabilitiesReceived"})}))},onClientInfoReceived:function(o,a,i,l){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{actorRepresentatives:i,mediaPath:l,userCapabilities:a},type:"clientInfoReceived"})}))},onClientRenegotiationReceived:function(t,n){t.processEvent(n)},onDismissReceived:function(o,a,i,l){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){var n={detailedReasonFromMW:l,dismissReason:a,dismissReasonSetByRemote:!0,dismissSubreason:"Server sent dismiss message to client: "+(i!=null?i:"null"),shouldInformPeer:!1};o.processEvent({onError:t,onSuccess:e,payload:n,type:"endConnection"})}))},onGenericDataMessageReceived:function(o,a,i){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){var n={dataChannelLabel:a,dataMessage:i};o.processEvent({onError:t,onSuccess:e,payload:n,type:"dataMessageReceived"})}))},onIceCandidateReceived:function(o,a){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:a,type:"iceCandidateReceived"})}))},onMediaUpdateReceived:function(o,a){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{mediaStates:a},type:"mediaUpdateReceived"})}))},onMediaUpdateResponseReceived:function(o,a){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:a,type:"mediaUpdateResponseReceived"})}))},onParticipantUpdateReceived:function(o,a,i){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{participantStates:a,sctpUserIdNodeIdMap:i},type:"participantUpdateReceived"})}))},onPendingApprovalReceived:function(o){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,type:"pendingApproval"})}))},onRenegotiationRequested:function(o,a){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{hasRemoteOffer:a},type:"initiatePeerConnectionRestarting"})}))},onRoomContextUpdateReceived:function(o,a){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{context:a},type:"connectionRoomUpdateReceived"})}))},onSdpReceived:function(o,a,i,l,s,u,c,d,m,p){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,payload:{e2eeServerState:p,mediaPath:i,mediaStates:l,messageID:m,onProcessed:d,renegotiationOffer:u,sdp:a,sdpOriginLocalId:c,source:s},type:"sdpReceived"})}))},onServerRenegotiationFinished:function(o){return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){o.processEvent({onError:t,onSuccess:e,type:"serverRenegotiationFinished"})}))},setSignalingEventHandlers:function(t,n){t.setSignalingEventHandlers({onCapabilitiesReceived:function(t,r){return s.onCapabilitiesReceived(n,t,r)},onClientInfoReceived:function(t,r,o){return s.onClientInfoReceived(n,t,r,o)},onClientRenegotiationReceived:function(t){return s.onClientRenegotiationReceived(n,t)},onDismissReceived:function(t,r,o,a){return s.onDismissReceived(n,r,o,a)},onGenericDataMessageReceived:function(t,r){return s.onGenericDataMessageReceived(n,t,r)},onIceCandidateReceived:function(t){return s.onIceCandidateReceived(n,t)},onMediaUpdateReceived:function(t){return s.onMediaUpdateReceived(n,t)},onMediaUpdateResponseReceived:function(t){return s.onMediaUpdateResponseReceived(n,t)},onParticipantUpdateReceived:function(t,r){return s.onParticipantUpdateReceived(n,t,r)},onPendingApprovalReceived:function(){return s.onPendingApprovalReceived(n)},onRenegotiationRequested:function(t){return s.onRenegotiationRequested(n,t)},onRoomContextUpdateReceived:function(t){return s.onRoomContextUpdateReceived(n,t)},onSdpReceived:function(t,r,o,a,i,l,u,c,d){return s.onSdpReceived(n,t,r,o,a,i,l,u,c,d)},onServerRenegotiationFinished:function(){return s.onServerRenegotiationFinished(n)}})}},u=s;l.default=u}),98);
__d("ZenonDGWUtils",["ZenonActorHooks","gkx","justknobx","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("3376")||r("qex")._("3911")||o("ZenonActorHooks").ZenonActor.isLiveChatOnlyPerson()&&r("justknobx")._("1812")||r("gkx")("18052")}l.shouldUseDGW=e}),98);
__d("WebAssemblyMemorySingleton",[],(function(t,n,r,o,a,i){"use strict";var e=65536,l=5701632,s=45*e,u=l+s,c=null,d=0,m=0;function p(){return c==null&&(c=new WebAssembly.Memory({initial:u/e,maximum:2147483648/e}),d=u),c}function _(){if(c!=null){var e=c.buffer.byteLength;e!==d&&(m++,d=e)}return{memory_reallocation_count:m,memory_size_kb:d/1024}}var f={INITIAL_MEMORY_ALLOCATED_IN_BYTES:u,get:p,getMetrics:_};i.WebAssemblyMemorySingleton=f}),66);
__d("ZenonEncryptionKeysManagerState",["E2eeMetricsSerializers","WebAssemblyMemorySingleton"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={debug_only_stats:{error_count_decrypted:0,error_count_encrypted:0,frames_decrypted:0,frames_encrypted:0},decrypt_frames_dropped:0,encrypt_frames_dropped:0,total_decrypt_time:0,total_encrypt_time:0};for(var n of e.values())t.debug_only_stats.error_count_decrypted+=n.debug_only_stats.error_count_decrypted,t.debug_only_stats.error_count_encrypted+=n.debug_only_stats.error_count_encrypted,t.debug_only_stats.frames_decrypted+=n.debug_only_stats.frames_decrypted,t.debug_only_stats.frames_encrypted+=n.debug_only_stats.frames_encrypted,t.decrypt_frames_dropped+=n.decrypt_frames_dropped,t.encrypt_frames_dropped+=n.encrypt_frames_dropped,t.total_decrypt_time+=n.total_decrypt_time,t.total_encrypt_time+=n.total_encrypt_time;return t}var s=function(){return{e2eeStats:{group_e2ee_metrics:o("E2eeMetricsSerializers").GroupE2eeMetrics$DefaultConstructor(),p2p_e2ee_metrics:o("E2eeMetricsSerializers").P2pE2eeMetrics$DefaultConstructor(),track_specific_e2ee_stats:new Map,wasm_metrics:o("WebAssemblyMemorySingleton").WebAssemblyMemorySingleton.getMetrics()},identityStoreDescription:"not yet created",sfuE2eeNegotiationState:-1}};l.aggregatePerTrackStats=e,l.ZenonEncryptionKeysManagerState$DefaultConstructor=s}),98);
__d("ZenonLogRenderResolutionStats",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){t.setRenderResolutionListener({onRenderResolutionChange:function(n){Object.values(n).flatMap(function(e){return Object.values(e)}).filter(function(t){return e.has(t.streamId)}).forEach(function(t){var n=e.get(t.streamId);n&&(n.displayResolutionData=t)})}})}i.default=e}),66);
__d("ZenonNodeIdNotificationHandler",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=JSON.parse(e.message),r=new Map;for(var o of Object.entries(n.nodeIdToUserIdMap)){var a=o[0],i=o[1];r.set(parseInt(a,10),String(i))}t.updateFromNodeIdToUserIdMap(r);for(var l of Object.entries(n.nodeIdToServiceTypeMap)){var s=l[0],u=l[1];t.registerDataMessageService(String(u),parseInt(s,10))}}i.handleNodeIdNotificationMessage=e}),66);
__d("ZenonSctpMessageTranslator",["RequestStreamBodyUtils","ZenonActorHooks","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonPeerConnectionConstants"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n,r){this.$1=e,this.$2=t,this.$3=n,this.$4=r}var t=e.prototype;return t.toSctpDatagram=function(t){var e,n=this,a,i,l=this.$1(t.sender);if(l==null){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:"Cannot find node id of SCTP datagram sender "+o("ZenonActorHooks").ZenonActor.getID(),errorDomain:"ZenonSctpMessageTranslator toSctpDatagram"});return}var s=new Set;return t.recipients?((e=t.recipients.recipientIDs)==null||e.forEach(function(e){var t=n.$2(e);if(t!=null)s.add(t);else{var o=n.$1(e);o==null?r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:"Cannot find node id of SCTP datagram receiver "+e,errorDomain:"ZenonSctpMessageTranslator toSctpDatagram"}):s.add(o)}}),(a=t.recipients)==null||(a=a.recipientNodeIDs)==null||a.forEach(function(e){s.add(e)}),(i=t.recipients)==null||(i=i.serviceRecipients)==null||i.forEach(function(e){if(e===2){var t=n.$2(o("ZenonPeerConnectionConstants").SCTP_MEDIA_SERVER_ID);t!=null&&s.add(t)}}),{payload:o("RequestStreamBodyUtils").stringToUint8Array(t.message),receivers:s,sender:l}):{payload:o("RequestStreamBodyUtils").stringToUint8Array(t.message),receivers:s,sender:l}},t.toUserId=function(t){return this.$3(t)},t.toNodeId=function(t){return this.$1(t)},t.userIds=function(){return this.$4()},e})();l.default=e}),98);
__d("ZenonConnectionStateManager",["DateConsts","FBLogger","JSResourceForInteraction","Promise","ZenonAppProvider","ZenonAuditedCheckpointLogId","ZenonCallsModelEmitter","ZenonCallsModelTypes","ZenonConnectionStateMachine","ZenonConnectionStateModel","ZenonConnectionStatePeerConnectionDelegate","ZenonConnectionStateSignalingDelegate","ZenonDGWUtils","ZenonDismissReason","ZenonE2ee","ZenonEncryptionKeysManagerState","ZenonInfraActionsLogger","ZenonLogPromiseRejection","ZenonLogRenderResolutionStats","ZenonNetworkQualityMonitor","ZenonNodeIdNotificationHandler","ZenonParticipantState","ZenonPeerConnectionManager","ZenonSCTPConstants","ZenonSctpMessageTranslator","asyncToGeneratorRuntime","deepEquals","err","getErrorSafe","getZenonMqttChannel","promiseDone","qex","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("JSResourceForInteraction")("ZenonDGWStreamController").__setRef("ZenonConnectionStateManager"),c="E2eeState",d=2*o("DateConsts").MS_PER_MIN,m=new Set([(s=o("ZenonSCTPConstants")).SCTP_DATA_TOPIC,s.SCTP_FAILOVER_TOPIC,s.SCTP_MEDIA_SUBSCRIPTIONS,s.E2EE_DATA_MESSAGE_MEDIA_CHANNEL_TOPIC,s.SCTP_SIGNALING_TOPIC,s.SIMULCAST_TOPIC,s.SCTP_RRR]),p=(function(){function t(e,t,n,a,i,l,s,u){var c=this,d;s===void 0&&(s=!1),this.$7={local:o("ZenonNetworkQualityMonitor").ZenonNetworkQuality.Good,remote:new Map},this.$8=new(r("ZenonSctpMessageTranslator"))(function(e){return c.$3.convertUserIdToNodeId(e)},function(e){return c.$3.convertServiceIdToNodeId(e)},function(e){return c.$3.convertNodeIdtoUserId(e)},function(){return c.$3.userIds()}),this.$11=function(){return c.$3},this.$9=function(e){e(c.$3),c.$10(),c.$17()},this.$5=i,this.$5.log({isIncomingConnection:n==="incoming",name:"connectionStart"}),this.$1=e;var m=r("uuidv4")(),p=i.getLogIdentifiers().localCallID,_=t.getSignalingModel();this.$2=t.getSignalingModel().getSignalingID(),_.setNotifyCallback(function(){c.$9(function(e){e.collisionContext.serverInfoData=_.getRemoteSignalingID()});var e=_.getOverlayConfigServerLayer();e&&a.setServerLayer(e)}),this.$3=new(r("ZenonConnectionStateModel"))(_,new Map,m,p,n,a,{groupThreadID:null,peerID:null,serverInfoData:t.getSignalingModel().getRemoteSignalingID()}),this.$5.log({name:"peerConnectionManagerCreated"});var f=new Map;u&&r("ZenonLogRenderResolutionStats")(f,u);var g={configManager:a,dataMessageTranslator:this.$8,loggingEventHandler:function(t){return i.log(t)},mediaStats:f,shouldUseSimulcast:s},h=new(r("ZenonPeerConnectionManager"))(g),y=_.getMediaModeManager().getMediaMode()==="sfu"||((d=_.getRoomInfo().context)==null?void 0:d.peerID)!=null&&n==="outgoing";h.setIceRestartEligible(y),h.registerTrackListener(function(){c.$10()}),h.setNetworkStatusListener(function(e){var t=c.$7;r("deepEquals")(t,e)||(c.$3.updateNetworkStatus(e),c.$10(),c.$7=e,h.onNetworkUpdate(e),e.local!==t.local&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"ZenonNetworkQuality: "+e.local}))});var C=new(r("ZenonPeerConnectionManager"))(g);C.setNetworkStatusListener(function(e){var t=c.$7;r("deepEquals")(t,e)||(c.$3.updateNetworkStatus(e),c.$10(),c.$7=e,C.onNetworkUpdate(e),e.local!==t.local&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"ZenonNetworkQuality: "+e.local}))}),l.setupSctpChannelApi(t.getSignalingModel().getSignalingID(),t.getSignalingModel().getMediaModeManager(),h),this.$4=new(r("ZenonConnectionStateMachine"))({getConnectionModel:this.$11,logEvent:function(t){return i.log(t)},peerConnectionManager:h,sctpHelper:l,sctpMessageTranslator:this.$8,secondaryPeerConnectionManager:C,signalingClient:t,updateConnectionModel:this.$9}),r("ZenonConnectionStateSignalingDelegate").setSignalingEventHandlers(t,this.$4),r("ZenonConnectionStatePeerConnectionDelegate").setPeerConnectionEventHandlers(h,this.$4,"primary",this.$11,n),r("ZenonConnectionStatePeerConnectionDelegate").setPeerConnectionEventHandlers(C,this.$4,"secondary",this.$11,n),r("promiseDone")(this.createDataMessageSubscription(o("ZenonSCTPConstants").SIMULCAST_TOPIC,function(e){try{h.maybeHandleSignalingSimulcastDataMessage(e)}catch(e){r("FBLogger")("rtc_www").warn("maybeHandleVideouploadRequest failed:",r("getErrorSafe")(e).message)}})),this.$12(),r("ZenonE2ee").isE2eeStackReady()&&this.$13(t),t.setLoggingEventHandler(function(e){return i.log(e)}),this.$6=0}var a=t.prototype;return a.getSctpMessageTranslator=function(){return this.$8},a.start=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a,i,l=this;if(o("ZenonDGWUtils").shouldUseDGW()&&!r("qex")._("4380"))try{this.$5.log({name:"dgwConnectionState",pending:!0});var s=yield u.load();yield s.getControllerInstance().establishAndGetStream(),this.$5.log({name:"dgwConnectionState",pending:!1})}catch(e){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",checkpoint:"[ZP] Attempting to establish DGW connection",error:r("getErrorSafe")(e).message,errorDomain:"ZenonConnectionStateManager_start"}),r("promiseDone")(this.end(o("ZenonDismissReason").ZenonDismissReason.ClientError,"DGW did not connect"));return}else try{this.$5.log({name:"mqttConnectionState",pending:!0});var c=r("getZenonMqttChannel")();yield this.$14(c),this.$5.log({name:"mqttConnectionState",pending:!1})}catch(e){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",checkpoint:"[ZP] Attempting to establish MQTT connection",error:r("getErrorSafe")(e).message,errorDomain:"ZenonConnectionStateManager_start"}),r("promiseDone")(this.end(o("ZenonDismissReason").ZenonDismissReason.ClientError,"MQTT did not connect"));return}var d=t.appMessages,p=t.callMedia,_=t.initialSyncStates,f=t.isSecondaryJoinRole,g=t.localMedia,h=t.mwThriftRingRequest,y=t.usersToRing,C=h!=null,b=C?"incoming":"outgoing",v=(a=h==null?void 0:h.messageBody)!=null?a:{},S=v.ringRequest,R,L;if(S){var E;R=Array.from(S.otherParticipants),L=((E=S.offer)==null?void 0:E.sdpString)!=null}var k=(i=t.dataChannels)!=null?i:new Set;m.forEach(function(e){return k.add(e)});var I=yield this.$15(),T={appMessages:d,callMedia:p,dataChannels:k,direction:b,hasOfferInRing:L,initialSyncStates:_!=null?_:new Map,isSecondaryJoinRole:f,serializedInitialSyncStates:I,tracks:g,usersToRing:y,usersToRingFromRingRequest:R};return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,t){l.$4.processEvent({onError:t,onSuccess:e,payload:T,type:"createConnection"})}))});function a(e){return t.apply(this,arguments)}return a})(),a.muteTrack=function(t,n){return n===void 0&&(n=!1),r("ZenonLogPromiseRejection")(this.$16(t,!1,n))},a.unmuteTrack=function(t,n){return n===void 0&&(n=!1),r("ZenonLogPromiseRejection")(this.$16(t,!0,n))},a.$16=function(r,o,a){var t=this;return a===void 0&&(a=!1),new(e||(e=n("Promise")))(function(e,n){var i={enabled:o,isRemote:a,trackID:r};t.$4.processEvent({onError:n,onSuccess:e,payload:i,type:"mediaStateUpdateProcessing"})})},a.stopLocalTrack=function(o){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){var r={trackID:o};t.$4.processEvent({onError:n,onSuccess:e,payload:r,type:"stopLocalTrack"})}))},a.end=function(o,a){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){var r={dismissReason:o,dismissReasonSetByRemote:!1,dismissSubreason:a,shouldInformPeer:!0};t.$4.processEvent({onError:n,onSuccess:e,payload:r,type:"endConnection"})}))},a.addParticipants=function(o,a){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){var r={groupThreadId:a,usersToRing:o};t.$4.processEvent({onError:n,onSuccess:e,payload:r,type:"addParticipants"})}))},a.removeParticipants=function(a){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){var r={usersToRemove:a};t.$4.processEvent({onError:n,onSuccess:e,payload:r,type:"removeParticipants"})}),o("ZenonAppProvider").isCastingCenterApp())},a.addLocalTrack=function(o){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){t.$4.processEvent({onError:n,onSuccess:e,payload:{tracks:[o]},type:"addLocalTracks"})}))},a.replaceLocalTrack=function(o,a,i){var t=this;return i===void 0&&(i=!1),r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){t.$4.processEvent({onError:n,onSuccess:e,payload:babelHelpers.extends({},i?{preserveOriginal:i}:{},{replacementTrack:a,trackIDToReplace:o}),type:"replaceLocalTrack"})}))},a.removeLocalTrack=function(o){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){t.$4.processEvent({onError:n,onSuccess:e,payload:{trackID:o},type:"removeLocalTrack"})}))},a.createDataMessageSubscription=function(o,a,i,l){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){t.$4.processEvent({onError:n,onSuccess:e,payload:{dataChannelLabel:o,dataChannelOptions:l,messageHandler:a,onSctpChannelOpenCallback:i},type:"createDataMessageSubscription"})}))},a.removeDataMessageSubscription=function(o,a){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){t.$4.processEvent({onError:n,onSuccess:e,payload:{dataChannelLabel:o,messageHandler:a},type:"removeDataMessageSubscription"})}))},a.sendGenericDataMessage=function(o,a,i,l){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){var r={data:a,recipients:i,topic:o,transportType:l};t.$4.processEvent({onError:n,onSuccess:e,payload:r,type:"sendGenericDataMessage"})}))},a.registerDataMessageService=function(o,a){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){t.$3.registerDataMessageService(o,a),e()}))},a.updateStateSyncTopic=function(o,a){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){var r={inputData:a,topic:o};t.$4.processEvent({onError:n,onSuccess:e,payload:r,type:"stateSyncUpdate"})}))},a.unsubscribeFromStateSyncTopic=function(o){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){var r={topic:o};t.$4.processEvent({onError:n,onSuccess:e,payload:r,type:"stateSyncUnsubscribe"})}))},a.subscribeToRemoteVideo=function(o,a){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){var r={includeDominantSpeaker:a,subscriptions:o};t.$4.processEvent({onError:n,onSuccess:e,payload:r,type:"subscriptionRequest"})}))},a.approveParticipants=function(o){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){t.$4.processEvent({onError:n,onSuccess:e,payload:{approvalStatus:1,targetUsers:o},type:"userApprovalRequest"})}))},a.denyParticipants=function(o){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){t.$4.processEvent({onError:n,onSuccess:e,payload:{approvalStatus:0,targetUsers:o},type:"userApprovalRequest"})}))},a.forceEncodingEnabled=function(o){var t=this;return r("ZenonLogPromiseRejection")(new(e||(e=n("Promise")))(function(e,n){t.$4.processEvent({onError:n,onSuccess:e,payload:{enabled:o},type:"forceEncodingEnabled"})}))},a.getConnectionState=function(){return this.$3.connectionState},a.getSCTPDataChannelState=function(t){return this.$4.getContext().peerConnectionManager.getDataChannelState(t)},a.getClientCallID=function(){return this.$1},a.getSignalingID=function(){return this.$2},a.getRemoteSignalingID=function(){return this.$3.collisionContext.serverInfoData},a.getEncryptionKeysManagerState=function(){var e;return(e=r("ZenonE2ee").getEncryptionKeysManagerState())!=null?e:o("ZenonEncryptionKeysManagerState").ZenonEncryptionKeysManagerState$DefaultConstructor()},a.checkAllRemoteUsersHaveCapability=function(t){var e=this,n=this.$3.getRemoteConnectedParticipantIDs(),o=n.size>0;return n.forEach(function(n){var a=e.$3.getUserCapabilities(n);try{var i,l=JSON.parse(a);o=o&&((i=l[t])!=null?i:!1)}catch(e){r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Failed to parse capabilities String"}),o=!1}}),o},a.$12=function(){var e=this;r("promiseDone")(this.createDataMessageSubscription(o("ZenonSCTPConstants").NODEID_NOTIFICATION_TOPIC,function(t){o("ZenonNodeIdNotificationHandler").handleNodeIdNotificationMessage(t,e.$3)}))},a.$13=function(t){var e=this,a=t.getSignalingModel().getStateSyncStore();a.addTopicHandler(c,(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n;if(yield r("ZenonE2ee").processE2eeServerState(t==null?void 0:t.data),((n=r("ZenonE2ee").getEncryptionKeysManagerState())==null?void 0:n.sfuE2eeNegotiationState)===0){e.$5.log({name:"sfuE2eeNegotiationComplete"});return}});return function(e){return t.apply(this,arguments)}})()),r("promiseDone")(this.createDataMessageSubscription(o("ZenonSCTPConstants").E2EE_DATA_MESSAGE_TOPIC,function(e){return void r("ZenonE2ee").processE2eeMessage(e)})),r("promiseDone")(this.createDataMessageSubscription(o("ZenonSCTPConstants").E2EE_DATA_MESSAGE_MEDIA_CHANNEL_TOPIC,function(e){return void r("ZenonE2ee").processE2eeMessage(e)},function(){return r("ZenonE2ee").onMediaDataChannelReady()}))},a.$15=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e,t=yield r("ZenonE2ee").getSerializedE2eeClientState();return t!=null&&(t.byteLength===0&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"E2ee client state is empty"}),e=new Map,e.set(c,{data:t,version:1})),e});function t(){return e.apply(this,arguments)}return t})(),a.$10=function(){o("ZenonCallsModelEmitter").CallsModelEmitterInstance.emitCallsModel(this.$1,this.$3)},a.$17=function(){if(o("ZenonCallsModelEmitter").CONNECTION_STATE_TO_CALL_STATE_MAP[this.$3.connectionState]===o("ZenonCallsModelTypes").ZenonCallState.Connected){var e=this.$3.getConsolidatedParticipantStates();if(e){var t=Array.from(e.values()),n=t.filter(function(e){return e===o("ZenonParticipantState").ZenonParticipantState.CONNECTED}),r=n.length;r>this.$6&&(this.$5.log({connectedParticipantsCount:r,name:"setMaxConnectedParticipants"}),this.$6=r)}}},a.$14=function(o){return new(e||(e=n("Promise")))(function(e,t){if(o.getConnectionState()==="Connected")e();else{r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"MQTT not connected, deferring call start"});var n={onMQTTStateChanged:function(r){r==="Connected"&&(o.unsubscribeChannelEvents(n),window.clearTimeout(a),e())}},a=window.setTimeout(function(){o.unsubscribeChannelEvents(n),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"MQTT never connected. Current status: "+o.getConnectionState()}),t(r("err")("timeout"))},d);o.subscribeChannelEvents(n)}})},t})();l.default=p}),98);
__d("WorkerBanzaiLazyQueueChannelClient",["BanzaiLazyQueue","WorkerFuncChannel"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("WorkerFuncChannel").exportChannel(r("BanzaiLazyQueue"),e,"banzai_lazyqueue_channel")}l.init=e}),98);
__d("WorkerQPLChannel",["WorkerFuncChannel","performanceAbsoluteNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WorkerFuncChannel")).WorkerFuncChannel(function(t){return{markerStartFromNavStart:null,markerStart:function(o,a,i){return i===void 0&&(i=(e||(e=r("performanceAbsoluteNow")))()),t.markerStart(o,a,i)},markerAnnotate:function(n,r,o){return t.markerAnnotate(n,r,o)},markerPoint:function(o,a,i){var n=(i==null?void 0:i.timestamp)===void 0?babelHelpers.extends({},i,{timestamp:(e||(e=r("performanceAbsoluteNow")))()}):i;return t.markerPoint(o,a,n)},markerEnd:function(o,a,i,l){return l===void 0&&(l=(e||(e=r("performanceAbsoluteNow")))()),t.markerEnd(o,a,i,l)}}},"qpl");function u(e){s.setMessagePort(e)}function c(e){s.setBackend(e)}l.setMessagePort=u,l.initQPL=c}),98);
__d("WorkerClient",["WorkerBanzaiLazyQueueChannelClient","WorkerFuncChannel","WorkerQPLChannel"],(function(t,n,r,o,a,i,l){"use strict";function e(e){o("WorkerFuncChannel").activateChannels(e,"client","worker"),o("WorkerBanzaiLazyQueueChannelClient").init(e),o("WorkerQPLChannel").setMessagePort(e),a(["QuickPerformanceLogger"],function(e){return o("WorkerQPLChannel").initQPL(e)})}l.init=e}),98);
__d("ZenonInsertableStreamsMessage",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n,r,o,a,i){this.mediaStreamId=t,this.mediaType=n,this.operation=r,this.readable=o,this.trackId=a,this.writable=i};i.default=e}),66);
__d("ZenonInsertableStreamsMessageTransformer",["ZenonInsertableStreamsMessage"],(function(t,n,r,o,a,i,l){"use strict";var e={deserialize:function(t){return new(r("ZenonInsertableStreamsMessage"))(t.mediaStreamId,t.mediaType,t.operation,t.readable,t.trackId,t.writable)},serialize:function(t,n){var e,r;return n.push(t.readable),n.push(t.writable),{mediaStreamId:(e=t.mediaStreamId)!=null?e:void 0,mediaType:(r=t.mediaType)!=null?r:void 0,operation:t.operation,readable:t.readable,trackId:t.trackId,writable:t.writable}}},s=e;l.default=s}),98);
__d("ZenonE2eeWasmWorkerClient",["FrameEncryptionWasmTypes","ODS","Promise","WebWorkerV2Resource","WorkerClient","WorkerFuncChannel","WorkerMessagePort","ZenonE2eeWasmWorkerResource","ZenonInsertableStreamsMessage","ZenonInsertableStreamsMessageTransformer","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={},c=null,d;u[r("ZenonInsertableStreamsMessage").name]=r("ZenonInsertableStreamsMessageTransformer");var m=(function(){function t(){var e=o("WebWorkerV2Resource").createDedicatedV2WebWorker(r("ZenonE2eeWasmWorkerResource"),"ZenonE2eeWasmWorker"),t=e.worker;this.client=new(o("WorkerMessagePort")).WorkerSyncedMessagePort(t,"ZenonE2eeWasmWorker"),d=o("WorkerFuncChannel").importChannel({allowUnencryptedFramesOnDecryptors:null,cacheIdentityKeys:null,calculateSignature:null,createSecureDataMessageManager:null,createSecureSctpManager:null,decryptSctpMessage:null,decryptStateSyncUpdate:null,encryptSctpMessage:null,encryptStateSyncSnapshot:null,encryptStateSyncUpdate:null,freeAllEncryptorsAndDecryptors:null,freeEncryptionKeysManager:null,freeEncryptorAndDecryptorForId:null,freePrivatelyHeldCallScopedResources:null,freeSecureSctpManager:null,getGroupE2eeMetrics:null,getIdentityStoreShortDescription:null,getSerializedE2eeClientState:null,getTrackStats:null,handleStreamTransform:null,initialize:null,onMediaDataChannelReady:null,processE2eeMessage:null,processE2eeServerUpdate:null,setDecryptionDisabled:null,setDecryptorCodec:null,setEncryptionDisabled:null,setEncryptorCodec:null,setLocalE2eeId:null,updateLocalTrackIdForStats:null,updateSenderKeyIndex:null,verifySignature:null},this.client,"zenon_e2ee_worker_to_main",function(){},u),o("WorkerFuncChannel").exportChannel({logOdsCounter:function(t){(s||(s=o("ODS"))).bumpEntityKey(4083,"zenon_e2ee",t)},sendGenericDataMessage:function(){}},this.client,"zenon_e2ee_main_to_worker"),o("WorkerClient").init(this.client)}var a=t.prototype;return a.destroy=function(){this.client.close()},a.transformStream=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield d.handleStreamTransform(e)});function t(t){return e.apply(this,arguments)}return t})(),a.processE2eeMessage=function(r){return new(e||(e=n("Promise")))(function(e){return e(d.processE2eeMessage(r))})},a.processE2eeServerUpdate=function(r){return new(e||(e=n("Promise")))(function(e){return e(d.processE2eeServerUpdate(r))})},a.setEncryptionDisabled=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield d.setEncryptionDisabled(e)});function t(t){return e.apply(this,arguments)}return t})(),a.setDecryptionDisabled=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield d.setDecryptionDisabled(e)});function t(t){return e.apply(this,arguments)}return t})(),a.allowUnencryptedFramesOnDecryptors=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d.allowUnencryptedFramesOnDecryptors()});function t(){return e.apply(this,arguments)}return t})(),a.getTrackStats=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield new(e||(e=n("Promise")))(function(e){return e(d.getTrackStats())});return new Map(t)});function r(){return t.apply(this,arguments)}return r})(),a.setLocalE2eeId=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield d.setLocalE2eeId(e)});function t(t){return e.apply(this,arguments)}return t})(),a.getSerializedE2eeClientState=function(){return new(e||(e=n("Promise")))(function(e){return e(d.getSerializedE2eeClientState())})},a.freePrivatelyHeldCallScopedResources=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d.freePrivatelyHeldCallScopedResources()});function t(){return e.apply(this,arguments)}return t})(),a.freeEncryptionKeysManager=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d.freeEncryptionKeysManager()});function t(){return e.apply(this,arguments)}return t})(),a.updateSenderKeyIndex=function(r){return new(e||(e=n("Promise")))(function(e){return e(d.updateSenderKeyIndex(r))})},a.onMediaDataChannelReady=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d.onMediaDataChannelReady()});function t(){return e.apply(this,arguments)}return t})(),a.updateLocalTrackIdForStats=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){yield d.updateLocalTrackIdForStats(e,t)});function t(t,n){return e.apply(this,arguments)}return t})(),a.getGroupE2eeMetrics=function(){return new(e||(e=n("Promise")))(function(e){return e(d.getGroupE2eeMetrics())})},a.createSecureDataMessageManager=function(r,a){return new(e||(e=n("Promise")))(function(e){return e(d.createSecureDataMessageManager(r,a))}).then(function(e){return new(o("FrameEncryptionWasmTypes")).ZenonNonNullWasmPtr(e)})},a.setDecryptorCodec=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){yield d.setDecryptorCodec(e,t)});function t(t,n){return e.apply(this,arguments)}return t})(),a.setEncryptorCodec=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){yield d.setEncryptorCodec(e,t)});function t(t,n){return e.apply(this,arguments)}return t})(),a.freeEncryptorAndDecryptorForId=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield d.freeEncryptorAndDecryptorForId(e)});function t(t){return e.apply(this,arguments)}return t})(),a.freeAllEncryptorsAndDecryptors=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d.freeAllEncryptorsAndDecryptors()});function t(){return e.apply(this,arguments)}return t})(),a.encryptStateSyncSnapshot=function(r,o,a){return new(e||(e=n("Promise")))(function(e){return e(d.encryptStateSyncSnapshot(r.get(),o,a))})},a.encryptStateSyncUpdate=function(r,o,a){return new(e||(e=n("Promise")))(function(e){return e(d.encryptStateSyncUpdate(r.get(),o,a))})},a.decryptStateSyncUpdate=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){yield d.decryptStateSyncUpdate(e.get(),t,n)});function t(t,n,r){return e.apply(this,arguments)}return t})(),a.createSecureSctpManager=function(r){return new(e||(e=n("Promise")))(function(e){return e(d.createSecureSctpManager(r))}).then(function(e){return new(o("FrameEncryptionWasmTypes")).ZenonNonNullWasmPtr(e)})},a.freeSecureSctpManager=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield d.freeSecureSctpManager(e.get())});function t(t){return e.apply(this,arguments)}return t})(),a.encryptSctpMessage=function(r,o){return new(e||(e=n("Promise")))(function(e){return e(d.encryptSctpMessage(r.get(),o))})},a.initializeE2ee=function(r,o,a,i,l,s,u,c,m){return m===void 0&&(m=function(){}),new(e||(e=n("Promise")))(function(e,t){d.initialize(r,o,a,i,l,s,u,c,m,function(n,r){return n!=null?t(n):e(r)})})},a.cacheIdentityKeys=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield d.cacheIdentityKeys(e)});function t(t){return e.apply(this,arguments)}return t})(),a.getIdentityStoreShortDescription=function(){return new(e||(e=n("Promise")))(function(e){return e(d.getIdentityStoreShortDescription())})},a.decryptSctpMessage=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){yield d.decryptSctpMessage(e.get(),t,n,r)});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),a.destroyZenonE2eeWasmWorker=function(){c!=null&&(c.destroy(),c=null)},t})();function p(){return c==null&&(c=new m),c}var _=p();l.default=_}),98);
__d("ZenonMediaTypes",[],(function(t,n,r,o,a,i){"use strict";var e="text",l="detail",s="motion",u={audio:"audio",screen:"screen",screen_audio:"screen_audio",video:"video"},c="audioinput",d="audiooutput",m="videoinput";i.TEXT_VIDEO_CONTENT_HINT=e,i.DETAIL_VIDEO_CONTENT_HINT=l,i.MOTION_VIDEO_CONTENT_HINT=s,i.STRING_TO_MEDIA_TYPE=u,i.AUDIO_INPUT_DEVICE_KIND=c,i.AUDIO_OUTPUT_DEVICE_KIND=d,i.VIDEO_INPUT_DEVICE_KIND=m}),66);
__d("ZenonInsertableStreamsManager",["FrameEncryptionWasmTypes","ODS","ZenonE2ee","ZenonE2eeWasmWorkerClient","ZenonInsertableStreamsMessage","ZenonMediaTypes","ZenonRTWebBrowserFeatureSupport","asyncToGeneratorRuntime","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s="Insertable Streams not supported in E2ee mandated call",u=(function(){function t(){}var a=t.prototype;return a.setupSenderTransform=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=this.senderReceiverTransformGuards(e);if(n!=null){r("ZenonE2ee").terminateCallIfE2eeViolation(o("FrameEncryptionWasmTypes").ZenonE2eeComponent.INSERTABLE_STREAMS,"Sender "+n);return}if(typeof e.createEncodedStreams=="function"&&e.track!==null){var a=e.track.id,i=e.senderStreams==null?e.createEncodedStreams():e.senderStreams;e.senderStreams=i,r("ZenonE2ee").shouldUseE2eeWorker()?yield r("ZenonE2eeWasmWorkerClient").transformStream(new(r("ZenonInsertableStreamsMessage"))(null,t,"encode",i.readable,a,i.writable)):this.$2(a,t,i.readable,i.writable)}});function t(t,n){return e.apply(this,arguments)}return t})(),a.setupReceiverTransform=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=this.senderReceiverTransformGuards(t);if(n!=null){r("ZenonE2ee").terminateCallIfE2eeViolation(o("FrameEncryptionWasmTypes").ZenonE2eeComponent.INSERTABLE_STREAMS,"Receiver "+n);return}if(typeof t.createEncodedStreams=="function"&&t.track!==null){var a=t.track.id,i=o("ZenonMediaTypes").STRING_TO_MEDIA_TYPE[t.track.kind],l=t.receiverStreams==null?t.createEncodedStreams():t.receiverStreams;t.receiverStreams=l,r("ZenonE2ee").shouldUseE2eeWorker()?yield r("ZenonE2eeWasmWorkerClient").transformStream(new(r("ZenonInsertableStreamsMessage"))(e,i,"decode",l.readable,a,l.writable)):this.$3(e,a,i,l.readable,l.writable)}});function t(t,n){return e.apply(this,arguments)}return t})(),a.senderReceiverTransformGuards=function(t){if(!o("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported())return s;if(typeof t.createEncodedStreams!="function")return"createEncodedStreams is not a function";if(t.track===null)return"has no track"},a.$2=function(n,a,i,l){var t=this,s=i,u=l,c=r("ZenonE2ee").getSecureFrameManager();c==null||c.createEncryptorWithId(n,a);var d=new TransformStream({transform:function(i,l){t.$1==null&&(t.$1=r("ZenonE2ee").canSkipFrameEncryption()),t.$1?l.enqueue(i):c?(i.data=c.encrypt(n,i),l.enqueue(i)):(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_e2ee","secure_frame_manager_null_at_encrypt_transform")}});r("promiseDone")(s.pipeThrough(d).pipeTo(u))},a.$3=function(n,a,i,l,s){var t=this,u=l,c=s,d=r("ZenonE2ee").getSecureFrameManager();d==null||d.createDecryptorWithId(a,n,i);var m=new TransformStream({transform:function(i,l){if(t.$1==null&&(t.$1=r("ZenonE2ee").canSkipFrameEncryption()),t.$1)l.enqueue(i);else if(d){var n=d.decrypt(a,i);i.data=n.data,n.hasError||l.enqueue(i)}else(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_e2ee","secure_frame_manager_null_at_decrypt_transform")}});r("promiseDone")(u.pipeThrough(m).pipeTo(c))},t})();l.default=u}),98);
__d("ZenonUIConstants",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e="Zenon Stats Overlay",l="Armadillo Stats Overlay",s=.75,u="Silent Audio",c=n("$InternalEnum").Mirrored(["AUDIO","VIDEO"]);i.ZENON_STATS_OVERLAY=e,i.ARMADILLO_STATS_OVERLAY=l,i.ZENON_FLYOUT_DIALOG_HEIGHT_PERCENTAGE=s,i.ZENON_SILENT_AUDIO=u,i.IncomingCallDialogTypes=c}),66);
__d("ZenonMediaUtils",["ZenonUIConstants"],(function(t,n,r,o,a,i,l){"use strict";var e={convertToZenonImmutableMediaTrack:function(n,r,o,a){var t,i=r.contentHint,l=r.isRemote,s=r.isUserMuted,u=r.stream,c=r.trackType,d=u!=null?u:e.createStreamWithTrack(n),m=c!=null?c:n.kind==="audio"?"audio":"video";return{contentHint:(t=i!=null?i:n.contentHint)!=null?t:"",contentType:m,displaySurface:n.getSettings().displaySurface,enabled:n.enabled,flags:Object.freeze({}),label:n.label,name:a!=null?a:"",pausedDownlink:!1,remote:l,trackId:o!=null?o:n.id,userMuted:s,webrtcStream:d,webrtcTrack:n}},createSilentTrack:function(){var t=new(window.AudioContext||window.webkitAudioContext),n=t.createBuffer(1,t.sampleRate*5,t.sampleRate),r=t.createBufferSource();r.buffer=n,r.loop=!0;var a=t.createMediaStreamDestination();r.connect(a),r.start();var i=Object.assign(a.stream.getAudioTracks()[0],{enabled:!1});return babelHelpers.extends({},e.convertToZenonImmutableMediaTrack(i,{isRemote:!1,isUserMuted:!0,stream:a.stream,trackType:"audio"}),{label:o("ZenonUIConstants").ZENON_SILENT_AUDIO})},createStreamWithTrack:function(t){var e=new MediaStream;return e.addTrack(t),e}},s=e;l.default=s}),98);
__d("ZenonRTCVideoResolutionHelper",["FBLogger","Promise","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1,u=10,c=(function(){function t(){}return t.getMaxParticipants180=function(){return 100},t.getMaxParticipants360=function(){return 100},t.getMaxParticipants720=function(){return 2},t.shouldUseSupportedScaleFactorList=function(){return!1},t.shouldUseConservativeWayWhenSearchingForScalingRatio=function(){return!1},t.encoderScalingEnabled=function(){return r("gkx")("25156")},t.bitrateCappingEnabled=function(){return!0},t.getMaxBitrate720=function(){return 3e6},t.getMaxBitrate360=function(){return 1e6},t.getMaxBitrate180=function(){return 3e5},t.getMaxBitrateForResolution=function(n){return t.bitrateCappingEnabled()?n===180?t.getMaxBitrate180():n===360?t.getMaxBitrate360():n===720?t.getMaxBitrate720():0:0},t.getMaxEncResolution=function(n){if(!t.encoderScalingEnabled())return null;var e=t.getMaxParticipants720(),r=t.getMaxParticipants360(),o=t.getMaxParticipants180(),a={height:720,width:1280},i={height:360,width:640},l={height:180,width:320};return e>0&&n<=e?a:r>0&&n<=r?i:o>0&&n<=o||o>0?l:r>0?i:e>0?a:null},t.getMaxEncResolutionSimulcast=function(n,o,a,i){var e={height:720,width:1280},l={height:360,width:640},s={height:180,width:320};if(o<=a&&a<=2&&o>=0&&o<i){if(i===1)return t.getMaxEncResolution(n);if(i===2)return o===0?s:n>2?l:e;if(i===3){if(o===0)return s;if(o===1)return l;if(o===2)return e}}return r("FBLogger")("rtc_www").mustfix("Unsupported simulcast parameters passed to getMaxEncResolutionSimulcast"),null},t.getScalingFactor=function(n,r,o,a,i){if(i===void 0&&(i=!1),n.width==null||n.width<=0||n.height==null||n.height<=0||r.width==null||r.width<=0||r.height==null||r.height<=0)return null;var e=r.width,l=r.height,s=n.width,u=n.height;if(i){var c=[1,2,4],d=Math.sqrt(e*l/(s*u));if(d<1+a)return 1;var m=1,p=Number.MAX_VALUE;for(var _ of c){var f=Math.abs(_-d);(t.shouldUseConservativeWayWhenSearchingForScalingRatio()?f<p:f<=p)&&Math.floor(e/_)%2===0&&Math.floor(l/_)%2===0&&(m=_,p=Math.abs(_-d))}return m}else{var g=Math.sqrt(e*l/(s*u));return g<1+a?1:o?Math.floor(g+a):g}},t.maybeLimitEncodingResolutionByParticipantCountHelper=function(n,r,o,a,i,l){if(l===void 0&&(l=!1),!(!t.encoderScalingEnabled()||i)){var e;if(o!=null&&o.length>0){var c=o.filter(function(e){var t,n;return((t=e.receiver.track)==null?void 0:t.kind)==="video"&&e.currentDirection!=="inactive"&&((n=e.receiver.track)==null?void 0:n.readyState)==="live"});e=c.length,l&&(e-=1)}else{var d=r.filter(function(e){var t;return((t=e.track)==null?void 0:t.kind)==="video"}),m=d.length;e=m+1}var p=t.getMaxEncResolution(e);if(p){var _=[p];t.maybeLimitEncodingResolution(n,_,s,u/100,a,t.shouldUseSupportedScaleFactorList())}}},t.maybeLimitEncodingResolution=function(a,i,l,s,u,c){c===void 0&&(c=!1);var o=a.filter(function(e){var t;return((t=e.track)==null?void 0:t.kind)==="video"});if(o.length>0){var d,m=o[0],p=m.getParameters==null?void 0:m.getParameters(),_=(d=m.track)==null?void 0:d.getSettings();if(_==null||p==null||p.encodings==null||i.length!==p.encodings.length)return;for(var f of i.entries()){var g=f[0],h=f[1],y=u?1:t.getScalingFactor(h,{height:_.height,width:_.width},l,s,c);if(y!=null)if(y===1?delete p.encodings[g].scaleResolutionDownBy:p.encodings[g].scaleResolutionDownBy=y,!u&&h.width!=null&&h.height!=null){var C=Math.min(h.width,h.height),b=t.getMaxBitrateForResolution(C);b>0&&(p.encodings[g].maxBitrate=b)}else u&&delete p.encodings[g].maxBitrate}var v=m.setParameters==null?void 0:m.setParameters(p);v!=null?r("promiseDone")(v):r("promiseDone")((e||(e=n("Promise"))).resolve())}},t.maybeLimitEncodingResolutionByParticipantCount=function(n,r,o,a,i){return i===void 0&&(i=!1),t.maybeLimitEncodingResolutionByParticipantCountHelper(n,r,o,t.$1>0,a,i)},t.handleStartScreenSharing=function(n,r,o,a){return t.$1++,t.maybeLimitEncodingResolutionByParticipantCountHelper(n,r,o,t.$1>0,a)},t.handleStopScreenSharing=function(n,r,o,a){return t.$1--,t.maybeLimitEncodingResolutionByParticipantCountHelper(n,r,o,t.$1>0,a)},t})();c.$1=0,l.default=c}),98);
__d("ZenonSimulcastManager",["ZenonRTCVideoResolutionHelper"],(function(t,n,r,o,a,i,l){"use strict";var e=25e5,s=25e6,u=15,c=15e4,d=3e4,m=180*320,p=14400,_=!1,f=0,g=3,h=3;function y(t,n,r,o,a,i,l,c,d){a===void 0&&(a=!1),i===void 0&&(i=2),l===void 0&&(l={height:720,width:1280}),c===void 0&&(c=!0),d===void 0&&(d=0);for(var m=b(n.perSsrcTargetBitrateBpsMap,o),p=0,_=[],f=[],g=0;g<t.encodings.length;g++)if(R(g,n.qualityMask)){p++;var h=m.get(g);if(h!=null?f.push(h):f.push(e),p>=i)break}for(;p<d;)p++,f.push(e);for(var y=0;y<p;y++)_.push(v(y,f[y],t.encodings.length-1,r,p,l,a));for(var C=0;C<t.encodings.length;C++)C<p?(t.encodings[C].active=!0,t.encodings[C].scaleResolutionDownBy=_[C],p===1?(t.encodings[C].maxBitrate=e,delete t.encodings[C].maxFramerate):(t.encodings[C].maxBitrate=f[C],C===0&&(t.encodings[C].maxFramerate=u))):(t.encodings[C].active=!1,t.encodings[C].maxBitrate=s);return a&&!c&&L(t),{params:t}}function C(t){for(var n=0;n<t.encodings.length;n++)n===0?(t.encodings[n].active=!0,t.encodings[n].scaleResolutionDownBy=1,t.encodings[n].maxBitrate=e):(t.encodings[n].active=!1,t.encodings[n].maxBitrate=s);return t}function b(e,t){var n=new Map;if(e==null||t==null)return n;for(var r of t){var o=r[0],a=r[1],i=e.get(o);i!=null&&n.set(a,i)}return n}function v(e,t,n,o,a,i,l){var s;if(i===void 0&&(i={height:720,width:1280}),l===void 0&&(l=!1),l)return 1;var u=r("ZenonRTCVideoResolutionHelper").getMaxEncResolutionSimulcast(o,e,n,a);return u?(u=S(e,t,u,a),(s=r("ZenonRTCVideoResolutionHelper").getScalingFactor(u,i,!0,0,r("ZenonRTCVideoResolutionHelper").shouldUseSupportedScaleFactorList()))!=null?s:1):1}function S(e,t,n,r){if(r>=2&&e===0){var o=n.height!=null&&n.width!=null&&n.height*n.width>p;if(o&&t<d)return{height:90,width:160};var a=n.height!=null&&n.width!=null&&n.height*n.width>m;if(a&&t<c)return{height:180,width:320}}return n}function R(e,t){return(1<<e&t)!==0}function L(e){for(var t=1;t<e.encodings.length;t++)e.encodings[t].active=!1,e.encodings[t].maxBitrate=s}function E(e){var t=new Map,n="\r\n",r=e.split(n).filter(function(e){return e.startsWith("a=ssrc-group:SIM")});if(r.length===0)return t;for(var o=r[0].split(" ").slice(1),a=0;a<o.length;a++)t.set(o[a],a);return t}l.ALLOW_SCREENSHARE_SIMULCAST=_,l.MIN_NUM_ACTIVE_LAYERS=f,l.MAX_NUM_ACTIVE_LAYERS=g,l.NUM_LAYERS=h,l.getSimulcastEncodingParameters=y,l.getSimulcastSingleLayerParameters=C,l.getSimulcastLayerToTargetBitrateMap=b,l.getSimulcastSsrcToLayerMap=E}),98);
__d("ZenonVideoDurationTracker",["performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){t.startedAt==null&&(t.startedAt=(e||(e=r("performanceNow")))())}function u(e){e.startedAt!=null&&(e.duration=d(e),e.startedAt=null)}function c(e,t){var n=t.filter(function(e){return e.enabled&&e.webrtcTrack.readyState!=="ended"});n.length>0?s(e):u(e)}function d(t){var n=t.startedAt;return n!=null?t.duration+(e||(e=r("performanceNow")))()-n:t.duration}var m=(function(){function e(){this.$1={localScreenShareDuration:{duration:0,startedAt:null},localVideoBlurDuration:{duration:0,startedAt:null},localVideoDuration:{duration:0,startedAt:null},remoteScreenShareDuration:{duration:0,startedAt:null},remoteVideoDuration:{duration:0,startedAt:null}}}var t=e.prototype;return t.getLocalVideoDuration=function(){return d(this.$1.localVideoDuration)},t.getLocalVideoBlurDuration=function(){return d(this.$1.localVideoBlurDuration)},t.getLocalScreenShareDuration=function(){return d(this.$1.localScreenShareDuration)},t.getRemoteScreenShareDuration=function(){return d(this.$1.remoteScreenShareDuration)},t.getRemoteVideoDuration=function(){return d(this.$1.remoteVideoDuration)},t.update=function(t){var e=this.$1.localVideoDuration,n=Array.from(t.values()).filter(function(e){var t=e.contentType==="video"||e.contentType==="screen";return t&&!e.remote});c(e,n);var r=this.$1.localVideoBlurDuration,o=Array.from(t.values()).filter(function(e){var t=e.contentType==="video",n="canvas"in e.webrtcTrack;return t&&n&&!e.remote});c(r,o);var a=this.$1.localScreenShareDuration,i=Array.from(t.values()).filter(function(e){var t=e.contentType==="screen";return t&&!e.remote});c(a,i);var l=this.$1.remoteVideoDuration,s=Array.from(t.values()).filter(function(e){var t=e.contentType==="video"||e.contentType==="screen";return t&&e.remote});c(l,s);var u=this.$1.remoteScreenShareDuration,d=Array.from(t.values()).filter(function(e){var t=e.contentType==="screen";return t&&e.remote});c(u,d)},e})();l.default=m}),98);
__d("RefCountedAudioContextSingleton",["ZenonBrowsers","ZenonDebugLogger","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,s=null,u=new Set,c=0;function d(){if(o("ZenonBrowsers").isDesktopSafari())return{audioContext:null,destroy:r("emptyFunction")};(s===null||s.state==="closed")&&(s=new e);var t=c++;return u.add(t),{audioContext:s,destroy:function(){u.delete(t),s!==null&&u.size<1&&(s.state!=="closed"&&s.close(),s=null)}}}l.get=d}),98);
__d("ZenonNoiseSuppressionAudioWorkletNode",["FBLogger","NoiseSuppressionConfig","RefCountedAudioContextSingleton","asyncToGeneratorRuntime","expectationViolation"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!1,u=null,c=null;function d(t){if(e==null){if(!t)return;r("expectationViolation")("Unable to toggle Noise Suppression. Make sure you initialize the AudioWorkletNode first by calling getNoiseSuppressionNodeInstance");return}if(s&&t){r("FBLogger")("rtc_www").mustfix("Failed to enable noise suppression node because it is permanently disabled");return}e.port.postMessage({enabledByUser:t}),t===!1&&(c==null||c(),u=null,c=null,e=null)}function m(){return e!=null}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){if(s)return r("FBLogger")("rtc_www").mustfix("Failed to get noise suppression node because it is permanently disabled"),t;if(!m()){var a=o("RefCountedAudioContextSingleton").get();if(u=a.audioContext,c=a.destroy,u==null)return t;yield u.audioWorklet.addModule(r("NoiseSuppressionConfig").module_url),e=new AudioWorkletNode(u,"noise-suppression"),e.onprocessorerror=function(t){s=!0,r("FBLogger")("rtc_www").mustfix("Noise suppression node failed with error",t.message),r("FBLogger")("rtc_www").catching(t),n(e)}}return t.connect(e),e}),_.apply(this,arguments)}l.toggleNoiseSuppressionNode=d,l.isNoiseSuppressionNodeInitialized=m,l.connectNoiseSuppressionNode=p}),98);
__d("ZenonWebAudioManager",["FBLogger","RefCountedAudioContextSingleton","ZenonMediaActionLogger","ZenonMediaLoggingUtils","ZenonNoiseSuppressionAudioWorkletNode","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=null,this.$2=null}var t=e.prototype;return t.setupProcessedTrack=function(t,n){if(t.label==="MediaStreamAudioDestinationNode")return t;if(this.$3(n)!==!0)return o("ZenonNoiseSuppressionAudioWorkletNode").toggleNoiseSuppressionNode(n.wasmNoiseSuppression===!0),this.$4(),t;if(n.wasmNoiseSuppression!=null||!this.$1&&(this.$1=this.$5(),this.$1==null))return t;var e=this.$1,a=e.createMediaStreamSource(t.webrtcStream),i=e.createMediaStreamDestination();if(a.connect(i),this.connectFeatureNodesToSink(n,a,i),i.stream.getAudioTracks().length<=0)return r("FBLogger")("rtc_www").warn("Web Audio destinationNode did not contain a media track"),this.$4(),t;var l=i.stream.getAudioTracks()[0],s=r("ZenonMediaLoggingUtils").serializeMediaStreamTrack(l),u=r("ZenonMediaLoggingUtils").serializeMediaStreamTrack(t.webrtcTrack);return r("ZenonMediaActionLogger").logEvent({checkpoint:"Returning processedTrack: "+s+", sourceTrack: "+u}),babelHelpers.extends({},t,{label:"MediaStreamAudioDestinationNode",trackId:l.id,webrtcStream:i.stream,webrtcTrack:l})},t.$3=function(t){return Object.values(t).some(function(e){return e})},t.buildFeatureNodes=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ZenonNoiseSuppressionAudioWorkletNode").connectNoiseSuppressionNode(t,n);return o("ZenonNoiseSuppressionAudioWorkletNode").toggleNoiseSuppressionNode(e.wasmNoiseSuppression===!0),r});function t(t,n,r){return e.apply(this,arguments)}return t})(),t.connectFeatureNodesToSink=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var o=yield this.buildFeatureNodes(e,t,function(e){r("FBLogger")("rtc_www").mustfix("Web Audio pipeline reset due to processor error. One or more AudioWorkletNode might be failing"),e.disconnect(n),t.connect(n)});t.disconnect(n),o.connect(n)});function t(t,n,r){return e.apply(this,arguments)}return t})(),t.$5=function(){var e=o("RefCountedAudioContextSingleton").get(),t=e.audioContext,n=e.destroy;return this.$1=t,this.$2=n,t},t.$4=function(){var e;(e=this.$2)==null||e.call(this),this.$1=null,this.$2=null},e})();l.default=e}),98);
__d("ZenonMediaChannelManager",["FBLogger","ODS","Promise","ZenonBrowsers","ZenonE2ee","ZenonE2eeMandatedStateManager","ZenonE2eeWasmWorkerClient","ZenonInsertableStreamsManager","ZenonMediaActionLogger","ZenonMediaStatsManager","ZenonMediaUtils","ZenonRTCVideoResolutionHelper","ZenonScreenShare","ZenonSimulcastManager","ZenonVideoDurationTracker","ZenonWebAudioManager","asyncToGeneratorRuntime","err","promiseDone","shouldUseInsertableStreams"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="negotiationOffStreamId",c="MediaChannelManager",d=(function(){function t(e){var t=this;this.$1=null,this.$13=!1,this.$2=e.peerConnection,this.$4=new Map,this.$9=new Map,this.$10=new Map,this.$15=new Map,this.$7=[],this.$6=new(r("ZenonVideoDurationTracker")),this.$5=new(r("ZenonMediaStatsManager"))({areTslogsEnabled:e.areTslogsEnabled,dataMessageTranslator:e.dataMessageTranslator,mediaStats:e.mediaStats,onFirstMediaPacket:e.onFirstMediaPacket,onFirstSentMediaPacket:e.onFirstSentMediaPacket,onMediaStatUpdate:e.onMediaStatUpdate,peerConnection:this.$2,tracks:this.$4,trackToSenderMap:this.$15,videoDurationTracker:this.$6}),this.$14=new(r("ZenonWebAudioManager")),this.$5.listen(),this.$2.addEventListener("track",function(e){t.transformReceiverFromEvent(e),t.addRemoteTrackFromEvent(e),t.$16(),r("promiseDone")(t.$17())}),this.$2.addEventListener("signalingstatechange",function(){r("promiseDone")(t.$17()),t.$18(),t.getCodecFromEvent()}),this.$2.addEventListener("removestream",function(){t.$16(!0)}),this.$11=!0,this.$12=new Map,r("shouldUseInsertableStreams")()&&(this.$3=r("ZenonE2ee").getSecureFrameManager(),this.$1=new(r("ZenonInsertableStreamsManager")),this.$3||(s||(s=o("ODS"))).bumpEntityKey(4083,"zenon_e2ee","secure_frame_manager_null, E2EE MANDATED:"+r("ZenonE2eeMandatedStateManager").isInfraE2eeMandated().toString()))}var a=t.prototype;return a.onLocalSdpSet=function(t){r("ZenonE2ee").onLocalSdpSet(t)},a.stopStatsPolling=function(){this.$5.stopPolling()},a.getTracks=function(){return this.$4},a.clearTracks=function(){this.$4.clear(),this.$15.clear(),this.$18()},a.$16=function(t){t===void 0&&(t=!1),r("ZenonRTCVideoResolutionHelper").maybeLimitEncodingResolutionByParticipantCount(this.$2.getSenders(),this.$2.getReceivers(),this.$2.getTransceivers(),this.$2.supportsSimulcast(),t)},a.removeMissingTracks=function(t){var e=this;this.$4.forEach(function(n,r){n.remote&&t.find(function(e){return e===r})==null&&e.removeTrack(r)})},a.updateTrackInfo_DEPRECATED=function(t){var e=this.$4.get(t.trackID);if(e==null){this.$12.set(t.trackID,t);return}var n=this.$19(e,t);this.$4.set(t.trackID,n),this.$18()},a.updateTrackInfos=function(t){var e=this;t.tracks.forEach(function(t){var n=t.trackID;if(!(n==="data"||n==="stream_label")){var r=e.$4.get(n);if(r==null){e.$12.set(n,t);return}var o=e.$19(r,t);e.$4.set(n,o)}}),this.$18()},a.updateMuteStates=function(t){var e=this;t.tracks.forEach(function(t){var n=t.enabled,r=t.trackID;n?e.unmuteTrack(r,!1):e.muteTrack(r,!1)}),this.$18()},a.$19=function(t,n){var e;if(t.contentType==="audio"&&n.type!=="screen_audio"||o("ZenonScreenShare").screenShareWithReplaceTrack())return t;var a=t.webrtcStream,i=a.getVideoTracks().length>1;return n.type==="screen"&&i&&(a=r("ZenonMediaUtils").createStreamWithTrack(t.webrtcTrack),t.webrtcStream.removeTrack(t.webrtcTrack)),{contentHint:t.contentHint,contentType:(e=n.type)!=null?e:t.contentType,enabled:t.enabled,flags:Object.freeze({}),label:t.label,name:"",pausedDownlink:!1,remote:t.remote,trackId:n.trackID,userMuted:!1,webrtcStream:a,webrtcTrack:t.webrtcTrack}},a.getLocalTracksForMWS=function(){var e=this,t=new Map,n=this.$2.getTransceivers();return this.$4.forEach(function(r,o){if(!r.remote){var a,i,l,s,u,c=(a=(i=e.$15.get(o))==null?void 0:i.trackId)!=null?a:o,d=(l=(s=n.find(function(e){var t;return((t=e.sender.track)==null?void 0:t.id)===c}))==null?void 0:s.mid)!=null?l:null,m=(u=e.$2.getLocalMWTrackId(d))!=null?u:o,p=babelHelpers.extends({},r,{trackId:m});t.set(m,p)}}),t},a.addTrack=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){e.contentType==="video"&&e.remote===!1&&(this.$8=e),yield this.$20(e,t),this.$18()});function t(t,n){return e.apply(this,arguments)}return t})(),a.transformSender=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){this.$1!=null&&(yield this.$1.setupSenderTransform(e,t))});function t(t,n){return e.apply(this,arguments)}return t})(),a.transformReceiverFromEvent=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=e.receiver,o=this.$2.getCnameFromTrackId(e.track.id);this.$1!=null&&(o==null&&r("ZenonMediaActionLogger").logCheckpoint("Failed to find Cname for the remote track: "+e.track.id),yield(t=this.$1)==null?void 0:t.setupReceiverTransform(o!=null?o:u,n))});function t(t){return e.apply(this,arguments)}return t})(),a.addReceiveOnlyVideoTransceiverIfMissing=function(){this.$21("video","recvonly")},a.addSendRecvVideoTransceiverIfMissing=function(){this.$21("video","sendrecv")},a.addAudioTrackOrRecvOnlyTransceiverIfMissing=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=0;if(this.$4.forEach(function(e,n){e.remote||t++}),t===0){var n=r("ZenonMediaUtils").createSilentTrack();yield this.addTrack(n,e)}else this.addReceiveOnlyAudioTransceiverIfMissing()});function t(t){return e.apply(this,arguments)}return t})(),a.addReceiveOnlyAudioTransceiverIfMissing=function(){this.$21("audio","recvonly")},a.$21=function(t,n){var e=!1;this.$4.forEach(function(n,r){if(n.contentType===t||t==="video"&&n.contentType==="screen"){e=!0;return}}),!e&&this.$2.addTransceiver(t,{direction:n})},a.addReceiveOnlyVideoTransceiverIfNeeded=function(t,n){this.$22("video","recvonly",t,n)},a.addInactiveAudioTransceiverIfNeeded=function(){this.$22("audio","inactive")},a.$22=function(t,n,r,a){var e=!1;this.$4.forEach(function(n,r){if(n.contentType===t){e=!0;return}}),!(e||o("ZenonBrowsers").noTransceiverForNegotiations()&&a!==!0&&r==="p2p")&&this.$2.addTransceiver(t,{direction:n})},a.removeTrack=function(t){var e=this.$4.get(t);if(e!=null)if(this.$23(e),this.$18(),r("ZenonE2ee").shouldUseE2eeWorker())r("ZenonE2eeWasmWorkerClient").freeEncryptorAndDecryptorForId(t);else{var n;(n=this.$3)==null||n.freeEncryptorAndDecryptorForId(t)}},a.replaceTrack=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a;n===void 0&&(n=!1);var i=this.$4.get(e);if(i!=null){if(o("ZenonScreenShare").isScreenSharingTrack([i])&&!o("ZenonScreenShare").isScreenSharingTrack([t])&&this.$8!=null){if(yield this.$24(i,this.$8),this.$11){var l,s;this.unmuteTrack((l=(s=this.$8)==null?void 0:s.trackId)!=null?l:"")}else{var u,d;this.muteTrack((u=(d=this.$8)==null?void 0:d.trackId)!=null?u:"")}r("ZenonRTCVideoResolutionHelper").handleStopScreenSharing(this.$2.getSenders(),this.$2.getReceivers(),this.$2.getTransceivers(),this.$2.supportsSimulcast()),i.webrtcTrack.stop(),i.webrtcTrack.readyState!=="ended"&&r("ZenonMediaActionLogger").logErrorToFbLogger("ZenonMediaChannelManager: Stopping trackToReplace failed: "+i.label,c,r("err")("Stopping trackToReplace failed: "+i.label),"warn")}else if(t!=null&&o("ZenonScreenShare").isScreenSharingTrack([t])&&e===((a=this.$8)==null?void 0:a.trackId)&&this.$8!=null)this.$11=this.$8.enabled&&this.$8.webrtcTrack.enabled,yield this.$24(this.$8,t),this.unmuteTrack(t.trackId),r("ZenonRTCVideoResolutionHelper").handleStartScreenSharing(this.$2.getSenders(),this.$2.getReceivers(),this.$2.getTransceivers(),this.$2.supportsSimulcast());else if(t!=null){var m;(this.$8==null&&t.contentType==="video"||((m=this.$8)==null?void 0:m.trackId)===e)&&(this.$8=t),yield this.$24(i,t),i.trackId!==t.trackId&&!n&&(i.webrtcTrack.stop(),i.webrtcTrack.readyState!=="ended"&&r("ZenonMediaActionLogger").logErrorToFbLogger("ZenonMediaChannelManager: Stopping trackToReplace failed: "+i.label,c,r("err")("Stopping trackToReplace failed: "+i.label),"warn"))}this.$16(),this.$18()}});function t(t,n,r){return e.apply(this,arguments)}return t})(),a.addRemoteTrackFromEvent=function(t){var e=t.transceiver,n=this.$2.getRemoteMWTrackId(e.mid),o=r("ZenonMediaUtils").convertToZenonImmutableMediaTrack(t.track,{isRemote:!0,isUserMuted:!1,stream:t.streams?t.streams[0]:null},n),a=this.$12.get(o.trackId);a!=null&&(o=this.$19(o,a),this.$12.delete(o.trackId));var i=this.$9.get(o.trackId);i!=null&&(o.contentType!=="audio"&&(o.webrtcTrack.enabled=i.enabled,o=babelHelpers.extends({},o,{enabled:i.enabled})),o=babelHelpers.extends({},o,{userMuted:i.userMuted}),this.$9.delete(o.trackId)),this.$4.set(o.trackId,o),this.$18(),this.$5.onRemoteTrackAdded(o)},a.createDataChannel=function(t,n,r,o,a){this.$2.createDataChannel(t,n,r,o,a)},a.muteTrack=function(t,n){n===void 0&&(n=!0),this.$25(t,!0,n)},a.$25=function(t,n,r){var e=this.$4.get(t),o=e===this.$8;if(e==null){this.$9.set(t,{enabled:!n,userMuted:n});return}var a=e;e.userMuted!==n&&(a=babelHelpers.extends({},a,{userMuted:n})),(n?!(!a.enabled&&!a.webrtcTrack.enabled):!(a.enabled&&a.webrtcTrack.enabled))&&(a.webrtcTrack.enabled=!n,a=babelHelpers.extends({},a,{enabled:!n})),o&&(this.$8=a),e!==a&&(this.$4.set(a.trackId,a),r&&this.$18())},a.unmuteTrack=function(t,n){n===void 0&&(n=!0),this.$25(t,!1,n)},a.forceEncodingEnabled=function(r){return r===this.$13?(e||(e=n("Promise"))).resolve():(this.$13=r,this.$17())},a.setSimulcastSingleLayerParams=function(){if(this.$2.supportsSimulcast()&&!this.$2.getSimulcastInitialized()){var e=this.$2.getSenders().filter(function(e){return e.track&&e.track.kind==="video"});if(e.length!==0){var t=e[0];if("getParameters"in t&&"setParameters"in t){var n=o("ZenonSimulcastManager").getSimulcastSingleLayerParameters(t.getParameters());if(this.$26(t))return;r("promiseDone")(t.setParameters(n)),this.$2.setSimulcastInitialized(!0)}}}},a.stopLocalTracks=function(){if(this.$4.forEach(function(e){e.remote===!1&&(r("ZenonMediaActionLogger").logCheckpoint("stopping track: "+e.label),e.webrtcTrack.stop(),e.webrtcTrack.readyState!=="ended"&&r("ZenonMediaActionLogger").logErrorToFbLogger("ZenonMediaChannelManager: Stopping track failed: "+e.label,c,r("err")("Stopping track failed: "+e.label),"warn"))}),this.$8!=null&&!this.$4.has(this.$8.trackId)){var e,t,n;r("ZenonMediaActionLogger").logCheckpoint("stopping local video track: "+((e=(t=this.$8)==null?void 0:t.label)!=null?e:"")),(n=this.$8)==null||n.webrtcTrack.stop(),this.$8&&this.$8.webrtcTrack.readyState!=="ended"&&r("ZenonMediaActionLogger").logErrorToFbLogger("ZenonMediaChannelManager: Stopping local video track failed: "+this.$8.label,c,r("err")("Stopping local video track failed: "+this.$8.label),"warn")}if(this.$18(),r("ZenonE2ee").shouldUseE2eeWorker())r("ZenonE2eeWasmWorkerClient").freeAllEncryptorsAndDecryptors();else{var o;(o=this.$3)==null||o.freeAllEncryptorsAndDecryptors()}},a.stopLocalTrack=function(t){var e=this.$4.get(t);e!=null&&(e.remote||(e.webrtcTrack.stop(),e.webrtcTrack.readyState!=="ended"&&r("ZenonMediaActionLogger").logErrorToFbLogger("ZenonMediaChannelManager: Stopping local track failed: "+e.label,c,r("err")("Stopping local track failed: "+e.label),"warn")))},a.setNetworkStatusListener=function(t){this.$5.setNetworkStatusListener(t)},a.registerTrackListener=function(t){this.$7.push(t)},a.setTrackListenersFromManager=function(t){this.$7=t.$7},a.timeSeries=function(){return this.$5.timeSeries()},a.resetTimeSeries=function(){this.$5.resetTimeSeries()},a.$20=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e;if(e.contentType==="audio"){var r,o;n=this.$14.setupProcessedTrack(e,{wasmNoiseSuppression:(r=(o=e.flags)==null?void 0:o.wasmNoiseSuppression)!=null?r:!1})}this.$10.set(e.trackId,n.trackId),this.$15.set(e.trackId,n);var a=yield this.$27(n,t);yield this.transformSender(a,n.contentType),this.$4.set(e.trackId,e)});function t(t,n){return e.apply(this,arguments)}return t})(),a.$27=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(t==="p2p"){var n=this.$2.getTransceivers().find(function(t){var n=t.sender.track,r=t.receiver.track;return t.currentDirection==="inactive"?!1:n!==null&&r==null&&n.kind===e.contentType&&e.remote?!0:r!==null&&n==null&&r.kind===e.contentType&&e.remote===!1});return n!=null?(n.direction="sendrecv",yield n.sender.replaceTrack(e.webrtcTrack),n.sender):this.$2.addTrack(e.webrtcTrack,e.webrtcStream)}return this.$2.addTransceiver(e.webrtcTrack,{direction:"sendrecv",streams:[e.webrtcStream]}).sender});function t(t,n){return e.apply(this,arguments)}return t})(),a.$23=function(t){this.$4.delete(t.trackId),this.$15.delete(t.trackId),t.remote||(this.$2.removeTrack(t.webrtcTrack),t.webrtcTrack.stop())},a.$24=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,o,a=(n=this.$15.get(e.trackId))!=null?n:e,i=this.$2.getSenders().find(function(t){var n,r;return((n=t.track)==null?void 0:n.id)===e.webrtcTrack.id||a.trackId===((r=t.track)==null?void 0:r.id)});if(i===void 0)throw r("err")("track to be replaced is not found");var l=this.$10.get(e.trackId);l!=null?this.$10.delete(e.trackId):l=e.trackId,this.$15.delete(e.trackId);var s=t;if(s.contentType==="audio"){var u,c;s=this.$14.setupProcessedTrack(t,{wasmNoiseSuppression:(u=(c=s.flags)==null?void 0:c.wasmNoiseSuppression)!=null?u:!1})}yield i.replaceTrack(s.webrtcTrack),this.$10.set(t.trackId,l),this.$15.set(t.trackId,s),this.$4.delete(e.trackId),this.$4.set(t.trackId,t),(o=this.$3)==null||o.updateLocalTrackIdForStats(l,t.trackId)});function t(t,n){return e.apply(this,arguments)}return t})(),a.$18=function(){this.$6.update(this.$4),this.$7.forEach(function(e){e()})},a.$26=function(t){var e=this.$2.getTransceiverFromSender(t);return!!(e&&e.stopped)},a.$28=function(){for(var e=!1,t=this.getTracks().values(),n=t.next();!n.done&&!e;)e=n.value.remote,n=t.next();return this.$13||e},a.$17=function(){var t=this,o=this.$28();return this.$2.getSenders().forEach(function(a){if(t.$26(a)||!("getParameters"in a)||!("setParameters"in a))return(e||(e=n("Promise"))).resolve();var i=a.getParameters(),l=!1;if(i.encodings!=null)for(var s=0;s<i.encodings.length;s++)(s===0||!o)&&i.encodings[s].active!==o&&(i.encodings[s].active=o,l=!0);if(l)return a.setParameters(i).catch(function(e){r("FBLogger")("rtc_www").catching(e).mustfix("Error while trying to toggle encoding")})}),(e||(e=n("Promise"))).resolve()},a.getCodecFromEvent=function(){var e=this;if(r("ZenonE2ee").isE2eeStackReady()){var t=this.$2.getSignalingState();t!=="have-remote-offer"&&t!=="stable"||(this.$2.getReceivers().forEach(function(t){e.$29(t)}),this.$2.getSenders().forEach(function(t){var n=e.$30(t),o=t.track;if(!(o==null||n==null))if(r("ZenonE2ee").shouldUseE2eeWorker())r("ZenonE2eeWasmWorkerClient").setEncryptorCodec(o.id,n);else{var a;(a=e.$3)==null||a.setFrameDataHandlerOnEncryptor(o.id,n)}}))}},a.$29=function(t){if("getParameters"in t&&t.track!=null){var e=t.track.id,n=t.getParameters(),o=new Set;if(n.codecs==null||n.codecs.length===0)return;var a=n.codecs[0].mimeType;if(n.codecs.forEach(function(e){o.add(e.mimeType)}),r("ZenonE2ee").shouldUseE2eeWorker())r("ZenonE2eeWasmWorkerClient").setDecryptorCodec(e,o);else{var i;(i=this.$3)==null||i.setFrameDataHandlerTypesOnDecryptor(e,o)}return a}},a.$30=function(t){if("getParameters"in t&&t.track!=null){var e=t.getParameters();if(e.codecs!=null&&e.codecs.length!==0)return e.codecs[0].mimeType}},t})();l.default=d}),98);
__d("ZenonReceiverRenderedResolutionUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o of n){if(!r.includes(o))return!1;var a=e[o],i=t[o];for(var l of Object.keys(a))if(a[l]!==i[l])return!1}return!0}function l(e){return!e||!e.renderWidth||!e.renderHeight?0:e.renderWidth*e.renderHeight}function s(t,n){if(t===n)return!0;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(var a of r)if(!Object.prototype.hasOwnProperty.call(n,a)||!e(t[a],n[a]))return!1;return!0}function u(e,t){if(!e||!t)return 0;var n=0,r=Object.keys(e);for(var o of r){var a=e[o],i=t[o];if(a&&i){var s=Object.keys(a);for(var u of s){var c=a[u],d=i[u],m=0;if(c&&d){var p=l(c),_=l(d);p>0&&_>0?m=p>_?p/_:_/p:m=p+p}m>n&&(n=m)}}}return n}i.areEqualRenderResolutionMaps=s,i.getMaxResolutionChangeMultiplier=u}),66);
__d("ZenonRenderResolutionTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({Unknown:0,Default:1,ScreenShare:2});i.StreamType=e}),66);
__d("ZenonReceiverRenderedResolutionManager",["CompactSerializer","DataMessageSerializers","RequestStreamBodyUtils","ZenonCallsContext","ZenonReceiverRenderedResolutionUtils","ZenonRenderResolutionTypes","ZenonSCTPConstants","ZenonTransportType","immutable","promiseDone","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useMemo,d=200,m=function(t){switch(t){case"video":return o("ZenonRenderResolutionTypes").StreamType.Default;case"screen":return o("ZenonRenderResolutionTypes").StreamType.ScreenShare;default:return o("ZenonRenderResolutionTypes").StreamType.Unknown}},p=(function(){function e(e,t,n){var a=this;this.$4=r("immutable").Map(),this.$5=new Map,this.$6={},this.updateTrackIdToUserIdMap=function(e){var t,n,o,i;if(!(!e||!e.get(a.$1))){var l=(t=(n=e.get(a.$1))==null?void 0:n.participants)!=null?t:r("immutable").Map(),s=(o=(i=e.get(a.$1))==null?void 0:i.mediaTracks)!=null?o:new Map;l!==a.$4&&(a.$4=l!=null?l:r("immutable").Map(),a.$5.clear(),l.forEach(function(e,t,n){e.trackIDs.forEach(function(e){var n=s.get(e);n!=null&&n.remote&&a.$5.set(e,t)})}))}},this.updateRenderedResolutions=function(e){var t={};e.forEach(function(e,n){var r=m(e.contentType);if(r!==o("ZenonRenderResolutionTypes").StreamType.Unknown){var i=a.$5.get(n);if(i!=null){var l={renderHeight:e.renderHeight,renderWidth:e.renderWidth,streamId:n,streamType:r,userId:i},s=t[i];if(s)s[String(r)]=l;else{var u;t[i]=(u={},u[String(r)]=l,u)}}}}),a.updateRenderedResolutionMap(t)},this.$1=e,this.$2=t,this.$3=n,this.$2.addListener("callsModelUpdate",this.updateTrackIdToUserIdMap),this.updateTrackIdToUserIdMap(this.$2.getCurrentCallsModel())}var t=e.prototype;return t.updateRenderedResolutionMap=function(t){var e=this;if(!o("ZenonReceiverRenderedResolutionUtils").areEqualRenderResolutionMaps(t,this.$6)){this.$2.updateRenderedResolutionMap(t);var n=2;if(!(Object.keys(this.$6||{}).length>0&&Object.keys(t||{}).length>0&&o("ZenonReceiverRenderedResolutionUtils").getMaxResolutionChangeMultiplier(t,this.$6)<n)){this.$6=t;var a=this.serializeSctpRenderResolutionMap({renderResolutionMap:this.$6});window.setTimeout(function(){r("promiseDone")(e.$3.sendGenericDataMessage(o("ZenonSCTPConstants").SCTP_RRR,a,{serviceRecipients:[2]},o("ZenonTransportType").ZenonTransportType.SCTP))},this.getJitterMs())}}},t.serializeSctpRenderResolutionMap=function(t){return o("RequestStreamBodyUtils").uint8ArrayToString(o("CompactSerializer").serialize(t,o("DataMessageSerializers").serializeRenderResolutionMessageFromClient))},t.getJitterMs=function(){return Math.floor(Math.random()*d)},t.getTrackIdToUserIdMap=function(){return this.$5},t.getRenderedResolutionMap=function(){return this.$6},e})();function _(){var e=u(r("ZenonCallsContext")),t=e.callSDK,n=e.currentCallInstanceSDK;return c(function(){var e=new p(n.getClientCallID_DEPRECATED(),t,n);return e.updateRenderedResolutions},[t,n])}l.ReceiverRenderedResolutionManager=p,l.useReceiverRenderedResolutionManager=_}),98);
__d("ZenonMediaElementTracker",["FBLogger","ZenonReceiverRenderedResolutionManager","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=new Map,c;function d(e,t){u.has(e)&&r("FBLogger")("rtc_www").warn("ZenonMediaElementTracker already has a stream associated with the given element"),u.set(e,t)}function m(e){u.delete(e)||r("FBLogger")("rtc_www").warn("ZenonMediaElementTracker did not have a stream associated with the given element")}function p(e){var t=new Map;for(var n of u){var o=n[0],a=n[1];for(var i of a.getTracks()){var l=e.get(i.id);if(l!=null&&i.kind==="video"&&o instanceof HTMLVideoElement){if(o.videoWidth===0||o.videoHeight===0)continue;var s=o.getBoundingClientRect();l.renderedWidth=s.width,l.renderedHeight=s.height;var d=s.width/o.videoWidth,m=s.height/o.videoHeight,p=getComputedStyle(o),_=p.objectFit,f=1,g=1;switch(_){case"cover":f=Math.max(d,m),g=s.width*s.height/(f*f*o.videoWidth*o.videoHeight);break;case"contain":f=Math.min(d,m);break;default:r("FBLogger")("rtc_www").warn("Unknown object-fit type %s",_)}l.scaleRatio=f*f,l.croppingRatio=g;var h=l.contentType;t.set(i.id,{contentType:h||"video",renderHeight:s.height,renderWidth:s.width})}}}c!=null&&c(t)}function _(e,t){c=o("ZenonReceiverRenderedResolutionManager").useReceiverRenderedResolutionManager(),s(function(){var n=e.current;if(!(!t||!n))return d(n,t),function(){m(n)}},[e,t])}l.trackElement=d,l.untrackElement=m,l.updateStats=p,l.useMediaElementTracker=_}),98);
__d("RpGenaiSctpCaptionsCaptionsTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({BOT:1,USER:2});a.exports={SpeakerAttributionRole:e}}),null);
__d("RpGenaiSctpCaptionsCaptionsSerializers",["RpGenaiSctpCaptionsCaptionsTypes","ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{role:o("RpGenaiSctpCaptionsCaptionsTypes").SpeakerAttributionRole.cast(0)}}function u(){return{text:"",language:""}}function c(){return{attribution:s(),caption:u()}}function d(t,n){if(n.writeStructBegin("SpeakerAttribution"),n.writeFieldBegin({fname:"role",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.role!=null){var a;n.writeI32((a=t.role)!=null?a:0)}else{var i=o("RpGenaiSctpCaptionsCaptionsTypes").SpeakerAttributionRole.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function m(t,n){if(n.writeStructBegin("CaptionPayload"),n.writeFieldBegin({fname:"text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.text!=null)n.writeString(t.text);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"language",ftype:e.STRING,fid:2}),t.language!=null)n.writeString(t.language);else{var a="";n.writeString(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function p(t,n){if(n.writeStructBegin("Caption"),n.writeFieldBegin({fname:"attribution",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),t.attribution!=null)d(t.attribution,n);else{var o=s();d(o,n)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"caption",ftype:e.STRUCT,fid:2}),t.caption!=null)m(t.caption,n);else{var a=u();m(a,n)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function _(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.role=o("RpGenaiSctpCaptionsCaptionsTypes").SpeakerAttributionRole.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.role===void 0&&(n.role=o("RpGenaiSctpCaptionsCaptionsTypes").SpeakerAttributionRole.cast(0)),n}function f(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.text=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.language=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.text===void 0&&(n.text=""),n.language===void 0&&(n.language=""),n}function g(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.attribution=_(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.caption=f(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.attribution===void 0&&(n.attribution=s()),n.caption===void 0&&(n.caption=u()),n}l.SpeakerAttribution$DefaultConstructor=s,l.CaptionPayload$DefaultConstructor=u,l.Caption$DefaultConstructor=c,l.serializeSpeakerAttribution=d,l.serializeCaptionPayload=m,l.serializeCaption=p,l.deserializeSpeakerAttribution=_,l.deserializeCaptionPayload=f,l.deserializeCaption=g}),98);
__d("RpGenaiSctpCaptionsGenAIBotStateTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e,l=(e=n("$InternalEnum"))({AMBIENT:1,LISTENING:2,THINKING:3,RESPONDING:4}),s=e({MEMORY_UPDATED:1,ERROR:2}),u=e({INTERRUPT:1,MESSAGE:2,RESET_TIMEOUTS:3,EVENT:4,STARTER_PROMPT:5,TOOL_RESPONSE:6,HANDSHAKE:7,READ_ALOUD:8,CLIENT_INSTRUCTION_RESPONSE:9,GPS:10}),c=e({NONE:0,COMPOSER:1}),d=e({VOICE:1,TEXT_ONLY:2}),m=e({NONE:1,APP_IN_FOREGROUND:4,APP_IN_BACKGROUND:5,IN_APP_BACKGROUND:6,IMAGE_UPLOAD_BEGIN:7,IMAGE_UPLOAD_END:8,NON_VOICE_INTERACTION_BEGIN:9,NON_VOICE_INTERACTION_END:10,TTS:11,CONFIRMATION_TURN_CONFIGURATION:12,PAUSE_AI:13,RESUME_AI:14,MEDIA_UPLOAD_BEGIN:15,MEDIA_UPLOAD_END:16}),p=e({EMPTY:0,THREAD:1,POST:2,E2EE_CONTEXT:3,IG_POST:4,IN_APP_BROWSER:5,WEARABLES:6}),_=e({CALL_VOICE:1,MESSAGE_TEXT:2}),f=e({UNKNOWN:0,PSI:1});a.exports={AgenticActionRequestType:_,BotStateType:l,ClientInputEvent:m,ClientInputMethod:c,ClientInputType:u,ClientOutputType:d,ContextType:p,MediaUploadStatus:s,VoiceCommandType:f}}),null);
__d("ViewModelSerializers",["ThriftTypes"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{}}function c(){return{}}function d(){return{url:"",title:"",subtitle:""}}function m(){return{url:""}}function p(){return{}}function _(){return{}}function f(){return{}}function g(){return{}}function h(){return{}}function y(){return{}}function C(){return{}}function b(){return{}}function v(){return{}}function S(){return{}}function R(){return{}}function L(){return{}}function E(){return{}}function k(){return{}}function I(){return{}}function T(){return{otid:"",timestamp_ms:""}}function D(){return{}}function x(){return{}}function $(){return{}}function P(){return{}}function N(){return{}}function M(){return{}}function w(){return{}}function A(){return{}}function F(){return{}}function O(){return{}}function B(){return{}}function W(){return{}}function q(){return{}}function U(){return{}}function V(){return{}}function H(){return{}}function G(){return{}}function z(){return{}}function j(){return{}}function K(){return{}}function Q(){return{}}function X(){return{}}function Y(){return{}}function J(t,n){n.writeStructBegin("ImagineData"),t.media_type!=null&&(n.writeFieldBegin({fname:"media_type",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.media_type),n.writeFieldEnd()),t.prompt!=null&&(n.writeFieldBegin({fname:"prompt",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.prompt),n.writeFieldEnd()),t.uri!=null&&(n.writeFieldBegin({fname:"uri",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.uri),n.writeFieldEnd()),t.temporary_handle!=null&&(n.writeFieldBegin({fname:"temporary_handle",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.temporary_handle),n.writeFieldEnd()),t.request_id!=null&&(n.writeFieldBegin({fname:"request_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.request_id),n.writeFieldEnd()),t.response_id!=null&&(n.writeFieldBegin({fname:"response_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.response_id),n.writeFieldEnd()),t.insertion_index!=null&&(n.writeFieldBegin({fname:"insertion_index",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.insertion_index),n.writeFieldEnd()),t.avatar_motion_type!=null&&(n.writeFieldBegin({fname:"avatar_motion_type",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:8}),n.writeString(t.avatar_motion_type),n.writeFieldEnd()),t.background_motion_type!=null&&(n.writeFieldBegin({fname:"background_motion_type",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:9}),n.writeString(t.background_motion_type),n.writeFieldEnd()),t.serialized_blob!=null&&(n.writeFieldBegin({fname:"serialized_blob",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:10}),n.writeString(t.serialized_blob),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Z(t,n){n.writeStructBegin("ReelsData"),t.reels_url!=null&&(n.writeFieldBegin({fname:"reels_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.reels_url),n.writeFieldEnd()),t.thumbnail_url!=null&&(n.writeFieldBegin({fname:"thumbnail_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.thumbnail_url),n.writeFieldEnd()),t.author!=null&&(n.writeFieldBegin({fname:"author",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.author),n.writeFieldEnd()),t.avatar_url!=null&&(n.writeFieldBegin({fname:"avatar_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.avatar_url),n.writeFieldEnd()),t.media_id!=null&&(n.writeFieldBegin({fname:"media_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.media_id),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ee(t,n){if(n.writeStructBegin("GenAIImagineViewModel"),t.imagine_raw_data!=null){n.writeFieldBegin({fname:"imagine_raw_data",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRUCT,size:t.imagine_raw_data.length});for(var o of t.imagine_raw_data)J(o,n);n.writeListEnd(),n.writeFieldEnd()}t.message!=null&&(n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.message),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function te(t,n){if(n.writeStructBegin("SourceItem"),n.writeFieldBegin({fname:"url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.url!=null)n.writeString(t.url);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"title",ftype:e.STRING,fid:2}),t.title!=null)n.writeString(t.title);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"subtitle",ftype:e.STRING,fid:3}),t.subtitle!=null)n.writeString(t.subtitle);else{var i="";n.writeString(i)}n.writeFieldEnd(),t.favicon_url!=null&&(n.writeFieldBegin({fname:"favicon_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.favicon_url),n.writeFieldEnd()),t.favicon!=null&&(n.writeFieldBegin({fname:"favicon",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),ne(t.favicon,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ne(t,n){if(n.writeStructBegin("MediaItem"),n.writeFieldBegin({fname:"url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.url!=null)n.writeString(t.url);else{var o="";n.writeString(o)}n.writeFieldEnd(),t.url_fallback!=null&&(n.writeFieldBegin({fname:"url_fallback",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.url_fallback),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function re(t,n){if(n.writeStructBegin("GenAISearchViewModel"),t.search_result_uri!=null){n.writeFieldBegin({fname:"search_result_uri",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRING,size:t.search_result_uri.length});for(var o of t.search_result_uri)n.writeString(o);n.writeListEnd(),n.writeFieldEnd()}if(t.search_engine!=null&&(n.writeFieldBegin({fname:"search_engine",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.search_engine),n.writeFieldEnd()),t.search_query!=null&&(n.writeFieldBegin({fname:"search_query",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.search_query),n.writeFieldEnd()),t.attribution_link!=null&&(n.writeFieldBegin({fname:"attribution_link",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.attribution_link),n.writeFieldEnd()),t.references_title!=null){n.writeFieldBegin({fname:"references_title",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:5}),n.writeListBegin({etype:e.STRING,size:t.references_title.length});for(var a of t.references_title)n.writeString(a);n.writeListEnd(),n.writeFieldEnd()}if(t.search_engine_icon_url!=null&&(n.writeFieldBegin({fname:"search_engine_icon_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.search_engine_icon_url),n.writeFieldEnd()),t.source_url!=null&&(n.writeFieldBegin({fname:"source_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.source_url),n.writeFieldEnd()),t.response!=null&&(n.writeFieldBegin({fname:"response",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:8}),n.writeString(t.response),n.writeFieldEnd()),t.thumbnail_data!=null){n.writeFieldBegin({fname:"thumbnail_data",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:9}),n.writeListBegin({etype:e.STRING,size:t.thumbnail_data.length});for(var i of t.thumbnail_data)n.writeString(i);n.writeListEnd(),n.writeFieldEnd()}if(t.thumbnail_cdn_url!=null){n.writeFieldBegin({fname:"thumbnail_cdn_url",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:10}),n.writeListBegin({etype:e.STRING,size:t.thumbnail_cdn_url.length});for(var l of t.thumbnail_cdn_url)n.writeString(l);n.writeListEnd(),n.writeFieldEnd()}if(t.sources!=null){n.writeFieldBegin({fname:"sources",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:11}),n.writeListBegin({etype:e.STRUCT,size:t.sources.length});for(var s of t.sources)te(s,n);n.writeListEnd(),n.writeFieldEnd()}if(t.facepile_favicons!=null){n.writeFieldBegin({fname:"facepile_favicons",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:12}),n.writeListBegin({etype:e.STRUCT,size:t.facepile_favicons.length});for(var u of t.facepile_favicons)ne(u,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function oe(t,n){if(n.writeStructBegin("GenAIReelsViewModel"),t.reels_urls!=null){n.writeFieldBegin({fname:"reels_urls",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRING,size:t.reels_urls.length});for(var o of t.reels_urls)n.writeString(o);n.writeListEnd(),n.writeFieldEnd()}if(t.reels_data!=null){n.writeFieldBegin({fname:"reels_data",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.reels_data.length});for(var a of t.reels_data)Z(a,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function ae(t,n){n.writeStructBegin("TeamInfo"),t.name!=null&&(n.writeFieldBegin({fname:"name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.name),n.writeFieldEnd()),t.logo!=null&&(n.writeFieldBegin({fname:"logo",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.logo),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ie(t,n){n.writeStructBegin("GameInfo"),t.home_team!=null&&(n.writeFieldBegin({fname:"home_team",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),ae(t.home_team,n),n.writeFieldEnd()),t.away_team!=null&&(n.writeFieldBegin({fname:"away_team",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),ae(t.away_team,n),n.writeFieldEnd()),t.home_team_score!=null&&(n.writeFieldBegin({fname:"home_team_score",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.home_team_score),n.writeFieldEnd()),t.away_team_score!=null&&(n.writeFieldBegin({fname:"away_team_score",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.away_team_score),n.writeFieldEnd()),t.match_status!=null&&(n.writeFieldBegin({fname:"match_status",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.match_status),n.writeFieldEnd()),t.datetime!=null&&(n.writeFieldBegin({fname:"datetime",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.datetime),n.writeFieldEnd()),t.date!=null&&(n.writeFieldBegin({fname:"date",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.date),n.writeFieldEnd()),t.time!=null&&(n.writeFieldBegin({fname:"time",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:8}),n.writeString(t.time),n.writeFieldEnd()),t.tournament_name!=null&&(n.writeFieldBegin({fname:"tournament_name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:9}),n.writeString(t.tournament_name),n.writeFieldEnd()),t.home_records!=null&&(n.writeFieldBegin({fname:"home_records",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:10}),n.writeString(t.home_records),n.writeFieldEnd()),t.away_records!=null&&(n.writeFieldBegin({fname:"away_records",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:11}),n.writeString(t.away_records),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function le(t,n){n.writeStructBegin("SportsSearchData"),t.game_info!=null&&(n.writeFieldBegin({fname:"game_info",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),ie(t.game_info,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function se(t,n){n.writeStructBegin("GenAISportsViewModel"),t.sports_search_data!=null&&(n.writeFieldBegin({fname:"sports_search_data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),le(t.sports_search_data,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ue(t,n){n.writeStructBegin("PromptData"),t.text!=null&&(n.writeFieldBegin({fname:"text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.text),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ce(t,n){if(n.writeStructBegin("GenAITextPromptViewModel"),t.prompts!=null){n.writeFieldBegin({fname:"prompts",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRUCT,size:t.prompts.length});for(var o of t.prompts)ue(o,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function de(t,n){n.writeStructBegin("GenAIReminderViewModel"),t.reminder_id!=null&&(n.writeFieldBegin({fname:"reminder_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.reminder_id),n.writeFieldEnd()),t.title!=null&&(n.writeFieldBegin({fname:"title",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.title),n.writeFieldEnd()),t.trigger_type!=null&&(n.writeFieldBegin({fname:"trigger_type",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.trigger_type),n.writeFieldEnd()),t.trigger_time!=null&&(n.writeFieldBegin({fname:"trigger_time",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.trigger_time),n.writeFieldEnd()),t.create_time!=null&&(n.writeFieldBegin({fname:"create_time",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.create_time),n.writeFieldEnd()),t.is_deleted!=null&&(n.writeFieldBegin({fname:"is_deleted",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:6}),n.writeBool(t.is_deleted),n.writeFieldEnd()),t.thumbnail_url!=null&&(n.writeFieldBegin({fname:"thumbnail_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.thumbnail_url),n.writeFieldEnd()),t.full_size_url!=null&&(n.writeFieldBegin({fname:"full_size_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:8}),n.writeString(t.full_size_url),n.writeFieldEnd()),t.reminder_media_key!=null&&(n.writeFieldBegin({fname:"reminder_media_key",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:9}),n.writeString(t.reminder_media_key),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function me(t,n){n.writeStructBegin("GenAIBasilViewModel"),t.rldrive_object_id!=null&&(n.writeFieldBegin({fname:"rldrive_object_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.rldrive_object_id),n.writeFieldEnd()),t.title!=null&&(n.writeFieldBegin({fname:"title",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.title),n.writeFieldEnd()),t.subtitle!=null&&(n.writeFieldBegin({fname:"subtitle",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.subtitle),n.writeFieldEnd()),t.create_time!=null&&(n.writeFieldBegin({fname:"create_time",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.create_time),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function pe(t,n){n.writeStructBegin("GenAIStudioTransparencyViewModel"),t.admin_text!=null&&(n.writeFieldBegin({fname:"admin_text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.admin_text),n.writeFieldEnd()),t.cta_text!=null&&(n.writeFieldBegin({fname:"cta_text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.cta_text),n.writeFieldEnd()),t.cta_url!=null&&(n.writeFieldBegin({fname:"cta_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.cta_url),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function _e(t,n){n.writeStructBegin("GenAIGemstoneGenAIMatchmakerViewModel"),t.candidate_profile_url!=null&&(n.writeFieldBegin({fname:"candidate_profile_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.candidate_profile_url),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function fe(t,n){if(n.writeStructBegin("GenAIMemoryNotificationsViewModel"),t.memory_notifications_data!=null){n.writeFieldBegin({fname:"memory_notifications_data",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRUCT,size:t.memory_notifications_data.length});for(var o of t.memory_notifications_data)ge(o,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function ge(t,n){n.writeStructBegin("GenAIMemoryNotificationData"),t.admin_text!=null&&(n.writeFieldBegin({fname:"admin_text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.admin_text),n.writeFieldEnd()),t.cta_text!=null&&(n.writeFieldBegin({fname:"cta_text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.cta_text),n.writeFieldEnd()),t.cta_url!=null&&(n.writeFieldBegin({fname:"cta_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.cta_url),n.writeFieldEnd()),t.identifier!=null&&(n.writeFieldBegin({fname:"identifier",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.identifier),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function he(t,n){if(n.writeStructBegin("GenAIBizAgentViewModel"),t.related_product_ids!=null){n.writeFieldBegin({fname:"related_product_ids",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRING,size:t.related_product_ids.length});for(var o of t.related_product_ids)n.writeString(o);n.writeListEnd(),n.writeFieldEnd()}if(t.app_client_actions!=null){n.writeFieldBegin({fname:"app_client_actions",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRING,size:t.app_client_actions.length});for(var a of t.app_client_actions)n.writeString(a);n.writeListEnd(),n.writeFieldEnd()}t.feOmnibotMessage!=null&&(n.writeFieldBegin({fname:"feOmnibotMessage",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.feOmnibotMessage),n.writeFieldEnd()),t.fe_message!=null&&(n.writeFieldBegin({fname:"fe_message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.fe_message),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ye(t,n){if(n.writeStructBegin("MessageIdParams"),n.writeFieldBegin({fname:"otid",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.otid!=null)n.writeString(t.otid);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"timestamp_ms",ftype:e.STRING,fid:2}),t.timestamp_ms!=null)n.writeString(t.timestamp_ms);else{var a="";n.writeString(a)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function Ce(t,n){n.writeStructBegin("StoredMemory"),t.memory_id!=null&&(n.writeFieldBegin({fname:"memory_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(BigInt(t.memory_id)),n.writeFieldEnd()),t.memory_text!=null&&(n.writeFieldBegin({fname:"memory_text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.memory_text),n.writeFieldEnd()),t.message_id_params!=null&&(n.writeFieldBegin({fname:"message_id_params",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),ye(t.message_id_params,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function be(t,n){n.writeStructBegin("NewMemory"),t.memory_id!=null&&(n.writeFieldBegin({fname:"memory_id",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),n.writeI64(BigInt(t.memory_id)),n.writeFieldEnd()),t.memory_text!=null&&(n.writeFieldBegin({fname:"memory_text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.memory_text),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ve(t,n){if(n.writeStructBegin("MemoryUpdate"),t.added_memories!=null){n.writeFieldBegin({fname:"added_memories",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRUCT,size:t.added_memories.length});for(var o of t.added_memories)be(o,n);n.writeListEnd(),n.writeFieldEnd()}if(t.removed_memories!=null){n.writeFieldBegin({fname:"removed_memories",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.removed_memories.length});for(var a of t.removed_memories)Ce(a,n);n.writeListEnd(),n.writeFieldEnd()}t.memory_update_admin_text!=null&&(n.writeFieldBegin({fname:"memory_update_admin_text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.memory_update_admin_text),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Se(t,n){n.writeStructBegin("MemoryDisclosure"),t.disclosure_text!=null&&(n.writeFieldBegin({fname:"disclosure_text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.disclosure_text),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Re(t,n){n.writeStructBegin("GenAIMemoryUpdateViewModel"),t.memory_update!=null&&(n.writeFieldBegin({fname:"memory_update",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),ve(t.memory_update,n),n.writeFieldEnd()),t.memory_disclosure!=null&&(n.writeFieldBegin({fname:"memory_disclosure",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),Se(t.memory_disclosure,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Le(t,n){n.writeStructBegin("GenAIStreamingStateViewModel"),t.streaming_state!=null&&(n.writeFieldBegin({fname:"streaming_state",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.streaming_state),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ee(t,n){n.writeStructBegin("GenAIControlTokenViewModel"),t.control_token!=null&&(n.writeFieldBegin({fname:"control_token",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.control_token),n.writeFieldEnd()),t.token_id!=null&&(n.writeFieldBegin({fname:"token_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.token_id),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ke(t,n){n.writeStructBegin("ActionPayloadObject"),t.json!=null&&(n.writeFieldBegin({fname:"json",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.json),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ie(t,n){n.writeStructBegin("DialogStateCacheObject"),t.dialog_state_cache_json!=null&&(n.writeFieldBegin({fname:"dialog_state_cache_json",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.dialog_state_cache_json),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Te(t,n){n.writeStructBegin("StructuredResponseInfoObject"),t.structured_response_json!=null&&(n.writeFieldBegin({fname:"structured_response_json",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.structured_response_json),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function De(t,n){if(n.writeStructBegin("PluginsMetadata"),t.executed_plugins!=null){n.writeFieldBegin({fname:"executed_plugins",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRING,size:t.executed_plugins.length});for(var o of t.executed_plugins)n.writeString(o);n.writeListEnd(),n.writeFieldEnd()}if(t.plugins_response_metadata_json!=null){n.writeFieldBegin({fname:"plugins_response_metadata_json",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRING,size:t.plugins_response_metadata_json.length});for(var a of t.plugins_response_metadata_json)n.writeString(a);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function xe(t,n){n.writeStructBegin("SGViewModel"),t.action_payload_object!=null&&(n.writeFieldBegin({fname:"action_payload_object",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),ke(t.action_payload_object,n),n.writeFieldEnd()),t.dialog_state_cache_object!=null&&(n.writeFieldBegin({fname:"dialog_state_cache_object",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),Ie(t.dialog_state_cache_object,n),n.writeFieldEnd()),t.structured_response_info_object!=null&&(n.writeFieldBegin({fname:"structured_response_info_object",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),Te(t.structured_response_info_object,n),n.writeFieldEnd()),t.plugins_metadata!=null&&(n.writeFieldBegin({fname:"plugins_metadata",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),De(t.plugins_metadata,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function $e(t,n){if(n.writeStructBegin("GenAIPersonasFeedSummaryViewModel"),t.owners!=null){n.writeFieldBegin({fname:"owners",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRING,size:t.owners.length});for(var o of t.owners)n.writeString(o);n.writeListEnd(),n.writeFieldEnd()}if(t.media_urls!=null){n.writeFieldBegin({fname:"media_urls",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRING,size:t.media_urls.length});for(var a of t.media_urls)n.writeString(a);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function Pe(t,n){n.writeStructBegin("CalendarUpsellViewModel"),t.integration_category!=null&&(n.writeFieldBegin({fname:"integration_category",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.integration_category),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ne(t,n){n.writeStructBegin("GenAIFeedRankingViewModel"),t.should_trigger_feed_refresh!=null&&(n.writeFieldBegin({fname:"should_trigger_feed_refresh",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:1}),n.writeBool(t.should_trigger_feed_refresh),n.writeFieldEnd()),t.ranking_prompt!=null&&(n.writeFieldBegin({fname:"ranking_prompt",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.ranking_prompt),n.writeFieldEnd()),t.search_keywords!=null&&(n.writeFieldBegin({fname:"search_keywords",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.search_keywords),n.writeFieldEnd()),t.should_trigger_search!=null&&(n.writeFieldBegin({fname:"should_trigger_search",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:4}),n.writeBool(t.should_trigger_search),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Me(t,n){n.writeStructBegin("GenAIFeedVampingViewModel"),t.vamping_id!=null&&(n.writeFieldBegin({fname:"vamping_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.vamping_id),n.writeFieldEnd()),t.quick_response!=null&&(n.writeFieldBegin({fname:"quick_response",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.quick_response),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function we(t,n){n.writeStructBegin("ContactActionData"),t.action_type!=null&&(n.writeFieldBegin({fname:"action_type",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.action_type),n.writeFieldEnd()),t.contact_name!=null&&(n.writeFieldBegin({fname:"contact_name",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.contact_name),n.writeFieldEnd()),t.message!=null&&(n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.message),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ae(t,n){n.writeStructBegin("GenAICallAndMessageContactViewModel"),t.contact_action_data!=null&&(n.writeFieldBegin({fname:"contact_action_data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),we(t.contact_action_data,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Fe(t,n){n.writeStructBegin("FBMarketplaceSearchData"),t.request_string!=null&&(n.writeFieldBegin({fname:"request_string",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.request_string),n.writeFieldEnd()),t.min_price!=null&&(n.writeFieldBegin({fname:"min_price",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.min_price)),n.writeFieldEnd()),t.max_price!=null&&(n.writeFieldBegin({fname:"max_price",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(BigInt(t.max_price)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Oe(t,n){n.writeStructBegin("GenAIFBMarketplaceSearchViewModel"),t.data!=null&&(n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),Fe(t.data,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Be(t,n){n.writeStructBegin("TrendMediaDetails"),t.example_content!=null&&(n.writeFieldBegin({fname:"example_content",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.example_content),n.writeFieldEnd()),t.image_url!=null&&(n.writeFieldBegin({fname:"image_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.image_url),n.writeFieldEnd()),t.media_id!=null&&(n.writeFieldBegin({fname:"media_id",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.media_id),n.writeFieldEnd()),t.owner!=null&&(n.writeFieldBegin({fname:"owner",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.owner),n.writeFieldEnd()),t.playable_url!=null&&(n.writeFieldBegin({fname:"playable_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.playable_url),n.writeFieldEnd()),t.profile_image_url!=null&&(n.writeFieldBegin({fname:"profile_image_url",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.profile_image_url),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function We(t,n){if(n.writeStructBegin("GenAITrendsWithMediaViewModel"),t.trend_media_details!=null){n.writeFieldBegin({fname:"trend_media_details",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRUCT,size:t.trend_media_details.length});for(var o of t.trend_media_details)Be(o,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function qe(t,n){n.writeStructBegin("GenAIViewModels"),t.imagine_view_model!=null&&(n.writeFieldBegin({fname:"imagine_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),ee(t.imagine_view_model,n),n.writeFieldEnd()),t.search_view_model!=null&&(n.writeFieldBegin({fname:"search_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),re(t.search_view_model,n),n.writeFieldEnd()),t.reels_view_model!=null&&(n.writeFieldBegin({fname:"reels_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),oe(t.reels_view_model,n),n.writeFieldEnd()),t.sports_view_model!=null&&(n.writeFieldBegin({fname:"sports_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),se(t.sports_view_model,n),n.writeFieldEnd()),t.reminder_view_model!=null&&(n.writeFieldBegin({fname:"reminder_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),de(t.reminder_view_model,n),n.writeFieldEnd()),t.studio_transparency_view_model!=null&&(n.writeFieldBegin({fname:"studio_transparency_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),pe(t.studio_transparency_view_model,n),n.writeFieldEnd()),t.memory_notifications_view_model!=null&&(n.writeFieldBegin({fname:"memory_notifications_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),fe(t.memory_notifications_view_model,n),n.writeFieldEnd()),t.memory_update_view_model!=null&&(n.writeFieldBegin({fname:"memory_update_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:8}),Re(t.memory_update_view_model,n),n.writeFieldEnd()),t.streaming_state_view_model!=null&&(n.writeFieldBegin({fname:"streaming_state_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:9}),Le(t.streaming_state_view_model,n),n.writeFieldEnd()),t.control_token_view_model!=null&&(n.writeFieldBegin({fname:"control_token_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:10}),Ee(t.control_token_view_model,n),n.writeFieldEnd()),t.sg_view_model!=null&&(n.writeFieldBegin({fname:"sg_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:11}),xe(t.sg_view_model,n),n.writeFieldEnd()),t.personas_feed_summary_view_model!=null&&(n.writeFieldBegin({fname:"personas_feed_summary_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:12}),$e(t.personas_feed_summary_view_model,n),n.writeFieldEnd()),t.calendar_upsell_view_model!=null&&(n.writeFieldBegin({fname:"calendar_upsell_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:13}),Pe(t.calendar_upsell_view_model,n),n.writeFieldEnd()),t.feed_ranking_view_model!=null&&(n.writeFieldBegin({fname:"feed_ranking_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:14}),Ne(t.feed_ranking_view_model,n),n.writeFieldEnd()),t.feed_vamping_view_model!=null&&(n.writeFieldBegin({fname:"feed_vamping_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:15}),Me(t.feed_vamping_view_model,n),n.writeFieldEnd()),t.call_and_message_contact_view_model!=null&&(n.writeFieldBegin({fname:"call_and_message_contact_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:16}),Ae(t.call_and_message_contact_view_model,n),n.writeFieldEnd()),t.fb_marketplace_search_view_model!=null&&(n.writeFieldBegin({fname:"fb_marketplace_search_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:17}),Oe(t.fb_marketplace_search_view_model,n),n.writeFieldEnd()),t.gemstone_matchmaker_view_model!=null&&(n.writeFieldBegin({fname:"gemstone_matchmaker_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:18}),_e(t.gemstone_matchmaker_view_model,n),n.writeFieldEnd()),t.trends_with_media_view_model!=null&&(n.writeFieldBegin({fname:"trends_with_media_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:19}),We(t.trends_with_media_view_model,n),n.writeFieldEnd()),t.basil_view_model!=null&&(n.writeFieldBegin({fname:"basil_view_model",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:20}),me(t.basil_view_model,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Ue(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.media_type=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.prompt=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.uri=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.temporary_handle=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.request_id=t.readString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRING?n.response_id=t.readString():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).STRING?n.insertion_index=t.readString():t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).STRING?n.avatar_motion_type=t.readString():t.skip(a);break;case 9:a===(e||(e=r("ThriftTypes"))).STRING?n.background_motion_type=t.readString():t.skip(a);break;case 10:a===(e||(e=r("ThriftTypes"))).STRING?n.serialized_blob=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ve(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.reels_url=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.thumbnail_url=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.author=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.avatar_url=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.media_id=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function He(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.imagine_raw_data=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=Ue(t);n.imagine_raw_data.push(u)}}else t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ge(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.url=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.title=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.subtitle=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.favicon_url=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRUCT?n.favicon=ze(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.url===void 0&&(n.url=""),n.title===void 0&&(n.title=""),n.subtitle===void 0&&(n.subtitle=""),n}function ze(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.url=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.url_fallback=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.url===void 0&&(n.url=""),n}function je(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.search_result_uri=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readString();n.search_result_uri.push(u)}}else t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.search_engine=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.search_query=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.attribution_link=t.readString():t.skip(a);break;case 5:if(a===(e||(e=r("ThriftTypes"))).LIST){n.references_title=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readString();n.references_title.push(m)}}else t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRING?n.search_engine_icon_url=t.readString():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).STRING?n.source_url=t.readString():t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).STRING?n.response=t.readString():t.skip(a);break;case 9:if(a===(e||(e=r("ThriftTypes"))).LIST){n.thumbnail_data=[];for(var p=t.readListBegin(),_=0;_<p.size;_++){var f=t.readString();n.thumbnail_data.push(f)}}else t.skip(a);break;case 10:if(a===(e||(e=r("ThriftTypes"))).LIST){n.thumbnail_cdn_url=[];for(var g=t.readListBegin(),h=0;h<g.size;h++){var y=t.readString();n.thumbnail_cdn_url.push(y)}}else t.skip(a);break;case 11:if(a===(e||(e=r("ThriftTypes"))).LIST){n.sources=[];for(var C=t.readListBegin(),b=0;b<C.size;b++){var v=Ge(t);n.sources.push(v)}}else t.skip(a);break;case 12:if(a===(e||(e=r("ThriftTypes"))).LIST){n.facepile_favicons=[];for(var S=t.readListBegin(),R=0;R<S.size;R++){var L=ze(t);n.facepile_favicons.push(L)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ke(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.reels_urls=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readString();n.reels_urls.push(u)}}else t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.reels_data=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=Ve(t);n.reels_data.push(m)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Qe(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.name=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.logo=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Xe(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.home_team=Qe(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.away_team=Qe(t):t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.home_team_score=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.away_team_score=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.match_status=t.readString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRING?n.datetime=t.readString():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).STRING?n.date=t.readString():t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).STRING?n.time=t.readString():t.skip(a);break;case 9:a===(e||(e=r("ThriftTypes"))).STRING?n.tournament_name=t.readString():t.skip(a);break;case 10:a===(e||(e=r("ThriftTypes"))).STRING?n.home_records=t.readString():t.skip(a);break;case 11:a===(e||(e=r("ThriftTypes"))).STRING?n.away_records=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ye(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.game_info=Xe(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Je(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.sports_search_data=Ye(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ze(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.text=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function et(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.prompts=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=Ze(t);n.prompts.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function tt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.reminder_id=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.title=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.trigger_type=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.trigger_time=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.create_time=t.readString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).BOOL?n.is_deleted=t.readBool():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).STRING?n.thumbnail_url=t.readString():t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).STRING?n.full_size_url=t.readString():t.skip(a);break;case 9:a===(e||(e=r("ThriftTypes"))).STRING?n.reminder_media_key=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function nt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.rldrive_object_id=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.title=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.subtitle=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.create_time=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function rt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.admin_text=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.cta_text=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.cta_url=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function ot(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.candidate_profile_url=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function at(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.memory_notifications_data=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=it(t);n.memory_notifications_data.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function it(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.admin_text=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.cta_text=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.cta_url=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.identifier=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function lt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.related_product_ids=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readString();n.related_product_ids.push(u)}}else t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.app_client_actions=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readString();n.app_client_actions.push(m)}}else t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.feOmnibotMessage=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.fe_message=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function st(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.otid=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.timestamp_ms=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.otid===void 0&&(n.otid=""),n.timestamp_ms===void 0&&(n.timestamp_ms=""),n}function ut(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.memory_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.memory_text=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRUCT?n.message_id_params=st(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function ct(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.memory_id=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.memory_text=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function dt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.added_memories=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=ct(t);n.added_memories.push(u)}}else t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.removed_memories=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=ut(t);n.removed_memories.push(m)}}else t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.memory_update_admin_text=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function mt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.disclosure_text=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function pt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.memory_update=dt(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.memory_disclosure=mt(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function _t(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.streaming_state=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function ft(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.control_token=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.token_id=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function gt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.json=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function ht(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.dialog_state_cache_json=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function yt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.structured_response_json=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ct(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.executed_plugins=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readString();n.executed_plugins.push(u)}}else t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.plugins_response_metadata_json=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readString();n.plugins_response_metadata_json.push(m)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function bt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.action_payload_object=gt(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.dialog_state_cache_object=ht(t):t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRUCT?n.structured_response_info_object=yt(t):t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRUCT?n.plugins_metadata=Ct(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function vt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.owners=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readString();n.owners.push(u)}}else t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.media_urls=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readString();n.media_urls.push(m)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function St(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.integration_category=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Rt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).BOOL?n.should_trigger_feed_refresh=t.readBool():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.ranking_prompt=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.search_keywords=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).BOOL?n.should_trigger_search=t.readBool():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Lt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.vamping_id=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.quick_response=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Et(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.action_type=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.contact_name=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function kt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.contact_action_data=Et(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function It(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.request_string=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.min_price=t.readI64().toString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I64?n.max_price=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Tt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.data=It(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Dt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.example_content=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.image_url=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.media_id=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.owner=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.playable_url=t.readString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRING?n.profile_image_url=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function xt(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.trend_media_details=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=Dt(t);n.trend_media_details.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function $t(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.imagine_view_model=He(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.search_view_model=je(t):t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRUCT?n.reels_view_model=Ke(t):t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRUCT?n.sports_view_model=Je(t):t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRUCT?n.reminder_view_model=tt(t):t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).STRUCT?n.studio_transparency_view_model=rt(t):t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).STRUCT?n.memory_notifications_view_model=at(t):t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).STRUCT?n.memory_update_view_model=pt(t):t.skip(a);break;case 9:a===(e||(e=r("ThriftTypes"))).STRUCT?n.streaming_state_view_model=_t(t):t.skip(a);break;case 10:a===(e||(e=r("ThriftTypes"))).STRUCT?n.control_token_view_model=ft(t):t.skip(a);break;case 11:a===(e||(e=r("ThriftTypes"))).STRUCT?n.sg_view_model=bt(t):t.skip(a);break;case 12:a===(e||(e=r("ThriftTypes"))).STRUCT?n.personas_feed_summary_view_model=vt(t):t.skip(a);break;case 13:a===(e||(e=r("ThriftTypes"))).STRUCT?n.calendar_upsell_view_model=St(t):t.skip(a);break;case 14:a===(e||(e=r("ThriftTypes"))).STRUCT?n.feed_ranking_view_model=Rt(t):t.skip(a);break;case 15:a===(e||(e=r("ThriftTypes"))).STRUCT?n.feed_vamping_view_model=Lt(t):t.skip(a);break;case 16:a===(e||(e=r("ThriftTypes"))).STRUCT?n.call_and_message_contact_view_model=kt(t):t.skip(a);break;case 17:a===(e||(e=r("ThriftTypes"))).STRUCT?n.fb_marketplace_search_view_model=Tt(t):t.skip(a);break;case 18:a===(e||(e=r("ThriftTypes"))).STRUCT?n.gemstone_matchmaker_view_model=ot(t):t.skip(a);break;case 19:a===(e||(e=r("ThriftTypes"))).STRUCT?n.trends_with_media_view_model=xt(t):t.skip(a);break;case 20:a===(e||(e=r("ThriftTypes"))).STRUCT?n.basil_view_model=nt(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}l.ImagineData$DefaultConstructor=s,l.ReelsData$DefaultConstructor=u,l.GenAIImagineViewModel$DefaultConstructor=c,l.SourceItem$DefaultConstructor=d,l.MediaItem$DefaultConstructor=m,l.GenAISearchViewModel$DefaultConstructor=p,l.GenAIReelsViewModel$DefaultConstructor=_,l.TeamInfo$DefaultConstructor=f,l.GameInfo$DefaultConstructor=g,l.SportsSearchData$DefaultConstructor=h,l.GenAISportsViewModel$DefaultConstructor=y,l.PromptData$DefaultConstructor=C,l.GenAITextPromptViewModel$DefaultConstructor=b,l.GenAIReminderViewModel$DefaultConstructor=v,l.GenAIBasilViewModel$DefaultConstructor=S,l.GenAIStudioTransparencyViewModel$DefaultConstructor=R,l.GenAIGemstoneGenAIMatchmakerViewModel$DefaultConstructor=L,l.GenAIMemoryNotificationsViewModel$DefaultConstructor=E,l.GenAIMemoryNotificationData$DefaultConstructor=k,l.GenAIBizAgentViewModel$DefaultConstructor=I,l.MessageIdParams$DefaultConstructor=T,l.StoredMemory$DefaultConstructor=D,l.NewMemory$DefaultConstructor=x,l.MemoryUpdate$DefaultConstructor=$,l.MemoryDisclosure$DefaultConstructor=P,l.GenAIMemoryUpdateViewModel$DefaultConstructor=N,l.GenAIStreamingStateViewModel$DefaultConstructor=M,l.GenAIControlTokenViewModel$DefaultConstructor=w,l.ActionPayloadObject$DefaultConstructor=A,l.DialogStateCacheObject$DefaultConstructor=F,l.StructuredResponseInfoObject$DefaultConstructor=O,l.PluginsMetadata$DefaultConstructor=B,l.SGViewModel$DefaultConstructor=W,l.GenAIPersonasFeedSummaryViewModel$DefaultConstructor=q,l.CalendarUpsellViewModel$DefaultConstructor=U,l.GenAIFeedRankingViewModel$DefaultConstructor=V,l.GenAIFeedVampingViewModel$DefaultConstructor=H,l.ContactActionData$DefaultConstructor=G,l.GenAICallAndMessageContactViewModel$DefaultConstructor=z,l.FBMarketplaceSearchData$DefaultConstructor=j,l.GenAIFBMarketplaceSearchViewModel$DefaultConstructor=K,l.TrendMediaDetails$DefaultConstructor=Q,l.GenAITrendsWithMediaViewModel$DefaultConstructor=X,l.GenAIViewModels$DefaultConstructor=Y,l.serializeImagineData=J,l.serializeReelsData=Z,l.serializeGenAIImagineViewModel=ee,l.serializeSourceItem=te,l.serializeMediaItem=ne,l.serializeGenAISearchViewModel=re,l.serializeGenAIReelsViewModel=oe,l.serializeTeamInfo=ae,l.serializeGameInfo=ie,l.serializeSportsSearchData=le,l.serializeGenAISportsViewModel=se,l.serializePromptData=ue,l.serializeGenAITextPromptViewModel=ce,l.serializeGenAIReminderViewModel=de,l.serializeGenAIBasilViewModel=me,l.serializeGenAIStudioTransparencyViewModel=pe,l.serializeGenAIGemstoneGenAIMatchmakerViewModel=_e,l.serializeGenAIMemoryNotificationsViewModel=fe,l.serializeGenAIMemoryNotificationData=ge,l.serializeGenAIBizAgentViewModel=he,l.serializeMessageIdParams=ye,l.serializeStoredMemory=Ce,l.serializeNewMemory=be,l.serializeMemoryUpdate=ve,l.serializeMemoryDisclosure=Se,l.serializeGenAIMemoryUpdateViewModel=Re,l.serializeGenAIStreamingStateViewModel=Le,l.serializeGenAIControlTokenViewModel=Ee,l.serializeActionPayloadObject=ke,l.serializeDialogStateCacheObject=Ie,l.serializeStructuredResponseInfoObject=Te,l.serializePluginsMetadata=De,l.serializeSGViewModel=xe,l.serializeGenAIPersonasFeedSummaryViewModel=$e,l.serializeCalendarUpsellViewModel=Pe,l.serializeGenAIFeedRankingViewModel=Ne,l.serializeGenAIFeedVampingViewModel=Me,l.serializeContactActionData=we,l.serializeGenAICallAndMessageContactViewModel=Ae,l.serializeFBMarketplaceSearchData=Fe,l.serializeGenAIFBMarketplaceSearchViewModel=Oe,l.serializeTrendMediaDetails=Be,l.serializeGenAITrendsWithMediaViewModel=We,l.serializeGenAIViewModels=qe,l.deserializeImagineData=Ue,l.deserializeReelsData=Ve,l.deserializeGenAIImagineViewModel=He,l.deserializeSourceItem=Ge,l.deserializeMediaItem=ze,l.deserializeGenAISearchViewModel=je,l.deserializeGenAIReelsViewModel=Ke,l.deserializeTeamInfo=Qe,l.deserializeGameInfo=Xe,l.deserializeSportsSearchData=Ye,l.deserializeGenAISportsViewModel=Je,l.deserializePromptData=Ze,l.deserializeGenAITextPromptViewModel=et,l.deserializeGenAIReminderViewModel=tt,l.deserializeGenAIBasilViewModel=nt,l.deserializeGenAIStudioTransparencyViewModel=rt,l.deserializeGenAIGemstoneGenAIMatchmakerViewModel=ot,l.deserializeGenAIMemoryNotificationsViewModel=at,l.deserializeGenAIMemoryNotificationData=it,l.deserializeGenAIBizAgentViewModel=lt,l.deserializeMessageIdParams=st,l.deserializeStoredMemory=ut,l.deserializeNewMemory=ct,l.deserializeMemoryUpdate=dt,l.deserializeMemoryDisclosure=mt,l.deserializeGenAIMemoryUpdateViewModel=pt,l.deserializeGenAIStreamingStateViewModel=_t,l.deserializeGenAIControlTokenViewModel=ft,l.deserializeActionPayloadObject=gt,l.deserializeDialogStateCacheObject=ht,l.deserializeStructuredResponseInfoObject=yt,l.deserializePluginsMetadata=Ct,l.deserializeSGViewModel=bt,l.deserializeGenAIPersonasFeedSummaryViewModel=vt,l.deserializeCalendarUpsellViewModel=St,l.deserializeGenAIFeedRankingViewModel=Rt,l.deserializeGenAIFeedVampingViewModel=Lt,l.deserializeContactActionData=Et,l.deserializeGenAICallAndMessageContactViewModel=kt,l.deserializeFBMarketplaceSearchData=It,l.deserializeGenAIFBMarketplaceSearchViewModel=Tt,l.deserializeTrendMediaDetails=Dt,l.deserializeGenAITrendsWithMediaViewModel=xt,l.deserializeGenAIViewModels=$t}),98);
__d("RpGenaiSctpCaptionsGenAIBotStateSerializers",["ActionConfirmationTypesTypes","ClientActionInLoopTypesSerializers","LocationTypesSerializers","PsiClientSearchTypesSerializers","PsiClientSearchTypesTypes","RpGenaiSctpCaptionsCaptionsSerializers","RpGenaiSctpCaptionsGenAIBotStateTypes","ThriftTypes","ViewModelSerializers"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{}}function u(){return{}}function c(){return{}}function d(){return{turnUuid:""}}function m(){return{}}function p(){return{}}function _(){return{}}function f(){return{}}function g(){return{}}function h(){return{state:o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.cast(0)}}function y(){return{reqId:0}}function C(){return{reqId:0,statusCode:0}}function b(){return{}}function v(){return{}}function S(){return{}}function R(){return{}}function L(){return{}}function E(){return{type:o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientInputType.cast(0),method:o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientInputMethod.cast(0)}}function k(){return{serverToClientAudioCtpLatencyMs:"0",roundtripAudioCtpLatencyMs:"0"}}function I(){return{ready:!1}}function T(){return{device:"",appName:"",event:""}}function D(){return{Uuid:""}}function x(){return{}}function $(){return{contextType:o("RpGenaiSctpCaptionsGenAIBotStateTypes").ContextType.cast(0),context:""}}function P(){return{}}function N(){return{actionType:o("RpGenaiSctpCaptionsGenAIBotStateTypes").AgenticActionRequestType.cast(0)}}function M(){return{}}function w(){return{}}function A(){return{}}function F(){return{}}function O(){return{commandId:"",commandType:o("RpGenaiSctpCaptionsGenAIBotStateTypes").VoiceCommandType.cast(0)}}function B(){return{commandId:"",commandType:o("RpGenaiSctpCaptionsGenAIBotStateTypes").VoiceCommandType.cast(0),commandData:F()}}function W(t,n){n.writeStructBegin("UserContent"),t.caption!=null&&(n.writeFieldBegin({fname:"caption",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),o("RpGenaiSctpCaptionsCaptionsSerializers").serializeCaptionPayload(t.caption,n),n.writeFieldEnd()),t.otid!=null&&(n.writeFieldBegin({fname:"otid",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.otid),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function q(t,n){if(n.writeStructBegin("LLMResponseContents"),t.genaiViewModels!=null&&(n.writeFieldBegin({fname:"genaiViewModels",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),o("ViewModelSerializers").serializeGenAIViewModels(t.genaiViewModels,n),n.writeFieldEnd()),t.agent_steps!=null){n.writeFieldBegin({fname:"agent_steps",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRUCT,size:t.agent_steps.length});for(var a of t.agent_steps)o("ClientActionInLoopTypesSerializers").serializeAgentStep(a,n);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function U(t,n){if(n.writeStructBegin("BotContent"),t.caption!=null&&(n.writeFieldBegin({fname:"caption",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),o("RpGenaiSctpCaptionsCaptionsSerializers").serializeCaptionPayload(t.caption,n),n.writeFieldEnd()),t.llmResp!=null&&(n.writeFieldBegin({fname:"llmResp",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),q(t.llmResp,n),n.writeFieldEnd()),t.otid!=null&&(n.writeFieldBegin({fname:"otid",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.otid),n.writeFieldEnd()),t.isProactive!=null&&(n.writeFieldBegin({fname:"isProactive",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:4}),n.writeBool(t.isProactive),n.writeFieldEnd()),t.textPrompts!=null&&(n.writeFieldBegin({fname:"textPrompts",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),o("ViewModelSerializers").serializeGenAITextPromptViewModel(t.textPrompts,n),n.writeFieldEnd()),t.captionTimestamps!=null&&(n.writeFieldBegin({fname:"captionTimestamps",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.captionTimestamps),n.writeFieldEnd()),t.botResponseId!=null&&(n.writeFieldBegin({fname:"botResponseId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.botResponseId),n.writeFieldEnd()),t.bizAgentViewModel!=null&&(n.writeFieldBegin({fname:"bizAgentViewModel",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:8}),o("ViewModelSerializers").serializeGenAIBizAgentViewModel(t.bizAgentViewModel,n),n.writeFieldEnd()),t.botSpeakerId!=null&&(n.writeFieldBegin({fname:"botSpeakerId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:9}),n.writeString(t.botSpeakerId),n.writeFieldEnd()),t.agenticActionRequest!=null&&(n.writeFieldBegin({fname:"agenticActionRequest",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:10}),n.writeString(t.agenticActionRequest),n.writeFieldEnd()),t.isLastBotChunk!=null&&(n.writeFieldBegin({fname:"isLastBotChunk",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:11}),n.writeBool(t.isLastBotChunk),n.writeFieldEnd()),t.mediaUploadStatus!=null){var a;n.writeFieldBegin({fname:"mediaUploadStatus",ftype:(e||(e=r("ThriftTypes"))).I32,fid:12}),n.writeI32((a=t.mediaUploadStatus)!=null?a:0),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function V(t,n){if(n.writeStructBegin("TurnMetaData"),n.writeFieldBegin({fname:"turnUuid",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.turnUuid!=null)n.writeString(t.turnUuid);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),t.userSpeechStartTimestamp!=null&&(n.writeFieldBegin({fname:"userSpeechStartTimestamp",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.userSpeechStartTimestamp)),n.writeFieldEnd()),t.userSpeechEndTimestamp!=null&&(n.writeFieldBegin({fname:"userSpeechEndTimestamp",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(BigInt(t.userSpeechEndTimestamp)),n.writeFieldEnd()),t.botSpeechStartTimestamp!=null&&(n.writeFieldBegin({fname:"botSpeechStartTimestamp",ftype:(e||(e=r("ThriftTypes"))).I64,fid:4}),n.writeI64(BigInt(t.botSpeechStartTimestamp)),n.writeFieldEnd()),t.userSpeechStartTimestampNtp!=null&&(n.writeFieldBegin({fname:"userSpeechStartTimestampNtp",ftype:(e||(e=r("ThriftTypes"))).I64,fid:5}),n.writeI64(BigInt(t.userSpeechStartTimestampNtp)),n.writeFieldEnd()),t.userSpeechEndTimestampNtp!=null&&(n.writeFieldBegin({fname:"userSpeechEndTimestampNtp",ftype:(e||(e=r("ThriftTypes"))).I64,fid:6}),n.writeI64(BigInt(t.userSpeechEndTimestampNtp)),n.writeFieldEnd()),t.integrityFailure!=null&&(n.writeFieldBegin({fname:"integrityFailure",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.integrityFailure),n.writeFieldEnd()),t.userInterruptStartTimestampNtp!=null&&(n.writeFieldBegin({fname:"userInterruptStartTimestampNtp",ftype:(e||(e=r("ThriftTypes"))).I64,fid:8}),n.writeI64(BigInt(t.userInterruptStartTimestampNtp)),n.writeFieldEnd()),t.postIds!=null){n.writeFieldBegin({fname:"postIds",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:9}),n.writeListBegin({etype:e.STRING,size:t.postIds.length});for(var a of t.postIds)n.writeString(a);n.writeListEnd(),n.writeFieldEnd()}t.isRambleModeCreateIntentDetected!=null&&(n.writeFieldBegin({fname:"isRambleModeCreateIntentDetected",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:10}),n.writeBool(t.isRambleModeCreateIntentDetected),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function H(t,n){if(n.writeStructBegin("PSIToolRequest"),t.turnId!=null&&(n.writeFieldBegin({fname:"turnId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.turnId),n.writeFieldEnd()),t.requestId!=null&&(n.writeFieldBegin({fname:"requestId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.requestId),n.writeFieldEnd()),t.psiToolQueryPlan!=null&&(n.writeFieldBegin({fname:"psiToolQueryPlan",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),o("PsiClientSearchTypesSerializers").serializePSIToolQueryPlan(t.psiToolQueryPlan,n),n.writeFieldEnd()),t.nextTurnDestination!=null){var a;n.writeFieldBegin({fname:"nextTurnDestination",ftype:(e||(e=r("ThriftTypes"))).I32,fid:5}),n.writeI32((a=t.nextTurnDestination)!=null?a:0),n.writeFieldEnd()}t.skipReplayPrompt!=null&&(n.writeFieldBegin({fname:"skipReplayPrompt",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:6}),n.writeBool(t.skipReplayPrompt),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function G(t,n){if(n.writeStructBegin("PSIToolResponse"),t.turnId!=null&&(n.writeFieldBegin({fname:"turnId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.turnId),n.writeFieldEnd()),t.requestId!=null&&(n.writeFieldBegin({fname:"requestId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.requestId),n.writeFieldEnd()),t.psiToolQueryData!=null&&(n.writeFieldBegin({fname:"psiToolQueryData",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),o("PsiClientSearchTypesSerializers").serializePSIToolQueryData(t.psiToolQueryData,n),n.writeFieldEnd()),t.previousTurnDestination!=null){var a;n.writeFieldBegin({fname:"previousTurnDestination",ftype:(e||(e=r("ThriftTypes"))).I32,fid:5}),n.writeI32((a=t.previousTurnDestination)!=null?a:0),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function z(t,n){n.writeStructBegin("PSIStateMessageMetadata"),t.turnId!=null&&(n.writeFieldBegin({fname:"turnId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.turnId),n.writeFieldEnd()),t.requestId!=null&&(n.writeFieldBegin({fname:"requestId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.requestId),n.writeFieldEnd()),t.psiChatResponseData!=null&&(n.writeFieldBegin({fname:"psiChatResponseData",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),o("PsiClientSearchTypesSerializers").serializeAIChatResponsePSIMetadata(t.psiChatResponseData,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function j(t,n){n.writeStructBegin("PSIClientInputMetadata"),t.turnId!=null&&(n.writeFieldBegin({fname:"turnId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.turnId),n.writeFieldEnd()),t.requestId!=null&&(n.writeFieldBegin({fname:"requestId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.requestId),n.writeFieldEnd()),t.psiChatRequestData!=null&&(n.writeFieldBegin({fname:"psiChatRequestData",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),o("PsiClientSearchTypesSerializers").serializeAIChatRequestPSIMetadata(t.psiChatRequestData,n),n.writeFieldEnd()),t.psiReplayedMessage!=null&&(n.writeFieldBegin({fname:"psiReplayedMessage",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.psiReplayedMessage),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function K(t,n){n.writeStructBegin("ReadAloudMetadata"),t.conversationId!=null&&(n.writeFieldBegin({fname:"conversationId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.conversationId),n.writeFieldEnd()),t.messageId!=null&&(n.writeFieldBegin({fname:"messageId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.messageId),n.writeFieldEnd()),t.pause!=null&&(n.writeFieldBegin({fname:"pause",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:3}),n.writeBool(t.pause),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Q(t,n){if(n.writeStructBegin("StateMessage"),n.writeFieldBegin({fname:"state",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.state!=null){var a;n.writeI32((a=t.state)!=null?a:0)}else{var i=o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.cast(0);n.writeI32(i!=null?i:0)}if(n.writeFieldEnd(),t.userContent!=null&&(n.writeFieldBegin({fname:"userContent",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),W(t.userContent,n),n.writeFieldEnd()),t.botContent!=null&&(n.writeFieldBegin({fname:"botContent",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),U(t.botContent,n),n.writeFieldEnd()),t.padding!=null&&(n.writeFieldBegin({fname:"padding",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.padding),n.writeFieldEnd()),t.turnMetaData!=null&&(n.writeFieldBegin({fname:"turnMetaData",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),V(t.turnMetaData,n),n.writeFieldEnd()),t.psiToolRequest!=null&&(n.writeFieldBegin({fname:"psiToolRequest",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),H(t.psiToolRequest,n),n.writeFieldEnd()),t.modelStage!=null&&(n.writeFieldBegin({fname:"modelStage",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:7}),n.writeString(t.modelStage),n.writeFieldEnd()),t.psiMetadata!=null&&(n.writeFieldBegin({fname:"psiMetadata",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:8}),z(t.psiMetadata,n),n.writeFieldEnd()),t.clientInstruction!=null&&(n.writeFieldBegin({fname:"clientInstruction",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:9}),o("ClientActionInLoopTypesSerializers").serializeClientInstruction(t.clientInstruction,n),n.writeFieldEnd()),t.envelopedOutput!=null&&(n.writeFieldBegin({fname:"envelopedOutput",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:10}),n.writeString(t.envelopedOutput),n.writeFieldEnd()),t.confirmationAction!=null){var l;n.writeFieldBegin({fname:"confirmationAction",ftype:(e||(e=r("ThriftTypes"))).I32,fid:11}),n.writeI32((l=t.confirmationAction)!=null?l:0),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function X(t,n){if(n.writeStructBegin("UgcBotChangeRequest"),n.writeFieldBegin({fname:"reqId",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.reqId!=null)n.writeI32(t.reqId);else{var o=0;n.writeI32(o)}n.writeFieldEnd(),t.ugcBotId!=null&&(n.writeFieldBegin({fname:"ugcBotId",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.ugcBotId)),n.writeFieldEnd()),t.personaId!=null&&(n.writeFieldBegin({fname:"personaId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.personaId),n.writeFieldEnd()),t.threadId!=null&&(n.writeFieldBegin({fname:"threadId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.threadId),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function Y(t,n){if(n.writeStructBegin("UgcBotChangeResponse"),n.writeFieldBegin({fname:"reqId",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.reqId!=null)n.writeI32(t.reqId);else{var o=0;n.writeI32(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"statusCode",ftype:e.I32,fid:2}),t.statusCode!=null)n.writeI32(t.statusCode);else{var a=0;n.writeI32(a)}n.writeFieldEnd(),t.error!=null&&(n.writeFieldBegin({fname:"error",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.error),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function J(t,n){if(n.writeStructBegin("ClientOutputParams"),t.outputType!=null){var o;n.writeFieldBegin({fname:"outputType",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32((o=t.outputType)!=null?o:0),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function Z(t,n){if(n.writeStructBegin("ClientInputData"),t.attachmentEntIds!=null){n.writeFieldBegin({fname:"attachmentEntIds",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRING,size:t.attachmentEntIds.length});for(var a of t.attachmentEntIds)n.writeString(a);n.writeListEnd(),n.writeFieldEnd()}if(t.psiToolResponse!=null&&(n.writeFieldBegin({fname:"psiToolResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),G(t.psiToolResponse,n),n.writeFieldEnd()),t.conversationHistory!=null){n.writeFieldBegin({fname:"conversationHistory",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:3}),n.writeListBegin({etype:e.STRUCT,size:t.conversationHistory.length});for(var i of t.conversationHistory)o("PsiClientSearchTypesSerializers").serializeChatMessage(i,n);n.writeListEnd(),n.writeFieldEnd()}if(t.previousTurnDestination!=null){var l;n.writeFieldBegin({fname:"previousTurnDestination",ftype:(e||(e=r("ThriftTypes"))).I32,fid:4}),n.writeI32((l=t.previousTurnDestination)!=null?l:0),n.writeFieldEnd()}if(t.psiMetadata!=null&&(n.writeFieldBegin({fname:"psiMetadata",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),j(t.psiMetadata,n),n.writeFieldEnd()),t.psiReplayedMessage!=null&&(n.writeFieldBegin({fname:"psiReplayedMessage",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:6}),n.writeString(t.psiReplayedMessage),n.writeFieldEnd()),t.readAloudMetadata!=null&&(n.writeFieldBegin({fname:"readAloudMetadata",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:7}),K(t.readAloudMetadata,n),n.writeFieldEnd()),t.clientInstructionResponse!=null&&(n.writeFieldBegin({fname:"clientInstructionResponse",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:8}),o("ClientActionInLoopTypesSerializers").serializeClientInstructionResponse(t.clientInstructionResponse,n),n.writeFieldEnd()),t.isConfirmationTurn!=null&&(n.writeFieldBegin({fname:"isConfirmationTurn",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:9}),n.writeBool(t.isConfirmationTurn),n.writeFieldEnd()),t.confirmationHistory!=null){n.writeFieldBegin({fname:"confirmationHistory",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:10}),n.writeListBegin({etype:e.STRUCT,size:t.confirmationHistory.length});for(var s of t.confirmationHistory)o("PsiClientSearchTypesSerializers").serializeChatMessage(s,n);n.writeListEnd(),n.writeFieldEnd()}if(t.media_message_ids!=null){n.writeFieldBegin({fname:"media_message_ids",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:11}),n.writeListBegin({etype:e.STRING,size:t.media_message_ids.length});for(var u of t.media_message_ids)n.writeString(u);n.writeListEnd(),n.writeFieldEnd()}t.mediaUploadError!=null&&(n.writeFieldBegin({fname:"mediaUploadError",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:12}),n.writeString(t.mediaUploadError),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ee(t,n){if(n.writeStructBegin("BotCapability"),t.botCapabilities!=null){n.writeFieldBegin({fname:"botCapabilities",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.I32,size:t.botCapabilities.length});for(var o of t.botCapabilities)n.writeI32(o);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function te(t,n){n.writeStructBegin("ClientHandshake"),t.accountCenterToken!=null&&(n.writeFieldBegin({fname:"accountCenterToken",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.accountCenterToken),n.writeFieldEnd()),t.botCapability!=null&&(n.writeFieldBegin({fname:"botCapability",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),ee(t.botCapability,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ne(t,n){if(n.writeStructBegin("ClientInputContents"),t.text!=null&&(n.writeFieldBegin({fname:"text",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.text),n.writeFieldEnd()),t.data!=null&&(n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),Z(t.data,n),n.writeFieldEnd()),t.otid!=null&&(n.writeFieldBegin({fname:"otid",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.otid),n.writeFieldEnd()),t.event!=null){var a;n.writeFieldBegin({fname:"event",ftype:(e||(e=r("ThriftTypes"))).I32,fid:4}),n.writeI32((a=t.event)!=null?a:0),n.writeFieldEnd()}t.promptId!=null&&(n.writeFieldBegin({fname:"promptId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.promptId),n.writeFieldEnd()),t.handshake!=null&&(n.writeFieldBegin({fname:"handshake",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:6}),te(t.handshake,n),n.writeFieldEnd()),t.isSystemPromptMode!=null&&(n.writeFieldBegin({fname:"isSystemPromptMode",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:7}),n.writeBool(t.isSystemPromptMode),n.writeFieldEnd()),t.locationOverrides!=null&&(n.writeFieldBegin({fname:"locationOverrides",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:8}),o("LocationTypesSerializers").serializeGenAILocationOverrides(t.locationOverrides,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function re(t,n){if(n.writeStructBegin("ClientInputMessage"),n.writeFieldBegin({fname:"type",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.type!=null){var a;n.writeI32((a=t.type)!=null?a:0)}else{var i=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientInputType.cast(0);n.writeI32(i!=null?i:0)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"method",ftype:e.I32,fid:2}),t.method!=null){var l;n.writeI32((l=t.method)!=null?l:0)}else{var s=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientInputMethod.cast(0);n.writeI32(s!=null?s:0)}n.writeFieldEnd(),t.contents!=null&&(n.writeFieldBegin({fname:"contents",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),ne(t.contents,n),n.writeFieldEnd()),t.outputParams!=null&&(n.writeFieldBegin({fname:"outputParams",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),J(t.outputParams,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function oe(t,n){if(n.writeStructBegin("GenAiMediaStats"),n.writeFieldBegin({fname:"serverToClientAudioCtpLatencyMs",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.serverToClientAudioCtpLatencyMs!=null)n.writeI64(BigInt(t.serverToClientAudioCtpLatencyMs));else{var o="0";n.writeI64(BigInt(o))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"roundtripAudioCtpLatencyMs",ftype:e.I64,fid:2}),t.roundtripAudioCtpLatencyMs!=null)n.writeI64(BigInt(t.roundtripAudioCtpLatencyMs));else{var a="0";n.writeI64(BigInt(a))}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function ae(t,n){if(n.writeStructBegin("CreatorBotClientReadyMessage"),n.writeFieldBegin({fname:"ready",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:1}),t.ready!=null)n.writeBool(t.ready);else{var o=!1;n.writeBool(o)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function ie(t,n){if(n.writeStructBegin("WearableAppEvent"),n.writeFieldBegin({fname:"device",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.device!=null)n.writeString(t.device);else{var o="";n.writeString(o)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"appName",ftype:e.STRING,fid:2}),t.appName!=null)n.writeString(t.appName);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"event",ftype:e.STRING,fid:3}),t.event!=null)n.writeString(t.event);else{var i="";n.writeString(i)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function le(t,n){if(n.writeStructBegin("GenAiConnectState"),n.writeFieldBegin({fname:"Uuid",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.Uuid!=null)n.writeString(t.Uuid);else{var o="";n.writeString(o)}n.writeFieldEnd(),t.msgSentTimestamp!=null&&(n.writeFieldBegin({fname:"msgSentTimestamp",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.msgSentTimestamp)),n.writeFieldEnd()),t.msgRecvTimestamp!=null&&(n.writeFieldBegin({fname:"msgRecvTimestamp",ftype:(e||(e=r("ThriftTypes"))).I64,fid:3}),n.writeI64(BigInt(t.msgRecvTimestamp)),n.writeFieldEnd()),t.selecledtModel!=null&&(n.writeFieldBegin({fname:"selecledtModel",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:4}),n.writeString(t.selecledtModel),n.writeFieldEnd()),t.modelTier!=null&&(n.writeFieldBegin({fname:"modelTier",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:5}),n.writeString(t.modelTier),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function se(t,n){if(n.writeStructBegin("UserContextData"),t.contextTokens!=null){n.writeFieldBegin({fname:"contextTokens",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:1}),n.writeListBegin({etype:e.STRING,size:t.contextTokens.length});for(var o of t.contextTokens)n.writeString(o);n.writeListEnd(),n.writeFieldEnd()}if(t.speculativeContextTokens!=null){n.writeFieldBegin({fname:"speculativeContextTokens",ftype:(e||(e=r("ThriftTypes"))).LIST,fid:2}),n.writeListBegin({etype:e.STRING,size:t.speculativeContextTokens.length});for(var a of t.speculativeContextTokens)n.writeString(a);n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function ue(t,n){if(n.writeStructBegin("UserContext"),n.writeFieldBegin({fname:"contextType",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),t.contextType!=null){var a;n.writeI32((a=t.contextType)!=null?a:0)}else{var i=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ContextType.cast(0);n.writeI32(i!=null?i:0)}if(n.writeFieldEnd(),t.fbid!=null&&(n.writeFieldBegin({fname:"fbid",ftype:(e||(e=r("ThriftTypes"))).I64,fid:2}),n.writeI64(BigInt(t.fbid)),n.writeFieldEnd()),t.contextId!=null&&(n.writeFieldBegin({fname:"contextId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.contextId),n.writeFieldEnd()),n.writeFieldBegin({fname:"context",ftype:e.STRING,fid:4}),t.context!=null)n.writeString(t.context);else{var l="";n.writeString(l)}n.writeFieldEnd(),t.data!=null&&(n.writeFieldBegin({fname:"data",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:5}),se(t.data,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ce(t,n){n.writeStructBegin("AgenticActionContent"),t.messageText!=null&&(n.writeFieldBegin({fname:"messageText",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.messageText),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function de(t,n){if(n.writeStructBegin("AgenticActionRequest"),n.writeFieldBegin({fname:"actionType",ftype:(e||(e=r("ThriftTypes"))).I32,fid:2}),t.actionType!=null){var a;n.writeI32((a=t.actionType)!=null?a:0)}else{var i=o("RpGenaiSctpCaptionsGenAIBotStateTypes").AgenticActionRequestType.cast(0);n.writeI32(i!=null?i:0)}n.writeFieldEnd(),t.contactName!=null&&(n.writeFieldBegin({fname:"contactName",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.contactName),n.writeFieldEnd()),t.content!=null&&(n.writeFieldBegin({fname:"content",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:4}),ce(t.content,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function me(t,n){n.writeStructBegin("ShapeOfFeedCommandData"),t.feedRankingQuery!=null&&(n.writeFieldBegin({fname:"feedRankingQuery",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.feedRankingQuery),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function pe(t,n){n.writeStructBegin("ThreadSummaryCommandData"),t.maxMessagesToSummarize!=null&&(n.writeFieldBegin({fname:"maxMessagesToSummarize",ftype:(e||(e=r("ThriftTypes"))).I32,fid:1}),n.writeI32(t.maxMessagesToSummarize),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function _e(t,n){n.writeStructBegin("SendMessageCommandData"),t.receiverName!=null&&(n.writeFieldBegin({fname:"receiverName",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),n.writeString(t.receiverName),n.writeFieldEnd()),t.message!=null&&(n.writeFieldBegin({fname:"message",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:2}),n.writeString(t.message),n.writeFieldEnd()),t.userConfirmationGranted!=null&&(n.writeFieldBegin({fname:"userConfirmationGranted",ftype:(e||(e=r("ThriftTypes"))).BOOL,fid:3}),n.writeBool(t.userConfirmationGranted),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function fe(t,n){n.writeStructBegin("CommandData"),t.shapeOfFeedCommandData!=null&&(n.writeFieldBegin({fname:"shapeOfFeedCommandData",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:1}),me(t.shapeOfFeedCommandData,n),n.writeFieldEnd()),t.threadSummaryCommandData!=null&&(n.writeFieldBegin({fname:"threadSummaryCommandData",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:2}),pe(t.threadSummaryCommandData,n),n.writeFieldEnd()),t.sendMessageCommandData!=null&&(n.writeFieldBegin({fname:"sendMessageCommandData",ftype:(e||(e=r("ThriftTypes"))).STRUCT,fid:3}),_e(t.sendMessageCommandData,n),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function ge(t,n){if(n.writeStructBegin("VoiceCommandExecutionResult"),n.writeFieldBegin({fname:"commandId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.commandId!=null)n.writeString(t.commandId);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"commandType",ftype:e.I32,fid:2}),t.commandType!=null){var i;n.writeI32((i=t.commandType)!=null?i:0)}else{var l=o("RpGenaiSctpCaptionsGenAIBotStateTypes").VoiceCommandType.cast(0);n.writeI32(l!=null?l:0)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function he(t,n){if(n.writeStructBegin("VoiceCommand"),n.writeFieldBegin({fname:"commandId",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:1}),t.commandId!=null)n.writeString(t.commandId);else{var a="";n.writeString(a)}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"commandType",ftype:e.I32,fid:2}),t.commandType!=null){var i;n.writeI32((i=t.commandType)!=null?i:0)}else{var l=o("RpGenaiSctpCaptionsGenAIBotStateTypes").VoiceCommandType.cast(0);n.writeI32(l!=null?l:0)}if(n.writeFieldEnd(),t.error!=null&&(n.writeFieldBegin({fname:"error",ftype:(e||(e=r("ThriftTypes"))).STRING,fid:3}),n.writeString(t.error),n.writeFieldEnd()),n.writeFieldBegin({fname:"commandData",ftype:e.STRUCT,fid:4}),t.commandData!=null)fe(t.commandData,n);else{var s=F();fe(s,n)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function ye(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.caption=o("RpGenaiSctpCaptionsCaptionsSerializers").deserializeCaptionPayload(t):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.otid=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function Ce(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.genaiViewModels=o("ViewModelSerializers").deserializeGenAIViewModels(t):t.skip(i);break;case 2:if(i===(e||(e=r("ThriftTypes"))).LIST){n.agent_steps=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=o("ClientActionInLoopTypesSerializers").deserializeAgentStep(t);n.agent_steps.push(c)}}else t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function be(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRUCT?n.caption=o("RpGenaiSctpCaptionsCaptionsSerializers").deserializeCaptionPayload(t):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.llmResp=Ce(t):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.otid=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).BOOL?n.isProactive=t.readBool():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRUCT?n.textPrompts=o("ViewModelSerializers").deserializeGenAITextPromptViewModel(t):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRING?n.captionTimestamps=t.readString():t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRING?n.botResponseId=t.readString():t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).STRUCT?n.bizAgentViewModel=o("ViewModelSerializers").deserializeGenAIBizAgentViewModel(t):t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).STRING?n.botSpeakerId=t.readString():t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).STRING?n.agenticActionRequest=t.readString():t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).BOOL?n.isLastBotChunk=t.readBool():t.skip(i);break;case 12:i===(e||(e=r("ThriftTypes"))).I32?n.mediaUploadStatus=o("RpGenaiSctpCaptionsGenAIBotStateTypes").MediaUploadStatus.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function ve(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.turnUuid=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.userSpeechStartTimestamp=t.readI64().toString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I64?n.userSpeechEndTimestamp=t.readI64().toString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).I64?n.botSpeechStartTimestamp=t.readI64().toString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).I64?n.userSpeechStartTimestampNtp=t.readI64().toString():t.skip(a);break;case 6:a===(e||(e=r("ThriftTypes"))).I64?n.userSpeechEndTimestampNtp=t.readI64().toString():t.skip(a);break;case 7:a===(e||(e=r("ThriftTypes"))).STRING?n.integrityFailure=t.readString():t.skip(a);break;case 8:a===(e||(e=r("ThriftTypes"))).I64?n.userInterruptStartTimestampNtp=t.readI64().toString():t.skip(a);break;case 9:if(a===(e||(e=r("ThriftTypes"))).LIST){n.postIds=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readString();n.postIds.push(u)}}else t.skip(a);break;case 10:a===(e||(e=r("ThriftTypes"))).BOOL?n.isRambleModeCreateIntentDetected=t.readBool():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.turnUuid===void 0&&(n.turnUuid=""),n}function Se(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.turnId=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.requestId=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiToolQueryPlan=o("PsiClientSearchTypesSerializers").deserializePSIToolQueryPlan(t):t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.nextTurnDestination=o("PsiClientSearchTypesTypes").InfraStackType.cast(t.readI32()):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).BOOL?n.skipReplayPrompt=t.readBool():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function Re(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.turnId=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.requestId=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiToolQueryData=o("PsiClientSearchTypesSerializers").deserializePSIToolQueryData(t):t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).I32?n.previousTurnDestination=o("PsiClientSearchTypesTypes").InfraStackType.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function Le(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.turnId=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.requestId=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiChatResponseData=o("PsiClientSearchTypesSerializers").deserializeAIChatResponsePSIMetadata(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function Ee(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.turnId=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRING?n.requestId=t.readString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiChatRequestData=o("PsiClientSearchTypesSerializers").deserializeAIChatRequestPSIMetadata(t):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.psiReplayedMessage=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function ke(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.conversationId=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.messageId=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.pause=t.readBool():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ie(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.state=o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.userContent=ye(t):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRUCT?n.botContent=be(t):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.padding=t.readString():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRUCT?n.turnMetaData=ve(t):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiToolRequest=Se(t):t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRING?n.modelStage=t.readString():t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiMetadata=Le(t):t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).STRUCT?n.clientInstruction=o("ClientActionInLoopTypesSerializers").deserializeClientInstruction(t):t.skip(i);break;case 10:i===(e||(e=r("ThriftTypes"))).STRING?n.envelopedOutput=t.readString():t.skip(i);break;case 11:i===(e||(e=r("ThriftTypes"))).I32?n.confirmationAction=o("ActionConfirmationTypesTypes").ConfirmationAction.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.state===void 0&&(n.state=o("RpGenaiSctpCaptionsGenAIBotStateTypes").BotStateType.cast(0)),n}function Te(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I32?n.reqId=t.readI32():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.ugcBotId=t.readI64().toString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.personaId=t.readString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.threadId=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.reqId===void 0&&(n.reqId=0),n}function De(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I32?n.reqId=t.readI32():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I32?n.statusCode=t.readI32():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.error=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.reqId===void 0&&(n.reqId=0),n.statusCode===void 0&&(n.statusCode=0),n}function xe(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.outputType=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientOutputType.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function $e(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:if(i===(e||(e=r("ThriftTypes"))).LIST){n.attachmentEntIds=[];for(var s=t.readListBegin(),u=0;u<s.size;u++){var c=t.readString();n.attachmentEntIds.push(c)}}else t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiToolResponse=Re(t):t.skip(i);break;case 3:if(i===(e||(e=r("ThriftTypes"))).LIST){n.conversationHistory=[];for(var d=t.readListBegin(),m=0;m<d.size;m++){var p=o("PsiClientSearchTypesSerializers").deserializeChatMessage(t);n.conversationHistory.push(p)}}else t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.previousTurnDestination=o("PsiClientSearchTypesTypes").InfraStackType.cast(t.readI32()):t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRUCT?n.psiMetadata=Ee(t):t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRING?n.psiReplayedMessage=t.readString():t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).STRUCT?n.readAloudMetadata=ke(t):t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).STRUCT?n.clientInstructionResponse=o("ClientActionInLoopTypesSerializers").deserializeClientInstructionResponse(t):t.skip(i);break;case 9:i===(e||(e=r("ThriftTypes"))).BOOL?n.isConfirmationTurn=t.readBool():t.skip(i);break;case 10:if(i===(e||(e=r("ThriftTypes"))).LIST){n.confirmationHistory=[];for(var _=t.readListBegin(),f=0;f<_.size;f++){var g=o("PsiClientSearchTypesSerializers").deserializeChatMessage(t);n.confirmationHistory.push(g)}}else t.skip(i);break;case 11:if(i===(e||(e=r("ThriftTypes"))).LIST){n.media_message_ids=[];for(var h=t.readListBegin(),y=0;y<h.size;y++){var C=t.readString();n.media_message_ids.push(C)}}else t.skip(i);break;case 12:i===(e||(e=r("ThriftTypes"))).STRING?n.mediaUploadError=t.readString():t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function Pe(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.botCapabilities=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readI32();n.botCapabilities.push(u)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ne(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.accountCenterToken=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.botCapability=Pe(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Me(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.text=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).STRUCT?n.data=$e(t):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.otid=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).I32?n.event=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientInputEvent.cast(t.readI32()):t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRING?n.promptId=t.readString():t.skip(i);break;case 6:i===(e||(e=r("ThriftTypes"))).STRUCT?n.handshake=Ne(t):t.skip(i);break;case 7:i===(e||(e=r("ThriftTypes"))).BOOL?n.isSystemPromptMode=t.readBool():t.skip(i);break;case 8:i===(e||(e=r("ThriftTypes"))).STRUCT?n.locationOverrides=o("LocationTypesSerializers").deserializeGenAILocationOverrides(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n}function we(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.type=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientInputType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.method=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientInputMethod.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRUCT?n.contents=Me(t):t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.outputParams=xe(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.type===void 0&&(n.type=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientInputType.cast(0)),n.method===void 0&&(n.method=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ClientInputMethod.cast(0)),n}function Ae(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.serverToClientAudioCtpLatencyMs=t.readI64().toString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.roundtripAudioCtpLatencyMs=t.readI64().toString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.serverToClientAudioCtpLatencyMs===void 0&&(n.serverToClientAudioCtpLatencyMs="0"),n.roundtripAudioCtpLatencyMs===void 0&&(n.roundtripAudioCtpLatencyMs="0"),n}function Fe(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).BOOL?n.ready=t.readBool():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.ready===void 0&&(n.ready=!1),n}function Oe(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.device=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.appName=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.event=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.device===void 0&&(n.device=""),n.appName===void 0&&(n.appName=""),n.event===void 0&&(n.event=""),n}function Be(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.Uuid=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).I64?n.msgSentTimestamp=t.readI64().toString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).I64?n.msgRecvTimestamp=t.readI64().toString():t.skip(a);break;case 4:a===(e||(e=r("ThriftTypes"))).STRING?n.selecledtModel=t.readString():t.skip(a);break;case 5:a===(e||(e=r("ThriftTypes"))).STRING?n.modelTier=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.Uuid===void 0&&(n.Uuid=""),n}function We(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:if(a===(e||(e=r("ThriftTypes"))).LIST){n.contextTokens=[];for(var l=t.readListBegin(),s=0;s<l.size;s++){var u=t.readString();n.contextTokens.push(u)}}else t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).LIST){n.speculativeContextTokens=[];for(var c=t.readListBegin(),d=0;d<c.size;d++){var m=t.readString();n.speculativeContextTokens.push(m)}}else t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function qe(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).I32?n.contextType=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ContextType.cast(t.readI32()):t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I64?n.fbid=t.readI64().toString():t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.contextId=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRING?n.context=t.readString():t.skip(i);break;case 5:i===(e||(e=r("ThriftTypes"))).STRUCT?n.data=We(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.contextType===void 0&&(n.contextType=o("RpGenaiSctpCaptionsGenAIBotStateTypes").ContextType.cast(0)),n.context===void 0&&(n.context=""),n}function Ue(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.messageText=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ve(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 2:i===(e||(e=r("ThriftTypes"))).I32?n.actionType=o("RpGenaiSctpCaptionsGenAIBotStateTypes").AgenticActionRequestType.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.contactName=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.content=Ue(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.actionType===void 0&&(n.actionType=o("RpGenaiSctpCaptionsGenAIBotStateTypes").AgenticActionRequestType.cast(0)),n}function He(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.feedRankingQuery=t.readString():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ge(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I32?n.maxMessagesToSummarize=t.readI32():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function ze(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRING?n.receiverName=t.readString():t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRING?n.message=t.readString():t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).BOOL?n.userConfirmationGranted=t.readBool():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function je(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).STRUCT?n.shapeOfFeedCommandData=He(t):t.skip(a);break;case 2:a===(e||(e=r("ThriftTypes"))).STRUCT?n.threadSummaryCommandData=Ge(t):t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRUCT?n.sendMessageCommandData=ze(t):t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n}function Ke(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.commandId=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.commandType=o("RpGenaiSctpCaptionsGenAIBotStateTypes").VoiceCommandType.cast(t.readI32()):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.commandId===void 0&&(n.commandId=""),n.commandType===void 0&&(n.commandType=o("RpGenaiSctpCaptionsGenAIBotStateTypes").VoiceCommandType.cast(0)),n}function Qe(t){var n={};for(t.readStructBegin();;){var a=t.readFieldBegin(),i=a.ftype,l=a.fid;if(i===(e||(e=r("ThriftTypes"))).STOP)break;switch(l){case 1:i===(e||(e=r("ThriftTypes"))).STRING?n.commandId=t.readString():t.skip(i);break;case 2:i===(e||(e=r("ThriftTypes"))).I32?n.commandType=o("RpGenaiSctpCaptionsGenAIBotStateTypes").VoiceCommandType.cast(t.readI32()):t.skip(i);break;case 3:i===(e||(e=r("ThriftTypes"))).STRING?n.error=t.readString():t.skip(i);break;case 4:i===(e||(e=r("ThriftTypes"))).STRUCT?n.commandData=je(t):t.skip(i);break;default:t.skip(i)}t.readFieldEnd()}return t.readStructEnd(),n.commandId===void 0&&(n.commandId=""),n.commandType===void 0&&(n.commandType=o("RpGenaiSctpCaptionsGenAIBotStateTypes").VoiceCommandType.cast(0)),n.commandData===void 0&&(n.commandData=F()),n}l.UserContent$DefaultConstructor=s,l.LLMResponseContents$DefaultConstructor=u,l.BotContent$DefaultConstructor=c,l.TurnMetaData$DefaultConstructor=d,l.PSIToolRequest$DefaultConstructor=m,l.PSIToolResponse$DefaultConstructor=p,l.PSIStateMessageMetadata$DefaultConstructor=_,l.PSIClientInputMetadata$DefaultConstructor=f,l.ReadAloudMetadata$DefaultConstructor=g,l.StateMessage$DefaultConstructor=h,l.UgcBotChangeRequest$DefaultConstructor=y,l.UgcBotChangeResponse$DefaultConstructor=C,l.ClientOutputParams$DefaultConstructor=b,l.ClientInputData$DefaultConstructor=v,l.BotCapability$DefaultConstructor=S,l.ClientHandshake$DefaultConstructor=R,l.ClientInputContents$DefaultConstructor=L,l.ClientInputMessage$DefaultConstructor=E,l.GenAiMediaStats$DefaultConstructor=k,l.CreatorBotClientReadyMessage$DefaultConstructor=I,l.WearableAppEvent$DefaultConstructor=T,l.GenAiConnectState$DefaultConstructor=D,l.UserContextData$DefaultConstructor=x,l.UserContext$DefaultConstructor=$,l.AgenticActionContent$DefaultConstructor=P,l.AgenticActionRequest$DefaultConstructor=N,l.ShapeOfFeedCommandData$DefaultConstructor=M,l.ThreadSummaryCommandData$DefaultConstructor=w,l.SendMessageCommandData$DefaultConstructor=A,l.CommandData$DefaultConstructor=F,l.VoiceCommandExecutionResult$DefaultConstructor=O,l.VoiceCommand$DefaultConstructor=B,l.serializeUserContent=W,l.serializeLLMResponseContents=q,l.serializeBotContent=U,l.serializeTurnMetaData=V,l.serializePSIToolRequest=H,l.serializePSIToolResponse=G,l.serializePSIStateMessageMetadata=z,l.serializePSIClientInputMetadata=j,l.serializeReadAloudMetadata=K,l.serializeStateMessage=Q,l.serializeUgcBotChangeRequest=X,l.serializeUgcBotChangeResponse=Y,l.serializeClientOutputParams=J,l.serializeClientInputData=Z,l.serializeBotCapability=ee,l.serializeClientHandshake=te,l.serializeClientInputContents=ne,l.serializeClientInputMessage=re,l.serializeGenAiMediaStats=oe,l.serializeCreatorBotClientReadyMessage=ae,l.serializeWearableAppEvent=ie,l.serializeGenAiConnectState=le,l.serializeUserContextData=se,l.serializeUserContext=ue,l.serializeAgenticActionContent=ce,l.serializeAgenticActionRequest=de,l.serializeShapeOfFeedCommandData=me,l.serializeThreadSummaryCommandData=pe,l.serializeSendMessageCommandData=_e,l.serializeCommandData=fe,l.serializeVoiceCommandExecutionResult=ge,l.serializeVoiceCommand=he,l.deserializeUserContent=ye,l.deserializeLLMResponseContents=Ce,l.deserializeBotContent=be,l.deserializeTurnMetaData=ve,l.deserializePSIToolRequest=Se,l.deserializePSIToolResponse=Re,l.deserializePSIStateMessageMetadata=Le,l.deserializePSIClientInputMetadata=Ee,l.deserializeReadAloudMetadata=ke,l.deserializeStateMessage=Ie,l.deserializeUgcBotChangeRequest=Te,l.deserializeUgcBotChangeResponse=De,l.deserializeClientOutputParams=xe,l.deserializeClientInputData=$e,l.deserializeBotCapability=Pe,l.deserializeClientHandshake=Ne,l.deserializeClientInputContents=Me,l.deserializeClientInputMessage=we,l.deserializeGenAiMediaStats=Ae,l.deserializeCreatorBotClientReadyMessage=Fe,l.deserializeWearableAppEvent=Oe,l.deserializeGenAiConnectState=Be,l.deserializeUserContextData=We,l.deserializeUserContext=qe,l.deserializeAgenticActionContent=Ue,l.deserializeAgenticActionRequest=Ve,l.deserializeShapeOfFeedCommandData=He,l.deserializeThreadSummaryCommandData=Ge,l.deserializeSendMessageCommandData=ze,l.deserializeCommandData=je,l.deserializeVoiceCommandExecutionResult=Ke,l.deserializeVoiceCommand=Qe}),98);
__d("ZenonCircularBuffer",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=[],this.$2=0,this.$3=0,this.$4=0,this.$2=e<0?0:e,this.$1=new Array(this.$2).fill(0)}var t=e.prototype;return t.add=function(t){this.$1.length!==0&&(this.$1[this.$3%this.$2]=t,this.$3++,this.$3>this.$2&&(this.$4=(this.$4+1)%this.$2))},t.getAvg=function(){var e=this.$1.length;if(e<=0)return null;var t=this.$1.slice(0,this.$3);return t.length>0?Number(t.reduce(function(e,t){return e+t},0).toPrecision(10))/t.length:0},t.getDelta=function(){return this.$1.length<=0?null:this.$3>0?this.$2===1?Number(this.$1[this.$4]):this.$3<this.$2?Number(this.$1[this.$3-1]):Number(this.$1[(this.$3-1)%this.$2]-this.$1[this.$4]):0},e})();i.default=e}),66);
__d("median",["percentile"],(function(t,n,r,o,a,i){function e(e){return n("percentile")(e,.5)}a.exports=e}),null);
__d("ZenonDeltaMediaStat",["median"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=[],this.$2=0,this.$3=null,this.$4=1/0,this.$5=-1/0}var t=e.prototype;return t.add=function(t){this.$1.push(t),this.$2++,this.$3=t,this.$4=Math.min(this.$4,t),this.$5=Math.max(this.$5,t)},t.getLastAddedValue=function(){return this.$3},t.getTotal=function(){return this.$1.reduce(function(e,t){return e+t},0)},t.getCount=function(){return this.$1.length},t.getAverage=function(){return this.getTotal()/this.getCount()},t.getMin=function(){return this.$4},t.getMax=function(){return this.$5},t.getMedian=function(){return r("median")(this.$1)},e})();l.default=e}),98);
__d("ZenonFirstMediaPacketFinder",["Promise","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=500,c=1e4,d=(function(){function t(e,t,n){this.$1={audio:null,screen:null,screen_audio:null,video:null},this.$2={audio:null,screen:null,screen_audio:null,video:null},this.$3={audio:!1,screen:!1,screen_audio:!1,video:!1},this.$4=null,this.$5=e,this.$6=t,this.$7=n,this.$8=Date.now()}var o=t.prototype;return o.setUpForTrackType=function(t){var e=this;this.$2[t]!=null&&this.$1[t]!=null||(this.$3[t]=!0,this.$4==null&&(this.$8=Date.now(),this.$4=window.setInterval(function(){e.$9(),Date.now()-e.$8>=c&&(window.clearInterval(e.$4),e.$4=null)},u),this.$9()))},o.getFirstPacketTimes=function(){return this.$2},o.getFirstSentPacketTimes=function(){return this.$1},o.$10=function(){var e=this,t=Object.keys(this.$3).some(function(t){return e.$3[t]&&e.$2[t]==null}),n=Object.keys(this.$3).some(function(t){return e.$3[t]&&e.$1[t]==null});return t||n},o.$9=function(){var t=this,o=this.$5.getTransceivers(),a=o.filter(function(e){return e.currentDirection==="sendrecv"||e.currentDirection==="recvonly"}).map(function(e){return e.receiver}).filter(function(e){return e.track!=null}),i=o.filter(function(e){return e.currentDirection==="sendrecv"||e.currentDirection==="sendonly"}).map(function(e){return e.sender}).filter(function(e){return e.track!=null}),l=[].concat(a,i).map(function(e){var n=e.track;return n!=null?e.getStats().then(function(e){for(var o of e.values()){var a=!1;if(o.type==="inbound-rtp"&&Number(o.packetsReceived)>0&&t.$2[n.kind]==null){var i=(s||(s=r("performanceNow")))();t.$2[n.kind]=i,t.$6(n.kind,i),a=!0}if(o.type==="outbound-rtp"&&Number(o.packetsSent)>0&&t.$1[n.kind]==null){var l=(s||(s=r("performanceNow")))();t.$1[n.kind]=l,t.$7(n.kind,l),a=!0}a&&t.$4!=null&&!t.$10()&&(window.clearInterval(t.$4),t.$4=null)}}):null});(e||(e=n("Promise"))).all(l)},t})();l.default=d}),98);
__d("ZenonHistogramCounter",[],(function(t,n,r,o,a,i){"use strict";var e=1e4,l=(function(){function t(t,n,r){if(this.$1=[],this.$2=0,this.$3=0,this.$4=0,this.$5=!1,this.$6=1,!(t>n||r<=0)){(Math.floor(t)!==t||Math.floor(n)!==n||Math.floor(r)!==r)&&(this.$6=e),this.$3=Math.floor(t*this.$6+.5),this.$2=Math.floor(r*this.$6+.5);var o=Math.floor((Math.floor(n*this.$6+.5)-this.$3)/this.$2)+2;this.$1=new Array(o).fill(0),this.$4=this.$3+(o-2)*this.$2,this.$5=!0}}var n=t.prototype;return n.update=function(t){if(!(!this.$5||this.$1.length===0)){var e=Math.floor(t*this.$6+.5);if(e<this.$3)++this.$1[0];else if(e>=this.$4)this.$1[this.$1.length-1]++;else{var n=Math.floor((e-this.$3+.5)/this.$2)+1;this.$1[n]++}}},n.getStats=function(){return this.$5?this.$1:null},t})();i.default=l}),66);
__d("ZenonCallFalcoEventUtils",["performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t){return String(Math.trunc(t))},u=function(){return s((e||(e=r("performanceNow")))())},c=function(t){return s(t!=null?t:0)},d=function(t){return t==null?null:s(t!=null?t:0)},m=function(t){return t!=null?t:""};l.truncateNumber=s,l.performanceNowParsed=u,l.nonNullIntNumber=c,l.intNumberOrNull=d,l.nonNullString=m}),98);
__d("ZenonCumulativeMediaStat",["performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(t){this.$3=this.$5=this.$1=t,this.$7=this.$8=t,this.$9=!1,this.$4=this.$6=this.$2=(e||(e=r("performanceNow")))(),this.$10=1,this.$11=0,this.$12=0}var n=t.prototype;return n.$13=function(n){this.$5=this.$1,this.$6=this.$2,this.$1=n,this.$2=(e||(e=r("performanceNow")))(),this.$10++},n.update=function(t){this.$7=this.$8,this.$8=t;var e=this.$8-this.$7;e<0?(e=this.$8,this.$9=!0):this.$9=!1,this.$13(this.$1+e)},n.updateLastStretchStartValue=function(t){this.$11=t},n.getLastStretchDelta=function(){return this.$1-this.$11},n.updateNonStrictCumulative=function(t){this.$7=this.$8,this.$8=t,this.$9=!1,this.$13(t)},n.isReset=function(){return this.$9},n.getCurrentValue=function(){return this.$1},n.getDeltaValue=function(){return this.$1-this.$3},n.getDeltaFromLastUpdate=function(){return this.$1-this.$5},n.getTimeSinceLastUpdate=function(){return this.$2-this.$6},n.getElapsedTime=function(){return this.$2-this.$4},n.getPreviousTime=function(){return this.$6},n.getCurrentTime=function(){return this.$2},n.getAverageOverTime=function(){return this.getDeltaValue()/this.getElapsedTime()},n.updateInactiveDuration=function(t){this.$12+=t},n.getActiveDuration=function(){return this.getElapsedTime()-this.$12},n.getAverageOverActiveTime=function(){return this.getDeltaValue()/this.getActiveDuration()},n.getCurrentTimeSinceLastUpdate=function(){return(e||(e=r("performanceNow")))()-this.$2},n.getCount=function(){return this.$10},n.getFirstValue=function(){return this.$3},t})();l.default=s}),98);
__d("ZenonMediaStatsSerializer",["ZenonCallFalcoEventUtils","ZenonCumulativeMediaStat","ZenonMediaStatsConfig","ZenonRenderedView"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e=o("ZenonMediaStatsConfig")).OUTBOUND_AUDIO_STATS_TRACKID,e.OUTBOUND_VIDEO_STATS_TRACKID,e.OUTBOUND_SCREEN_STATS_TRACKID,e.GLOBAL_STATS_TRACKID,e.PINNED_AUDIO_STATS_TRACK_INFO.trackId,e.PINNED_VIDEO_STATS_TRACK_INFO.trackId],u=1e3,c=1e4,d={tet:1e3,tpsd:1e3};function m(e,t,n,a,i,l,s,u){var c={CoreAudioMetrics:{isstall:"0",voice_detect_pct:[]},CoreVideoMetrics:{screen:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}},video:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}}},DebugAudioMetrics:{NetworkReceive:{}},audio:{echo_confidence:{}},dataChannelMetrics:{},ecv:{ecv_neteq_wait_time_ms:"0",ecv_plccng_v2:"0",ecv_rtt_ms:"0"},extraInfo:{mediaPacketTimes:n.getFirstPacketTimes()},receiver:{},receiver_pct:{audio:{}},receiver_stalls:{screen_recv_stalls:{recv_decode_stall:{is_stall:"0"},recv_no_bytes_stall:{is_stall:"0"},recv_render_stall:{is_stall:"0"}},video_recv_stalls:{recv_decode_stall:{is_stall:"0"},recv_no_bytes_stall:{is_stall:"0"},recv_render_stall:{is_stall:"0"}}},sender:{},sender_pct:{screen:{},video:{}},video:{}},d={};p(u,c);var m=t.get(o("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACKID);m!=null&&(E(m,c.sender),N(m,c.CoreAudioMetrics));var g=t.get(o("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACKID);g!=null&&(x(a,c.video,g),I(a,c.video,g,d),A(c.sender_pct.screen,g,r("ZenonRenderedView").GRID,"screen"));var b=t.get(o("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACKID);return b!=null&&(I(a,c.video,b,d),A(c.sender_pct.video,b,r("ZenonRenderedView").GRID,"video")),(g!=null||b!=null)&&$(c.video,b,g),v(t,c),_(t,c),h(e,t,c,l,s),f(t,c,d,a),R(t,c,d),L(c,d),y(c,i),C(t,c),c}function p(e,t){e.forEach(function(e){var n=e.label;if(n!=null){var r;t.dataChannelMetrics[n]={bytes_received:(r=o("ZenonCallFalcoEventUtils")).nonNullIntNumber(e.bytesReceived),bytes_sent:r.nonNullIntNumber(e.bytesSent),label:n,messages_received:r.nonNullIntNumber(e.messagesReceived),messages_sent:r.nonNullIntNumber(e.messagesSent)}}})}function _(e,t){e.forEach(function(e){var n=e.localIceCandidateStats,r=e.remoteIceCandidateStats;!t.extraInfo.localIceCandidate&&n&&(t.extraInfo.localIceCandidate=n),!t.extraInfo.remoteIceCandidate&&r&&(t.extraInfo.remoteIceCandidate=r)})}function f(e,t,n,r){e.forEach(function(e,o){!s.includes(o)&&e.remote===!0&&(e.contentType==="audio"?(k(e,o,t,n),P(e,n)):e.contentType==="video"?(T(r,t.video,e,n),g(e,t.receiver_stalls.video_recv_stalls)):e.contentType==="screen"&&(D(r,t.video),g(e,t.receiver_stalls.screen_recv_stalls)))})}function g(e,t){var n=e.cumulativeStat,r=n.videoDecodeStallDuration,o=n.videoDecodeTotalStalls,a=n.videoReceiveStallDuration,i=n.videoReceiveTotalStalls,l=n.videoRenderStallDuration,s=n.videoRenderTotalStalls,u=e.deltaStat,c=u.videoDecodeIsStalled,d=u.videoReceiveIsStalled,m=u.videoRenderIsStall;t&&(i&&a&&w(t==null?void 0:t.recv_no_bytes_stall,i,a,d),o&&r&&w(t==null?void 0:t.recv_decode_stall,o,r,c),e.contentType==="video"&&s&&l&&w(t==null?void 0:t.recv_render_stall,s,l,m))}function h(e,t,n,r,o){t.forEach(function(t,a){if(t.remote===!1){var i,l=(i=r.get(a))!=null?i:e.get(a);if(l==null)return;l.enabled===!0&&l.webrtcTrack.readyState==="live"&&(l.contentType==="audio"?S(o.audioDevices,l):l.contentType==="video"&&S(o.videoDevices,l)),o.audioDevices.length>0&&(n.CoreAudioMetrics.audio_device=o.audioDevices[o.audioDevices.length-1]),o.videoDevices.length>0&&(n.CoreVideoMetrics.video_device=o.videoDevices[o.videoDevices.length-1]);return}})}function y(e,t){var n,r=(n=t.getStats())!=null?n:[],o=r.some(function(e){return e>0});if(o){var a;e.video.receiver=(a=e.video.receiver)!=null?a:{},e.video.receiver.avhist=r}}function C(e,t){var n=e.get(o("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACKID);n&&b(n,t)}function b(e,t){var n=e.deltaStat.audioSendGoldenEchoConfidence;if(n){var r=n.getMax();t.audio={echo_confidence:{audio_send_echo_confidence:r.toString()}}}}function v(e,t){var n=e.get(o("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACKID),r=e.get(o("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACKID);n!=null&&M(n,t.CoreVideoMetrics.video),r!=null&&M(r,t.CoreVideoMetrics.screen)}function S(e,t){(e.length===0||t.label!==e[e.length-1])&&e.push(t.label)}function R(e,t,n){n.totalRxLevel!=null&&n.totalRxLevelCount!=null&&n.totalRxLevelCount>0&&(t.CoreAudioMetrics.rx_chan_proc_lvl=o("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(n.totalRxLevel/n.totalRxLevelCount)));var r=e.get(o("ZenonMediaStatsConfig").GLOBAL_STATS_TRACKID);if(r!=null){var a=r.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL],i=r.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT];a&&i&&(t.receiver.rx_sum_lvl=a.getCurrentValue(),t.receiver.taulc=i.getCurrentValue())}}function L(e,t){var n={},r=e.receiver,a=r.jbd,i=r.jbec;if(a!=null&&i!=null&&i>0){var l=o("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(a/i));n.neteq={meanWait:l}}var s=t.maxSpeechExpandRate!=null?Math.round(t.maxSpeechExpandRate*c):null,u=t.minSpeechExpandRate!=null?Math.round(t.minSpeechExpandRate*c):null,d=t.countSpeechExpandRate!=null&&t.countSpeechExpandRate>0&&t.sumSpeechExpandRate!=null?Math.round(t.sumSpeechExpandRate*c/t.countSpeechExpandRate):null;(s!=null||d!=null||u!=null)&&(n.speech_expand_rate={M:o("ZenonCallFalcoEventUtils").nonNullIntNumber(s),avg:o("ZenonCallFalcoEventUtils").nonNullIntNumber(d),m:o("ZenonCallFalcoEventUtils").nonNullIntNumber(u)}),e.DebugAudioMetrics.NetworkReceive={jb_nm:n}}function E(e,t){var n=e.cumulativeStat,r=n.bytesSent,a=n.packetsSent,i=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED],l=e.deltaStat.currentRoundTripTime,s=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL],c=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT],d=new Map([["bytes",r],["plost",i],["psent",a]]);if(d.forEach(function(e,n){e!=null&&n!=="codec"&&n!=="ice"&&n!=="ice_g0"&&(t[n]=e.getCurrentValue())}),r){var m=r.getElapsedTime();m>0&&(t.ube_avg=Math.round(r.getDeltaValue()*8/m*u))}if(l){var p=l.getTotal()*u,_=l.getCount();if(_>0){var f,g;t.avgrtt=Math.round(p/_),t.maxrtt=Math.max((f=t.maxrtt)!=null?f:Number.MIN_SAFE_INTEGER,l.getMax()*u),t.minrtt=Math.min((g=t.minrtt)!=null?g:Number.MAX_SAFE_INTEGER,l.getMin()*u)}}return e.codec!=null&&e.codec!==""&&(t.codec={www:e.codec}),s&&c&&(t.tx_sum_lvl=s.getCurrentValue(),t.taulc=c.getCurrentValue()),t}function k(e,t,n,a){var i=n.receiver;e.codec!=null&&e.codec!==""&&(i.codec==null&&(i.codec={}),i.codec[t]=e.codec);var l=e.cumulativeStat,s=l.audioDecodingNormal,c=l.audioDecodingPLC,d=l.audioDecodingPLCCNG,m=l.bytesReceived,p=l.concealedSamples,_=l.fecPacketsDiscarded,f=l.fecPacketsReceived,g=l.insertedSamplesForDeceleration,h=l.jitterBufferDelay,y=l.jitterBufferEmittedCount,C=l.packetsReceived,b=l.silentConcealedSamples,v=l.totalAudioEnergy,S=l.totalSamplesDuration,R=l.totalSamplesReceived,L=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED],E=e.deltaStat,k=E.currentRoundTripTime,I=E.jitter;if(m){var T=m.getElapsedTime();if(T>0){var D=O(i.dbe_total_bytes,m.getDeltaValue());i.dbe_total_bytes=D;var x=O(i.dbe_total_time,T);i.dbe_total_time=x,i.dbe_avg=Math.round(D*8/x*u)}}if(k){var $,P,N,M;a.sumrtt=(($=a.sumrtt)!=null?$:0)+k.getTotal()*u,a.countrtt=((P=a.countrtt)!=null?P:0)+k.getCount(),a.sumrtt!=null&&a.countrtt!=null&&a.countrtt>0&&(i.avgrtt=Math.round(a.sumrtt/a.countrtt)),i.maxrtt=Math.max((N=i.maxrtt)!=null?N:Number.MIN_SAFE_INTEGER,k.getMax()*u),i.minrtt=Math.min((M=i.minrtt)!=null?M:Number.MAX_SAFE_INTEGER,k.getMin()*u),F(n.receiver_pct.audio,e,r("ZenonRenderedView").GRID,"audio")}h&&(i.jbd=O(i.jbd,1e3*h.getCurrentValue())),v&&(i.taue=O(i.taue,1e5*v.getCurrentValue()),i.taut=O(i.taut,v.getElapsedTime())),S&&(i.sp_dur=O(i.sp_dur,1e3*S.getCurrentValue()));var w=new Map([["dec_plc",c],["dec_plc_cng",d],["dec_normal",s],["neteq_calls",R],["decel_cnt",g],["bytes",m],["plost",L],["precv",C],["fecpd",_],["fecpr",f],["jbec",y],["sp_c",p],["sp_dur",S],["sp_r",R],["sp_sc",b]]);if(w.forEach(function(e,t){e!=null&&t!=="codec"&&t!=="ice"&&t!=="ice_g0"&&(i[t]=O(i[t],e.getCurrentValue()))}),I&&C&&i.precv!=null&&i.precv>0){var A,B=i.precv,W=I.getTotal()*C.getCurrentValue();a.weightedJitterSum=((A=a.weightedJitterSum)!=null?A:0)+W,i.jitter=Math.round(1e3*a.weightedJitterSum/B)}return i}function I(e,t,n,a){t.ld=Math.round(e.getLocalVideoDuration());var i=t.sender||{};if(i.video_blur_dur=Math.round(e.getLocalVideoBlurDuration()),n.codec!=null&&n.codec!==""&&(i.ename=n.codec),n.histResScale){i.histResScale==null&&(i.histResScale=new Array(5).fill(0));var l=i.histResScale;l.forEach(function(e,t){l[t]+=n.histResScale[t]})}var s=n.cumulativeStat,c=s.bytesSent,m=s.captureFrameCount,p=s.firCount,_=s.framesEncoded,f=s.framesSent,g=s.keyFramesEncoded,h=s.nackCount,y=s.packetsSent,C=s.pliCount,b=s.simulcast_layer_changes,v=s.totalEncodeTime,S=s.totalPacketSendDelay,R=s.videoConvertedQpSum,L=s.videoSumCapturePixel,E=s.videoSumPixel,k=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED],I=n.deltaStat,T=I.frameHeight,D=I.frameWidth,x=I.height,$=I.width,P=new Map([["enc_bytes",c],["eiframes",m],["eqps",R],["plost",k],["psent",y],["pli",C],["fcsn",f],["fir",p],["tet",v],["tpsd",S],["fcap",m],["frames",_],["kframes",g],["nack",h],["sim_l_chg",b],["ah",T],["aw",D],["ch",x],["cw",$]]);if(P.forEach(function(e,t){if(e!=null&&t!=="ename"&&t!=="histResScale"&&t!=="ehist"&&t!=="ss")if(e instanceof r("ZenonCumulativeMediaStat")){var n,o=(n=d[t])!=null?n:1;i[t]=O(i[t],e.getCurrentValue()*o)}else{var a;i[t]=Math.round((a=e.getLastAddedValue())!=null?a:0)}}),t.ld!=null&&t.ld>0&&i.frames!=null&&i.frames>0&&(i.efrate=Math.round(i.frames*u/t.ld)),L&&i.fcap!=null&&i.fcap>0){var N,M=i.fcap;a.videoSumCapturePixel=O((N=a.videoSumCapturePixel)!=null?N:void 0,L.getCurrentValue()),i.video_sum_capture_pixel=a.videoSumCapturePixel,i.eipxl=Math.round(a.videoSumCapturePixel/M)}if(E&&i.frames!=null&&i.frames>0){var w,A=i.frames;a.videoSumPixel=O((w=a.videoSumPixel)!=null?w:void 0,E.getCurrentValue()),i.video_sum_encoded_pixel=a.videoSumPixel,i.eopxl=Math.round(a.videoSumPixel/A)}n.codecHistory!=null&&(i.ehist=Object.fromEntries(n.codecHistory.map(function(e){var t=e.codec,n=e.updateTime;return[Math.round(n).toString(),t]}))),t.sender=i}function T(e,t,n,a){var i,l;t.rd=Math.round(e.getRemoteVideoDuration());var s=t.receiver,u=s===void 0?{}:s;n.codec!=null&&n.codec!==""&&n.lastUpdate>((i=a.lastCodecUpdate)!=null?i:Number.MIN_SAFE_INTEGER)&&(u.dname=n.codec,a.lastCodecUpdate=n.lastUpdate);var c=n.cumulativeStat,d=c.bytesReceived,m=c.firCount,p=c.framesDecoded,_=c.framesReceived,f=c.jitterBufferDelay,g=c.jitterBufferEmittedCount,h=c.jitterBufferFramesSentToDecoder,y=c.keyFramesDecoded,C=c.nackCount,b=c.packetsReceived,v=c.pliCount,S=c.timestamp,R=c.totalDecodeTime,L=c.videoConvertedQpSum,E=c.videoDecodedBytes,k=c.videoDecodeTime,I=c.videoFreezeCount,T=c.videoFreezeDuration,D=c.videoFreezeDuration500ms,x=c.videoPauseCount,$=c.videoPauseDuration,P=c.videoSumPixel,N=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED],M=n.deltaStat,w=M.avSync,A=M.avSyncAbs,F=M.frameHeight,B=M.frameWidth;if(p){if(n.maxTotalDecodeTime!=null){var W;u.dec_time=Math.round(Math.max(n.maxTotalDecodeTime,(W=u.dec_time)!=null?W:0))}var q=O(u.frd,p.getCurrentValue());if(q>0){var U;u.frd=(U=u.frd)!=null?U:0}if(P!=null&&q>0){var V,H=((V=a.aggVideoSumPixel)!=null?V:0)+P.getCurrentValue();u.dpxl=Math.round(H/q),a.aggVideoSumPixel=H,u.agg_video_sum_decoded_pixel=H}if(w!=null&&A!=null&&q>0){var G,z,j=((G=a.weigtedAvSync)!=null?G:0)+w.getAverage()*p.getCurrentValue(),K=((z=a.weigtedAvSyncAbs)!=null?z:0)+A.getAverage()*p.getCurrentValue();u.av=Math.round(j/q),u.avabs=Math.round(K/q),a.weigtedAvSync=j,a.weigtedAvSyncAbs=K}u.frd=q,u.dec_frame=q}if(n.percentStat.videoReceiverQualityScore!=null){var Q=n.percentStat.videoReceiverQualityScore.getAvgAndPercentile(o("ZenonMediaStatsConfig").PERCENTILES_REQUESTED,r("ZenonRenderedView").GRID,"video");Q!=null&&Q.avg!=null&&(u.vqs={avg:Q.avg})}if(B&&F&&S&&S.getCurrentTime()>((l=a.lastFrameUpdate)!=null?l:Number.MIN_SAFE_INTEGER)){var X,Y;u.rh=(X=F.getLastAddedValue())!=null?X:0,u.rw=(Y=B.getLastAddedValue())!=null?Y:0,a.lastFrameUpdate=S.getCurrentTime()}R&&(u.tdt=O(u.tdt,1e3*R.getCurrentValue())),f&&(u.jbd=O(u.jbd,1e3*f.getCurrentValue()));var J=new Map([["recv",d],["qps",L],["plost",N],["precv",b],["pli",v],["pact",x],["padur",$],["jbec",g],["jtasb",_],["jtfrm",h],["jtkey",y],["nack",C],["fir",m],["frcnt",I],["frdur",T],["frdur500",D],["dec_time_all_streams",k],["dec_bytes",E]]);J.forEach(function(e,t){e!=null&&t!=="dname"&&t!=="avhist"&&t!=="ss_recv"&&t!=="vqs"&&(u[t]=O(u[t],e.getCurrentValue()))}),u.jbd!=null&&u.jbec!=null&&u.jbec>0&&(u.recjbl=Math.round(u.jbd/u.jbec)),t.receiver=u}function D(e,t){var n,r,o=((n=t.receiver)==null?void 0:n.ss_recv)||{};o.ss_recv_dur=Math.round(e.getRemoteScreenShareDuration()),t.receiver=(r=t.receiver)!=null?r:{},t.receiver.ss_recv=o}function x(e,t,n){var r,o,a=((r=t.sender)==null?void 0:r.ss)||{};a.dur=Math.round(e.getLocalScreenShareDuration());var i=n.cumulativeStat,l=i.captureFrameCount,s=i.framesEncoded,u=i.videoBytesSent,c=i.videoConvertedQpSum,d=i.videoSumCapturePixel,m=i.videoSumPixel,p=n.deltaStat.availableOutgoingBitrate,_=new Map([["eiframes",l],["eqps",c],["frames",s]]);if(_.forEach(function(e,t){e!=null&&(a[t]=e.getCurrentValue())}),d!=null&&a.eiframes!=null&&a.eiframes>0){var f=a.eiframes;a.video_sum_capture_pixel=d.getCurrentValue(),a.eipxl=Math.round(d.getCurrentValue()/f)}if(m!=null&&a.frames!=null&&a.frames>0){var g=a.frames;a.video_sum_encoded_pixel=m.getCurrentValue(),a.eopxl=Math.round(m.getCurrentValue()/g)}if(p&&(a.avbw=Math.round(p.getAverage())),u&&a.dur!=null&&a.dur>0){var h=a.dur;a.avbr=Math.round(u.getCurrentValue()*8/h)}t.sender=(o=t.sender)!=null?o:{},t.sender.ss=a}function $(e,t,n){var r,a,i=o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ACTUAL_ENCODED_BITRATE,l=(r=t==null?void 0:t.deltaStat)!=null?r:{},s=l[i],u=(a=n==null?void 0:n.deltaStat)!=null?a:{},c=u[i],d=0,m=0,p=0,_=0;s!=null&&(d+=s.getTotal(),m+=s.getCount()),c!=null&&(p+=c.getTotal(),_+=c.getCount(),d+=p,m+=_),m!==0&&(e.bwe={avg_enc_bitrate:Math.round(d/m)}),_!==0&&(e.bwe=babelHelpers.extends({},e.bwe,{avg_enc_bitrate_ss:Math.round(p/_)}))}function P(e,t){var n=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL],r=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT];if(n&&r){var a,i;t.totalRxLevel=((a=t.totalRxLevel)!=null?a:0)+n.getCurrentValue(),t.totalRxLevelCount=((i=t.totalRxLevelCount)!=null?i:0)+r.getCurrentValue()}}function N(e,t){var n=e.cumulativeStat,r=n.audioDevRecStalls,a=n.audioDevStallDuration,i=n.audioDevTotalStalls,l=e.deltaStat.audioDevIsStalled,s=new Map([["astall",i],["sdur",a],["rstall",r]]);if(s.forEach(function(e,n){e!=null&&n!=="audio_device"&&n!=="rx_chan_proc_lvl_hist"&&n!=="voice_detect_pct"&&(t[n]=o("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(e.getCurrentValue())))}),l){var u;t.isstall=o("ZenonCallFalcoEventUtils").nonNullIntNumber((u=l.getLastAddedValue())!=null?u:0)}var c=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL],d=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT];d!=null&&d.getCurrentValue()>0&&c!=null&&(t.captured_lvl=o("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(c.getCurrentValue()/d.getCurrentValue())),t.loudness_level=String(c.getCurrentValue()),t.loudness_level_count=String(d.getCurrentValue()))}function M(e,t){var n=e.cumulativeStat,r=n.videoCaptureStallDuration,o=n.videoCaptureTotalStalls,a=n.videoEncodeStallDuration,i=n.videoEncodeTotalStalls,l=n.videoSentStallDuration,s=n.videoSentTotalStalls,u=e.deltaStat,c=u.videoCaptureIsStalled,d=u.videoEncodeIsStalled,m=u.videoSentIsStalled;r&&o&&w(t.capture_stall,o,r,c),i&&a&&w(t.encode_stall,i,a,d),s&&l&&w(t.sent_stall,s,l,m)}function w(e,t,n,r){var a=new Map([["nstall",t],["sdur",n]]);if(a.forEach(function(t,n){t!=null&&n!=="video_device"&&(e[n]=o("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(t.getCurrentValue())))}),n!=null&&n.getLastStretchDelta()&&(e.last_sdur=o("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(n.getLastStretchDelta()))),r){var i;e.is_stall=o("ZenonCallFalcoEventUtils").nonNullIntNumber((i=r.getLastAddedValue())!=null?i:0)}}function A(e,t,n,r){if(e!=null){var a=t.percentStat,i=a.encodedFrameRate,l=a.roundTripTime,s=a.videoQP,u=a.videoQuality,c=new Map([["efr",i],["vqs",u],["vrtt",l],["qp",s]]);c.forEach(function(t,a){if(t!=null){var i=t.getAvgAndPercentile(o("ZenonMediaStatsConfig").PERCENTILES_REQUESTED,n,r);e[a]={},i.avg!=null&&e[a]!=null&&(e[a].avg=i.avg),i.percentiles!=null&&e[a]!=null&&(e[a].p5=i.percentiles[0],e[a].p50=i.percentiles[1],e[a].p95=i.percentiles[2])}})}}function F(e,t,n,r){if(e!=null){var a=t.percentStat,i=a.jitterBufferDelay,l=a.roundTripTime,s=new Map([["jbd",i],["rtt",l]]);s.forEach(function(t,a){if(t!=null){var i=t.getAvgAndPercentile(o("ZenonMediaStatsConfig").PERCENTILES_REQUESTED,n,r);e[a]={},i.avg!=null&&e[a]!=null&&(e[a].avg=i.avg),i.percentiles!=null&&e[a]!=null&&(e[a].p5=i.percentiles[0],e[a].p50=i.percentiles[1],e[a].p95=i.percentiles[2])}})}}function O(e,t){return Math.round(e===void 0?t:e+t)}l.getMediaStats=m,l.addAudioReceiverPercentStats=F}),98);
__d("ZenonSimulcastStats",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e=(function(){function e(){this.$1=0,this.$2=new Map,this.$3=new Map}var t=e.prototype;return t.update=function(t){var e=u(t,this.$2,this.$3),n=0;for(var r of e){var o=r[0],a=r[1];a&&n++}if(this.$3.size===0)n>0&&this.$1++;else{var i=!1;for(var l of e){var s=l[0],c=l[1];(!this.$3.has(s)||this.$3.get(s)!==c)&&(i=!0)}i&&this.$1++}this.$3=e},t.getNumLayerChanges=function(){return this.isSimulcastCall()?this.$1:0},t.isSimulcastCall=function(){return this.$3.size>1},e})();function u(e,t,n){var r=new Map;for(var o of e.values())if(o.type==="outbound-rtp"||s(0,64939),!(o.ssrc===void 0||o.framesSent===void 0)){var a=String(o.ssrc),i=Number(o.framesSent);if(t.has(a)){var l=t.get(a);l!==void 0&&r.set(a,i>l)}else r.set(a,i>0);t.set(a,i)}for(var u of n){var c=u[0],d=u[1];r.has(c)||r.set(c,!1)}return r}function c(e){if(e.length===1)return e[0];var t=null,n=null,r=0;for(var o of e)if(o.frameWidth!=null){var a=Number(o.frameWidth),i=!1;(n==null||a<n)&&(n=a,i=!0);var l=!1;if(o.framesEncoded!=null){var s=Number(o.framesEncoded);s>r&&(l=!0,r=s)}(i||a===n&&l)&&(t=o)}return t}l.ZenonSimulcastStats=e,l.getBaseLayerReport=c}),98);
__d("ZenonVideoScaleHistogram",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e>=.765625?0:e>=.390625?1:e>=.19140625?2:e>=.09765625?3:4}function l(t,n){var r=["video","screen"];t.filter(function(e){return r.includes(e.contentType)&&e.remote===!1}).forEach(function(t){var r=n.get(t.trackId);if(!(!r||!r.cumulativeStat||!r.histResScale)){var o=r.cumulativeStat,a=o.framesEncoded,i=o.timestamp,l=r.deltaStat,s=l.frameHeight,u=l.frameWidth,c=l.height,d=l.width;if(a!=null&&d!=null&&c!=null&&u!=null&&s!=null&&i!=null&&a.getDeltaFromLastUpdate()>0&&i.getCurrentValue()>r.lastUpdate){var m,p,_,f,g=a.getDeltaFromLastUpdate(),h=((m=d.getLastAddedValue())!=null?m:0)*((p=c.getLastAddedValue())!=null?p:0),y=((_=u.getLastAddedValue())!=null?_:0)*((f=s.getLastAddedValue())!=null?f:0);if(h>0){var C=y/h,b=e(C);r.histResScale[b]+=g}}}})}i.getBinFromScale=e,i.updateTrackerWithScaleHistogram=l}),66);
__d("ZenonMediaStatsParser",["invariant","ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonSimulcastStats","ZenonVideoScaleHistogram","isStringNullOrEmpty","isTruthy","performanceNow"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=["inbound-rtp","outbound-rtp","track","media-source","candidate-pair"];function c(e,t){var n=new Map;return t.forEach(function(t,r){(t.type==="ssrc"&&t.googTrackId!=null&&t.googTrackId===e.webrtcTrack.id||t.type==="VideoBwe")&&n.set(r,t)}),n}function d(e){var t=new Map;for(var n of e){var r=n[0],o=n[1];u.includes(o.type)&&t.set(r,o)}return t}function m(t,n){var a=n.contentType,i=n.remote,l=n.trackId,s=t.get(l);return s==null&&(s={codec:null,contentType:a,cumulativeStat:{},deltaStat:{},duration:0,histResScale:new Array(o("ZenonVideoScaleHistogram").getBinFromScale(0)+1).fill(0),lastUpdate:0,maxTotalDecodeTime:0,percentStat:{},remote:i,startTime:(e||(e=r("performanceNow")))()},t.set(l,s)),s}function p(e){return o("ZenonMediaStatsConfig").CUMULATIVE_STATS.includes(e)}function _(e){return o("ZenonMediaStatsConfig").DELTA_STATS.includes(e)}function f(e){if(e instanceof Map)return e;var t=new Map;if(e.result!=null)for(var n of e.result()){var r={id:n.id,timestamp:n.timestamp,type:n.type};for(var o of n.names())r[o]==null&&(r[o]=n.stat(o));t.set(r.id,r)}else for(var a of e.values())t.set(a.id,a);return t}function g(e,t,n){var r=c(e,n);for(var o of r.values()){var a=m(t,e);v(e,a,o);var i=C(o);i!=null&&(a.codec=i)}}function h(e,t,n){var a=null,i=[];for(var l of n.values())switch(l.type==="outbound-rtp"&&l.trackId!=null&&(a=m(t,e),typeof l.trackId=="string"&&(a.sender=l.trackId)),l.type){case"inbound-rtp":a=m(t,e),S(a,l,o("ZenonMediaStatsConfig").getInboundRtpStats().concat(o("ZenonMediaStatsConfig").getRtpStats()));break;case"outbound-rtp":l.kind==="video"?i.push(l):(a=m(t,e),S(a,l,o("ZenonMediaStatsConfig").getOutboundRtpStats().concat(o("ZenonMediaStatsConfig").getRtpStats())));break;case"remote-outbound-rtp":l.kind==="audio"&&(a=m(t,e),S(a,l,o("ZenonMediaStatsConfig").getRemoteOutboundRtpStats()));break;case"media-source":a=m(t,e),S(a,l,o("ZenonMediaStatsConfig").getMediaSourceStats());break;case"candidate-pair":a=m(t,e),S(a,l,o("ZenonMediaStatsConfig").getCandidatePairStats());break;case"codec":{var s=String(l.mimeType).split("/")[1];r("isStringNullOrEmpty")(s)||(a=m(t,e),b(a,s));break}case"local-candidate":a=m(t,e),a.localIceCandidateStats=L(l);break;case"remote-candidate":a=m(t,e),a.remoteIceCandidateStats=L(l);break;default:break}if(i.length>0){a=m(t,e),R(a,i);var u=o("ZenonSimulcastStats").getBaseLayerReport(i);u!=null&&S(a,u,o("ZenonMediaStatsConfig").getOutboundRtpStats().concat(o("ZenonMediaStatsConfig").getRtpStats()))}}function y(e,t,n){var r=m(t,e);if(typeof n.getParameters=="function"){var o,a=n.getParameters(),i=a.encodings,l=r.audioEncoding,s=r.videoEncoding;if(Array.isArray(i)){var u=i.some(function(e){return e.active});e.contentType==="audio"?l?(l.prevState=l.enabled,l.enabled=u):r.audioEncoding={enabled:u,prevState:null}:s?(s.prevState=s.enabled,s.enabled=u):r.videoEncoding={enabled:u,prevState:null}}if((o=n.transport)!=null&&o.iceTransport){var c=n.transport.iceTransport.state;r.transportIceState=c}}}function C(e){var t=null;return e.googCodecName!=null&&e.googCodecName!==""&&(t=String(e.googCodecName),e.codecImplementationName!=null&&(t+=String(e.codecImplementationName))),t}function b(t,n){t.startTime==null&&(t.startTime=(e||(e=r("performanceNow")))());var o=t.startTime;t.codecHistory==null&&(t.codecHistory=[]),n.length>0&&(t.codecHistory.length===0||t.codecHistory[t.codecHistory.length-1].codec!==n)&&t.codecHistory.push({codec:n,updateTime:(e||(e=r("performanceNow")))()-o}),t.codec=n}function v(e,t,n){Object.entries(n).forEach(function(a){var i=a[0],l=Number(a[1]);if(n.type==="ssrc"&&o("ZenonMediaStatsConfig").STATS_REQUESTED.includes(i)&&o("ZenonMediaStatsConfig").getSsrcStats().includes(i)||n.type==="VideoBwe"&&o("ZenonMediaStatsConfig").getVideoBweStats().includes(i)&&e.contentType!=="audio"&&e.remote===!1)if(o("ZenonMediaStatsConfig").CUMULATIVE_STATS.includes(i)){if(i==="packetsLost"&&e.remote)return;t.cumulativeStat[i]!=null?i==="packetsLost"?t.cumulativeStat[i].updateNonStrictCumulative(l):t.cumulativeStat[i].update(l):t.cumulativeStat[i]=new(r("ZenonCumulativeMediaStat"))(l)}else o("ZenonMediaStatsConfig").DELTA_STATS.includes(i)&&(t.deltaStat[i]==null&&(t.deltaStat[i]=new(r("ZenonDeltaMediaStat"))),t.deltaStat[i].add(l))})}function S(e,t,n){Object.entries(t).forEach(function(a){var i=a[0],l=Number(a[1]);if(!n||n.includes(i))if(p(i))e.cumulativeStat[i]!=null?i==="packetsLost"?e.cumulativeStat[i].updateNonStrictCumulative(l):e.cumulativeStat[i].update(l):e.cumulativeStat[i]=new(r("ZenonCumulativeMediaStat"))(l);else if(i===o("ZenonMediaStatsConfig").DERIVED_METRICS.FRAME_RATE_MEAN){var s=null;t.framesEncoded!=null?s=Number(t.framesEncoded):t.framesDecoded!=null&&(s=Number(t.framesDecoded)),r("isTruthy")(s)&&(e.deltaStat[i]==null&&(e.deltaStat[i]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[i].add(l))}else _(i)&&(e.deltaStat[i]==null&&(e.deltaStat[i]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[i].add(l))})}function R(e,t){var n,a;e.simulcastStats===void 0&&(e.simulcastStats=new(o("ZenonSimulcastStats")).ZenonSimulcastStats),(n=e.simulcastStats)==null||n.update(t);var i=(a=e.simulcastStats)==null?void 0:a.getNumLayerChanges();if(i!=null){var l=o("ZenonMediaStatsConfig").DERIVED_METRICS.SIMULCAST_LAYER_CHANGES;e.cumulativeStat[l]!=null?e.cumulativeStat[l].update(i):e.cumulativeStat[l]=new(r("ZenonCumulativeMediaStat"))(i)}}function L(e){e.type==="local-candidate"||e.type==="remote-candidate"||s(0,64948);var t=e.candidateType,n=e.networkType,r=e.protocol,o=e.relayProtocol,a={};return t!=null&&typeof t=="string"&&(a.candidateType=t),n!=null&&typeof n=="string"&&(a.networkType=n),r!=null&&typeof r=="string"&&(a.protocol=r),o!=null&&typeof o=="string"&&(a.relayProtocol=o),a}l.filterLegacyMediaReports=c,l.filterMediaReports=d,l.getOrCreateTrackerFromMap=m,l.isCumulativeStat=p,l.isDeltaStat=_,l.makeStatsReportMap=f,l.updateTrackStatsWithChromiumLegacyReport=g,l.updateTrackStatsWithReport=h,l.updateTrackStatsFromSender=y}),98);
__d("ZenonTSLogDataUtil",["ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=["recv","inbound"],n=["send","outbound"];return t.some(function(t){return e.toLowerCase().includes(t)})?"inbound":n.some(function(t){return e.toLowerCase().includes(t)})?"outbound":(r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"TsLogHolder Stream Name: "+e,error:"CANNOT_DETERMINE_STREAM_DIRECTION",errorDomain:"ZenonTSLogDataHelper"}),"inbound")}l.getMediaTrackDirection=e}),98);
__d("ZenonTSLogRegistry",[],(function(t,n,r,o,a,i){"use strict";var e={".":{counters:new Set(["ctime","btime"])},inbound_rtp_audio:{counters:new Set(["packetsLost_delta","packetsReceived_delta","bytesReceived","bytesReceived_delta","totalAudioEnergy_delta","audioLevel"])},inbound_rtp_video:{counters:new Set(["packetsLost_delta","packetsReceived_delta","bytesReceived","bytesReceived_delta","framesDecoded","framesDecoded_delta","frameWidth","frameHeight","framesPerSecond","avSync"])},outbound_rtp_audio:{counters:new Set(["bytesSent","bytesSent_delta","audioLevel","packetsLost_delta","totalAudioEnergy_delta"])},outbound_rtp_video:{counters:new Set(["video_videoCaptureIsStalled","video_videoEncodeIsStalled","video_videoSentIsStalled","packetsSent_delta","bytesSent","bytesSent_delta","framesEncoded","framesEncoded_delta","keyFramesEncoded_delta","frameWidth","frameHeight","framesPerSecond","packetsLost_delta"])}},l=(function(){function t(t){this.$1=e,this.$2=t.allAllowed}var n=t.prototype;return n.isCounterAllowed=function(t,n){var e,r;return this.$2||((e=(r=this.$1[t])==null?void 0:r.counters.has(n))!=null?e:!1)},t})();i.default=l}),66);
__d("ZenonVideoQpConversion",[],(function(t,n,r,o,a,i){"use strict";var e=[0,1,2,3,4,5,7,8,9,10,12,13,15,17,18,19,20,21,23,24,25,26,27,28,29,30,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,64,67,70,73,76,79,82,85,88,91,94,97,100,103,106,109,112,115,118,121,124,127],l=[1,5,12,28,42,53,64];function s(t){for(var n=0;n<e.length;n++)if(e[n]>=t)return n;return 63}function u(e){for(var t=s(e),n=Math.max(1,Math.min(63,t)),r=l.length-1,o=0;o<l.length;o++)if(l[o]>n){r=o;break}return Math.min(51,Math.floor(12+6*r+6*(n-l[r-1])/(l[r]-l[r-1])))}function c(e,t,n){var r;if(e===0)return 0;r=t/e;var o=r;return n||(o=u(o)),Math.round(o)}i.convertQp=c}),66);
__d("ZenonTSLogDataJSONHolder",["invariant","FBLogger","ZenonAuditedCheckpointLogId","ZenonE2eeMandatedStateManager","ZenonInfraActionsLogger","ZenonMediaStatsConfig","ZenonMediaStatsParser","ZenonTSLogDataUtil","ZenonTSLogRegistry","ZenonVideoQpConversion","getErrorSafe","pako"],(function(t,n,r,o,a,i,l,s){"use strict";var e={new:1,checking:2,connected:3,completed:4,failed:5,disconnected:6,closed:7},u=1073741824,c=(function(){function t(e){var t,n,o,a,i;this.$1={iceConnectionState:0,sendParametersState:null},this.$2=(t=e==null?void 0:e.endTimeMs)!=null?t:null,this.$3=(n=e==null?void 0:e.sharedIdx)!=null?n:0,this.$4=(o=e==null?void 0:e.source)!=null?o:"rtc_www",this.$5=(a=e==null?void 0:e.startTimeMs)!=null?a:null,this.$6=(i=e==null?void 0:e.streams)!=null?i:{},this.$7=new(r("ZenonTSLogRegistry"))({allAllowed:!r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated()})}var n=t.prototype;return n.getInternalState=function(){return{endTimeMs:this.$2,sharedIdx:this.$3,source:this.$4,startTimeMs:this.$5,streams:this.$6}},n.$8=function(t,n,r){if(r.includes("qp")&&t.counters.qpSum!=null&&(t.counters.framesDecoded!=null||t.counters.framesEncoded!=null)){var e;t.counters.qp==null&&(t.counters.qp=Array(this.$3-t.bucketStart).fill(0));var a=0,i=0,l=this.$3-t.bucketStart;l>0?(t.counters.framesEncoded!=null?a=t.counters.framesEncoded[l]-t.counters.framesEncoded[l-1]:t.counters.framesDecoded!=null&&(a=t.counters.framesDecoded[l]-t.counters.framesDecoded[l-1]),i=t.counters.qpSum[l]-t.counters.qpSum[l-1]):(t.counters.framesEncoded!=null?a=t.counters.framesEncoded[l]:t.counters.framesDecoded!=null&&(a=t.counters.framesDecoded[l]),i=t.counters.qpSum[l]),t.counters.qp[l]=(e=o("ZenonVideoQpConversion").convertQp(a,i,n))!=null?e:0}},n.$9=function(t,n,r,a){var e=this,i=function(i,l){for(var r of i)if(n.includes(r)){for(var s of t.values())if(s.type===l&&s[r]!==void 0){var u;a.counters[r]==null&&(a.counters[r]=Array(e.$3-a.bucketStart).fill(0));var c=(u=o("ZenonMediaStatsConfig").TSLOG_METRIC_SCALE[r])!=null?u:1;a.counters[r][e.$3-a.bucketStart]=Math.round(Number(s[r])*c)}}};if(i(o("ZenonMediaStatsConfig").getTrackStats(),"track"),i(o("ZenonMediaStatsConfig").getMediaSourceStats(),"media-source"),r==="video"&&n.includes("qp")){var l=!1;for(var s of t.values())s.encoderImplementation!==void 0&&(l=String(s.encoderImplementation).includes("264"));this.$8(a,l,n)}},n.$10=function(t){return t.map(function(e,n){return n===0?0:e-t[n-1]})},n.$11=function(t){if(t.type==="candidate-pair")return t.id;var e="unknown",n=["recv","inbound"],r=["send","outbound"];(n.some(function(e){return t.id.toLowerCase().includes(e)})||n.some(function(e){return t.type.toLowerCase().includes(e)}))&&(e="inbound"),(r.some(function(e){return t.id.toLowerCase().includes(e)})||r.some(function(e){return t.type.toLowerCase().includes(e)}))&&(e="outbound"),t.type==="inbound-rtp"||t.type==="remote-inbound-rtp"||t.type==="outbound-rtp"||t.type==="remote-outbound-rtp"||t.type==="ssrc"||s(0,64950);var o=t.mediaType===void 0?"unknown":t.mediaType.toString(),a=t.ssrc===void 0?"unknown":t.ssrc.toString();return e+"_"+o+"_"+a},n.$12=function(t){return t},n.$13=function(t,n){return t+"_rtp_"+n},n.$14=function(t,n,r,o){if(o&&Object.prototype.hasOwnProperty.call(o.counters,"estimatedPlayoutTimestamp")&&Object.prototype.hasOwnProperty.call(n.counters,"estimatedPlayoutTimestamp")){var e=o.counters.estimatedPlayoutTimestamp.length,a=n.counters.estimatedPlayoutTimestamp.length,i="avSync",l="avSyncSign";if(this.$7.isCounterAllowed(t,i)&&this.$7.isCounterAllowed(t,l)){for(var s=Math.min(a,e),c=new Array(s).fill(0),d=new Array(s).fill(0),m=0;m<s;m++){var p=o.counters.estimatedPlayoutTimestamp[m],_=n.counters.estimatedPlayoutTimestamp[m];p>0&&_>0?p>=_?(d[m]=2,c[m]=Math.min(p-_,u)):(d[m]=1,c[m]=Math.min(_-p,u)):(d[m]=0,c[m]=0)}r.push({data:c,name:i}),r.push({data:d,name:l})}var f="audioTs",g="videoTs";if(this.$7.isCounterAllowed(t,f)&&this.$7.isCounterAllowed(t,g)){for(var h=38077268e5,y=Math.max(a,e),C=new Array(e).fill(0),b=new Array(a).fill(0),v=null,S=0;S<y;S++){var R=o.counters.estimatedPlayoutTimestamp[S],L=n.counters.estimatedPlayoutTimestamp[S];v==null&&(R>h&&L>h?v=Math.min(R,L):R>h?v=R:L>h&&(v=L)),v!=null&&(R>h&&(C[S]=Math.max(Math.min(R-v,u),-u)),L>h&&(b[S]=Math.max(Math.min(L-v,u),-u)))}r.push({data:C,name:f}),r.push({data:b,name:g})}}},n.$15=function(t,n,r,a){var e=[];for(var i in n.counters)!r.includes(i)&&this.$7.isCounterAllowed(t,i)&&e.push({data:n.counters[i],name:i}),o("ZenonMediaStatsParser").isCumulativeStat(i)&&!r.includes(i+"_delta")&&this.$7.isCounterAllowed(t,i+"_delta")&&e.push({data:this.$10(n.counters[i]),name:i+"_delta"});var l=n.counters,s=l.fecPacketsDiscarded,u=l.fecPacketsReceived,c="fecPacketsUsed_delta";if(this.$7.isCounterAllowed(t,c)&&s!=null&&u!=null){for(var d=Math.min(s.length,u.length),m=[],p=0;p<d;p++)m.push(u[p]-s[p]);e.push({data:this.$10(m),name:c})}return this.$16(t,n,e),this.$14(t,n,e,a),e},n.$16=function(t,n,r){var e="neteqMeanWaitTime";if(this.$7.isCounterAllowed(t,e)&&Object.prototype.hasOwnProperty.call(n.counters,"jitterBufferDelay")&&Object.prototype.hasOwnProperty.call(n.counters,"jitterBufferEmittedCount")){for(var o=Math.min(n.counters.jitterBufferDelay.length,n.counters.jitterBufferEmittedCount.length),a=new Array(o).fill(0),i=1;i<o;i++){var l=n.counters.jitterBufferDelay[i]-n.counters.jitterBufferDelay[i-1],s=n.counters.jitterBufferEmittedCount[i]-n.counters.jitterBufferEmittedCount[i-1];s===0?a[i]=0:a[i]=Math.round(l*1e3/s)}r.push({data:a,name:e})}},n.addSenderVideoStallData=function(t){var e=this;[[o("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACKID,"screen"],[o("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACKID,"video"]].forEach(function(n){var r=n[0],o=n[1],a=t.get(r);if(a!=null){var i=e.generateTslogStreamName(o,r),l=e.$6[i];l==null&&(l={bucketEnd:e.$3,bucketStart:e.$3,contentType:o,counters:{},owner:""},e.$6[i]=l),e.updateVideoStallStats(a,l,e.$3,o)}})},n.addDerivedMetricsData=function(t,n){var e=this;n.forEach(function(n){var r=n.trackId,a=t.get(r);if(a!=null){var i=n.remote?"inbound":"outbound",l=i+"_"+n.contentType+"_"+r,s=e.$6[l];s==null&&(s={bucketEnd:e.$3,bucketStart:e.$3,contentType:"audio",counters:{},owner:""},e.$6[l]=s);var u=e.$3;o("ZenonMediaStatsConfig").TSLOG_DERIVED_STATS_REQUESTED.forEach(function(e){var t,n;if(a.cumulativeStat[e]){var r=u-s.bucketStart;s.counters[e]==null&&(s.counters[e]=Array(r).fill(0)),s.counters[e][r]=(t=(n=a.cumulativeStat[e])==null?void 0:n.getCurrentValue())!=null?t:0,s.bucketEnd=u}})}})},n.addAudioEchoMetricData=function(t){var e=t.get(o("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACKID);if(e){var n=this.generateTslogStreamName("audio",o("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACKID),r=this.$6[n];r==null&&(r={bucketEnd:this.$3,bucketStart:this.$3,contentType:"audio",counters:{},owner:""},this.$6[n]=r);var a=[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CONFIDENCE,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CROSS_CORRELATION,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_DELAY,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_ERL,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_LPB_RMS,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_RMS,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_CONFIDENCE,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY_ENTROPY,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_ERL,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_FRAMES_PERCENTAGE,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_GOLDEN_ECHO_CONFIDENCE],i=this.$3;a.forEach(function(t){var n;if(e.deltaStat[t]){var o="audio_"+t,a=i-r.bucketStart;r.counters[o]==null&&(r.counters[o]=Array(a).fill(0)),r.counters[o][a]=(n=e.deltaStat[t].getLastAddedValue())!=null?n:0,r.bucketEnd=i}})}},n.addRenderedFrameData=function(t,n){var e=this;n.size!==0&&n.forEach(function(r){if(!(r.mediaType!=="video"||r.kind!=="video")){var o=e.$11(r),a=e.$6[o];if(a!=null){var i=r.trackId!=null?n.get(String(r.trackId)):null;if(!(i==null||i.trackIdentifier==null||i.remoteSource===!1||i.ended===!0)){var l=i.trackIdentifier?String(i.trackIdentifier):"";if(l){var s=t.get(l);if(s){var u,c;a.counters.renderedWidth==null&&(a.counters.renderedWidth=Array(e.$3-a.bucketStart).fill(0)),a.counters.renderedHeight==null&&(a.counters.renderedHeight=Array(e.$3-a.bucketStart).fill(0));var d=e.$3-a.bucketStart;a.counters.renderedWidth[d]=(u=s.renderedWidth)!=null?u:0,a.counters.renderedWidth[d]=Math.round(a.counters.renderedWidth[d]),a.counters.renderedHeight[d]=(c=s.renderedHeight)!=null?c:0,a.counters.renderedHeight[d]=Math.round(a.counters.renderedHeight[d]),e.$17(a,d,s)}}}}}})},n.addCallCpuData=function(t,n){var e=this,r=this.$12(t),o=this.$6[r];o==null&&(o={bucketEnd:this.$3,bucketStart:this.$3,contentType:"client-metrics",counters:{},owner:""},this.$6[r]=o),o.bucketEnd=this.$3,Object.keys(n).forEach(function(t){e.addCounterValue(o,t,n[t])})},n.addHeapMemoryData=function(t,n){var e=this,r=this.$12(t),o=this.$6[r];o==null&&(o={bucketEnd:this.$3,bucketStart:this.$3,contentType:"client-metrics",counters:{},owner:""},this.$6[r]=o),o.bucketEnd=this.$3,Object.keys(n).forEach(function(t){n[t]!=null&&e.addCounterValue(o,t,n[t])})},n.addCandidatePairStats=function(t){var e=this;t.size!==0&&t.forEach(function(t){if(t.type==="candidate-pair"){var n=e.$11(t),r=e.$6[n];r==null&&(r={bucketEnd:e.$3,bucketStart:e.$3,contentType:"candidate-pair",counters:{},owner:""},e.$6[n]=r),(e.$5==null||t.timestamp<e.$5)&&(e.$5=Math.round(t.timestamp));for(var a in t)o("ZenonMediaStatsConfig").TSLOG_STATS_REQUESTED_FROM_CANDIDATE_PAIR.includes(a)&&e.addCounterValue(r,a,t[a],o("ZenonMediaStatsConfig").TSLOG_METRIC_SCALE[a]);r.bucketEnd=e.$3,(e.$2==null||t.timestamp>e.$2)&&(e.$2=Math.round(t.timestamp))}})},n.addData=function(t,n,r,a,i){var e=this;n.size!==0&&n.forEach(function(l){if(!(l.type==="track"||l.type==="media-source"||l.type==="candidate-pair"||l.type==="VideoBwe")){var u=e.$11(l),c=e.$6[u];if(l.type==="ssrc"){if(c==null)return;for(var d in l)r.includes(d)&&o("ZenonMediaStatsConfig").getSsrcStats().includes(d)&&e.addCounterValue(c,d,l[d],o("ZenonMediaStatsConfig").TSLOG_METRIC_SCALE[d])}else{c==null&&(c={bucketEnd:e.$3,bucketStart:e.$3,contentType:a,counters:{},owner:i?i.id:"",ssrc:void 0},e.$6[u]=c),(e.$5==null||l.timestamp<e.$5)&&(e.$5=Math.round(l.timestamp)),l.type==="inbound-rtp"||l.type==="outbound-rtp"||s(0,64953),l.ssrc!=null&&(c.ssrc=l.ssrc.toString()),e.addCounterValue(c,"trackEnabled",t);for(var m in l)r.includes(m)&&e.addCounterValue(c,m,l[m],o("ZenonMediaStatsConfig").TSLOG_METRIC_SCALE[m]);e.$9(n,r,a,c)}c.bucketEnd=e.$3,(e.$2==null||l.timestamp>e.$2)&&(e.$2=Math.round(l.timestamp))}})},n.addNonMediaStates=function(){var e=this;this.$6.nonMediaState==null&&(this.$6.nonMediaState={bucketEnd:this.$3,bucketStart:this.$3,contentType:"non-media-state",counters:{},owner:""});var t=this.$6.nonMediaState;Object.keys(this.$1).forEach(function(n){if(n==="sendParametersState"){var r=e.$1[n];if(r!=null)for(var o=0;o<r.encodings.length;o++){var a=r.encodings[o],i="l"+o,l=0;a.active!=null&&(l=a.active?2:1),e.addCounterValue(t,i+"a",l);var s=0;a.maxBitrate!=null&&(s=a.maxBitrate),e.addCounterValue(t,i+"mb",s);var u=0;a.scaleResolutionDownBy!=null&&(u=a.scaleResolutionDownBy),e.addCounterValue(t,i+"sr",u,100)}}else e.addCounterValue(t,n,e.$1[n])}),t.bucketEnd=this.$3},n.advance=function(){var e,t,n,r=this.$6["."];r==null&&(r={bucketEnd:this.$3,bucketStart:this.$3,contentType:"time",counters:{btime:[],ctime:[]}},this.$6["."]=r);var o=(e=this.$2)!=null?e:0,a=r.counters,i=a.btime,l=a.ctime;l.push(Math.round(o-((t=this.$5)!=null?t:0))),i.push(Math.round(l[this.$3]-((n=l[this.$3-1])!=null?n:0))),r.bucketEnd=this.$3,this.$3++},n.onIceConnectionStateChange=function(n){var t;this.$1.iceConnectionState=(t=e[n])!=null?t:0},n.onRtpSendParametersStateChange=function(t){this.$1.sendParametersState=t},n.serialize=function(t){if(Object.keys(this.$6).length===0)return{format:"JSON",timeSeries:null};var e=t!=null?t:o("ZenonMediaStatsConfig").TSLOG_STATS_TO_SUPPRESS,n={source:this.$4,start_time_ms:Math.round(Number(this.$5)),streams:[]},r=new Map,a=0,i=new Map,l=["audio","video","screen"];for(var s in this.$6){var u=this.$6[s];if(l.includes(u.contentType)){var c=o("ZenonTSLogDataUtil").getMediaTrackDirection(s);c==="inbound"&&u.owner!=null&&!r.has(u.owner)&&(r.set(u.owner,a.toString()),a++);var d=u.owner+u.contentType;i.set(d,s)}}var m={};for(var p in this.$6){var _=this.$6[p],f=void 0,g=p;if(l.includes(_.contentType)){var h=o("ZenonTSLogDataUtil").getMediaTrackDirection(p);m[h+_.contentType]=m[h+_.contentType]+1||0,g=this.$13(h,_.contentType)}else _.contentType==="candidate-pair"?g="cp":_.contentType==="client-metrics"&&(g="cm");var y=i.get(_.owner+"audio");_.contentType==="video"&&y!=null&&(f=this.$6[y]);var C={bucket_end:_.bucketEnd,bucket_start:_.bucketStart,counters:this.$15(g,this.$6[p],e,f),name:g,props:{}};r.has(this.$6[p].owner)&&(C.props.seq=r.get(this.$6[p].owner)),this.$6[p].ssrc!=null&&(C.props.ssrc=this.$6[p].ssrc),C.props.id=p,n.streams.push(C)}return this.$18(JSON.stringify(n))},n.updateVideoStallStats=function(t,n,r,a){[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_IS_STALLED,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_IS_STALLED,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_IS_STALLED].forEach(function(e){var o,i,l=a+"_"+e,s=r-n.bucketStart;n.counters[l]==null&&(n.counters[l]=Array(s).fill(0)),n.counters[l][s]=(o=(i=t.deltaStat[e])==null?void 0:i.getLastAddedValue())!=null?o:0,n.bucketEnd=r})},n.generateTslogStreamName=function(t,n){return"outbound_"+t+"_"+n},n.addCounterValue=function(t,n,r,o){var e=Math.max(this.$3-t.bucketStart,0);t.counters[n]==null&&(t.counters[n]=Array(e).fill(0));var a=Math.round(Number(r)*(o!=null?o:1));t.counters[n][e]=a},n.$18=function(t){try{var e=btoa(r("pako").deflate(t,{to:"string"}));return r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"Compressed TSLog data of length "+t.length+" to "+e.length}),{format:"B64_DEFLATE",timeSeries:e}}catch(e){var n=r("getErrorSafe")(e);r("FBLogger")("rtc_www").catching(n).warn("Caught exception while compressing TSLog")}return r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"Not compressing TSLog data of length "+t.length}),{format:"JSON",timeSeries:t}},n.$17=function(t,n,r){var e,o=r.displayResolutionData;o&&(t.counters.rrrWidth==null&&(t.counters.rrrWidth=Array(this.$3-t.bucketStart).fill(0)),t.counters.rrrHeight==null&&(t.counters.rrrHeight=Array(this.$3-t.bucketStart).fill(0)),t.counters.rrrStreamType==null&&(t.counters.rrrStreamType=Array(this.$3-t.bucketStart).fill(0)),t.counters.rrrWidth[n]=o.renderWidth?Math.round(o.renderWidth):0,t.counters.rrrHeight[n]=o.renderHeight?Math.round(o.renderHeight):0,t.counters.rrrStreamType[n]=(e=o.streamType)!=null?e:0)},t})();l.default=c}),98);
__d("ZenonMediaStatsManager",["CompactSerializer","DateConsts","FBLogger","Network","RequestStreamBodyUtils","RpGenaiSctpCaptionsGenAIBotStateSerializers","ZenonAppProvider","ZenonCircularBuffer","ZenonDeltaMediaStat","ZenonFirstMediaPacketFinder","ZenonHistogramCounter","ZenonMediaActionLogger","ZenonMediaStatsConfig","ZenonMediaStatsReportPoller","ZenonMediaStatsSerializer","ZenonNetworkQualityMonitor","ZenonRenderedView","ZenonSCTPConstants","ZenonTSLogDataJSONHolder","asyncToGeneratorRuntime","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=5e3,s="[ZenonMediaStatsManager]",u=(function(){function t(t){var n;this.$6=new Map,this.$12=null,this.$14="disconnected",this.$24=null,this.$1=t.peerConnection,this.$2=t.tracks,this.$3=t.trackToSenderMap,this.$4=t.mediaStats,this.$8=t.onMediaStatUpdate,this.$5=t.dataMessageTranslator,this.$26=t.areTslogsEnabled,this.$9=this.$26?new(r("ZenonTSLogDataJSONHolder")):null,this.$10=t.videoDurationTracker,this.$11=(n=t.pollingIntervalMs)!=null?n:e,this.$7=function(){},this.$13=new(o("ZenonNetworkQualityMonitor")).ZenonNetworkQualityMonitor,this.$15={audioDevices:[],videoDevices:[]},this.$16=new(r("ZenonFirstMediaPacketFinder"))(t.peerConnection,t.onFirstMediaPacket,t.onFirstSentMediaPacket),this.$27=new Map,this.$17=new(r("ZenonHistogramCounter"))(200,1e3,200),this.$18=new Map,this.$19=new Map;var a=o("DateConsts").MS_PER_MIN/this.$11;try{this.$20=new(r("ZenonCircularBuffer"))(a)}catch(e){r("ZenonMediaActionLogger").logErrorToFbLogger(s+(" Error init circular buffer for ecv RTT "+a),"ZenonCircularBuffer",r("getErrorSafe")(e),"warn")}try{this.$21=new(r("ZenonCircularBuffer"))(a)}catch(e){r("ZenonMediaActionLogger").logErrorToFbLogger(s+(" Error init circular buffer for ecv neteq wait time "+a),"ZenonCircularBuffer",r("getErrorSafe")(e),"warn")}try{this.$22=new(r("ZenonCircularBuffer"))(a)}catch(e){r("ZenonMediaActionLogger").logErrorToFbLogger(s+(" Error init circular buffer for ecv plccng "+a),"ZenonCircularBuffer",r("getErrorSafe")(e),"warn")}try{this.$23=new(r("ZenonCircularBuffer"))(a)}catch(e){r("ZenonMediaActionLogger").logErrorToFbLogger(s+(" Error init circular buffer for ecv Video Freeze "+a),"ZenonCircularBuffer",e,"warn")}try{this.$24=new(r("ZenonCircularBuffer"))(a+1)}catch(e){r("ZenonMediaActionLogger").logErrorToFbLogger(s+(" Error init circular buffer for ecv AV Sync "+(a+1)),"ZenonCircularBuffer",e,"warn")}try{this.$25=new(r("ZenonCircularBuffer"))(a)}catch(e){r("ZenonMediaActionLogger").logErrorToFbLogger(s+(" Error init circular buffer for ecv decoded duration "+a),"ZenonCircularBuffer",e,"warn")}}var a=t.prototype;return a.listen=function(){var e=this;this.$1.addEventListener("iceconnectionstatechange",function(t){var n=t.target;switch(e.$14=n.iceConnectionState,e.$14){case"connected":r("promiseDone")(e.pollRecurring());break;case"failed":case"disconnected":e.updateNetworkStatus(e.$13.determineNetworkStatus(null,!0));break}})},a.pollOnce=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e=Array.from(new Set([].concat(Array.from(this.$2.values()),Array.from(this.$3.values()))));if(yield o("ZenonMediaStatsReportPoller").updateStatsFromConnection(e,this.$4,this.$17,this.$1,this.$9,this.$11),yield o("ZenonMediaStatsReportPoller").updateStatsForDatachannel(this.$1,this.$6),this.$12!=null){var t=o("ZenonMediaStatsSerializer").getMediaStats(this.$2,this.$4,this.$16,this.$10,this.$17,this.$3,this.$15,this.$6);this.logEcvSenderRttStats(t),this.logEcvNetEqWaitTimeStats(t),this.logEcvPlccngStats(t),this.logEcvVideoFreezeStats(t),this.logEcvAVSyncStats(t),this.logEcvDecodedDurationStats(t),this.reportEndToEndLatency(),this.$8(t)}yield o("ZenonMediaStatsReportPoller").updateVideoCodecFromReceivers(e,this.$1,this.$19)}catch(e){r("FBLogger")("rtc_www").catching(r("getErrorSafe")(e)).warn("Error polling media metrics.")}this.updateNetworkStatus(this.$13.determineNetworkStatus(this.$4,this.$14==="failed"||this.$14==="disconnected")),this.updateNetworkHealthStats(),this.updateAudioRemoteTimestamp()});function t(){return e.apply(this,arguments)}return t})(),a.pollRecurring=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this;this.$12==null&&(this.$12=window.setInterval(function(){return e.pollOnce()},this.$11),yield this.pollOnce())});function t(){return e.apply(this,arguments)}return t})(),a.stopPolling=function(){this.$12!=null&&(window.clearInterval(this.$12),this.$12=null),this.logNetworkHealthStats(),this.logAudioReceiverStats(),this.logRemoteTimestamps()},a.onRemoteTrackAdded=function(t){this.$16.setUpForTrackType(t.contentType)},a.timeSeries=function(){var e,t;return(e=(t=this.$9)==null?void 0:t.serialize())!=null?e:null},a.resetTimeSeries=function(){this.$26&&(this.$9=new(r("ZenonTSLogDataJSONHolder")))},a.setNetworkStatusListener=function(t){this.$7=t},a.updateNetworkStatus=function(t){this.$7(t)},a.updateNetworkHealthStats=function(){if(r("Network").containsNetworkInformation())for(var e of o("ZenonMediaStatsConfig").NETWORK_HEALTH_STATS.values()){var t=this.$18.get(e);t==null&&(t=new(r("ZenonDeltaMediaStat")),this.$18.set(e,t)),this.$28(e,t)}},a.updateAudioRemoteTimestamp=function(){var e=this;this.$2.forEach(function(t){if(t.contentType==="audio"&&t.remote){var n,r=e.$4.get(t.trackId);e.$27.has(t.trackId)||e.$27.set(t.trackId,[]);var o=r==null||(n=r.deltaStat.remoteTimestamp)==null?void 0:n.getLastAddedValue();if(o!=null){var a;(a=e.$27.get(t.trackId))==null||a.push(o.toString())}}})},a.logRemoteTimestamps=function(){this.$27.forEach(function(e,t){r("ZenonMediaActionLogger").logCheckpointEmployeesTestUsersOnly(s+("Audio Remote Timestamps "+t+": "+JSON.stringify(e)))})},a.$28=function(t,n){var e=0;switch(t){case"bandwidth":e=r("Network").getBandwidth();break;case"rtt":e=r("Network").getRTT();break;default:r("FBLogger")("rtc_www").warn(t+" stats collection is not implemented")}e!=null?n.add(e):o("ZenonMediaStatsConfig").isPreChromium86()&&r("FBLogger")("rtc_www").warn(t+" in null. Skipped logging")},a.logNetworkHealthStats=function(){var e,t;if(((e=this.$18.get("bandwidth"))==null?void 0:e.getAverage())!=null||((t=this.$18.get("rtt"))==null?void 0:t.getAverage())!=null){var n,o,a=JSON.stringify({bandwidth:(n=this.$18.get("bandwidth"))==null?void 0:n.getAverage(),rtt:(o=this.$18.get("rtt"))==null?void 0:o.getAverage()});r("ZenonMediaActionLogger").logEvent({checkpoint:"Network health stats "+a})}},a.logEcvSenderRttStats=function(t){var e=t.sender.avgrtt;e!=null&&this.$29(e,this.$20,function(e){t.ecv.ecv_rtt_ms=e})},a.logEcvPlccngStats=function(t){var e=t.receiver.dec_plc_cng;e!=null&&this.$29(e,this.$22,function(e){t.ecv.ecv_plccng_v2=e})},a.logEcvNetEqWaitTimeStats=function(t){var e,n=t.DebugAudioMetrics.NetworkReceive.jb_nm,r=n==null||(e=n.neteq)==null?void 0:e.meanWait;r!=null&&this.$29(Number(r),this.$21,function(e){t.ecv.ecv_neteq_wait_time_ms=e})},a.logEcvVideoFreezeStats=function(t){var e,n=(e=t.video.receiver)==null?void 0:e.frdur500;n!=null&&this.$29(Number(n),this.$23,function(e){t.ecv.ecv_video_freeze_duration_above_500_ms_v2=e})},a.logEcvAVSyncStats=function(t){var e,n=(e=t.video.receiver)==null?void 0:e.avhist;n&&n.length>0&&(n.length===6?this.$30(Number(n[n.length-1]),this.$24,function(e){t.ecv.ecv_av_sync_above_1000_ms=e}):r("ZenonMediaActionLogger").logCheckpoint(s+" AV Sync Histogram bin size is changed"))},a.logEcvDecodedDurationStats=function(t){var e,n=(e=t.video.receiver)==null?void 0:e.tdt;n!=null&&this.$29(Number(n),this.$25,function(e){t.ecv.ecv_decoded_bitrate_duration_sum=e})},a.$30=function(t,n,r){if(n){n.add(t);var e=n.getDelta();e!=null&&e>0&&r(e.toString())}},a.$29=function(t,n,r){n.add(t);var e=n.getAvg();e!=null&&r(e.toString())},a.logAudioReceiverStats=function(){var e,t,n={jbd:{},rtt:{}};if(this.$4.forEach(function(e){o("ZenonMediaStatsSerializer").addAudioReceiverPercentStats(n,e,r("ZenonRenderedView").GRID,"audio")}),((e=n.jbd)==null?void 0:e.avg)!=null||((t=n.rtt)==null?void 0:t.avg)!=null){var a=JSON.stringify({AudioPercent:n});r("ZenonMediaActionLogger").logEvent({checkpoint:"Audio Receiver Percent Stats "+a})}},a.reportEndToEndLatency=function(){var e;if(o("ZenonAppProvider").shouldSupportRTPSession()){var t=(e=this.$4.get("conversation_bot_audio"))==null?void 0:e.lastServerToClientLatency;if(t!=null){var n={roundtripAudioCtpLatencyMs:"0",serverToClientAudioCtpLatencyMs:"0"};n.serverToClientAudioCtpLatencyMs=Math.trunc(t).toString();var r=o("CompactSerializer").serializeNoThrow(n,o("RpGenaiSctpCaptionsGenAIBotStateSerializers").serializeGenAiMediaStats);if(r!=null){var a=this.$5.userIds();if(!(a==null||a.length===0)){var i=a[0];this.$1.sendDataMessage(o("ZenonSCTPConstants").GENAI_MEDIA_STATS_TOPIC,{message:o("RequestStreamBodyUtils").uint8ArrayToString(r),sender:i})}}}}},a.getNetworkHealthStats=function(){return this.$18},t})();l.default=u}),98);
__d("ZenonAudioDecodingNormalDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){e.filter(function(e){return e.webrtcTrack.enabled===!0&&e.webrtcTrack.readyState==="live"&&e.contentType==="audio"&&e.remote===!0}).forEach(function(e){var n=t.get(e.trackId);if(!(n==null||n.cumulativeStat.totalSamplesReceived==null||n.cumulativeStat.removedSamplesForAcceleration==null)){var a=n.cumulativeStat,i=a.removedSamplesForAcceleration,l=a.totalSamplesReceived,s=l.getCurrentValue()+i.getCurrentValue();n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_NORMAL]==null?n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_NORMAL]=new(r("ZenonCumulativeMediaStat"))(s):n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_NORMAL].update(s)}})}l.updateAudioDecodingNormal=e}),98);
__d("ZenonAudioDecodingPLCCNGDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){e.filter(function(e){return e.webrtcTrack.enabled===!0&&e.webrtcTrack.readyState==="live"&&e.contentType==="audio"&&e.remote===!0}).forEach(function(e){var n=t.get(e.trackId);if(!(n==null||n.cumulativeStat.silentConcealedSamples==null)){var a=n.cumulativeStat.silentConcealedSamples,i=a.getCurrentValue();n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_PLCCNG]==null?n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_PLCCNG]=new(r("ZenonCumulativeMediaStat"))(i):n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_PLCCNG].update(i)}})}l.updateAudioDecodingPLCCNG=e}),98);
__d("ZenonAudioDecodingPLCDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){e.filter(function(e){return e.webrtcTrack.enabled===!0&&e.webrtcTrack.readyState==="live"&&e.contentType==="audio"&&e.remote===!0}).forEach(function(e){var n=t.get(e.trackId);if(!(n==null||n.cumulativeStat.concealedSamples==null||n.cumulativeStat.silentConcealedSamples==null)){var a=n.cumulativeStat,i=a.concealedSamples,l=a.silentConcealedSamples,s=i.getCurrentValue()-l.getCurrentValue();n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_PLC]==null?n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_PLC]=new(r("ZenonCumulativeMediaStat"))(s):n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_PLC].update(s)}})}l.updateAudioDecodingPLC=e}),98);
__d("ZenonAudioEchoConfidenceStatsDeriver",["EchoConfidenceMetricsManager","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonMediaStatsParser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=r("EchoConfidenceMetricsManager").getAndResetEchoConfidenceMetrics();if(t){var n=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(e,o("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACK_INFO);n!=null&&(s(n),u(n,t))}}function s(e){e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CONFIDENCE]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CONFIDENCE]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_DELAY]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_DELAY]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_ERL]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_ERL]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_RMS]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_RMS]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_LPB_RMS]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_LPB_RMS]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CROSS_CORRELATION]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CROSS_CORRELATION]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_GOLDEN_ECHO_CONFIDENCE]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_GOLDEN_ECHO_CONFIDENCE]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_CONFIDENCE]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_CONFIDENCE]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY_ENTROPY]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY_ENTROPY]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_ERL]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_ERL]=new(r("ZenonDeltaMediaStat"))),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_FRAMES_PERCENTAGE]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_FRAMES_PERCENTAGE]=new(r("ZenonDeltaMediaStat")))}function u(e,t){e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CONFIDENCE]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CONFIDENCE].add(t.echoConfidence),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_DELAY]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_DELAY].add(t.echoDelay),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_ERL]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_ERL].add(t.echoERL),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_RMS]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_RMS].add(t.echoRMS),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_LPB_RMS]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_LPB_RMS].add(t.echoLpbRMS),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CROSS_CORRELATION]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_ECHO_CROSS_CORRELATION].add(t.echoCrossCorrelation),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_GOLDEN_ECHO_CONFIDENCE]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_GOLDEN_ECHO_CONFIDENCE].add(t.goldenEchoMetric),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY].add(t.ltEchoDelay),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_CONFIDENCE]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_CONFIDENCE].add(t.ltEchoConfidence),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY_ENTROPY]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_DELAY_ENTROPY].add(t.ltEchoDelayEntropy),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_ERL]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_ERL].add(t.ltEchoERL),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_FRAMES_PERCENTAGE]&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_SEND_LT_ECHO_FRAMES_PERCENTAGE].add(t.ltEchoFramesPercentage)}l.updateStatsWithDerivedMetric=e}),98);
__d("ZenonAudioLevelDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=9.5/Math.log(32767);function s(t,n){var r=Math.round(20+e*Math.log(t/n));return r=Math.max(1,Math.min(r,20)),r}function u(e,t){var n=-127;return e>0&&t>0&&(n=Math.round(10*Math.log10(e/t)),n=Math.max(-127,Math.min(n,0))),n+=127,n}function c(e,t,n){e!=null&&(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL]==null?n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL]=new(r("ZenonCumulativeMediaStat"))(e):n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL].update(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL].getCurrentValue()+e)),t!=null&&(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL]==null?n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL]=new(r("ZenonCumulativeMediaStat"))(t):n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL].update(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL].getCurrentValue()+t)),n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT]==null?n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT]=new(r("ZenonCumulativeMediaStat"))(1):n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT].update(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT].getCurrentValue()+1)}function d(e,t){var n=0,r=0;e.filter(function(e){return e.webrtcTrack.readyState==="live"&&e.contentType==="audio"}).forEach(function(e){if(!(e.remote&&e.webrtcTrack.enabled===!1)){var o=t.get(e.trackId);if(!(o==null||o.cumulativeStat.totalAudioEnergy==null||o.cumulativeStat.totalSamplesDuration==null)){var a=o.cumulativeStat,i=a.totalAudioEnergy,l=a.totalSamplesDuration,d=i.getDeltaFromLastUpdate(),m=l.getDeltaFromLastUpdate();if(m!==0)if(e.remote===!0){n+=d,r=Math.max(r,m);var p=s(d,m);c(p,null,o)}else{var _=u(d,m);c(null,_,o)}}}});var a=t.get(o("ZenonMediaStatsConfig").GLOBAL_STATS_TRACKID);if(!(a==null||r===0)){var i=u(n,r);c(null,i,a)}}l.computeAudioLevels=d}),98);
__d("ZenonAudioPlaybackIssueLogger",["ZenonMediaActionLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=5e3,s=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.detectAudioPlaybackIssue=function(n,r){var t=this;n.filter(function(e){return e.webrtcTrack.enabled&&e.webrtcTrack.readyState==="live"&&e.contentType==="audio"&&e.remote}).forEach(function(n){var o=r.get(n.trackId);if(o!=null){var a=o.cumulativeStat,i=a.bytesReceived,l=a.totalAudioEnergy;if(!(i==null||l==null||i.getTimeSinceLastUpdate()===0)){var s=l.getDeltaFromLastUpdate(),u=i.getDeltaFromLastUpdate()*8,c=i.getTimeSinceLastUpdate()/1e3,d=u/c;t.$1.has(n.trackId)||t.$1.set(n.trackId,!1);var m=t.$1.get(n.trackId);s===0&&d>e?m===!1&&(t.logAudioPlaybackIssueCheckpoint("start",n.trackId,d,s),t.$1.set(n.trackId,!0)):m===!0&&(t.logAudioPlaybackIssueCheckpoint("end",n.trackId,d,s),t.$1.set(n.trackId,!1))}}})},n.logAudioPlaybackIssueCheckpoint=function(t,n,o,a){r("ZenonMediaActionLogger").logEvent({checkpoint:(t==="start"?"Detected new":"No longer detecting")+" audio playback issue for track "+n+". Bitrate is "+o+" bps, audio energy delta is "+a+".",mediaID:n})},t})(),u=new s;l.default=u}),98);
__d("ZenonHistogram",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return(e.value||0)-(t.value||0)}var l=(function(){function t(){this.$1=[],this.$2=!0}var n=t.prototype;return n.$3=function(){this.$2===!1&&this.$1.sort(e),this.$2=!0},n.add=function(t){this.$1.push(t),this.$2=!1},n.getAvgAndPercentile=function(t,n){this.$2||this.$3();var e=n?this.$1.filter(n):this.$1;if(e.length===0)return{avg:null,percentiles:null};var r=e.reduce(function(e,t){return e+t.value},0)/e.length,o=t.map(function(t){var n=Math.min(100,Math.max(0,t)),r=(e.length-1)*n/100,o=Math.floor(r),a=Math.ceil(r);if(o===a)return e[o].value;var i=e[o].value*(a-r),l=e[a].value*(r-o);return i+l});return{avg:r,percentiles:o}},t})();i.default=l}),66);
__d("ZenonPercentMediaStat",["ZenonHistogram","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new(r("ZenonHistogram"))}var t=e.prototype;return t.add=function(t,n,r,o){var e={contentType:r,value:t,view:n,voiceEnergy:o};this.$1.add(e)},t.getAvgAndPercentile=function(t,n,r,a){var e;return a==null?e=function(t){return t.view===n&&t.contentType===r}:e=function(t){var e=t.voiceEnergy>o("ZenonMediaStatsConfig").VOICE_ENERGY_THRESHOLD;return t.view===n&&t.contentType===r&&e===a},this.$1.getAvgAndPercentile(t,e)},e})();l.default=e}),98);
__d("ZenonAudioReceiverStatsUtils",["ZenonMediaStatsConfig","ZenonPercentMediaStat"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){e.forEach(function(e){var n=t.get(e.trackId);n!=null&&(s(n,"roundTripTime",u(n,"currentRoundTripTime",1e3),o("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,n.contentType?n.contentType:o("ZenonMediaStatsConfig").GLOBAL_STATS_CONTENT_TYPE,0),s(n,"jitterBufferDelay",c(n,"jitterBufferDelay","jitterBufferEmittedCount",1e3),o("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,n.contentType?n.contentType:o("ZenonMediaStatsConfig").GLOBAL_STATS_CONTENT_TYPE,0))})}function s(e,t,n,o,a,i){n!=null&&(e.percentStat[t]==null&&(e.percentStat[t]=new(r("ZenonPercentMediaStat"))),e.percentStat[t].add(n,o,a,i))}function u(e,t,n){if(e.deltaStat[t]){var r=e.deltaStat[t].getLastAddedValue();return r!=null?r*(n!=null?n:1):null}return null}function c(e,t,n,r){var o,a=0,i=((o=e.cumulativeStat[n])==null?void 0:o.getDeltaFromLastUpdate())||0;return i&&e.cumulativeStat[t]!=null?(a=e.cumulativeStat[t].getDeltaFromLastUpdate()/i,a*(r!=null?r:1)):null}l.updateTracksWithAudioReceivePercentStats=e,l.addPercentStatToTracker=s,l.getValueFromDelta=u,l.getRateFromCumulative=c}),98);
__d("ZenonAudioStallStatsDeriver",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaActionLogger","ZenonMediaStatsConfig","ZenonMediaStatsParser"],(function(t,n,r,o,a,i,l){"use strict";var e=5e3;function s(t){var n=t.audioEncoding,a=t.cumulativeStat,i=a.bytesSent,l=a.timestamp,s=a[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION],u=(n==null?void 0:n.enabled)===!1||(n==null?void 0:n.enabled)===!0&&(n==null?void 0:n.prevState)===!1;return!u&&i!=null&&l!=null?i.getCurrentTimeSinceLastUpdate()>e&&s!=null?(s.getCurrentTimeSinceLastUpdate()!==0&&r("ZenonMediaActionLogger").logEvent({checkpoint:"[audio stall deriver] calculated a stall due to byteSent update time "+i.getCurrentTimeSinceLastUpdate()+" greater than threshold. audioEncoding: "+JSON.stringify(n!=null?n:{})}),s.getCurrentTimeSinceLastUpdate()):((i.getCurrentValue()===0||i.getDeltaFromLastUpdate()===0)&&l.getDeltaFromLastUpdate()!==0&&r("ZenonMediaActionLogger").logEvent({checkpoint:"[audio stall deriver] calculated a stall due to no "+(i.getCurrentValue()===0?"current bytes":"delta bytes")+".  audioEncoding: "+JSON.stringify(n!=null?n:{})}),i.getCurrentValue()===0||i.getDeltaFromLastUpdate()===0?l.getDeltaFromLastUpdate():0):0}function u(e){e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED]=new(r("ZenonDeltaMediaStat"))),e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS]==null&&(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS]=new(r("ZenonCumulativeMediaStat"))(0)),e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS]==null&&(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS]=new(r("ZenonCumulativeMediaStat"))(0)),e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION]==null&&(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION]=new(r("ZenonCumulativeMediaStat"))(0))}function c(e){var t,n,r,a=s(e),i=a===0?0:1;u(e);var l=!m(e)&&i?1:0;(t=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS])==null||t.update(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS].getCurrentValue()+l),(n=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS])==null||n.update(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS].getCurrentValue()+l),(r=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION])==null||r.update(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION].getCurrentValue()+a),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED].add(i)}function d(e,t){var n,a,i,l,s=t?0:1,u=!m(e)&&s?1:0;(n=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS])==null||n.update(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS].getCurrentValue()+u),(a=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS])==null||a.update(((i=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS])==null?void 0:i.getCurrentValue())+u),e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED].add(s);var c=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION],d=s&&c?c.getCurrentTimeSinceLastUpdate():0;(l=e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION])==null||l.update(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION].getCurrentValue()+d),u!==0&&r("ZenonMediaActionLogger").logEvent({checkpoint:"[audio stall deriver] calculated additional stall due no tracks"})}function m(e){return e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED]!=null&&e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED].getLastAddedValue()===1}function p(e,t){var n=0;e.filter(function(e){return e.contentType==="audio"&&!e.remote&&e.webrtcTrack.readyState==="live"}).forEach(function(e){n++;var o=t.get(e.trackId);if(o!=null){if((o==null?void 0:o.transportIceState)!=="connected"){r("ZenonMediaActionLogger").logEvent({checkpoint:"[audio stall deriver] Ignoring stall calculation because transport ice state is not connected"});return}c(o)}});var a=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(t,o("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACK_INFO);a!=null&&(u(a),n===0?d(a,!1):d(a,!0))}l.updateStatsWithDerivedMetric=p}),98);
__d("ZenonAvSyncDeriver",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.webrtcStream.getAudioTracks();return t!=null&&t.length>0?t[0].id:null}function s(e){var t;if(e.cumulativeStat.totalAudioEnergy!=null&&e.cumulativeStat.totalAudioEnergy.getDeltaFromLastUpdate()<=o("ZenonMediaStatsConfig").VOICE_ENERGY_THRESHOLD)return e.isAudioEnergyLow=!0,!0;var n=(t=e.isAudioEnergyLow)!=null?t:!1;return e.isAudioEnergyLow=!1,n}function u(t,n,a){t.filter(function(e){return e.contentType==="video"&&e.remote}).forEach(function(i){var l=e(i),u=t.find(function(e){return e.webrtcTrack.id===l});if(u!=null){var d=n.get(u.trackId),m=n.get(i.trackId);if(d!=null&&d.cumulativeStat.estimatedPlayoutTimestamp!=null&&m!=null&&m.cumulativeStat.estimatedPlayoutTimestamp!=null){var p,_,f,g,h=m.cumulativeStat.estimatedPlayoutTimestamp,y=d.cumulativeStat.estimatedPlayoutTimestamp,C=(p=m.lastEstimatedPlayoutTimestamp)!=null?p:0,b=(_=d.lastEstimatedPlayoutTimestamp)!=null?_:0;m.lastEstimatedPlayoutTimestamp=h.getCurrentValue(),d.lastEstimatedPlayoutTimestamp=y.getCurrentValue();var v=m.cumulativeStat.packetsReceived?m.cumulativeStat.packetsReceived.getDeltaFromLastUpdate()>0:!1,S=d.cumulativeStat.packetsReceived?d.cumulativeStat.packetsReceived.getDeltaFromLastUpdate()>0:!1;if(((f=m.lastEstimatedPlayoutTimestamp)!=null?f:0)<=C||((g=d.lastEstimatedPlayoutTimestamp)!=null?g:0)<=b||s(d)||!v||!S){c(m,o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_COUNT,0),c(m,o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB,0);return}c(m,o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_COUNT,1);var R=y.getCurrentValue()-h.getCurrentValue(),L=Math.abs(R);if(L>o("ZenonMediaStatsConfig").AV_SYNC_CUTOFF){c(m,o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB,1);return}c(m,o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB,0);var E=[{key:o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC,value:R},{key:o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_ABS,value:L}];E.forEach(function(e){m.deltaStat[e.key]==null&&(m.deltaStat[e.key]=new(r("ZenonDeltaMediaStat"))),m.deltaStat[e.key].add(e.value)}),a.update(L)}}})}function c(e,t,n){var o,a;e.cumulativeStat[t]==null&&(e.cumulativeStat[t]=new(r("ZenonCumulativeMediaStat"))(0)),(o=e.cumulativeStat[t])==null||o.update(((a=e.cumulativeStat[t])==null?void 0:a.getCurrentValue())+n)}l.findAssociatedAudioTrackId=e,l.isMutedDuringInterval=s,l.updateTrackerWithAvSync=u}),98);
__d("ZenonMediaStatsUtil",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("25247")||r("gkx")("9676")}l.shouldUseTSLog=e}),98);
__d("ZenonMuteStateDeriver",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){e.forEach(function(e){var n=t.get(e.trackId);n!=null&&(n.isMuted=!e.enabled||e.webrtcTrack.readyState==="ended")})}i.updateMuteState=e}),66);
__d("ZenonOutboundStatsWriter",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonMediaStatsParser"],(function(t,n,r,o,a,i,l){"use strict";var e=["cumulativeStat","deltaStat","histResScale","percentStat","simulcastStats"],s,u=Object.freeze({audio:(s=o("ZenonMediaStatsConfig")).OUTBOUND_AUDIO_STATS_TRACK_INFO,screen:s.OUTBOUND_SCREEN_STATS_TRACK_INFO,screen_audio:s.OUTBOUND_SCREEN_AUDIO_STATS_TRACK_INFO,video:s.OUTBOUND_VIDEO_STATS_TRACK_INFO});function c(e,t,n){n!=null&&(e.cumulativeStat[t]==null?e.cumulativeStat[t]=new(r("ZenonCumulativeMediaStat"))(n.getCurrentValue()):t==="packetsLost"||t===o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED?e.cumulativeStat[t].updateNonStrictCumulative(e.cumulativeStat[t].getCurrentValue()+n.getDeltaFromLastUpdate()):e.cumulativeStat[t].update(e.cumulativeStat[t].getCurrentValue()+n.getDeltaFromLastUpdate()))}function d(e,t,n){if(n!=null){e.deltaStat[t]==null&&(e.deltaStat[t]=new(r("ZenonDeltaMediaStat")));var o=n.getLastAddedValue();o!=null&&e.deltaStat[t].add(o)}}function m(t,n){t.filter(function(e){return e.remote===!1&&e.webrtcTrack.readyState==="live"}).forEach(function(t){var r=n.get(t.trackId);if(r!=null){var a=u[t.contentType],i=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(n,a),l=r.cumulativeStat,s=r.deltaStat,m=r.histResScale,p=r.percentStat,_=r.simulcastStats,f=babelHelpers.objectWithoutPropertiesLoose(r,e);Object.assign(i,f),i.histResScale=[].concat(m);for(var g in l)c(i,g,l[g]);for(var h in s)d(i,h,s[h])}})}l.updateOutboundStats=m}),98);
__d("ZenonPacketsLostDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){e.filter(function(e){return e.webrtcTrack.enabled===!0&&e.webrtcTrack.readyState==="live"}).forEach(function(e){var n=t.get(e.trackId);if(!(n==null||n.cumulativeStat.packetsLost==null)){var a,i=n.cumulativeStat.packetsLost;if(e.remote?a=n.cumulativeStat.packetsReceived:a=n.cumulativeStat.packetsSent,n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED]==null)n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED]=new(r("ZenonCumulativeMediaStat"))(i.getCurrentValue());else{var l,s=a!=null&&a.isReset()?i.getCurrentValue():i.getDeltaFromLastUpdate();(l=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED])==null||l.updateNonStrictCumulative(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED].getCurrentValue()+s)}}})}l.updatePacketsLost=e}),98);
__d("ZenonVideoQualityDeriver",["ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=921600,s=15360,u=Math.log2(e/s),c=51,d=16,m=c-d,p=m+Math.floor(u*6);function _(e){var t=Math.max(1,Math.min(63,e)),n=[1,5,12,28,42,53,64],r=n.findIndex(function(e){return e>t});return r==null?0:Math.min(51,Math.floor(12+6*r+6*(t-n[r-1])/(n[r]-n[r-1])))}function f(t){var n,r,a=t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CONVERTED_QP_SUM],i=t.cumulativeStat.framesEncoded,l=t.deltaStat,s=l.frameHeight,c=l.frameWidth;if(!(a==null||i==null||s==null||c==null)){var f=i.getDeltaFromLastUpdate(),g=a.getDeltaFromLastUpdate(),h=c.getLastAddedValue(),y=s.getLastAddedValue();if(!(f===0||y==null||h==null||h<=0||y<=0)){var C=g/f;if(!(C<=0)){var b;((n=t.codec)==null?void 0:n.indexOf("264"))===-1&&((r=t.codec)==null?void 0:r.indexOf("265"))===-1?b=_(C):b=C;var v=Math.max(0,Math.min(m,b-d)),S=h*y,R=Math.max(0,Math.min(u,Math.log2(e/S)));return Math.max(0,p-v-R*6)/p*100}}}}l._convertToH264QP=_,l.computeVideoQuality=f}),98);
__d("ZenonPerStreamAggregator",["ZenonAvSyncDeriver","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonMediaStatsParser","ZenonPercentMediaStat","ZenonRenderedView","ZenonVideoQualityDeriver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=Object.freeze({audio:(e=o("ZenonMediaStatsConfig")).OUTBOUND_AUDIO_STATS_TRACK_INFO,screen:e.OUTBOUND_SCREEN_STATS_TRACK_INFO,screen_audio:e.OUTBOUND_SCREEN_AUDIO_STATS_TRACK_INFO,video:e.OUTBOUND_VIDEO_STATS_TRACK_INFO});function u(e,t){b(e,t),C(e,t),y(e,t)}function c(e,t,n,o,a,i){n!=null&&(e.percentStat[t]==null&&(e.percentStat[t]=new(r("ZenonPercentMediaStat"))),e.percentStat[t].add(n,o,a,i))}function d(e,t){return e<t?e:t}function m(e,t){var n=t.get(e.trackId),r=0;if(n==null)return r;if(e.contentType==="audio")n.cumulativeStat.totalAudioEnergy!=null&&(r=n.cumulativeStat.totalAudioEnergy.getDeltaFromLastUpdate());else{var a=o("ZenonAvSyncDeriver").findAssociatedAudioTrackId(e);if(a!=null){var i=t.get(a);i!=null&&i.cumulativeStat.totalAudioEnergy!=null&&(r=i.cumulativeStat.totalAudioEnergy.getDeltaFromLastUpdate(),o("ZenonAvSyncDeriver").isMutedDuringInterval(i)&&(r=0))}}return r}function p(e,t){var n,a,i=o("ZenonMediaStatsConfig").DERIVED_METRICS.RENDERED_VIEW,l=t.get(e.trackId);if(l==null)return r("ZenonRenderedView").GRID;l.deltaStat[i]==null&&(l.deltaStat[i]=new(r("ZenonDeltaMediaStat")));var s=(n=l.renderedView)!=null?n:r("ZenonRenderedView").GRID,u=(a=r("ZenonRenderedView").cast(l.deltaStat[i].getLastAddedValue()))!=null?a:s;return l.deltaStat[i].add(s),d(s,u)}function _(e,t,n,r){var o,a=0,i=((o=e.cumulativeStat[n])==null?void 0:o.getDeltaFromLastUpdate())||0;return i&&e.cumulativeStat[t]!=null?(a=e.cumulativeStat[t].getDeltaFromLastUpdate()/i,a*(r!=null?r:1)):null}function f(e){var t,n,r=null,a=o("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED,i=((t=e.cumulativeStat[a])==null?void 0:t.getDeltaFromLastUpdate())||0,l=((n=e.cumulativeStat.packetsReceived)==null?void 0:n.getDeltaFromLastUpdate())||0,s=i+l;return e.cumulativeStat.packetsReceived!=null&&e.cumulativeStat[a]!=null&&s&&(r=e.cumulativeStat[a].getDeltaFromLastUpdate()/s),r}function g(e,t,n){var r,o=((r=e.cumulativeStat[t])==null?void 0:r.getTimeSinceLastUpdate())||0;if(e.cumulativeStat[t]&&o!==0){var a=e.cumulativeStat[t].getDeltaFromLastUpdate()/o;return a*(n!=null?n:1)}return null}function h(e,t,n){if(e.deltaStat[t]){var r=e.deltaStat[t].getLastAddedValue();return r!=null?r*(n!=null?n:1):null}return null}function y(e,t){var n=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(t,o("ZenonMediaStatsConfig").GLOBAL_STATS_TRACK_INFO),r=0,a=0,i=0,l=0,s=0,u=0;if(e.filter(function(e){return e.webrtcTrack.readyState==="live"&&e.webrtcTrack.muted===!1}).forEach(function(e){var n=t.get(e.trackId);if(n!=null)if(e.remote===!1){if(n.cumulativeStat.totalEncodeTime!=null&&n.cumulativeStat.totalEncodeTime.getTimeSinceLastUpdate()>0){var r,o;l+=((r=n.cumulativeStat.totalEncodeTime)==null?void 0:r.getDeltaFromLastUpdate())||0,s+=((o=n.cumulativeStat.totalEncodeTime)==null?void 0:o.getTimeSinceLastUpdate())||0,u++}}else{var c=g(n,"bytesReceived",8e3);if(c==null)return;if(e.contentType==="audio"?a+=c:i+=c,n.cumulativeStat.totalDecodeTime!=null&&n.cumulativeStat.totalDecodeTime.getTimeSinceLastUpdate()>0){var d,m;l+=((d=n.cumulativeStat.totalDecodeTime)==null?void 0:d.getDeltaFromLastUpdate())||0,s+=((m=n.cumulativeStat.totalDecodeTime)==null?void 0:m.getTimeSinceLastUpdate())||0,u++}}}),u>0){var d=s/u,m=l*1e3/d;c(n,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.GLOBAL_CPU_USAGE,m,o("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,o("ZenonMediaStatsConfig").GLOBAL_STATS_CONTENT_TYPE,r)}if(a+i>0){var p;c(n,(p=o("ZenonMediaStatsConfig")).PER_STREAM_AGG_METRICS.GLOBAL_AUDIO_BITRATE,a,p.GLOBAL_STATS_RENDERED_VIEW,p.GLOBAL_STATS_CONTENT_TYPE,r),c(n,p.PER_STREAM_AGG_METRICS.GLOBAL_VIDEO_BITRATE,i,p.GLOBAL_STATS_RENDERED_VIEW,p.GLOBAL_STATS_CONTENT_TYPE,r)}}function C(e,t){e.filter(function(e){return e.remote===!1&&e.webrtcTrack.readyState==="live"}).forEach(function(e){var n=t.get(e.trackId);if(n!=null){var r,a=s[e.contentType],i=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(t,a);c(i,(r=o("ZenonMediaStatsConfig")).PER_STREAM_AGG_METRICS.ROUND_TRIP_TIME,h(n,"currentRoundTripTime",1e3),r.GLOBAL_STATS_RENDERED_VIEW,e.contentType,0);var l=o("ZenonVideoQualityDeriver").computeVideoQuality(n);c(i,r.PER_STREAM_AGG_METRICS.VIDEO_QUALITY,l,r.GLOBAL_STATS_RENDERED_VIEW,e.contentType,0),c(i,r.PER_STREAM_AGG_METRICS.VIDEO_ENCODED_FRAME_RATE,g(n,"framesEncoded",1e3),r.GLOBAL_STATS_RENDERED_VIEW,e.contentType,0),c(i,r.PER_STREAM_AGG_METRICS.VIDEO_QP,_(n,r.DERIVED_METRICS.VIDEO_CONVERTED_QP_SUM,"framesEncoded",1),r.GLOBAL_STATS_RENDERED_VIEW,e.contentType,0)}})}function b(e,t){var n=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(t,o("ZenonMediaStatsConfig").PINNED_AUDIO_STATS_TRACK_INFO),a=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(t,o("ZenonMediaStatsConfig").PINNED_VIDEO_STATS_TRACK_INFO);e.filter(function(e){return e.webrtcTrack.readyState==="live"&&e.remote===!0}).forEach(function(e){var i=t.get(e.trackId);if(i!=null){var l=m(e,t),s=p(e,t);if(e.contentType==="audio"){var u=s===r("ZenonRenderedView").PINNED?n:i;c(u,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.AUDIO_PLC_RATE,_(i,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_PLC,"totalSamplesReceived",1e3),s,e.contentType,l),c(u,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.AUDIO_PLC_CNG_RATE,_(i,o("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DECODING_PLCCNG,"totalSamplesReceived"),s,e.contentType,l),c(u,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.AUDIO_NETEQ_WAIT_TIME,_(i,"jitterBufferDelay","jitterBufferEmittedCount",1e3),s,e.contentType,l),c(u,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.AUDIO_PACKET_LOSS_RATE,f(i),s,e.contentType,l)}else if(e.contentType==="video"){var d=s===r("ZenonRenderedView").PINNED?a:i;if(c(d,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_NETEQ_WAIT_TIME,_(i,"jitterBufferDelay","jitterBufferEmittedCount",1e3),s,e.contentType,l),i.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_COUNT]!=null&&i.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_COUNT].getDeltaFromLastUpdate()>0){var y=0;i.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB]==null||i.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB].getDeltaFromLastUpdate()===0?c(d,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_AV_SYNC_ABS,h(i,o("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_ABS,1),s,e.contentType,l):y=1,c(d,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_AV_SYNC_OOB,y,s,e.contentType,l)}c(d,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_FRAME_RATE,g(i,"framesDecoded",1e3),s,e.contentType,l),c(d,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_FREEZE_COUNT_PER_MIN,g(i,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_COUNT,6e4),s,e.contentType,l),c(d,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_FREEZE_DURATION_PER_MIN,g(i,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_DURATION,6e4),s,e.contentType,l),c(d,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_PACKET_LOSS_RATE,f(i),s,e.contentType,l),c(d,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_RENDER_SCALE_RATIO,i.scaleRatio,s,e.contentType,l),c(d,o("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_CROPPING_RATIO,i.croppingRatio,s,e.contentType,l)}}})}l.aggregatePerStream=u}),98);
__d("ZenonPerfUsageStatsTracker",["performance"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return(e||(e=r("performance"))).memory?{heapSizeLimit:Math.round((e||(e=r("performance"))).memory.jsHeapSizeLimit/Math.pow(10,6)),heapTotalSize:Math.round(e.memory.totalJSHeapSize/Math.pow(10,6)),heapUsedSize:Math.round(e.memory.usedJSHeapSize/Math.pow(10,6))}:null}l.getHeapMemoryStats=s}),98);
__d("ZenonReceiverVideoQualityScoreDeriver",["ZenonMediaStatsConfig","ZenonPercentMediaStat","ZenonRenderedView","ZenonVideoQpConversion"],(function(t,n,r,o,a,i,l){"use strict";var e=["video"],s=15360,u=1280*720,c=Math.log(u/s)/Math.log(2),d=51,m=16,p=d-m,_=p+Math.floor(c*6),f={getVideoQualityIndex:function(t,n,r,a,i){if(t<=0||r==null||a==null||r===0||a===0)return null;var e=o("ZenonVideoQpConversion").convertQp(t,n,!i),l=Math.max(0,Math.min(e-m,p)),s=r*a,d=Math.max(0,Math.min(Math.log(u/s)/Math.log(2),c)),f=6*1.6,g=100*(_-l-d*f)/_;return Math.max(0,g)},updateStatsWithDerivedMetric:function(n,a){n.filter(function(t){return e.includes(t.contentType)&&t.remote===!0}).forEach(function(e){if(e!==null){var t=a.get(e.trackId);if(t!=null){var n=t.cumulativeStat,i=n.framesDecoded,l=n.qpSum,s=t.deltaStat,u=s.frameHeight,c=s.frameWidth;if(i==null||l==null||u==null||c==null)return;var d=i.getCurrentValue();if(c&&u&&d>0){var m=t.codec,p=!0;if(m==null)return;m!=="unknown"&&(p=!(m.includes("264")||m.includes("265")));var _=f.getVideoQualityIndex(l.getDeltaFromLastUpdate(),d,c.getLastAddedValue(),u.getLastAddedValue(),p);_!=null&&(t.percentStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RECEIVER_QUALITY_SCORE]==null&&(t.percentStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RECEIVER_QUALITY_SCORE]=new(r("ZenonPercentMediaStat"))),t.percentStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RECEIVER_QUALITY_SCORE].add(_,r("ZenonRenderedView").GRID,e.contentType,0))}}}})}},g=f;l.default=g}),98);
__d("ZenonResourceUsageStatsTracker",["FBLogger","Promise","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{return yield c()}catch(e){r("FBLogger")("rtc_www").catching(r("getErrorSafe")(e)).info("Exception logging monitor extension stats")}return null}),u.apply(this,arguments)}function c(){var r,o,a="gdpnckbgamaigmkbcklkeoipnfaalgad",i=(r=(o=t.chrome)==null?void 0:o.runtime)!=null?r:null;return i===null?(e||(e=n("Promise"))).resolve(null):i.sendMessage(a,"",function(r){var o;if((o=t.chrome)!=null&&(o=o.runtime)!=null&&o.lastError||(r!=null?r:null)===null||Object.keys(r).length===0)return(e||(e=n("Promise"))).resolve(null);var a=[];Object.keys(r).forEach(function(e){var t=r[e];a.push.apply(a,t)});var i=0,l=0,s=0,u=0;a.length>0&&(a.sort(function(e,t){return e.timestamp>t.timestamp?1:-1}),i=Math.round(a.reduce(function(e,t){return e+t.cpu},0)/a.length),u=Math.round(a[a.length-1].cpu),l=Math.round(Math.max.apply(Math,a.map(function(e){return e.cpu}).concat([0]))),s=Math.round(Math.min.apply(Math,a.map(function(e){return e.cpu}))));var c={avgCpu:i,maxCpu:l,minCpu:s,mostRecentCpu:u};return(e||(e=n("Promise"))).resolve(c)})}l.getProcessStats=s}),98);
__d("ZenonVideoActualEncodedBitrateDeriver",["ZenonDeltaMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=8,s=1e3,u=5e3;function c(e,t){e.filter(function(e){return e.webrtcTrack.enabled===!0&&e.webrtcTrack.readyState==="live"&&(e.contentType==="video"||e.contentType==="screen")&&e.remote===!1}).forEach(function(e){var n=t.get(e.trackId);if(!(n==null||n.cumulativeStat.bytesSent==null||n.cumulativeStat.retransmittedBytesSent==null)){var a=n.cumulativeStat,i=a.bytesSent,l=a.retransmittedBytesSent;if(i&&l){var s=0;if(i.getCount()===1?s=d(i.getCurrentValue(),l.getCurrentValue(),u):s=d(i.getDeltaFromLastUpdate(),l.getDeltaFromLastUpdate(),i.getTimeSinceLastUpdate()),!s)return;n.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ACTUAL_ENCODED_BITRATE]==null&&(n.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ACTUAL_ENCODED_BITRATE]=new(r("ZenonDeltaMediaStat"))),n.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ACTUAL_ENCODED_BITRATE].add(s)}}})}function d(t,n,r){return r?(t-n)*e*s/r:0}l.updateVideoActualEncodedBitrate=c}),98);
__d("ZenonVideoAndSSReceiverStallStatsDeriver",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonMediaStatsParser"],(function(t,n,r,o,a,i,l){"use strict";var e,s=0,u=0,c=6e3,d=[(e=o("ZenonMediaStatsConfig")).DERIVED_METRICS.VIDEO_RECEIVE_IS_STALLED,e.DERIVED_METRICS.VIDEO_DECODE_IS_STALLED],m=[e.DERIVED_METRICS.VIDEO_RECEIVE_STALL_DURATION,e.DERIVED_METRICS.VIDEO_DECODE_STALL_DURATION],p=[e.DERIVED_METRICS.VIDEO_RECEIVE_TOTAL_STALLS,e.DERIVED_METRICS.VIDEO_DECODE_TOTAL_STALLS],_=function(t){var e;return((e=t==null?void 0:t.getCurrentTimeSinceLastUpdate())!=null?e:0)>c};function f(e,t,n){var r=0;return n!=null&&y(e,t)&&(r=n.getDeltaFromLastUpdate()),r}function g(e,t,n){var r=0;return n!=null&&h(e,t)&&(r=n.getDeltaFromLastUpdate()),r}function h(e,t){var n=!1;return e!=null&&e.getDeltaFromLastUpdate()>0&&e.getElapsedTime()!==0&&t!=null&&t.getElapsedTime()!==0&&(n=_(t)||t.getDeltaFromLastUpdate()===0||t.getCurrentValue()===0),n}function y(e,t){var n=!1;if(t!=null&&t.getElapsedTime()!==0){var r=s;e.contentType==="screen"&&(r=u),n=_(t)||t.getDeltaFromLastUpdate()<=r||t.getCurrentValue()===0}return n}function C(e){d.forEach(function(t){e.deltaStat[t]==null&&(e.deltaStat[t]=new(r("ZenonDeltaMediaStat")))}),m.forEach(function(t){e.cumulativeStat[t]==null&&(e.cumulativeStat[t]=new(r("ZenonCumulativeMediaStat"))(0))}),p.forEach(function(t){e.cumulativeStat[t]==null&&(e.cumulativeStat[t]=new(r("ZenonCumulativeMediaStat"))(0))})}function b(e,t){var n=t.cumulativeStat,r=n.bytesReceived,a=n.framesDecoded,i=n.timestamp;if(!(e.webrtcTrack.enabled===!1||t.transportIceState!=="connected")){var l=f(e,r,i);v(t,l,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RECEIVE_IS_STALLED,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RECEIVE_STALL_DURATION,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RECEIVE_TOTAL_STALLS);var s=g(r,a,i);v(t,s,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_IS_STALLED,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_STALL_DURATION,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_TOTAL_STALLS)}}function v(e,t,n,r,o){var a,i,l=t===0?0:1,s=!S(e,n)&&l?1:0;(a=e.cumulativeStat[o])==null||a.update(e.cumulativeStat[o].getCurrentValue()+s),(i=e.cumulativeStat[r])==null||i.update(e.cumulativeStat[r].getCurrentValue()+t),e.deltaStat[n].add(l)}function S(e,t){return e.deltaStat[t]!=null&&e.deltaStat[t].getLastAddedValue()===1}function R(e,t){e.filter(function(e){return(e.contentType==="video"||e.contentType==="screen")&&e.remote}).forEach(function(e){var n=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(t,e);n!=null&&(C(n),b(e,n))})}l.updateReceiverStallStatsWithDerivedMetric=R}),98);
__d("ZenonVideoCaptureMetricDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";var e={VIDEO_CAPTURE_FRAME_COUNT_STAT_KEY:o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT,VIDEO_SUM_CAPTURE_PIXEL_STAT_KEY:o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL,calculateVideoCaptureFrameCount:function(t){var e=t.cumulativeStat.timestamp,n=t.deltaStat.framesPerSecond;if(n!=null&&e!=null&&e.getCurrentValue()>t.lastUpdate&&e.getDeltaFromLastUpdate()!==e.getCurrentValue()){var r=n.getLastAddedValue(),o=e.getDeltaFromLastUpdate();if(typeof r=="number")return Math.round(r*o/1e3)}return 0},calculateVideoSumCapturePixel:function(t,n){var e=t.cumulativeStat,r=e.captureFrameCount,o=e.timestamp,a=t.deltaStat,i=a.height,l=a.width;if(r!=null&&l!=null&&i!=null&&o!=null&&o.getCurrentValue()>t.lastUpdate){var s,u,c=n?r.getCurrentValue():r.getDeltaFromLastUpdate(),d=(s=l.getLastAddedValue())!=null?s:0,m=(u=i.getLastAddedValue())!=null?u:0;return c*d*m}return 0},updateStatsWithDerivedMetric:function(n,a){var t=["video","screen"];n.filter(function(e){return t.includes(e.contentType)&&e.remote===!1}).forEach(function(t){var n=a.get(t.trackId);if(n!=null){if(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT]!=null){var i=n.cumulativeStat.framesEncoded;if(i!=null)if(i.getDeltaFromLastUpdate()<0){var l;(l=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT])==null||l.update(0)}else{var s,u,c=e.calculateVideoCaptureFrameCount(n);((s=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT])==null?void 0:s.getCurrentValue())===0&&(c+=c),(u=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT])==null||u.update(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT].getCurrentValue()+c)}}else n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT]=new(r("ZenonCumulativeMediaStat"))(0);if(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL]!=null){var d=n.cumulativeStat.captureFrameCount,m=((d==null?void 0:d.getDeltaFromLastUpdate())||0)<0,p=e.calculateVideoSumCapturePixel(n,m);if(m){var _;(_=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL])==null||_.update(p)}else{var f;(f=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL])==null||f.update(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL].getCurrentValue()+p)}}else{var g=e.calculateVideoSumCapturePixel(n,!0);n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL]=new(r("ZenonCumulativeMediaStat"))(g)}}})}},s=e;l.default=s}),98);
__d("ZenonVideoConvertedQpDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig","ZenonVideoQpConversion"],(function(t,n,r,o,a,i,l){"use strict";var e=["video","screen"],s={calculateVideoConvertedQP:function(t){var e=t.cumulativeStat,n=e.framesDecoded,r=e.framesEncoded,a=e.qpSum,i=e.timestamp,l=t.codec,s=r!=null?r:n;if(a!=null&&s!=null&&l!=null&&i!=null&&i.getCurrentValue()>t.lastUpdate){var u,c,d=s.getCount()===1||a.getCount()===1;d?(u=a.getCurrentValue(),c=s.getCurrentValue()):(u=a.getDeltaFromLastUpdate(),c=s.getDeltaFromLastUpdate());var m=l.includes("264"),p=o("ZenonVideoQpConversion").convertQp(c,u,m);return p*c}return 0},updateStatsWithDerivedMetric:function(n,a){n.filter(function(t){return e.includes(t.contentType)&&t.webrtcTrack.readyState==="live"&&t.webrtcTrack.muted===!1}).forEach(function(e){var t=a.get(e.trackId);if(t!=null){var n=t.cumulativeStat.qpSum;if(n!=null){var i=n.getDeltaFromLastUpdate()<0,l=s.calculateVideoConvertedQP(t),u=o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CONVERTED_QP_SUM;t.cumulativeStat[u]!=null?i?t.cumulativeStat[u].update(l):t.cumulativeStat[u].update(t.cumulativeStat[u].getCurrentValue()+l):t.cumulativeStat[u]=new(r("ZenonCumulativeMediaStat"))(l)}}})}},u=s;l.default=u}),98);
__d("ZenonVideoDecodeTimeDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=e.filter(function(e){return e.contentType!=="audio"&&e.remote&&e.webrtcTrack.readyState!=="ended"}).reduce(function(e,r){var o=t.get(r.trackId);if(o!=null&&o.cumulativeStat.framesDecoded!=null&&o.cumulativeStat.framesDecoded.getDeltaFromLastUpdate()>0){var a,i,l=((a=o.cumulativeStat.framesDecoded)==null?void 0:a.getTimeSinceLastUpdate())||0;return((i=o.cumulativeStat.framesDecoded)==null?void 0:i.getCount())===2&&o.cumulativeStat.framesDecoded&&(l+=u(o.cumulativeStat.framesDecoded,n)),Math.max(l,e)}return e},0);t.forEach(function(e){if(e.cumulativeStat.framesDecoded!=null){var t;e.maxTotalDecodeTime=((t=e.maxTotalDecodeTime)!=null?t:0)+r}})}function s(e,t,n){e.filter(function(e){return e.contentType!=="audio"&&e.remote&&e.webrtcTrack.readyState!=="ended"}).forEach(function(e){var a=t.get(e.trackId);if(a!=null&&a.cumulativeStat.framesDecoded!=null&&a.cumulativeStat.framesDecoded.getDeltaFromLastUpdate()>0){var i,l,s=((i=a.cumulativeStat.framesDecoded)==null?void 0:i.getTimeSinceLastUpdate())||0;((l=a.cumulativeStat.framesDecoded)==null?void 0:l.getCount())===2&&a.cumulativeStat.framesDecoded&&(s+=u(a.cumulativeStat.framesDecoded,n)),a.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_TIME]==null?a.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_TIME]=new(r("ZenonCumulativeMediaStat"))(s):a.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_TIME].update(a.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_TIME].getCurrentValue()+s)}})}function u(e,t){return e.getDeltaFromLastUpdate()>0?Math.round(t*e.getFirstValue()/e.getDeltaFromLastUpdate()):0}l.findMaxDecodeTime=e,l.updateTrackerWithDecodeTime=s}),98);
__d("ZenonVideoDecodedBytesDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){e.filter(function(e){return e.contentType!=="audio"&&e.remote&&e.webrtcTrack.readyState!=="ended"}).forEach(function(e){var n=t.get(e.trackId);if(n!=null){var a=n.cumulativeStat,i=a.bytesReceived,l=a.framesDecoded;if(i&&l){var s=l.getElapsedTime()===0&&l.getCurrentValue()>0;if(s||l.getDeltaFromLastUpdate()>0){var u=i.getDeltaFromLastUpdate();s&&(u=i.getCurrentValue()),n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODED_BYTES]==null?n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODED_BYTES]=new(r("ZenonCumulativeMediaStat"))(u):n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODED_BYTES].update(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODED_BYTES].getCurrentValue()+u)}}}})}l.updateTrackerWithDecodedBytes=e}),98);
__d("ZenonVideoFreezeCountDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=10,s=.5,u={aggregateFreezes:function(t,n,r,o){if(t){var e=o.getDeltaFromLastUpdate(),a=n-r*r/3;return Math.sqrt(a*(e-1))*1e3}return 0},calculateVideoFreeze:function(n){var t=n.cumulativeStat,r=t.framesDecoded,o=t.pauseCount,a=t.totalInterFrameDelay,i=t.totalPausesDuration,l=t.totalSquaredInterFrameDelay;if(r!=null&&a!=null&&l!=null&&r.getDeltaFromLastUpdate()>1){var c=(o==null?void 0:o.getDeltaFromLastUpdate())||0,d=(i==null?void 0:i.getDeltaFromLastUpdate())||0;if(r.updateInactiveDuration(d),!(c>0||d>0)){var m=r.getDeltaFromLastUpdate(),p=r.getAverageOverActiveTime()*1e3,_=a.getDeltaFromLastUpdate(),f=l.getDeltaFromLastUpdate(),g=1/p,h=g*e/100,y=Math.max(3*g,g+.15),C=h*h/3+y*y/(m-1),b=h*h/3+s*s/(m-1),v=(f-_*_/m)/m,S=v>C?1:0,R=v>b?1:0,L=u.aggregateFreezes(S,v,h,r),E=u.aggregateFreezes(R,v,h,r);return{count:S,duration:L,duration500ms:E}}}return{count:0,duration:0,duration500ms:0}},updateStatsWithDerivedMetric:function(t,n){var e=o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_COUNT,a=o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_DURATION,i=o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_DURATION_500MS;t.filter(function(e){return e.contentType==="video"&&e.remote&&e.webrtcTrack.readyState!=="ended"}).forEach(function(t){var o=n.get(t.trackId);if(o!=null){var l=u.calculateVideoFreeze(o);o.cumulativeStat[e]!=null?o.cumulativeStat[e].update(o.cumulativeStat[e].getCurrentValue()+l.count):o.cumulativeStat[e]=new(r("ZenonCumulativeMediaStat"))(l.count),o.cumulativeStat[a]!=null?o.cumulativeStat[a].update(o.cumulativeStat[a].getCurrentValue()+l.duration):o.cumulativeStat[a]=new(r("ZenonCumulativeMediaStat"))(l.duration),o.cumulativeStat[i]!=null?o.cumulativeStat[i].update(o.cumulativeStat[i].getCurrentValue()+l.duration500ms):o.cumulativeStat[i]=new(r("ZenonCumulativeMediaStat"))(l.duration500ms)}})}},c=u;l.default=c}),98);
__d("ZenonVideoPauseDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=5e3;function s(e,t){e.filter(function(e){return e.contentType==="video"&&e.remote}).forEach(function(e){var n=t.get(e.trackId);n!=null&&u(n)})}function u(t){var n=t.cumulativeStat,a=n.framesDecoded,i=n.packetsReceived;if(i!=null){var l,s=(l=t.isVideoPaused)!=null?l:!1;if(!s)i.getDeltaFromLastUpdate()===0&&i.getTimeSinceLastUpdate()>1e3&&(t.isVideoPaused=!0,t.lastVideoPacketTime=i.getPreviousTime());else if(a!=null&&a.getDeltaFromLastUpdate()>0){var u;t.isVideoPaused=!1;var c=(i.getCurrentTime()+i.getPreviousTime())/2-((u=t.lastVideoPacketTime)!=null?u:i.getPreviousTime());t.lastVideoPacketTime=void 0,c>=e&&(t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_COUNT]!=null?t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_COUNT].update(t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_COUNT].getCurrentValue()+1):t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_COUNT]=new(r("ZenonCumulativeMediaStat"))(1),t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_DURATION]!=null?t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_DURATION].update(t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_DURATION].getCurrentValue()+c):t.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_DURATION]=new(r("ZenonCumulativeMediaStat"))(c))}}}l.updateVideoPause=s}),98);
__d("ZenonVideoRenderStallStatsDeriver",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonMediaStatsParser"],(function(t,n,r,o,a,i,l){"use strict";var e=5e3,s=new Map;function u(t){var n,o=(n=t.srcObject)==null?void 0:n.getVideoTracks();o&&o.forEach(function(t){var n=t.id,o=s.get(n);if(o==null)s.set(n,{frames_received:new(r("ZenonCumulativeMediaStat"))(0),video_muted:!1,video_render_is_stall:!1,video_render_total_stall_duration_ms:0,video_render_total_stalls:0});else{if(o.video_muted){o.video_muted=!1,o.frames_received.update(o.frames_received.getCount()+1);return}o.frames_received.update(o.frames_received.getCount()+1);var a=o.frames_received.getTimeSinceLastUpdate();a>=e?(o.video_render_is_stall||(o.video_render_is_stall=!0,o.video_render_total_stalls++),o.video_render_total_stall_duration_ms+=a):o.video_render_is_stall&&(o.video_render_is_stall=!1,o.video_render_total_stall_duration_ms+=a)}})}function c(e,t){var n=t.get(e);return(n==null?void 0:n.deltaStat.videoDecodeIsStalled)===1||(n==null?void 0:n.deltaStat.videoReceivedIsStalled)===1}function d(e,t){var n=t.find(function(t){return t.label===e});return n}function m(e){e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_IS_STALLED]==null&&(e.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_IS_STALLED]=new(r("ZenonDeltaMediaStat"))),e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_STALL_DURATION]==null&&(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_STALL_DURATION]=new(r("ZenonCumulativeMediaStat"))(0)),e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_TOTAL_STALLS]==null&&(e.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_TOTAL_STALLS]=new(r("ZenonCumulativeMediaStat"))(0))}function p(e){var t=e.current;if(t!=null){var n=function(){u(t),typeof t.requestVideoFrameCallback=="function"&&t.requestVideoFrameCallback(n)};typeof t.requestVideoFrameCallback=="function"&&t.requestVideoFrameCallback(n)}}function _(e){var t,n=e==null||(t=e.srcObject)==null?void 0:t.getVideoTracks();n!=null&&n.forEach(function(e){var t=e.id,n=s.get(t);n!=null&&(n.video_muted=!0)})}function f(e,t){s.forEach(function(n,r){var a,i,l,s=d(r,e);if(!(s==null||s.webrtcTrack.enabled===!1||c(s.trackId,t))){var u=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(t,s);m(u),(a=u.deltaStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_IS_STALLED])==null||a.add(+n.video_render_is_stall),(i=u.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_STALL_DURATION])==null||i.update(u.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_STALL_DURATION].getCurrentValue()+n.video_render_total_stall_duration_ms),(l=u.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_TOTAL_STALLS])==null||l.update(u.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RENDER_TOTAL_STALLS].getCurrentValue()+n.video_render_total_stalls)}}),s.clear()}l.startVideoRenderStallStatTracking=p,l.stopVideoRenderStallStatTracking=_,l.updateStatsWithDerivedMetric=f}),98);
__d("ZenonVideoStallStatsDeriver",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonMediaStatsParser"],(function(t,n,r,o,a,i,l){"use strict";var e,s=0,u=0,c=6e3,d=[(e=o("ZenonMediaStatsConfig")).DERIVED_METRICS.VIDEO_CAPTURE_IS_STALLED,e.DERIVED_METRICS.VIDEO_ENCODE_IS_STALLED,e.DERIVED_METRICS.VIDEO_SENT_IS_STALLED],m=[e.DERIVED_METRICS.VIDEO_CAPTURE_STALL_DURATION,e.DERIVED_METRICS.VIDEO_ENCODE_STALL_DURATION,e.DERIVED_METRICS.VIDEO_SENT_STALL_DURATION],p=[e.DERIVED_METRICS.VIDEO_CAPTURE_TOTAL_STALLS,e.DERIVED_METRICS.VIDEO_ENCODE_TOTAL_STALLS,e.DERIVED_METRICS.VIDEO_SENT_TOTAL_STALLS],_=function(t){var e;return((e=t==null?void 0:t.getCurrentTimeSinceLastUpdate())!=null?e:0)>c};function f(e,t){var n=0;return t!=null&&y(e)&&(n=t.getDeltaFromLastUpdate()),n}function g(e,t){var n=0;return t!=null&&C(e)&&(n=t.getDeltaFromLastUpdate()),n}function h(e,t,n){var r=0;return n!=null&&b(e,t)&&(r=n.getDeltaFromLastUpdate()),r}function y(e){var t=!1;return e!=null&&e.getElapsedTime()!==0&&(t=_(e)||e.getDeltaFromLastUpdate()===0||e.getCurrentValue()===0),t}function C(e){var t=!1;return e!=null&&e.getElapsedTime()!==0&&(t=_(e)||e.getDeltaFromLastUpdate()===0||e.getCurrentValue()===0),t}function b(e,t){var n=!1;if(t!=null&&t.getElapsedTime()!==0){var r=s;e.contentType==="screen"&&(r=u),n=_(t)||t.getDeltaFromLastUpdate()<=r||t.getCurrentValue()===0}return n}function v(e){d.forEach(function(t){e.deltaStat[t]==null&&(e.deltaStat[t]=new(r("ZenonDeltaMediaStat")))}),m.forEach(function(t){e.cumulativeStat[t]==null&&(e.cumulativeStat[t]=new(r("ZenonCumulativeMediaStat"))(0))}),p.forEach(function(t){e.cumulativeStat[t]==null&&(e.cumulativeStat[t]=new(r("ZenonCumulativeMediaStat"))(0))})}function S(e,t){var n=t.cumulativeStat,r=n.bytesSent,a=n.captureFrameCount,i=n.framesEncoded,l=n.timestamp,s=t.videoEncoding;if(e.webrtcTrack.enabled!==!1&&(s==null?void 0:s.enabled)!==!1){var u=f(a,l);if(R(t,u,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_IS_STALLED,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_STALL_DURATION,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_TOTAL_STALLS),u===0){var c=g(i,l);if(R(t,c,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_IS_STALLED,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_STALL_DURATION,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_TOTAL_STALLS),c===0&&t.transportIceState==="connected"){var d=h(e,r,l);R(t,d,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_IS_STALLED,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_STALL_DURATION,o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_TOTAL_STALLS)}}}}function R(e,t,n,r,o){var a,i,l=t===0?0:1,s=!L(e,n)&&l?1:0;if((a=e.cumulativeStat[o])==null||a.update(e.cumulativeStat[o].getCurrentValue()+s),s){var u;(u=e.cumulativeStat[r])==null||u.updateLastStretchStartValue(e.cumulativeStat[r].getCurrentValue())}(i=e.cumulativeStat[r])==null||i.update(e.cumulativeStat[r].getCurrentValue()+t),e.deltaStat[n].add(l)}function L(e,t){return e.deltaStat[t]!=null&&e.deltaStat[t].getLastAddedValue()===1}function E(e,t){e.filter(function(e){return(e.contentType==="video"||e.contentType==="screen")&&!e.remote}).forEach(function(e){var n=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(t,o("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACK_INFO);e.contentType==="screen"&&(n=o("ZenonMediaStatsParser").getOrCreateTrackerFromMap(t,o("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACK_INFO)),n!=null&&(v(n),S(e,n))})}l.updateStatsWithDerivedMetric=E}),98);
__d("ZenonVideoSumPixelDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=["video","screen"],s={calculateVideoSumPixel:function(t,n,r){var e=t.cumulativeStat,o=e.framesDecoded,a=e.framesEncoded,i=e.timestamp,l=t.deltaStat,s=l.frameHeight,u=l.frameWidth,c=r?o:a;if(c!=null&&u!=null&&s!=null&&i!=null&&i.getCurrentValue()>t.lastUpdate){var d,m,p=n?c.getCurrentValue():c.getDeltaFromLastUpdate(),_=(d=u.getLastAddedValue())!=null?d:0,f=(m=s.getLastAddedValue())!=null?m:0;return p*_*f}return 0},updateStatsWithDerivedMetric:function(n,a){n.filter(function(t){return e.includes(t.contentType)}).forEach(function(e){var t=e.remote,n=a.get(e.trackId);if(n!=null)if(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL]!=null){var i=n.cumulativeStat,l=i.framesDecoded,u=i.framesEncoded,c=t?l:u;if(c!=null){var d=c.getDeltaFromLastUpdate()<0,m=s.calculateVideoSumPixel(n,d,t);if(d){var p;(p=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL])==null||p.update(m)}else{var _;(_=n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL])==null||_.update(n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL].getCurrentValue()+m)}}}else{var f=s.calculateVideoSumPixel(n,!0,t);n.cumulativeStat[o("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL]=new(r("ZenonCumulativeMediaStat"))(f)}})}},u=s;l.default=u}),98);
__d("ZenonMediaStatsReportPoller",["Promise","ZenonAppProvider","ZenonAudioDecodingNormalDeriver","ZenonAudioDecodingPLCCNGDeriver","ZenonAudioDecodingPLCDeriver","ZenonAudioEchoConfidenceStatsDeriver","ZenonAudioLevelDeriver","ZenonAudioPlaybackIssueLogger","ZenonAudioReceiverStatsUtils","ZenonAudioStallStatsDeriver","ZenonAvSyncDeriver","ZenonMediaElementTracker","ZenonMediaStatsConfig","ZenonMediaStatsParser","ZenonMediaStatsUtil","ZenonMuteStateDeriver","ZenonOutboundStatsWriter","ZenonPacketsLostDeriver","ZenonPerStreamAggregator","ZenonPerfUsageStatsTracker","ZenonReceiverVideoQualityScoreDeriver","ZenonResourceUsageStatsTracker","ZenonSpeakerTracker","ZenonVideoActualEncodedBitrateDeriver","ZenonVideoAndSSReceiverStallStatsDeriver","ZenonVideoCaptureMetricDeriver","ZenonVideoConvertedQpDeriver","ZenonVideoDecodeTimeDeriver","ZenonVideoDecodedBytesDeriver","ZenonVideoFreezeCountDeriver","ZenonVideoPauseDeriver","ZenonVideoRenderStallStatsDeriver","ZenonVideoScaleHistogram","ZenonVideoStallStatsDeriver","ZenonVideoSumPixelDeriver","asyncToGeneratorRuntime","findInMap"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return r("findInMap")(t,function(t){return t.trackIDs.includes(e.trackId)})}function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.getStats();(n instanceof RTCStatsReport||n instanceof Array)&&n.forEach(function(e){e.type==="data-channel"&&t.set(e.id,e)})}),c.apply(this,arguments)}function d(e,t,n,r,o,a,i){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i,l,u,c){var d=a.getSenders().map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n,a=(n=e.track)==null?void 0:n.id;if(a!=null){var u=t.find(function(e){return e.webrtcTrack.id===a});if(u!=null&&u.webrtcTrack.readyState!=="ended"){var d=yield e.getStats(),m=o("ZenonMediaStatsParser").makeStatsReportMap(d);o("ZenonMediaStatsUtil").shouldUseTSLog()&&i&&i.addData(u.enabled,o("ZenonMediaStatsParser").filterMediaReports(m),o("ZenonMediaStatsConfig").TSLOG_STATS_REQUESTED,u.contentType,s(u,l)),o("ZenonMediaStatsParser").updateTrackStatsWithReport(u,r,m),o("ZenonMediaStatsParser").updateTrackStatsFromSender(u,r,e),c.push(u)}}});return function(t){return e.apply(this,arguments)}})());yield(e||(e=n("Promise"))).all(d);var m=a.getReceivers().map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n,a=(n=e.track)==null?void 0:n.id;if(a!=null){var c=t.find(function(e){return e.webrtcTrack.id===a});if(c!=null&&c.webrtcTrack.readyState!=="ended"){var d=yield e.getStats(),m=o("ZenonMediaStatsParser").makeStatsReportMap(d);if(o("ZenonMediaStatsUtil").shouldUseTSLog()&&i){var p=c.contentType==="audio"?c.userMuted:c.enabled;i.addData(p,o("ZenonMediaStatsParser").filterMediaReports(m),o("ZenonMediaStatsConfig").TSLOG_STATS_REQUESTED,c.contentType,s(c,l))}o("ZenonMediaStatsParser").updateTrackStatsWithReport(c,r,m),u.push(c)}}});return function(t){return e.apply(this,arguments)}})());yield e.all(m)}),m.apply(this,arguments)}function p(e,t){e.forEach(function(e){var n=t.get(e.trackId);n!=null&&n.cumulativeStat.timestamp!=null&&(n.lastUpdate=n.cumulativeStat.timestamp.getCurrentValue())})}function _(e,t,n,r,o,a,i){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i,l,s){s===void 0&&(s=new Map);var u=[],c=[];if(yield d(e,t,a,i,s,u,c),o("ZenonMediaElementTracker").updateStats(t),o("ZenonMediaStatsUtil").shouldUseTSLog()&&i){var m=yield a.getStats(),_=o("ZenonMediaStatsParser").makeStatsReportMap(m!=null?m:new RTCStatsReport);i.addCandidatePairStats(_),i.addNonMediaStates(),i.addRenderedFrameData(t,_),i.addDerivedMetricsData(t,e);var f=yield o("ZenonResourceUsageStatsTracker").getProcessStats();f!=null&&i.addCallCpuData(o("ZenonMediaStatsConfig").GLOBAL_STATS_TRACKID,f);var g=o("ZenonPerfUsageStatsTracker").getHeapMemoryStats();g&&i.addHeapMemoryData(o("ZenonMediaStatsConfig").GLOBAL_STATS_TRACKID,g),i.addSenderVideoStallData(t),i.addAudioEchoMetricData(t),i.advance()}o("ZenonSpeakerTracker").updateStats(e,t),o("ZenonPacketsLostDeriver").updatePacketsLost(e,t),o("ZenonMuteStateDeriver").updateMuteState(e,t),r("ZenonVideoFreezeCountDeriver").updateStatsWithDerivedMetric(e,t),o("ZenonVideoPauseDeriver").updateVideoPause(e,t),r("ZenonVideoCaptureMetricDeriver").updateStatsWithDerivedMetric(e,t),r("ZenonVideoSumPixelDeriver").updateStatsWithDerivedMetric(e,t),r("ZenonVideoConvertedQpDeriver").updateStatsWithDerivedMetric(e,t),o("ZenonVideoDecodedBytesDeriver").updateTrackerWithDecodedBytes(e,t),o("ZenonVideoDecodeTimeDeriver").findMaxDecodeTime(e,t,l),o("ZenonVideoDecodeTimeDeriver").updateTrackerWithDecodeTime(e,t,l),o("ZenonVideoScaleHistogram").updateTrackerWithScaleHistogram(e,t),o("ZenonVideoActualEncodedBitrateDeriver").updateVideoActualEncodedBitrate(e,t),o("ZenonAudioLevelDeriver").computeAudioLevels(e,t),o("ZenonAudioStallStatsDeriver").updateStatsWithDerivedMetric(e,t),o("ZenonVideoStallStatsDeriver").updateStatsWithDerivedMetric(e,t),o("ZenonVideoRenderStallStatsDeriver").updateStatsWithDerivedMetric(e,t),o("ZenonAvSyncDeriver").updateTrackerWithAvSync(e,t,n),r("ZenonReceiverVideoQualityScoreDeriver").updateStatsWithDerivedMetric(e,t),o("ZenonAudioReceiverStatsUtils").updateTracksWithAudioReceivePercentStats(e,t),o("ZenonVideoAndSSReceiverStallStatsDeriver").updateReceiverStallStatsWithDerivedMetric(e,t),o("ZenonOutboundStatsWriter").updateOutboundStats(c,t),o("ZenonPerStreamAggregator").aggregatePerStream([].concat(u,c),t),r("ZenonAudioPlaybackIssueLogger").detectAudioPlaybackIssue(e,t),o("ZenonAudioDecodingNormalDeriver").updateAudioDecodingNormal(e,t),o("ZenonAudioDecodingPLCDeriver").updateAudioDecodingPLC(e,t),o("ZenonAudioDecodingPLCCNGDeriver").updateAudioDecodingPLCCNG(e,t),o("ZenonAudioEchoConfidenceStatsDeriver").updateStatsWithDerivedMetric(t),o("ZenonAppProvider").shouldSupportRTPSession()&&(yield y(a,e,t)),p(e,t)}),f.apply(this,arguments)}function g(e,t,n){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,o){var a=r.getReceivers().map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n,r=(n=e.track)==null?void 0:n.id;if(r!=null){var a=t.find(function(e){return e.webrtcTrack.id===r});if(a!=null&&a.webrtcTrack.readyState!=="ended"){var i=yield e.getStats();if(!(i instanceof Map||i.result)){for(var l of i.values())if(l.type==="inbound-rtp"&&l.kind==="video"&&l.codecId!=null&&typeof l.codecId=="string"){var s=i.get(l.codecId);(s==null?void 0:s.type)==="codec"&&o.set(r,s.mimeType.toString())}}}}});return function(t){return e.apply(this,arguments)}})());yield(e||(e=n("Promise"))).all(a)}),h.apply(this,arguments)}function y(e,t,n){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r,o="conversation_bot_audio",a=(r=t.values().find(function(e){return e.trackId===o}))==null?void 0:r.label,i=e.getReceivers().filter(function(e){return e.track.label===a})[0],l=t.filter(function(e){return e.trackId===o});if(l.length!==0){var s=l[0],u=n.get(s.trackId);if(u!=null){var c=i.getSynchronizationSources()[0],d=c.captureTimestamp,m=c.senderCaptureTimeOffset,p=c.timestamp;if(!(d==null||m==null)){var _=yield e.getStats();if(!(_==null||!(_ instanceof RTCStatsReport))){var f=22089888e5,g=d-f,h=_.entries().toArray(),y=h.map(function(e){var t=e[0],n=e[1];return n}).filter(function(e){return e.type==="remote-outbound-rtp"})[0],C=h.map(function(e){var t=e[0],n=e[1];return n}).filter(function(e){return e.type==="remote-inbound-rtp"})[0],b=C.roundTripTime,v=y.remoteTimestamp;if(b!=null&&v!=null){var S=y.timestamp-(v+b/2),R=S+m,L=g+R,E=p-L;u.lastServerToClientLatency=E}}}}}}),C.apply(this,arguments)}l.updateStatsForDatachannel=u,l.updateStatsFromConnection=_,l.updateVideoCodecFromReceivers=g}),98);
__d("ZenonLayout",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["Grid","DominantSpeaker"]),l=e;i.default=l}),66);
__d("ZenonSpeakerTracker",["ZenonCallsHooks","ZenonLayout","ZenonRenderedView","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u=null,c=[],d=[];function m(e,t,n){u=e,c=t,d=n}function p(e,t){for(var n of e)if(n.remote){var o=t.get(n.trackId);if(o&&(o.isDominantSpeaker=c.indexOf(n.trackId)!==-1,u!=null))switch(u){case r("ZenonLayout").Grid:o.renderedView=r("ZenonRenderedView").GRID;break;case r("ZenonLayout").DominantSpeaker:{var a=d.indexOf(n.trackId)!==-1;o.renderedView=a?r("ZenonRenderedView").PINNED:r("ZenonRenderedView").THUMBNAIL;break}}}}function _(e,t,n){var o,a,i,l,u=(o=r("ZenonCallsHooks").useLiveMediaTrack(t!=null?t:"","video"))==null?void 0:o.trackId,c=(a=r("ZenonCallsHooks").useLiveMediaTrack(t!=null?t:"","audio"))==null?void 0:a.trackId,d=(i=r("ZenonCallsHooks").useLiveMediaTrack(n!=null?n:"","video"))==null?void 0:i.trackId,p=(l=r("ZenonCallsHooks").useLiveMediaTrack(n!=null?n:"","audio"))==null?void 0:l.trackId;s(function(){m(e,[u,c],[d,p])},[d,p,e,u,c])}l.updateLayout=m,l.updateStats=p,l.useUpdateSpeakerTracker=_}),98);
__d("ZenonStateSyncPayloadSerializer",["RequestStreamBodyUtils","ZenonAppProvider"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("ZenonAppProvider").isInstagramApp()?o("RequestStreamBodyUtils").stringToUint8Array(e):o("RequestStreamBodyUtils").base64ToUint8Array(e)}l.stateSyncStringToUint8Array=e}),98);
__d("ZenonMWTranslatorUtils",["ChannelClientID","CurrentUser","IGDWebUtils","OverlayConfigServerLayer","RequestStreamBodyUtils","RpWebMqttEnabledAppIds","ZenonDismissReason","ZenonMWMessageTypes","ZenonParticipantState","ZenonScreenShare","ZenonSignalingProtocol","ZenonSignalingTypes","ZenonStateSyncPayloadSerializer","addDevTierOverridesToHeaderExtensions","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p="signalingDominantSpeakerUpdate",_="signalingVideoUploadUpdate",f="E2eeState",g=new Set(r("RpWebMqttEnabledAppIds").APP_IDS);function h(e,t,n,r){n===void 0&&(n=!1),e&&Object.keys(e).forEach(function(a){if(!(a===f&&r)){var i=e[a],l=i.data,s=i.version;if(l!=null){var u={data:o("ZenonStateSyncPayloadSerializer").stateSyncStringToUint8Array(l),eventName:"stateSyncNotifyRequest",responseRequired:n,topic:a,version:s};t.push(u)}}})}function y(e){var t;if(e){var n=e[f];return(n==null?void 0:n.data)!=null&&(t=o("ZenonStateSyncPayloadSerializer").stateSyncStringToUint8Array(n.data)),t}}function C(e,t,n){var o={appId:k(),deviceId:r("ChannelClientID").getID(),userId:t.userInfo.userID},a=P(t,e);return{endpoint:o,jsonPayload:{body:n,header:a}}}function b(e,t,n,o,a){var i={appId:k(),deviceId:r("ChannelClientID").getID(),userId:t.userInfo.userID},l=N(t,e,o,a);return{endpoint:i,jsonPayload:{body:n,header:l}}}function v(e){var t=o("ZenonDismissReason").mwDismissToDmissReason(e);return t!=null?t:o("ZenonDismissReason").ZenonDismissReason.CallEnded}function S(e){var t=z[e];return t!=null?t:o("ZenonMWMessageTypes").ZenonMWParticipantCallState.UNKNOWN}function R(e){var t=null;return e!=null&&e.forEach(function(e){var n,r=(n=e.body)==null?void 0:n.genericMessage;if(r!=null&&r.topic==="collision_context_payload"){var o=r.data;if(o!=null){var a,i,l,s=JSON.parse(o);t={groupThreadID:(a=s.group_thread_id)!=null?a:null,peerID:(i=s.peer_id)!=null?i:null,serverInfoData:(l=s.server_info_data)!=null?l:null}}}}),t}function L(e){var t,n=(t=e.message.body)!=null?t:{},r=n.dominantSpeakerSignalingInfo,o=n.genericMessage,a=n.videoUploadSignalingInfo;if(o)try{return atob(o.data)}catch(e){return o.data}else{if(r)return JSON.stringify(r);if(a)return JSON.stringify(a)}return null}function E(e){var t,n=(t=e.message.body)!=null?t:{},r=n.dominantSpeakerSignalingInfo,o=n.genericMessage,a=n.videoUploadSignalingInfo;return o?o.topic:r?p:a?_:null}function k(){var e=r("CurrentUser").getAppID();if(e!=null&&o("IGDWebUtils").isInstagramWebSupportedApp(Number(e)))return e;var t=e!=null?e:0xc815778a650a.toString();return g.has(Number(t))?t:0xc815778a650a.toString()}function I(e){var t=e&&e.length>0?e.find(function(e){var t;return((t=e.body)==null||(t=t.genericMessage)==null?void 0:t.topic)==="room_metadata"}):null;if(t){var n,r=(n=t.body)==null||(n=n.genericMessage)==null?void 0:n.data;if(r!=null){var o,a=JSON.parse(r),i=(o=t.header)==null?void 0:o.sender;if(a.link_hash!=null&&a.room_name!=null&&i!=null)return{linkHash:a.link_hash,profileURL:a.profile_url,ringSubtitle:a.ring_subtitle,roomName:a.room_name,sender:i}}}return null}function T(e,t){var n=r("OverlayConfigServerLayer").createFromHeader(t);if(n){var o={eventName:"overlayConfigServerUpdateRequest",serverLayer:n};e.push(o)}}function D(e){return e.reduce(function(e,t){var n,r,o=(n=t.body)==null||(n=n.genericMessage)==null?void 0:n.topic,a=(r=t.body)==null||(r=r.genericMessage)==null?void 0:r.data;return o!=null&&a!=null&&(e[o]=a),e},{})}function x(e){var t,n,o=e.clientSessionId,a=e.conferenceName,i=e.receiver,l=e.receiverUserId,s=e.sequenceNumber,u=e.serverInfoData,c=e.transactionId;if(l==null)throw r("err")("Incoming MW messages should have receiverUserId populated.");var d=o,m={userID:"2"},p={actorID:(t=i==null?void 0:i.actorId)!=null?t:null,messageID:c,messageTags:(n=e.messageTags)!=null?n:[],protocol:r("ZenonSignalingProtocol").MW,remoteInfo:m,retryCount:e.retryCount,roomInfo:{name:a},sequenceNumber:s,signalingID:d,userInfo:{userID:l!=null?l:"1"}};return u!=null&&(p.remoteSignalingID=u),p}function $(e,t){return Object.keys(e).map(function(n){var r=e[n];return{body:{genericMessage:{data:r,topic:n}},header:{recipients:t,topic_DEPRECATED:n}}})}function P(e,t){var n=e.messageID,a=e.messageTags,i=e.remoteSignalingID,l=e.roomInfo,s=e.signalingID,u=r("addDevTierOverridesToHeaderExtensions")(window.location.href),c={clientStack:o("ZenonMWMessageTypes").ZenonMWClientStack.ZENON,conferenceName:l.name,messageTags:a,retryCount:e.retryCount,sequenceNumber:e.sequenceNumber,transactionId:n,type:t};return(u.multiwayCoreTier!==""||u.multiwayWwwTier!=="")&&(c.extensions=u),s!=null&&(c.clientSessionId=s),i!=null&&(c.serverInfoData=i),e.actorID!=null&&(c.sender={id:e.actorID}),c}function N(e,t,n,r){var a=P(e,t);return a.responseStatusCode=n!=null?n:o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK,r!=null&&(a.responseSubCode=r),a}function M(e){var t={tracks:{}},n=!o("ZenonScreenShare").screenShareWithReplaceTrack();return e.tracks.forEach(function(e){var r={enabled:e.enabled,name:e.name,owner:e.participantID},o=n?V(e.type):null;o!=null&&(r.label=o),t.tracks[e.trackID]=r}),t}function w(e){if(e==null)return null;switch(e){case o("ZenonMWMessageTypes").ZenonMWTrackLabel.DEFAULT_AUDIO:return"audio";case o("ZenonMWMessageTypes").ZenonMWTrackLabel.DEFAULT_VIDEO:return"video";case o("ZenonMWMessageTypes").ZenonMWTrackLabel.SCREEN_AUDIO:return"screen_audio";case o("ZenonMWMessageTypes").ZenonMWTrackLabel.SCREEN_VIDEO:return"screen"}}function A(e){var t=G[e];return t!=null?t:o("ZenonMWMessageTypes").ZenonMWDeviceStatus.OK}function F(e){switch(e){case o("ZenonDismissReason").ZenonDismissReason.IgnoreCall:return o("ZenonMWMessageTypes").ZenonMWHangupReason.IGNORE_CALL;case o("ZenonDismissReason").ZenonDismissReason.HangupCall:return o("ZenonMWMessageTypes").ZenonMWHangupReason.HANGUP_CALL;case o("ZenonDismissReason").ZenonDismissReason.NoAnswerTimeout:return o("ZenonMWMessageTypes").ZenonMWHangupReason.NO_ANSWER_TIMEOUT;case o("ZenonDismissReason").ZenonDismissReason.ClientError:return o("ZenonMWMessageTypes").ZenonMWHangupReason.CLIENT_ERROR;case o("ZenonDismissReason").ZenonDismissReason.InAnotherCall:return o("ZenonMWMessageTypes").ZenonMWHangupReason.IN_ANOTHER_CALL;case o("ZenonDismissReason").ZenonDismissReason.ClientInterrupted:return o("ZenonMWMessageTypes").ZenonMWHangupReason.CLIENT_INTERRUPTED;case o("ZenonDismissReason").ZenonDismissReason.SessionMigrated:return o("ZenonMWMessageTypes").ZenonMWHangupReason.SESSION_MIGRATED;default:return o("ZenonMWMessageTypes").ZenonMWHangupReason.HANGUP_CALL}}function O(e){var t={};return e.tracks.forEach(function(e){t[e.trackID]=e.enabled}),t}function B(e){var t={},n=!o("ZenonScreenShare").screenShareWithReplaceTrack();return e.tracks.forEach(function(e){var r={enabled:e.enabled},o=n?V(e.type):null;o!=null&&(r.label=o),t[e.trackID]=r}),{tracks:t}}function W(e){return j[e]}function q(e){return e==null?null:K[e]}function U(e){var t={};return e.forEach(function(e,n){t[n]={data:e.data?o("RequestStreamBodyUtils").uint8ArrayToBase64(e.data):void 0,version:e.version}}),t}function V(e){switch(e){case"audio":return o("ZenonMWMessageTypes").ZenonMWTrackLabel.DEFAULT_AUDIO;case"video":return o("ZenonMWMessageTypes").ZenonMWTrackLabel.DEFAULT_VIDEO;case"screen":return o("ZenonMWMessageTypes").ZenonMWTrackLabel.SCREEN_VIDEO;case"screen_audio":return o("ZenonMWMessageTypes").ZenonMWTrackLabel.SCREEN_AUDIO;default:return null}}function H(e,t,n){n===void 0&&(n=0);var r={fromVersion:t,tracks:[],version:n};return e!=null&&Object.keys(e.tracks).forEach(function(t){var n=e.tracks[t],o={enabled:n.enabled,name:n.name,participantID:n.owner,trackID:t,type:w(n.label)};r.tracks.push(o)}),r}var G={IN_ANOTHER_CALL:(c=o("ZenonMWMessageTypes")).ZenonMWDeviceStatus.IN_ANOTHER_CALL,NOT_SUPPORTED:c.ZenonMWDeviceStatus.NOT_SUPPORTED,OK:c.ZenonMWDeviceStatus.OK},z=Object.freeze((e={},e[c.ZenonMWParticipantCallState.UNKNOWN]=(d=o("ZenonParticipantState")).ZenonParticipantState.UNKNOWN,e[c.ZenonMWParticipantCallState.DISCONNECTED]=d.ZenonParticipantState.DISCONNECTED,e[c.ZenonMWParticipantCallState.NO_ANSWER]=d.ZenonParticipantState.NO_ANSWER,e[c.ZenonMWParticipantCallState.REJECTED]=d.ZenonParticipantState.REJECTED,e[c.ZenonMWParticipantCallState.UNREACHABLE]=d.ZenonParticipantState.UNREACHABLE,e[c.ZenonMWParticipantCallState.CONNECTION_DROPPED]=d.ZenonParticipantState.CONNECTION_DROPPED,e[c.ZenonMWParticipantCallState.CONTACTING]=d.ZenonParticipantState.CONTACTING,e[c.ZenonMWParticipantCallState.RINGING]=d.ZenonParticipantState.RINGING,e[c.ZenonMWParticipantCallState.CONNECTING]=d.ZenonParticipantState.CONNECTING,e[c.ZenonMWParticipantCallState.CONNECTED]=d.ZenonParticipantState.CONNECTED,e[c.ZenonMWParticipantCallState.PARTICIPANT_LIMIT_REACHED]=d.ZenonParticipantState.PARTICIPANT_LIMIT_REACHED,e[c.ZenonMWParticipantCallState.IN_ANOTHER_CALL]=d.ZenonParticipantState.IN_ANOTHER_CALL,e[c.ZenonMWParticipantCallState.RING_TYPE_UNSUPPORTED]=d.ZenonParticipantState.RING_TYPE_UNSUPPORTED,e[c.ZenonMWParticipantCallState.PENDING_APPROVAL]=d.ZenonParticipantState.PENDING_APPROVAL,e[c.ZenonMWParticipantCallState.APPROVED]=d.ZenonParticipantState.APPROVED,e[c.ZenonMWParticipantCallState.FAILED_APPROVAL]=d.ZenonParticipantState.FAILED_APPROVAL,e[c.ZenonMWParticipantCallState.UNCALLABLE]=d.ZenonParticipantState.UNREACHABLE,e[c.ZenonMWParticipantCallState.HANGUP_IN_WAITING_ROOM]=d.ZenonParticipantState.HANGUP_IN_WAITING_ROOM,e[c.ZenonMWParticipantCallState.UNCALLABLE_DELAYED]=d.ZenonParticipantState.UNREACHABLE,e)),j=Object.freeze((s={},s[(m=o("ZenonSignalingTypes")).ZenonSignalingStatusCode.OK]=c.ZenonMWResponseStatusCode.OK,s[m.ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH]=c.ZenonMWResponseStatusCode.CONDITIONAL_REQUEST_FAILED,s[m.ZenonSignalingStatusCode.METHOD_NOT_ALLOWED]=c.ZenonMWResponseStatusCode.METHOD_NOT_ALLOWED,s)),K=Object.freeze((u={},u[m.ZenonSignalingStatusSubCode.CLIENT_TERMINATED]=c.ZenonMWResponseSubCode.CLIENT_TERMINATED,u));l.E2EE_STATE_SYNC_TOPIC=f,l.addStateStoreSignalingEvents=h,l.fetchE2eeServerState=y,l.createMWRequest=C,l.createMWResponse=b,l.fromMWDismissReason=v,l.fromMWParticipantState=S,l.getCollisionContextFromAppMessages=R,l.getGenericDataMessageData=L,l.getGenericDataMessageTopic=E,l.getMWAppID=k,l.getRoomMetadataFromAppMessages=I,l.maybeAddOverlayConfigServerUpdateRequest=T,l.mwAppMessagesToSignalingAppMessages=D,l.mwMessageHeaderToSignalingMessageHeader=x,l.signalingMessageAppMessagesToMWAppMessages=$,l.toMWClientMediaStatus=M,l.toMWClientTrackContentType=w,l.toMWDeviceStatus=A,l.toMWHangupReason=F,l.toMWMediaStatus=O,l.toMWMediaStatusEx=B,l.toMWResponseStatusCode=W,l.toMWResponseStatusSubCode=q,l.toMWSyncStateStore=U,l.toMWTrackLabel=V,l.toZenonMediaStates=H}),98);
__d("ZenonMWMessageDebugLogger",["Log","LogHistory","ODS","RpWebStateMachineLoggingBlocklist.experimental","ZenonAuditedCheckpointLogId","ZenonIceStatsParser","ZenonInfraActionsLogger","ZenonMWMessageMap","ZenonMWMessageTypes","ZenonMWTranslatorUtils","formatDate","isEmployeeTestUserZenonLogging"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){this.$1=o("LogHistory").getInstance("webrtc"),this.$2=new Set(r("RpWebStateMachineLoggingBlocklist.experimental").MESSAGE_TYPES)}var n=t.prototype;return n.$3=function(t,n,o){n===void 0&&(n=!0);var e=r("formatDate")(new Date,"[H:i:s:X]",{skipPatternLocalization:!0});this.$1.log("Console",e+" "+t),n&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] "+t,messageID:o})},n.$4=function(t){var e=t.jsonPayload.header;return e.responseStatusCode!=null},n.logMWMessage=function(t,n,o){if(this.$5(t,n,o),!(o.jsonPayload==null||!r("isEmployeeTestUserZenonLogging")())){var e=o.jsonPayload.header,a=r("ZenonMWMessageMap")[e.type],i=this.$4(o)?"RESPONSE":"REQUEST",l=this.$6(o),s="[ms] "+t+" ["+n+"] "+a+" "+i+" [retryCount: "+e.retryCount+(l!=null?" details: "+l:"")+"]";this.$2.has(a)||this.$3(s,!0,e.transactionId)}},n.$5=function(n,r,a){var t=this.$7(n,r,a);t!==null&&(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_signaling",t)},n.$7=function(t,n,a){if(a.jsonPayload==null)return null;var e=a.jsonPayload,i=e.body,l=e.header,s="";switch(l.type){case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.DATA_MESSAGE:if(i.dataMessageRequest){var u;s=(u=o("ZenonMWTranslatorUtils").getGenericDataMessageTopic(i.dataMessageRequest))!=null?u:"undefined"}break}var c=this.$4(a)?"RESPONSE":"REQUEST",d=r("ZenonMWMessageMap")[l.type];return s===""?t+"-"+n+"-"+d+"-"+c:t+"-"+n+"-"+d+"-"+c+"-"+s},n.$6=function(t){if(t.jsonPayload==null)return null;var e=t.jsonPayload.header;switch(e.type){case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.JOIN:return this.$8(t);case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.SERVER_MEDIA_UPDATE:return this.$9(t);case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.CLIENT_MEDIA_UPDATE:return this.$10(t);case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.SUBSCRIPTION:return this.$11(t);case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.ICE_CANDIDATE:return this.$12(t);default:return null}},n.$8=function(t){var e,n,r,o,a=t.jsonPayload,i=a.body,l=a.header;if(this.$4(t)){var s,u,c,d;return JSON.stringify({hasAnswer:((s=i.joinResponse)==null?void 0:s.answer)!=null,hasRenegotiationOffer:((u=i.joinResponse)==null?void 0:u.renegotiationOffer)!=null,isPendingApproval:(c=i.joinResponse)==null?void 0:c.isPendingApproval,multipleVideoStreamsAllowed:(d=i.joinResponse)==null?void 0:d.multipleVideoStreamsAllowed,statusCode:l.responseStatusCode,subCode:l.responseSubCode})}return JSON.stringify({deviceCapabilities:(e=i.joinRequest)==null?void 0:e.deviceCapabilities,sdpType:((n=i.joinRequest)==null?void 0:n.offer)!=null?"offer":((r=i.joinRequest)==null?void 0:r.answer)!=null?"answer":"null",userCapabilities:(o=i.joinRequest)==null?void 0:o.userCapabilities})},n.$9=function(t){var e,n,r,o,a,i,l,s,u=t.jsonPayload,c=u.body,d=u.header;if(this.$4(t)){var m,p;return JSON.stringify({currentVersion:(m=c.serverMediaUpdateResponse)==null?void 0:m.currentVersion,hasAnswer:((p=c.serverMediaUpdateResponse)==null?void 0:p.answer)!=null,statusCode:d.responseStatusCode,subCode:d.responseSubCode})}return JSON.stringify({fromVersion:(e=c.serverMediaUpdateRequest)==null?void 0:e.fromVersion,messageTags:d.messageTags,renegotiationRequested:(n=(r=c.serverMediaUpdateRequest)==null?void 0:r.renegotiationRequested)!=null?n:!1,sdpType:(o=c.serverMediaUpdateRequest)!=null&&o.offer?"offer":(a=c.serverMediaUpdateRequest)!=null&&a.answer?"answer":(i=c.serverMediaUpdateRequest)!=null&&i.update?"delta":"empty",toVersion:(l=(s=c.serverMediaUpdateRequest)==null?void 0:s.toVersion)!=null?l:""})},n.$10=function(t){var e,n,r,o,a=t.jsonPayload,i=a.body,l=a.header;if(this.$4(t)){var s,u;return JSON.stringify({currentVersion:(s=(u=i.clientMediaUpdateResponse)==null?void 0:u.currentVersion)!=null?s:"",statusCode:l.responseStatusCode,subCode:l.responseSubCode})}return JSON.stringify({fromVersion:(e=(n=i.clientMediaUpdateRequest)==null?void 0:n.fromVersion)!=null?e:"",toVersion:(r=(o=i.clientMediaUpdateRequest)==null?void 0:o.toVersion)!=null?r:""})},n.$11=function(t){var e,n,r=t.jsonPayload.body;return this.$4(t)?null:JSON.stringify({subscriptions:(e=(n=r.subscriptionRequest)==null?void 0:n.subscriptions)!=null?e:""})},n.$12=function(t){var e,n=t.jsonPayload.body;if(this.$4(t))return null;var r=(e=n.iceCandidateRequest)==null?void 0:e.iceCandidateSdps.map(function(e){var t=e.candidateSdpString;if(t!=null)return o("ZenonIceStatsParser").extractIceInfo(t)});return JSON.stringify({iceCandidates:r})},n.logSendMultiwayMessageFailure=function(n,a){(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_multiway","send_message_failure"),e.flush(),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to send MW message of type "+a+". Error msg: "+n+":"})},t})(),u=new s;l.default=u}),98);
__d("ZenonMWAddRemoveParticipantsTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="new_room_context";function s(t,n){var r={usersToInvite:n.participants};if(n.groupThreadId!=null){var a={calling_tags:2,group_thread_id:n.groupThreadId};if(a){var i=[{body:{genericMessage:{data:JSON.stringify(a),topic:e}},header:{topic_DEPRECATED:e}}];r.appMessages=i}}return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.ADD_PARTICIPANTS,t,{addParticipantsRequest:r})}function u(e,t){var n={usersToRemove:t.participants};return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.REMOVE_PARTICIPANTS,e,{removeParticipantsRequest:n})}l.NEW_ROOM_CONTEXT=e,l.toAddParticipantsRequest=s,l.toRemoveParticipantsRequest=u}),98);
__d("ZenonMWApprovalTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t.approvalStatus,r=t.targetUsers,a={approvalStatus:n,targetUsers:r};return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.APPROVAL,e,{approvalRequest:a})}l.toApprovalRequest=e}),98);
__d("ZenonMWClientEventTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n={clientEvents:[{type:t.clientEventType}]};return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.CLIENT_EVENT,e,{clientEventRequest:n})}l.toClientEventRequest=e}),98);
__d("ZenonMWClientMediaUpdateTranslator",["ZenonMWCommonUtils","ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[],n=e.jsonPayload,r=n.body,a=n.header,i=r.clientMediaUpdateResponse,l=a.responseStatusCode,s=a.responseSubCode,u=a.retryAfterMsec;if(i){var c=i.answer,d=i.mediaStatus,m=c!=null&&d!=null;o("ZenonMWTranslatorUtils").addStateStoreSignalingEvents(i.stateStore,t,!1,m);var p=o("ZenonMWTranslatorUtils").fetchE2eeServerState(i.stateStore);if(m){var _,f=(_=c==null?void 0:c.sdpString)!=null?_:"",g=o("ZenonMWTranslatorUtils").toZenonMediaStates(d),h={ackMessageId:a.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:!1,source:"clientMediaUpdate"},y=i.renegotiationOffer,C=null;y!=null&&y.sdpString!=null&&(C={sdp:y.sdpString,type:"offer",version:o("ZenonMWCommonUtils").getSdpVersion(y.sdpString)});var b={e2eeServerState:p,eventName:"remoteSdpRequest",mediaPath:i.mediaPath,mediaStates:g,negotiateType:!1,renegotiationOffer:C,sdp:{sdp:f,type:"answer",version:o("ZenonMWCommonUtils").getSdpVersion(f)},sdpOriginLocalId:i.sdpOriginLocalId,source:"clientMediaUpdateResponse"};t.push(h),t.push(b)}var v={ackMessageId:a.transactionId,acknowledgedVersion:i.currentVersion,eventName:"mediaUpdateResponse",responseStatusCode:l,responseSubCode:s,retryAfter:u};t.push(v)}return t}function s(e,t,n){var r={fromVersion:t.version,mediaUpdates:[{mediaStatus:o("ZenonMWTranslatorUtils").toMWMediaStatus(t),mediaStatusEx:o("ZenonMWTranslatorUtils").toMWMediaStatusEx(t)}],toVersion:t.version};return n!==void 0&&(r.offer={sdpString:n.sdp}),o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.CLIENT_MEDIA_UPDATE,e,{clientMediaUpdateRequest:r})}l.fromClientMediaUpdateResponse=e,l.toClientMediaUpdateRequest=s}),98);
__d("ZenonMWConferenceStateTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[],n=e.jsonPayload.body.conferenceStateRequest;if(n){var r=n.appMessages,a=n.participantStates,i={eventName:"participantUpdateRequest",participantStates:new Map,sctpUserIdNodeIdMap:new Map,versionId:n.version},l={actorRepresentatives:new Map,eventName:"clientInfoRequest",mediaPath:o("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN,userCapabilities:new Map};Object.keys(a).forEach(function(e){var t=a[e],n=t.sctpNodeId,r=t.state,s=t.userCapabilities;i.participantStates.set(e,o("ZenonMWTranslatorUtils").fromMWParticipantState(r)),n!=null&&i.sctpUserIdNodeIdMap.set(e,n),l.userCapabilities.set(e,s!=null?s:"")}),t.push(i),t.push(l);var s=o("ZenonMWTranslatorUtils").getCollisionContextFromAppMessages(r);if(s){s.serverInfoData=e.jsonPayload.header.serverInfoData;var u={context:s,eventName:"roomContextUpdateRequest"};t.push(u)}}return t}function s(e,t){var n={currentVersion:t.requestVersionId};return o("ZenonMWTranslatorUtils").createMWResponse(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.CONFERENCE_STATE,e,{conferenceStateResponse:n})}l.fromConferenceStateRequest=e,l.toConferenceStateResponse=s}),98);
__d("ZenonMWDataMessageTranslator",["ZenonActorHooks","ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[],n=e.jsonPayload.body.dataMessageRequest;if(n){var r=n.message.header,a=o("ZenonMWTranslatorUtils").getGenericDataMessageData(n),i=o("ZenonMWTranslatorUtils").getGenericDataMessageTopic(n);if(a!=null&&i!=null){var l,s,u={data:a,eventName:"genericDataMessageRequest",recipientIDs:(l=r.recipients)!=null?l:[],serviceRecipients:(s=r.serviceRecipients)!=null?s:[],topic:i};t.push(u)}}return t}function s(e,t){var n={data:t.data,topic:t.topic};return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.DATA_MESSAGE,e,{dataMessageRequest:{message:{body:{genericMessage:n},header:{recipients:t.recipientIDs,sender:o("ZenonActorHooks").ZenonActor.getID(),serviceRecipients:t.serviceRecipients,topic_DEPRECATED:""}}}})}function u(e){return o("ZenonMWTranslatorUtils").createMWResponse(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.DATA_MESSAGE,e,{dataMessageResponse:{deliveryResult:{}}})}l.fromDataMessageRequest=e,l.toDataMessageRequest=s,l.toDataMessageResponse=u}),98);
__d("ZenonMWDismissTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[],n=e.jsonPayload.body.dismissRequest;if(n){var r=n.detailedReasonString,a=n.reason,i={eventName:"terminateRequest",fromJoinResponse:!1,reason:o("ZenonMWTranslatorUtils").fromMWDismissReason(a),shouldInformPeer:!0,subreason:r};t.push(i)}return t}function s(e){return o("ZenonMWTranslatorUtils").createMWResponse(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.DISMISS,e,{})}l.fromDismissRequest=e,l.toDismissResponse=s}),98);
__d("ZenonMWHangupTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[],n=e.jsonPayload.header,r={ackMessageId:n.transactionId,eventName:"hangupResponse"};return t.push(r),t}function s(e,t){var n=t.reason,r={detailedReasonString:"",reason:o("ZenonMWTranslatorUtils").toMWHangupReason(n)};return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.HANGUP,e,{hangupRequest:r})}l.fromHangupResponse=e,l.toHangupRequest=s}),98);
__d("ZenonMWIceCandidateTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[],n=e.jsonPayload.body.iceCandidateRequest;if(n){var r={eventName:"iceCandidateRequest",iceCandidates:n.iceCandidateSdps.map(function(e){var t;return{candidateSdpString:(t=e.candidateSdpString)!=null?t:"",sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex}})};t.push(r)}return t}function s(e){var t=[],n=e.jsonPayload.header,r={ackMessageId:n.transactionId,eventName:"iceCandidateResponse"};return t.push(r),t}function u(e){return o("ZenonMWTranslatorUtils").createMWResponse(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.ICE_CANDIDATE,e,{})}function c(e,t){var n=t.iceCandidates,r=n.map(function(e){return{candidateSdpString:e.candidateSdpString,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex}}),a={iceCandidateSdps:r};return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.ICE_CANDIDATE,e,{iceCandidateRequest:a})}l.fromIceCandidateRequest=e,l.fromIceCandidateResponse=s,l.toIceCandidateResponse=u,l.toIceCandidateRequest=c}),98);
__d("ZenonMWJoinTranslator",["FBLogger","MultiwaySharedTypes","RoboticsPermission","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonDismissReason","ZenonInfraActionsLogger","ZenonJoiningContext","ZenonMWCommonUtils","ZenonMWJoinUtils","ZenonMWMessageTypes","ZenonMWTranslatorUtils","ZenonScreenShare"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a=[],i=e.jsonPayload.header,l=i.responseStatusCode,s=i.responseSubCode;if(l&&l!==o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK){var c="JOIN response status code: "+l+" subcode "+(s!=null?s:"[undefined]");r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",checkpoint:"[ZP] Got non-OK "+c,errorDomain:"ZenonMWMessageTranslator.fromJoinResponse"});var d={detailedReasonFromMW:i.responseStatusMessage,eventName:"terminateRequest",fromJoinResponse:!0,reason:u(l,i.responseSubCode),shouldInformPeer:!1,subreason:c};return a.push(d),a}var m=e.jsonPayload.body.joinResponse;if(!m)return a;var p=(t=(n=m.answer)==null?void 0:n.sdpString)!=null?t:"",_=p!=="";o("ZenonMWTranslatorUtils").addStateStoreSignalingEvents(m.stateStore,a,!1,_),o("ZenonMWTranslatorUtils").maybeAddOverlayConfigServerUpdateRequest(a,i);var f=o("ZenonMWTranslatorUtils").fetchE2eeServerState(m.stateStore),g={ackMessageId:i.transactionId,eventName:"localSdpResponse",hasAnswerInJoinResponse:_,source:"joinResponse"};if(a.push(g),_){var h={sdp:p,type:"answer",version:o("ZenonMWCommonUtils").getSdpVersion(p)},y=o("ZenonMWTranslatorUtils").toZenonMediaStates(m.mediaStatusEx),C=m.renegotiationOffer,b=null;C!=null&&C.sdpString!=null&&(b={sdp:C.sdpString,type:"offer",version:o("ZenonMWCommonUtils").getSdpVersion(C.sdpString)});var v={e2eeServerState:f,eventName:"remoteSdpRequest",mediaPath:m.mediaPath,mediaStates:y,negotiateType:!1,renegotiationOffer:b,sdp:h,sdpOriginLocalId:m.sdpOriginLocalId,source:"joinResponse"};a.push(v)}var S={capabilities:{addParticipantEnabled:!0,cowatchEnabled:!0,cowatchGroupEnabled:!0,multipleVideoStreamsAllowed:m.multipleVideoStreamsAllowed},eventName:"capabilitiesRequest"};if(a.push(S),m.isPendingApproval){var R={eventName:"pendingApprovalRequest"};a.push(R)}var L=m.groupsOfUsers,E=new Map;L.forEach(function(e){var t=e.aliasId,n=e.users;t!=null&&n.forEach(function(e){E.set(e,t)})});var k={actorRepresentatives:E,eventName:"clientInfoRequest",mediaPath:m.mediaPath,userCapabilities:new Map};return a.push(k),a}function s(e,t,n,a){var i,l,s,u=t.initialSyncStates,m=t.isSecondaryJoinRole,p=t.userCapabilities,_={clientMediaMode:d(n.mediaMode),deviceCapabilities:[(s=o("ZenonMWMessageTypes")).ZenonMWCapability.SUPPORT_NEW_PARTICIPANT_STATES,s.ZenonMWCapability.REQUIRE_FULL_SDP_IN_SMU,s.ZenonMWCapability.SUPPORT_SDP_RENEGOTIATION,s.ZenonMWCapability.REQUIRE_FULL_SDP_IN_SMU_OPTIMIZED,s.ZenonMWCapability.SUPPORT_DELTA_SMU].concat(o("ZenonBrowsers").supportsPranswer()?[o("ZenonMWMessageTypes").ZenonMWCapability.SUPPORT_PRECONNECT]:[]),mediaStatus:o("ZenonMWTranslatorUtils").toMWMediaStatus(n.mediaStates),mediaStatusEx:o("ZenonMWTranslatorUtils").toMWMediaStatusEx(n.mediaStates),offer:{},syncPayload:u?{stateStore:o("ZenonMWTranslatorUtils").toMWSyncStateStore(u)}:void 0,userCapabilities:p.get(e.userInfo.userID)};m!=null&&(_.endpointSettings={joinMode:m?o("ZenonMWMessageTypes").ZenonMWJoinMode.SECONDARY:o("ZenonMWMessageTypes").ZenonMWJoinMode.PRIMARY});var f=t.isE2eeMandated===!0;_.e2eeEnforcement={infraMandatedExpStatus:(i=t.e2eeInfraMandatedExpStatus)!=null?i:o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.NOT_SET,mode:f?o("ZenonMWMessageTypes").ZenonMWE2eeMode.E2EE_MANDATED:o("ZenonMWMessageTypes").ZenonMWE2eeMode.E2EE_NOT_MANDATED},n.sdp.type==="offer"&&(_.offer={sdpString:n.sdp.sdp}),o("ZenonMWJoinUtils").canUseMwpp(n.sdp.type)&&(_.deviceCapabilities.push(o("ZenonMWMessageTypes").ZenonMWCapability.SUPPORT_MWPP),n.sdp.type==="answer"&&(_.answer={sdpString:n.sdp.sdp}),o("ZenonMWJoinUtils").canDeescalate()&&_.deviceCapabilities.push(o("ZenonMWMessageTypes").ZenonMWCapability.SUPPORT_MWPP_DEESCALATION)),(!o("ZenonScreenShare").screenShareWithReplaceTrack()||r("RoboticsPermission").is_authorized_robot)&&_.deviceCapabilities.push(o("ZenonMWMessageTypes").ZenonMWCapability.SUPPORT_MULTIPLE_VIDEO_STREAMS);var g=a==null?void 0:a.otherParticipants;g&&(_.usersToCall=g);var h=[],y=(l=a==null?void 0:a.roomInfo.context)!=null?l:e.roomInfo.context;if(y!=null){var C=o("ZenonJoiningContext").convertCollisionToJoiningContext(y);f&&(C.calling_tags=2),h=[].concat(h,[{body:{genericMessage:{data:JSON.stringify(C),topic:o("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}},header:{topic_DEPRECATED:o("ZenonJoiningContext").JOINING_CONTEXT_TOPIC}}])}(a==null?void 0:a.appMessages)!=null&&(h=[].concat(h,o("ZenonMWTranslatorUtils").signalingMessageAppMessagesToMWAppMessages(a.appMessages,g))),_.appMessages=h;var b=o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.JOIN,e,{joinRequest:_});return y&&y.serverInfoData!=null&&(b.jsonPayload.header.serverInfoData=y.serverInfoData),c(y,b.jsonPayload.header)&&(b.jsonPayload.header.conferenceType=o("ZenonMWMessageTypes").ZenonMWConferenceType.ROOM),b}function u(e,t){if(t===o("ZenonMWMessageTypes").ZenonMWResponseSubCode.EXCEEDED_MAX_ALLOWED_PARTICIPANTS)return o("ZenonDismissReason").ZenonDismissReason.MaxAllowedParticipantsReached;if(t===o("ZenonMWMessageTypes").ZenonMWResponseSubCode.PRODUCT_SERVER_DEFINED_END_REASON)return o("ZenonDismissReason").ZenonDismissReason.ProductServerDefinedEndReason;if(t===o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CALLER_HAS_APPEALABLE_CALLING_RESTRICTION)return o("ZenonDismissReason").ZenonDismissReason.CallerHasAppealableCallingRestriction;switch(e){case o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.METHOD_NOT_ALLOWED:case o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.UNAUTHORIZED:return o("ZenonDismissReason").ZenonDismissReason.NoPermission;case o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.SERVICE_UNAVAILABLE:return o("ZenonDismissReason").ZenonDismissReason.SignalingMessageFailed;case o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK:throw r("FBLogger")("rtc_www").mustfixThrow("Response status code is OK; should not return a dismiss reason");default:return r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",error:"[ZP] Got unexpected JOIN response status: "+e+" subcode "+(t!=null?t:"[undefined]"),errorDomain:"fromMWJoinResponseStatusToDismissReason"}),o("ZenonDismissReason").ZenonDismissReason.UnexpectedEndOfCall}}function c(e,t){return((e==null?void 0:e.peerID)!=null||(e==null?void 0:e.groupThreadID)!=null)&&t.conferenceName==null}function d(e){return e==="p2p"?o("ZenonMWMessageTypes").ZenonMWMediaPath.P2P:o("ZenonMWMessageTypes").ZenonMWMediaPath.SFU}l.fromJoinResponse=e,l.toJoinRequest=s}),98);
__d("ZenonMWPingTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[],n=e.jsonPayload.header,r={ackMessageId:n.transactionId,eventName:"pingResponse"};return t.push(r),t}function s(e){var t=Object.freeze({});return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.PING,e,{pingRequest:t})}l.fromPingResponse=e,l.toPingRequest=s}),98);
__d("ZenonMWRingTranslator",["ZenonMWCommonUtils","ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(t)return{groupThreadID:t.groupThreadId,peerID:t.peerId,serverInfoData:n};var r=o("ZenonMWTranslatorUtils").getCollisionContextFromAppMessages(e);return r&&(r.serverInfoData=n),r!=null?r:{groupThreadID:null,peerID:null,serverInfoData:n}}function s(t,n){var r=[],a=t.jsonPayload,i=a.body,l=a.header,s=i.ringRequest;if(s){var u,c,d,m=s.appMessages,p=s.caller,_=s.e2eeEnforcement,f=s.otherParticipants,g=s.ringType,h=s.sdpOriginLocalId,y=s.threadIdInfo,C=p,b=g===o("ZenonMWMessageTypes").ZenonMWRingType.PEER_VIDEO_CALL||g===o("ZenonMWMessageTypes").ZenonMWRingType.GROUP_VIDEO_CALL||g===o("ZenonMWMessageTypes").ZenonMWRingType.LIVE_STREAM||g===o("ZenonMWMessageTypes").ZenonMWRingType.PEER_ESCALATED_AUDIO_CALL,v=l.conferenceName,S=l.serverInfoData,R=e(m,y,S),L=o("ZenonMWTranslatorUtils").getRoomMetadataFromAppMessages(m),E={actorID:n.actorID,e2eeInfraMandatedExpStatus:_==null?void 0:_.infraMandatedExpStatus,eventName:"inviteRequest",inviterID:C,isE2eeMandated:(_==null?void 0:_.mode)===o("ZenonMWMessageTypes").ZenonMWE2eeMode.E2EE_MANDATED,isRemoteOfferer:!1,otherParticipants:f,requestingVideo:b,roomInfo:babelHelpers.extends({context:R,name:v},L==null?{}:{room:L,sender:L.sender}),serverInfoData:S,userID:n.userInfo.userID};m!=null&&(E.appMessages=o("ZenonMWTranslatorUtils").mwAppMessagesToSignalingAppMessages(m)),r.push(E);var k=(u=(c=s.offer)==null?void 0:c.sdpString)!=null?u:"",I=(d=s.mediaStatusEx)!=null?d:null;if(k!==""&&I!=null){var T={sdp:k,type:"offer",version:o("ZenonMWCommonUtils").getSdpVersion(k)},D=o("ZenonMWTranslatorUtils").toZenonMediaStates(I),x={eventName:"remoteSdpRequest",mediaPath:s.mediaPath,mediaStates:D,negotiateType:!1,sdp:T,sdpOriginLocalId:h,source:"ringRequest"};r.push(x)}}return r}function u(e,t){var n=t.status;n==="IN_ANOTHER_CALL"&&(e.signalingID=null);var r=o("ZenonMWTranslatorUtils").toMWDeviceStatus(n),a={deviceCapabilities:[o("ZenonMWMessageTypes").ZenonMWCapability.SUPPORT_AUDIO_DEPRECATED,o("ZenonMWMessageTypes").ZenonMWCapability.SUPPORT_VIDEO_DEPRECATED],deviceStatus:r};return o("ZenonMWTranslatorUtils").createMWResponse(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.RING,e,{ringResponse:a})}l.fromRingRequest=s,l.toRingResponse=u}),98);
__d("ZenonMWServerMediaUpdateTranslator",["FBLogger","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonInfraActionsLogger","ZenonMWCommonUtils","ZenonMWMessageReliabilityLogger","ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i=[],l=e.jsonPayload,u=l.body,c=l.header,d=u.serverMediaUpdateRequest,m=c.messageTags,p=c.transactionId;if(!d)return i;var _=d.answer,f=d.fromVersion,g=d.mediaPath,h=d.mediaStatus,y=d.multipleVideoStreamsAllowed,C=d.offer,b=d.prAnswer,v=d.renegotiationRequested,S=d.sdpOriginLocalId,R=d.stateStore,L=d.toVersion,E=d.update,k=(t=C==null?void 0:C.sdpString)!=null?t:"",I=(n=_==null?void 0:_.sdpString)!=null?n:"",T=(a=b==null?void 0:b.sdpString)!=null?a:"",D=function(){o("ZenonMWMessageReliabilityLogger").logProcessedMessage(e)},x=k!=="",$=I!=="",P=o("ZenonBrowsers").supportsPranswer()&&T!=="",N=E!==null,M=x||$||P||N;o("ZenonMWTranslatorUtils").addStateStoreSignalingEvents(R,i,!1,M);var w=o("ZenonMWTranslatorUtils").fetchE2eeServerState(R);if(v){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 1: renegotationRequested"});var A={ackMessageId:p,eventName:"initiateRenegotiationRequest",fromVersion:f,hasRemoteOffer:k!=="",mediaPath:g,messageTags:m!=null?m:[],onProcessed:D,version:L};if(i.push(A),x){var F=s(p,f,g,h,{sdp:k,type:"offer",version:o("ZenonMWCommonUtils").getSdpVersion(k)},S,D,m,w);i.push(F)}}else if($){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 2: answer SDP"});var O=s(p,f,g,h,{sdp:I,type:"answer",version:o("ZenonMWCommonUtils").getSdpVersion(I)},S,D,m,w);if(O.sdp.sdp!=null&&o("ZenonMWCommonUtils").isUnifiedPlan(O.sdp.sdp)){var B={sdp:I,type:"offer",version:o("ZenonMWCommonUtils").getSdpVersion(I)};O.renegotiationOffer=B}i.push(O)}else if(x){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 3: offer SDP"});var W=s(p,f,g,h,{sdp:k,type:"offer",version:o("ZenonMWCommonUtils").getSdpVersion(k)},S,D,m,w);i.push(W)}else if(E){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 4: delta SDP"});var q=s(p,f,g,h,{type:"offer",update:E,version:L},S,D,m,w);i.push(q)}else if(P){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 5: prAnswer SDP"});var U=s(p,f,g,h,{sdp:T,type:"pranswer",version:o("ZenonMWCommonUtils").getSdpVersion(T)},S,D,m,w);i.push(U)}else if(h){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SMU type 6: media update"});var V={ackMessageId:p,eventName:"mediaUpdateRequest",mediaStates:o("ZenonMWTranslatorUtils").toZenonMediaStates(h,f,L),messageTags:m!=null?m:[],onProcessed:D};i.push(V)}else{var H="Warning: unsupported SMU type. TXID: "+p;r("FBLogger")("rpweb").warn(H),r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:H,errorDomain:"ZenonMWServerMediaUpdateTranslator"})}o("ZenonMWTranslatorUtils").maybeAddOverlayConfigServerUpdateRequest(i,c);var G={capabilities:{multipleVideoStreamsAllowed:y},eventName:"capabilitiesRequest",messageTags:m!=null?m:[]};return i.push(G),i}function s(e,t,n,r,a,i,l,s,u){return{ackMessageId:e,e2eeServerState:u,eventName:"remoteSdpRequest",fromVersion:t,mediaPath:n,mediaStates:o("ZenonMWTranslatorUtils").toZenonMediaStates(r),messageTags:s!=null?s:[],negotiateType:!1,onProcessed:l,sdp:a,sdpOriginLocalId:i,source:"serverMediaUpdateRequest"}}function u(e,t,n,r){return m(e,t.acknowledgedVersion,o("ZenonMWTranslatorUtils").toMWResponseStatusCode(t.statusCode),o("ZenonMWTranslatorUtils").toMWResponseStatusSubCode(t.subCode),n,r)}function c(e,t){return m(e,t.acknowledgedVersion,o("ZenonMWTranslatorUtils").toMWResponseStatusCode(t.statusCode),o("ZenonMWTranslatorUtils").toMWResponseStatusSubCode(t.subCode))}function d(e,t){var n;return m(e,t.acknowledgedVersion,(n=t.responseStatusCode)!=null?n:o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONDITIONAL_REQUEST_FAILED,t.responseSubCode)}function m(e,t,n,r,a,i){var l={currentVersion:t};return a&&(l.mediaStatus=o("ZenonMWTranslatorUtils").toMWClientMediaStatus(a)),i&&(l.answer={sdpString:i.sdp}),o("ZenonMWTranslatorUtils").createMWResponse(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.SERVER_MEDIA_UPDATE,e,{serverMediaUpdateResponse:l},n,r)}l.fromServerMediaUpdateRequest=e,l.toServerMediaUpdateResponse=u,l.toServerMediaUpdateRenegotiationResponse=c,l.toServerMediaUpdateNoSdpResponse=d}),98);
__d("ZenonMWStateSyncTranslator",["RequestStreamBodyUtils","ZenonMWMessageTypes","ZenonMWTranslatorUtils","ZenonStateSyncPayloadSerializer"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.jsonPayload,n=t.body.updateResponse,r=t.header.transactionId;if(!n)return[];var o=n.topic,a=n.version,i={ackMessageId:r,eventName:"stateSyncUpdateResponse",topic:o,version:a};return[i]}function s(e){var t=e.jsonPayload.body.notifyRequest;if(!t)return[];var n=[];if(t.syncPayload!=null)o("ZenonMWTranslatorUtils").addStateStoreSignalingEvents(t.syncPayload.stateStore,n,!0,!1);else{var r=t.data,a=t.topic,i=t.version,l={data:o("ZenonStateSyncPayloadSerializer").stateSyncStringToUint8Array(r),eventName:"stateSyncNotifyRequest",responseRequired:!0,topic:a,version:i};n.push(l)}return n}function u(e){var t=e.jsonPayload,n=t.body.unsubscribeResponse,r=t.header.transactionId;if(!n)return[];var o=n.topic,a=n.version,i={ackMessageId:r,eventName:"stateSyncUnsubscribeResponse",topic:o,version:a};return[i]}function c(e,t){var n=t.data,r=t.topic,a=t.version,i={data:n?o("RequestStreamBodyUtils").uint8ArrayToBase64(n):void 0,topic:r,version:a};return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.UPDATE,e,{updateRequest:i})}function d(e,t){var n=t.topic,r=t.version,a={topic:n,version:r};return o("ZenonMWTranslatorUtils").createMWResponse(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.NOTIFY,e,{notifyResponse:a})}function m(e,t){var n=t.topic,r=t.version,a={topic:n,version:r};return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.UNSUBSCRIBE,e,{unsubscribeRequest:a})}l.fromUpdateResponse=e,l.fromNotifyRequest=s,l.fromUnsubscribeResponse=u,l.toUpdateRequest=c,l.toNotifyResponse=d,l.toUnsubscribeRequest=m}),98);
__d("ZenonMWSubscriptionTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t.subscriptions,r={subscriptions:n};return o("ZenonMWTranslatorUtils").createMWRequest(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.SUBSCRIPTION,e,{subscriptionRequest:r})}l.toSubscriptionRequest=e}),98);
__d("ZenonMWWakeupTranslator",["ZenonMWMessageTypes","ZenonMWTranslatorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=[],n=e.jsonPayload.header,r={ackMessageId:n.transactionId,eventName:"wakeupRequest"};return t.push(r),t}function s(e){var t=Object.freeze({});return o("ZenonMWTranslatorUtils").createMWResponse(o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.WAKEUP,e,{wakeupResponse:t})}l.fromWakeupRequest=e,l.toWakeupResponse=s}),98);
__d("ZenonMWMessageTranslator",["FBLogger","ZenonActorHooks","ZenonMWAddRemoveParticipantsTranslator","ZenonMWApprovalTranslator","ZenonMWClientEventTranslator","ZenonMWClientMediaUpdateTranslator","ZenonMWConferenceStateTranslator","ZenonMWDataMessageTranslator","ZenonMWDismissTranslator","ZenonMWHangupTranslator","ZenonMWIceCandidateTranslator","ZenonMWJoinTranslator","ZenonMWMessageTypes","ZenonMWPingTranslator","ZenonMWRingTranslator","ZenonMWServerMediaUpdateTranslator","ZenonMWStateSyncTranslator","ZenonMWSubscriptionTranslator","ZenonMWTranslatorUtils","ZenonMWWakeupTranslator","ZenonSignalingMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.getHeader(),n=e.getEvents();if(n.length===0)throw r("FBLogger")("rtc_www").mustfixThrow("Unexpected Translation: called toMWMessage with empty signaling events");var a=n[0];switch(a.eventName){case"addParticipantsRequest":return o("ZenonMWAddRemoveParticipantsTranslator").toAddParticipantsRequest(t,a);case"clientEventRequest":return o("ZenonMWClientEventTranslator").toClientEventRequest(t,a);case"clientInfoRequest":if(n.length>=2&&n[1].eventName==="localSdpRequest"&&(n[1].sdp.type==="offer"||n[1].sdp.type==="answer"))return o("ZenonMWJoinTranslator").toJoinRequest(t,a,n[1]);break;case"genericDataMessageRequest":return o("ZenonMWDataMessageTranslator").toDataMessageRequest(t,a);case"inviteRequest":if(n.length>=3&&n[1].eventName==="clientInfoRequest"&&n[2].eventName==="localSdpRequest"&&n[2].sdp.type==="offer")return o("ZenonMWJoinTranslator").toJoinRequest(t,n[1],n[2],a);break;case"genericDataMessageResponse":return o("ZenonMWDataMessageTranslator").toDataMessageResponse(t);case"inviteResponse":return o("ZenonMWRingTranslator").toRingResponse(t,a);case"dismissResponse":return o("ZenonMWDismissTranslator").toDismissResponse(t);case"initiateRenegotiationResponse":return n.length>=3&&n[1].eventName==="remoteSdpResponse"&&n[2].eventName==="localSdpRequest"&&n[2].sdp.type==="answer"?o("ZenonMWServerMediaUpdateTranslator").toServerMediaUpdateResponse(t,n[1],n[2].mediaStates,n[2].sdp):o("ZenonMWServerMediaUpdateTranslator").toServerMediaUpdateRenegotiationResponse(t,a);case"iceCandidateRequest":return o("ZenonMWIceCandidateTranslator").toIceCandidateRequest(t,a);case"iceCandidateResponse":return o("ZenonMWIceCandidateTranslator").toIceCandidateResponse(t);case"localSdpRequest":return o("ZenonMWClientMediaUpdateTranslator").toClientMediaUpdateRequest(t,a.mediaStates,a.sdp);case"mediaUpdateRequest":return o("ZenonMWClientMediaUpdateTranslator").toClientMediaUpdateRequest(t,a.mediaStates);case"mediaUpdateResponse":return o("ZenonMWServerMediaUpdateTranslator").toServerMediaUpdateNoSdpResponse(t,a);case"participantUpdateResponse":return o("ZenonMWConferenceStateTranslator").toConferenceStateResponse(t,a);case"pingRequest":return o("ZenonMWPingTranslator").toPingRequest(t);case"remoteSdpResponse":return a.type==="offer"&&n.length>=2&&n[1].eventName==="localSdpRequest"&&n[1].sdp.type==="answer"?n[1].mediaMode!=="p2p"?o("ZenonMWServerMediaUpdateTranslator").toServerMediaUpdateResponse(t,a,n[1].mediaStates):o("ZenonMWServerMediaUpdateTranslator").toServerMediaUpdateResponse(t,a,n[1].mediaStates,n[1].sdp):o("ZenonMWServerMediaUpdateTranslator").toServerMediaUpdateResponse(t,a);case"removeParticipantsRequest":return o("ZenonMWAddRemoveParticipantsTranslator").toRemoveParticipantsRequest(t,a);case"stateSyncNotifyResponse":return o("ZenonMWStateSyncTranslator").toNotifyResponse(t,a);case"stateSyncUnsubscribeRequest":return o("ZenonMWStateSyncTranslator").toUnsubscribeRequest(t,a);case"stateSyncUpdateRequest":return o("ZenonMWStateSyncTranslator").toUpdateRequest(t,a);case"subscriptionRequest":return o("ZenonMWSubscriptionTranslator").toSubscriptionRequest(t,a);case"terminateRequest":return o("ZenonMWHangupTranslator").toHangupRequest(t,a);case"usersApprovalRequest":return o("ZenonMWApprovalTranslator").toApprovalRequest(t,a);case"wakeupResponse":return o("ZenonMWWakeupTranslator").toWakeupResponse(t)}return null}function s(e){var t=e.jsonPayload.header,n=u(t);if(n!=null)return r("FBLogger")("rtc_www").info("Ignoring JSON MW message; receiver does not match self ID: "+n,"rtc_www"),null;var a=t.type,i=t.responseStatusCode==null,l=o("ZenonMWTranslatorUtils").mwMessageHeaderToSignalingMessageHeader(t),s=[];switch(a){case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.RING:i&&(s=o("ZenonMWRingTranslator").fromRingRequest(e,l));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.DISMISS:i&&(s=o("ZenonMWDismissTranslator").fromDismissRequest(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.JOIN:i||(s=o("ZenonMWJoinTranslator").fromJoinResponse(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.ICE_CANDIDATE:i?s=o("ZenonMWIceCandidateTranslator").fromIceCandidateRequest(e):s=o("ZenonMWIceCandidateTranslator").fromIceCandidateResponse(e);break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.CONFERENCE_STATE:i&&(s=o("ZenonMWConferenceStateTranslator").fromConferenceStateRequest(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.CLIENT_MEDIA_UPDATE:i||(s=o("ZenonMWClientMediaUpdateTranslator").fromClientMediaUpdateResponse(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.SERVER_MEDIA_UPDATE:i&&(s=o("ZenonMWServerMediaUpdateTranslator").fromServerMediaUpdateRequest(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.PING:i||(s=o("ZenonMWPingTranslator").fromPingResponse(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.HANGUP:i||(s=o("ZenonMWHangupTranslator").fromHangupResponse(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.DATA_MESSAGE:i&&(s=o("ZenonMWDataMessageTranslator").fromDataMessageRequest(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.UPDATE:i||(s=o("ZenonMWStateSyncTranslator").fromUpdateResponse(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.UNSUBSCRIBE:i||(s=o("ZenonMWStateSyncTranslator").fromUnsubscribeResponse(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.NOTIFY:i&&(s=o("ZenonMWStateSyncTranslator").fromNotifyRequest(e));break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.WAKEUP:i&&(s=o("ZenonMWWakeupTranslator").fromWakeupRequest(e))}return new(r("ZenonSignalingMessage"))(l,s)}function u(e){var t,n,r,a=e.receiverUserId;return o("ZenonActorHooks").ZenonActor.isInstagramUser()||o("ZenonActorHooks").ZenonActor.isOculusUser()||a==null||a===o("ZenonActorHooks").ZenonActor.getID()||((t=e.receiver)==null?void 0:t.baseId)===o("ZenonActorHooks").ZenonActor.getAccountID()?null:a!==o("ZenonActorHooks").ZenonActor.getID()&&((n=e.receiver)==null?void 0:n.baseId)==null?"receiverUserId mismatch and missing header.receiver.baseId":a!==o("ZenonActorHooks").ZenonActor.getID()&&((r=e.receiver)==null?void 0:r.baseId)!==o("ZenonActorHooks").ZenonActor.getAccountID()?"receiverUserId mismatch and mismatched header.receiver.baseId":"unknown error"}l.toMWMessage=e,l.toSignalingMessage=s}),98);
__d("SCTPSignalingListener",["FBLogger","ZenonMWMessageDebugLogger","ZenonMWMessageReliabilityLogger","ZenonMWMessageTranslator","ZenonSCTPConstants","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.setLoggingEventHandler=function(t){this.$2=t},t.subscribe=function(t){this.$3==null&&(this.$3=this.$4(t),r("promiseDone")(this.$1.createDataMessageSubscription(o("ZenonSCTPConstants").SCTP_SIGNALING_TOPIC,this.$3)))},t.unsubscribe=function(){this.$3!=null&&(r("promiseDone")(this.$1.removeDataMessageSubscription(o("ZenonSCTPConstants").SCTP_SIGNALING_TOPIC,this.$3)),this.$3=null)},t.$4=function(t){return function(e){try{var n=JSON.parse(e.message),a=atob(n.signalingMessagePayload),i=JSON.parse(a),l={endpoint:i.endpoint,jsonPayload:{body:i.body,header:i.header}};o("ZenonMWMessageReliabilityLogger").logReceivedMessage(l),r("ZenonMWMessageDebugLogger").logMWMessage("RECEIVED","SCTP",l);var s=o("ZenonMWMessageTranslator").toSignalingMessage(l);if(s==null)return;t(s),o("ZenonMWMessageReliabilityLogger").logProcessingMessage(l)}catch(e){var u=r("getErrorSafe")(e);r("FBLogger")("rpweb").catching(u).warn("Error receiving SCTP message from Signaling Listener")}}},e})();l.default=e}),98);
__d("ZenonCallLogger",["Promise","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonLogPromiseRejection","isEmployeeTestUserZenonLogging","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set(["mwMessageSent","mwThriftMessageSent","mwMessageRecv","mwThriftMessageRecv","setMediaStats","updateE2EEStats","updateIceInfo","setRemoteSdpOffer"]),u=new Set(["atLeastOneParticipantAlerted","atLeastOneParticipantAnswered"]),c=(function(){function t(e){var t=this,n=e.config,r=e.initLoggerInfo,o=e.isE2eeMandated,a=e.processorConfigs,i=e.startFromNavigation;this.$4=!0,this.$6=[],this.$7=new Set,this.$1=r,this.$2=n,this.$4=i,this.$3=o,this.$5={clientSessionID:r.signalingID,localCallID:r.localCallID,peerID:r.peerID,sharedCallID:r.serverInfoData},a.forEach(function(e){t.addLogProcessor(e)})}var o=t.prototype;return o.addLogProcessor=function(t){var e=this;this.$6.push(new t.LogProcessor({config:this.$2,data:this.$1,isE2eeMandated:this.$3,startFromNavigation:this.$4,updateLogIdentifiers:function(n){return e.updateLogIdentifiers(n)}}))},o.updateLogIdentifiers=function(t){Object.assign(this.$5,t),this.log({logIdentifiers:t,name:"updateLogIdentifiers"})},o.log=function(t){u.has(t.name)&&this.$7.has(t.name)||(this.$7.add(t.name),this.$8(t),r("promiseDone")(this.logToProcessors(t)))},o.logToProcessors=function(o){return r("ZenonLogPromiseRejection")((e||(e=n("Promise"))).all(this.$6.map(function(e){return e.processEvent(o)})).then(function(){}))},o.$8=function(t){r("isEmployeeTestUserZenonLogging")()&&(s.has(t.name)||r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] ZenonCallLogger event: "+t.name}))},o.getLogIdentifiers=function(){return this.$5},t})();l.default=c}),98);
__d("ZenonDeviceId",["ChannelClientID","WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="chatd-deviceid";function u(){return o("ChannelClientID").getID()}function c(t){(e||(e=r("WebStorage"))).setAllowlistedKeyToLocalStorage(e.getLocalStorage(),s,t)}function d(){return(e||(e=r("WebStorage"))).getAllowlistedKeyFromLocalStorage(s)}function m(){var e;return(e=d())!=null?e:u()}l.getZenonDeviceId=u,l.setZenonLocalStorageDeviceId=c,l.getZenonLocalStorageDeviceId=d,l.getZenonLocalStorageDeviceIdWithFallback=m}),98);
__d("ZenonCallInfoManager",["ZenonDeviceId"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.callTrigger,n=e.conferenceName,r=e.isCaller,a=e.isVideo,i=e.localCallID,l=e.peerID,s=e.protocol,u=e.serverInfoData,c=e.signalingID,d=o("ZenonDeviceId").getZenonLocalStorageDeviceIdWithFallback(),m={callTrigger:t!=null?t:"",conferenceName:n!=null?n:"",deviceID:d,isCaller:r,isVideo:a,localCallID:i,peerID:l,protocol:s,signalingID:c};this.$1=babelHelpers.extends({},m,{serverInfoData:u})}var t=e.prototype;return t.setDeviceID=function(t){this.$1.deviceID=t},t.setLocalCallID=function(t){this.$1.localCallID=t},t.setSharedCallId=function(t){this.$1.serverInfoData=t},t.setSignalingID=function(t){this.$1.signalingID=t},t.getCallInfo=function(){return this.$1},e})();l.default=e}),98);
__d("ZenonClientPerfQPLConstants",[],(function(t,n,r,o,a,i){"use strict";var e="zenon_popup_opened",l="zenon_call_join_request",s="zenon_sfu_e2ee_negotiation_complete",u="csm_outgoing_start",c="csm_incoming_connection_started",d="csm_invite_sent",m="csm_invite_ack_recv",p="csm_answer_recv",_="csm_answer_sdp_recv",f="csm_pranswer_sdp_recv",g="csm_offer_sdp_recv",h="csm_answer_sent",y="csm_negotiation_complete",C="csm_network_ready",b="csm_connection_ready",v="csm_dismiss_sent",S="csm_dismiss_recv",R="media_first_audio_packet",L="media_first_audio_packet_sent",E="media_first_video_packet",k="media_first_video_packet_sent",I="media_peer_connection_factory_created",T="signaling_mw_join_req_sent",D="signaling_mw_join_response_recv";i.POINT_ZENON_POPUP_OPENED=e,i.POINT_ZENON_CALL_JOIN_REQUEST=l,i.POINT_ZENON_SFU_E2EE_NEGOTIATION_COMPLETE=s,i.POINT_CONNECTION_OUTGOING_START=u,i.POINT_CONNECTION_INCOMING_CONNECTION_STARTED=c,i.POINT_CONNECTION_INVITE_SENT=d,i.POINT_CONNECTION_INVITE_ACK_RECV=m,i.POINT_CONNECTION_ANSWER_RECV=p,i.POINT_CONNECTION_ANSWER_SDP_RECV=_,i.POINT_CONNECTION_PRANSWER_SDP_RECV=f,i.POINT_CONNECTION_OFFER_SDP_RECV=g,i.POINT_CONNECTION_ANSWER_SENT=h,i.POINT_CONNECTION_NEGOTIATION_COMPLETE=y,i.POINT_CONNECTION_NETWORK_READY=C,i.POINT_CONNECTION_READY=b,i.POINT_CONNECTION_DISMISS_SENT=v,i.POINT_CONNECTION_DISMISS_RECV=S,i.POINT_MEDIA_FIRST_AUDIO_PACKET=R,i.POINT_MEDIA_FIRST_AUDIO_PACKET_SENT=L,i.POINT_MEDIA_FIRST_VIDEO_PACKET=E,i.POINT_MEDIA_FIRST_VIDEO_PACKET_SENT=k,i.POINT_MEDIA_PEER_CONNECTION_FACTORY_CREATED=I,i.POINT_SIGNALING_MW_JOIN_REQ_SENT=T,i.POINT_SIGNALING_MW_JOIN_RESPONSE_RECV=D}),66);
__d("ZenonChildClientPerfQPLLogProcessor",["Promise","QuickPerformanceLogger","ZenonCallInfoManager","ZenonClientPerfQPLConstants","ZenonDismissReason","performanceNow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(function(){function t(e){var t=e.data,n=e.isE2eeMandated,o=e.startFromNavigation;this.$4=!0,this.$5=r("qpl")._(41156609,"943"),this.$3=new(r("ZenonCallInfoManager"))(t),this.$1=t.signalingID,this.$2=n,this.$4=o}var a=t.prototype;return a.processEvent=function(a){switch(a.name){case"updateLogIdentifiers":a.logIdentifiers.localCallID!=null&&(this.$3.setLocalCallID(a.logIdentifiers.localCallID),(u||(u=r("QuickPerformanceLogger"))).markerAnnotate(this.$5,{string:{local_call_id:a.logIdentifiers.localCallID}},{instanceKey:+this.$1}));break;case"setRemoteSignalingID":this.$3.setSharedCallId(a.remoteSignalingID),(u||(u=r("QuickPerformanceLogger"))).markerAnnotate(this.$5,{string:{shared_call_id:a.remoteSignalingID}},{instanceKey:+this.$1});break;case"callJoinRequest":this.$7();break;case"connectionStart":this.$8(this.$5===r("qpl")._(41156609,"943")?o("ZenonClientPerfQPLConstants").POINT_CONNECTION_OUTGOING_START:o("ZenonClientPerfQPLConstants").POINT_CONNECTION_INCOMING_CONNECTION_STARTED);break;case"inviteSent":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_INVITE_SENT);break;case"mwMessageSent":a.mwMessage.jsonPayload.body.joinRequest&&this.$8(o("ZenonClientPerfQPLConstants").POINT_SIGNALING_MW_JOIN_REQ_SENT);break;case"mwThriftMessageSent":a.mwThriftMessage.messageBody.joinRequest&&this.$8(o("ZenonClientPerfQPLConstants").POINT_SIGNALING_MW_JOIN_REQ_SENT);break;case"mwMessageRecv":a.mwMessage.jsonPayload.body.joinResponse&&this.$8(o("ZenonClientPerfQPLConstants").POINT_SIGNALING_MW_JOIN_RESPONSE_RECV);break;case"mwThriftMessageRecv":a.mwThriftMessage.messageBody.joinResponse&&this.$8(o("ZenonClientPerfQPLConstants").POINT_SIGNALING_MW_JOIN_RESPONSE_RECV);break;case"atLeastOneParticipantAlerted":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_INVITE_ACK_RECV);break;case"atLeastOneParticipantAnswered":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_ANSWER_RECV);break;case"answerSdpReceived":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_ANSWER_SDP_RECV);break;case"prAnswerSdpReceived":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_PRANSWER_SDP_RECV);break;case"offerSdpReceived":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_OFFER_SDP_RECV);break;case"answerSent":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_ANSWER_SENT);break;case"peerConnectionManagerCreated":this.$8(o("ZenonClientPerfQPLConstants").POINT_MEDIA_PEER_CONNECTION_FACTORY_CREATED);break;case"negotiationComplete":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_NEGOTIATION_COMPLETE);break;case"mediaConnected":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_NETWORK_READY);break;case"connectionReady":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_READY);break;case"firstMediaPacketSent":a.type==="audio"?this.$8(o("ZenonClientPerfQPLConstants").POINT_MEDIA_FIRST_AUDIO_PACKET_SENT):this.$8(o("ZenonClientPerfQPLConstants").POINT_MEDIA_FIRST_VIDEO_PACKET_SENT);break;case"firstMediaPacketReceived":a.type==="audio"?this.$8(o("ZenonClientPerfQPLConstants").POINT_MEDIA_FIRST_AUDIO_PACKET):this.$8(o("ZenonClientPerfQPLConstants").POINT_MEDIA_FIRST_VIDEO_PACKET);break;case"sfuE2eeNegotiationComplete":this.$8(o("ZenonClientPerfQPLConstants").POINT_ZENON_SFU_E2EE_NEGOTIATION_COMPLETE);break;case"dismissSent":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_DISMISS_SENT);break;case"dismissRecv":this.$8(o("ZenonClientPerfQPLConstants").POINT_CONNECTION_DISMISS_RECV);break;case"callEnded":(u||(u=r("QuickPerformanceLogger"))).markerAnnotate(this.$5,{string:{endCallReason:o("ZenonDismissReason").ZenonDismissReason.getName(a.endCallReason),endCallSubreason:a.endCallSubreason}},{instanceKey:+this.$1}),(u||(u=r("QuickPerformanceLogger"))).markerEnd(this.$5,2,+this.$1,this.$9());break}return(e||(e=n("Promise"))).resolve()},a.$7=function(){var e=(u||(u=r("QuickPerformanceLogger"))).getMarker(r("qpl")._(41156610,"2039"),+this.$1),t=e==null?void 0:e.points.find(function(e){return e.name===o("ZenonClientPerfQPLConstants").POINT_ZENON_POPUP_OPENED});if(!e||!t){this.$5=r("qpl")._(41156609,"943"),this.$6=null;var n=this.$3.getCallInfo(),a=n.deviceID,i=n.localCallID,l=n.serverInfoData;this.$4?(u||(u=r("QuickPerformanceLogger"))).markerStartFromNavStart(this.$5,+this.$1):(u||(u=r("QuickPerformanceLogger"))).markerStart(this.$5,+this.$1),(u||(u=r("QuickPerformanceLogger"))).markerAnnotate(this.$5,{bool:{isE2eeMandated:this.$2},int:{signaling_id:+this.$1},string:{device_id:a,local_call_id:i,shared_call_id:l}},{instanceKey:+this.$1})}else this.$5=r("qpl")._(41156610,"2039"),this.$6=t.timeSinceStart+e.timestamp;this.$8(o("ZenonClientPerfQPLConstants").POINT_ZENON_CALL_JOIN_REQUEST)},a.$8=function(t){(u||(u=r("QuickPerformanceLogger"))).markerPoint(this.$5,t,{instanceKey:+this.$1,timestamp:this.$9()})},a.$9=function(){return this.$6==null?(u||(u=r("QuickPerformanceLogger"))).currentTimestamp():this.$6+(s||(s=r("performanceNow")))()},t})(),d={LogProcessor:c};l.ZenonChildClientPerfQPLLogProcessor=c,l.ZenonChildClientPerfQPLLogProcessorConfig=d}),98);
__d("ZenonChildQPLLogProcessor",["Promise","QPLUserFlow","QuickPerformanceLogger","ZenonDismissReason","ZenonE2eeMandatedStateManager","ZenonInfraActionsLogger","performanceNavigationStart","performanceNow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(function(){function t(e){var t=e.data,n=e.isE2eeMandated;this.$8=!1,this.$9=!1,this.$10=!1,this.$11=!1,this.$12=!1,this.$13=!1,this.$14=!1,this.$1=t.localCallID,this.$2=t.serverInfoData,this.$3=t.signalingID,this.$4=n,this.$5=t.appID,this.$6=t.isVideo}var a=t.prototype;return a.processEvent=function(a){switch(a.name){case"updateLogIdentifiers":a.logIdentifiers.localCallID!=null&&(this.$1=a.logIdentifiers.localCallID,(u||(u=r("QuickPerformanceLogger"))).markerAnnotate(r("qpl")._(398997251,"1544"),{string:{appID:this.$5,localCallID:a.logIdentifiers.localCallID}},{instanceKey:+this.$3}));break;case"callJoinRequest":{this.$8=a.hasOfferInRingRequest,r("QPLUserFlow").start(r("qpl")._(64232269,"6493"),{annotations:{bool:{isCaller:a.isCaller,isE2eeMandated:this.$4,isVideo:this.$6}}});var t=(u||(u=r("QuickPerformanceLogger"))).getMarker(r("qpl")._(398997251,"1544"),+this.$3);if(!t)r("QPLUserFlow").start(r("qpl")._(398997251,"1544"),{annotations:{bool:{isE2eeInfraMandated:r("ZenonE2eeMandatedStateManager").isInfraE2eeMandated(),isE2eeMandated:this.$4,isVideo:this.$6},string:{appID:this.$5,cameraPermission:a.cameraPermission,localCallID:this.$1,microphonePermission:a.microphonePermission,serverInfoData:this.$2}},instanceKey:+this.$3}),this.$7=null;else{(u||(u=r("QuickPerformanceLogger"))).markerAnnotate(r("qpl")._(398997251,"1544"),{string:{cameraPermission:a.cameraPermission,microphonePermission:a.microphonePermission}},{instanceKey:+this.$3});var i=t.points.find(function(e){return e.name==="popup_opened"});if(i){var l=r("performanceNavigationStart")();this.$7=i.timeSinceStart+t.timestamp,r("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"popup_opened to child window navStart: "+(l-this.$7)})}}r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"call_join_request",{instanceKey:+this.$3,timestamp:this.$15()}),r("QPLUserFlow").addAnnotations(r("qpl")._(398997251,"1544"),{bool:{isCaller:a.isCaller}},{instanceKey:+this.$3}),this.$16();break}case"inviteSent":this.$9=!0,r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"invite_sent"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"invite_sent",{instanceKey:+this.$3,timestamp:this.$15()}),this.$16();break;case"setRemoteSignalingID":r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"set_remote_signaling_id"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"set_remote_signaling_id",{instanceKey:+this.$3,timestamp:this.$15()}),r("QPLUserFlow").addAnnotations(r("qpl")._(398997251,"1544"),{string:{serverInfoData:a.remoteSignalingID}},{instanceKey:+this.$3});break;case"inviteResponseReceived":r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"invite_response_received"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"invite_response_received",{instanceKey:+this.$3,timestamp:this.$15()});break;case"inviteResponseProcessed":r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"invite_response_processed"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"invite_response_processed",{instanceKey:+this.$3,timestamp:this.$15()});break;case"setHasAnswerInJoinResponse":this.$10=a.hasAnswerInJoinResponse,this.$16();break;case"atLeastOneParticipantAnswered":r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"at_least_one_participant_answered",{instanceKey:+this.$3,timestamp:this.$15()});break;case"setRemoteSdpAnswer":r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"set_remote_sdp_answer"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"set_remote_sdp_answer",{instanceKey:+this.$3,timestamp:this.$15()});break;case"mediaConnected":r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"media_connected"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"media_connected",{instanceKey:+this.$3,timestamp:this.$15()});break;case"callConnected":r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"call_connected"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"call_connected",{instanceKey:+this.$3,timestamp:this.$15()});break;case"setRemoteSdpOffer":r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"set_remote_sdp_offer"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"set_remote_sdp_offer",{instanceKey:+this.$3,timestamp:this.$15()});break;case"firstMediaPacketReceived":this.$14||(r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"first_"+a.type+"_packet",{instanceKey:+this.$3,timestamp:this.$15()}),this.$14=!0,r("QPLUserFlow").endSuccess(r("qpl")._(398997251,"1544"),{instanceKey:+this.$3,timestamp:this.$15()}));break;case"sfuE2eeNegotiationComplete":r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"sfu_e2ee_negotiation_complete"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"sfu_e2ee_negotiation_complete",{instanceKey:+this.$3,timestamp:this.$15()});break;case"e2eeComponentCreated":r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"e2ee_component_created"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"e2ee_component_created",{instanceKey:+this.$3,timestamp:this.$15()}),r("QPLUserFlow").addAnnotations(r("qpl")._(398997251,"1544"),{bool:{isE2eeStackReady:a.isE2eeStackReady}},{instanceKey:+this.$3});break;case"callEscalated":this.$11=!0,r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"renegotion_cmu_request_sent"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"renegotion_cmu_request_sent",{instanceKey:+this.$3,timestamp:this.$15()}),this.$16();break;case"renegotiationSmuReqWithAnswerReceived":this.$12=!0,r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"renegotation_smu_request_with_answer_received"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"renegotation_smu_request_with_answer_received",{instanceKey:+this.$3,timestamp:this.$15()}),this.$16();break;case"renegotiationSmuReqWithOfferReceived":this.$13=!0,r("QPLUserFlow").addPoint(r("qpl")._(64232269,"6493"),"renegotation_smu_request_with_offer_received"),r("QPLUserFlow").addPoint(r("qpl")._(398997251,"1544"),"renegotation_smu_request_with_offer_received",{instanceKey:+this.$3,timestamp:this.$15()}),this.$16();break;case"callEnded":r("QPLUserFlow").endSuccess(r("qpl")._(64232269,"6493")),r("QPLUserFlow").endCancel(r("qpl")._(398997251,"1544"),{annotations:{string:{endCallReason:o("ZenonDismissReason").ZenonDismissReason.getName(a.endCallReason),endCallSubreason:a.endCallSubreason}},instanceKey:+this.$3,timestamp:this.$15()});break}return(e||(e=n("Promise"))).resolve()},a.$16=function(){var e="sfu";this.$12||this.$13?e="deescalated_from_sfu_to_p2p":this.$11?e="escalated_from_p2p_to_sfu":(!this.$10||this.$8&&!this.$9)&&(e="p2p"),r("QPLUserFlow").addAnnotations(r("qpl")._(64232269,"6493"),{string:{mediaPath:e}}),r("QPLUserFlow").addAnnotations(r("qpl")._(398997251,"1544"),{string:{mediaPath:e}},{instanceKey:+this.$3})},a.$15=function(){return this.$7!=null?this.$7+(s||(s=r("performanceNow")))():(u||(u=r("QuickPerformanceLogger"))).currentTimestamp()},t})(),d={LogProcessor:c};l.ZenonChildQPLLogProcessor=c,l.ZenonChildQPLLogProcessorConfig=d}),98);
__d("RtcDoorCallingTags",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({OPEN:0,VANISHING:1,SECRET:2,CANVAS:32,LEAD_GEN:128,COPRESENCE:256,CONDUIT:512}),l=e;i.default=l}),66);
__d("ZenonCollisionContext",["RtcDoorCallingTags"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=null;return e.groupThreadID!=null?n={e2eeThreadID:e.groupThreadID,id:e.groupThreadID,type:t?16:2}:e.peerID!=null&&(n={id:e.peerID,secureOneToOneThreadPeerId:t?e.peerID:void 0,type:t?15:1}),n}function s(e){var t=e.call_trigger,n=e.callable_post_id,o=e.calling_tags,a=e.conference_name,i=e.group_thread_id,l=e.ig_thread_id,s=e.immersive_mode_door_id,u=e.is_meta_ai_call,c=e.link_url,d=e.live_broadcast_id,m=e.meeting_id,p=e.peer_id,_=e.rtc_door_id,f=e.server_info_data;return{callablePostID:n,callingTags:r("RtcDoorCallingTags").cast(o),callTrigger:t,conferenceName:a,groupThreadID:i,igThreadID:l,immersiveModeDoorID:s,isMetaAiCall:u,linkUrl:c,liveBroadcastID:d,meetingID:m,peerID:p,rtcDoorID:_,serverInfoData:f}}function u(e){return e===void 0&&(e={}),!Object.values(e).some(function(e){return e!=null})}l.getThreadIDAndTypeFromCollisionContext=e,l.fromRTCJoiningContext=s,l.isCollisionContextEmpty=u}),98);
__d("ZenonConstants",[],(function(t,n,r,o,a,i){"use strict";var e="DidNotInitiate";i.DID_NOT_INITIATE=e}),66);
__d("ZenonSharedWorkerPortManager",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=null,s=null;function u(t){s!=null&&s(t),l=(e||(e=n("Promise"))).resolve(t)}function c(){return l==null&&(l=new(e||(e=n("Promise")))(function(e){s=e})),l}i.setSharedWorkerPort=u,i.getSharedWorkerPort=c}),66);
__d("WAResolvable",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(){var t=this;this.$1=function(){},this.$2=!1,this.isSettled=!1,this.promise=new(e||(e=n("Promise")))(function(e){t.$1=e})}var r=t.prototype;return r.resolve=function(t){this.$2=!0,this.isSettled=!0,this.$1(t)},r.reject=function(r){this.isSettled=!0,this.resolve((e||(e=n("Promise"))).reject(r))},r.resolveWasCalled=function(){return this.$2},t})();i.Resolvable=l}),66);
__d("ZenonSignalingSharedWorkerBundle",["ZenonSignalingSharedWorkerV2Resource"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("ZenonSignalingSharedWorkerV2Resource")}),98);
__d("promiseWithTimeout",["Promise","asyncToGeneratorRuntime","clearTimeout","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(t,o){var a=this;this.$2=new(e||(e=n("Promise")))(function(e,n){var i=!1;a.$1=r("setTimeout")(function(){i||(i=!0,(o.rejectOnTimeout?n:e)())},o.timeout),a.$3(t).then(function(t){i||(i=!0,e(t))}).catch(function(e){i||(i=!0,n(e))})})}var o=t.prototype;return o.$3=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield e;return this.$1&&(r("clearTimeout")(this.$1),this.$1=null),t});function t(t){return e.apply(this,arguments)}return t})(),o.getPromise=function(){return this.$2},t})();function u(e,t){return new s(e,t).getPromise()}l.default=u}),98);
__d("ZenonSignalingSharedWorkerPortSingleton",["Deferred","JSResourceForInteraction","WAResolvable","ZenonSignalingSharedWorkerBundle","err","promiseDone","promiseWithTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("SharedWorkerBundleResource").__setRef("ZenonSignalingSharedWorkerPortSingleton"),s=p,u=new(o("WAResolvable")).Resolvable,c=null;function d(e,t){return c===null&&(c=m(e,t)),c}function m(t,n){var o=function(t,n,o){r("promiseDone")(r("promiseWithTimeout")(u.promise,{rejectOnTimeout:!1,timeout:5e3}).then(function(){return s(t,n,o)}))},a=new(r("Deferred")),i=e.load().then(function(e){return e.createPushSafeSharedWebWorkerV2Async(r("ZenonSignalingSharedWorkerBundle"),o,{reason:"zenon_signaling_"+t+"_"+n})});return i.then(function(e){var n=window.setTimeout(function(){a.reject(r("err")("Worker connection ack timeout"))},1e4),o=function(t){var e,r,o;if(typeof t.data=="object"&&((e=t.data)==null?void 0:e.type)==="connection-ack"&&typeof((r=t.data)==null?void 0:r.response)=="object"&&typeof((o=t.data)==null||(o=o.response)==null?void 0:o.from)=="string"){var i,l,s=typeof((i=t.data)==null||(i=i.response)==null?void 0:i.workerID)=="string"?(l=t.data)==null||(l=l.response)==null?void 0:l.workerID:void 0;s!=null&&(n!=null&&window.clearTimeout(n),a.resolve(s))}};return e.port.addEventListener("message",o),e.port.postMessage({type:"register",windowType:t}),a.getPromise().then(function(t){return{port:e.port,workerID:t}})})}function p(){c=null}function _(e){s=e,u.resolve()}l.createOrGetSharedWorkerPort=d,l.resetSharedWorkerPortSingleton=p,l.setOnCloseForWorkerInstance=_}),98);
__d("ZenonDGWSharedWorkerUtils",["CurrentUser","DGWEnvUtil","DGWWebConfig","FBLogger","JSResourceForInteraction","ZenonDeviceId","ZenonSharedWorkerPortManager","ZenonSignalingSharedWorkerPortSingleton","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("ZenonSharedWorkerProxyMessageSender").__setRef("ZenonDGWSharedWorkerUtils");function s(t,a,i){r("promiseDone")(o("ZenonSignalingSharedWorkerPortSingleton").createOrGetSharedWorkerPort(t,"signaling").then(function(t){var o=t.port,l=n("ZenonSharedWorkerPortManager"),s=l.setSharedWorkerPort;s(o),u(o),r("promiseDone")(e.load(),function(e){return a.addMessageSender(new e(o))}),i==null||i(o)}))}function u(e){try{var t=n("DGWWebConfig"),a=n("DGWEnvUtil"),i=n("CurrentUser"),l={appId:t.appId,appVersion:t.appVersion,authToken:a.getDGWAuthToken(),authType:a.getDGWAuthType(),deviceId:o("ZenonDeviceId").getZenonLocalStorageDeviceIdWithFallback(),dgwVersion:a.getDGWVersion(),endpoint:a.getDGWEndpoint(),fbId:i.getID(),isUserLoggedIn:i.isLoggedInNow()};e.postMessage({config:l,type:"INIT_DGW_CONFIG"})}catch(e){r("FBLogger")("rpweb").catching(r("getErrorSafe")(e)).mustfix("Error processing sending DGWClientConfig to Shared Worker")}}l.setupDGWSharedWorker=s,l.sendDGWConfigToSharedWorker=u}),98);
__d("ZenonLoggingEventTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["Send","Receive"]),l=n("$InternalEnum")({Primary:"primary",Secondary:"secondary"}),s="rtc_www";i.ZenonUpdateIceInfoDirection=e,i.ZenonJoinMode=l,i.tslogSource=s}),66);
__d("ZenonMWThriftMessageLogger",["MultiwayCommonTypes","ZenonLoggingEventTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set,s=new Set;function u(t,n){var r=t.messageHeader,a=t.messageBody;if(!(e.has(r.transactionId)||r.type==null)){switch(r.type){case o("MultiwayCommonTypes").MessageType.JOIN:a.joinRequest&&d(a.joinRequest,n);break;case o("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:a.iceCandidateRequest&&p(a.iceCandidateRequest,n,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);break;case o("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateRequest&&_(a.clientMediaUpdateRequest,n);break;case o("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateResponse&&h(a.serverMediaUpdateResponse,n);break;default:break}e.add(r.transactionId)}}function c(e,t){var n=e.messageHeader,r=e.messageBody;if(!(s.has(n.transactionId)||n.type==null)){switch(n.type){case o("MultiwayCommonTypes").MessageType.JOIN:r.joinResponse&&m(r.joinResponse,t);break;case o("MultiwayCommonTypes").MessageType.ICE_CANDIDATE:r.iceCandidateRequest&&p(r.iceCandidateRequest,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);break;case o("MultiwayCommonTypes").MessageType.CLIENT_MEDIA_UPDATE:r.clientMediaUpdateResponse&&f(r.clientMediaUpdateResponse,t);break;case o("MultiwayCommonTypes").MessageType.SERVER_MEDIA_UPDATE:r.serverMediaUpdateRequest&&g(r.serverMediaUpdateRequest,t);break;default:break}s.add(n.transactionId)}}function d(e,t){var n=e.answer,r=e.offer;t({name:"inviteSent"}),y(r,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send),n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function m(e,t){var n=e.answer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function p(e,t,n){var r=e.iceCandidateSdps;r.forEach(function(e){e.candidateSdpString!=null&&t({direction:n,name:"updateIceInfo",sdpString:e.candidateSdpString})})}function _(e,t){var n=e.offer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function f(e,t){var n=e.answer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function g(e,t){var n=e.answer,r=e.offer;r&&y(r,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive),n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function h(e,t){var n=e.answer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function y(e,t,n){e.sdpString!=null&&t({direction:n,name:"updateIceInfo",sdpString:e.sdpString})}l.logSentMessage=u,l.logReceivedMessage=c}),98);
__d("ZenonMWThriftSendMessageMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9720271894689175"}),null);
__d("ZenonMWThriftSendMessageMutation.graphql",["ZenonMWThriftSendMessageMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"RtcWebSendMultiwayThriftSignalingMessageResponsePayload",kind:"LinkedField",name:"rtc_web_send_multiway_thrift_signaling_message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"response",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ZenonMWThriftSendMessageMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ZenonMWThriftSendMessageMutation",selections:t},params:{id:n("ZenonMWThriftSendMessageMutation_facebookRelayOperation"),metadata:{},name:"ZenonMWThriftSendMessageMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("ZenonMWThriftSendMessageMutation",["CometRelayErrorHandling","Promise","RequestStreamBodyUtils","ZenonMWThriftMessageSerializer","ZenonMWThriftSendMessageMutation.graphql","asyncToGeneratorRuntime","cr:1012418","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,i){return new(s||(s=n("Promise")))(function(l,s){n("cr:1012418").commitMutation(i,{mutation:e!==void 0?e:e=n("ZenonMWThriftSendMessageMutation.graphql"),onCompleted:function(t){return l(t)},onError:function(t){return r("gkx")("20935")&&o("CometRelayErrorHandling").markErrorAsHandled(t),s(t)},variables:{input:{endpoint:JSON.stringify(t),message:o("RequestStreamBodyUtils").uint8ArrayToBase64(o("ZenonMWThriftMessageSerializer").serializeMWThriftMessage(a,!0))}}})})}function c(e){var t=e.rtc_web_send_multiway_thrift_signaling_message;if(t!=null&&t.response!=null){var n=o("RequestStreamBodyUtils").base64ToUint8Array(t.response),r=o("ZenonMWThriftMessageSerializer").deserializeMWThriftMessage(n,!0),a=r.messageBody,i=r.messageHeader;return{body:a,header:i}}return{body:null,header:null}}function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield u(e,t,n);return c(r)}),m.apply(this,arguments)}l.sendMessage=d}),98);
__d("ZenonValidateMWThriftMessage",["FBLogger","MultiwayCommonTypes","ZenonInfraActionsLogger","ZenonMWThriftMessageMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.messageHeader.type,n=o("ZenonMWThriftMessageMap").messageTypeToString(t);return e.messageHeader.serverInfoData==null&&t!=null&&t!==o("MultiwayCommonTypes").MessageType.JOIN?(r("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP][DROP] No remoteSignalingID in message: "+n}),r("FBLogger")("rtc_www").warn("[ZP][DROP] No remoteSignalingID in message: "+n),!1):!0}l.default=e}),98);
__d("ZenonGraphQLMWThriftMessageSender",["ChannelClientID","FBLogger","MultiwayCommonTypes","Promise","RpZenonBinaryThriftSignalingSitevarConfig","ZenonActorHooks","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageLogger","ZenonMWThriftMessageMap","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageTranslator","ZenonMWThriftSendMessageMutation","ZenonMWTranslatorUtils","ZenonValidateMWThriftMessage","asyncToGeneratorRuntime","err","filterNulls","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$3=e;var t=r("RpZenonBinaryThriftSignalingSitevarConfig").supported_message_types_mqtt.map(function(e){return o("ZenonMWThriftMessageMap").messageTypeFromString(e)});this.$4=new Set(r("filterNulls")(t))}var a=t.prototype;return a.handleResponse=function(t){var e=this.$1;if(e==null)throw r("FBLogger")("rtc_www").mustfixThrow("Should never have null message receiver");var n=t.header||null,a=t.body||null;if(n!=null&&a!=null){var i={messageBody:a,messageHeader:n};r("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("RECEIVED","GraphQL Thrift",i),o("ZenonMWThriftMessageReliabilityLogger").logReceivedMessage(i),this.$2&&this.$2({mwThriftMessage:i,name:"mwThriftMessageRecv"});var l=o("ZenonMWThriftMessageTranslator").toSignalingMessage(i);if(l==null)return;e(l),o("ZenonMWThriftMessageReliabilityLogger").logProcessingMessage(i)}},a.$5=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){o("ZenonMWThriftMessageReliabilityLogger").logSendingMessage(t),r("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("SENDING","GraphQL Thrift",t),this.$2&&o("ZenonMWThriftMessageLogger").logSentMessage(t,this.$2);try{var n=yield o("ZenonMWThriftSendMessageMutation").sendMessage(e,t,this.$3);o("ZenonMWThriftMessageReliabilityLogger").logSentMessage(t),this.$2&&this.$2({mwThriftMessage:t,name:"mwThriftMessageSent"}),this.handleResponse(n)}catch(e){var a=r("getErrorSafe")(e),i=a.message||"Message Send Error";o("ZenonMWThriftMessageReliabilityLogger").logSendMessageFailed(t,"[GraphQL Thrift] "+i);var l=o("ZenonMWThriftMessageMap").messageTypeToString(t.messageHeader.type);r("ZenonMWThriftMessageDebugLogger").logSendMultiwayThriftMessageFailure(i,l,a)}});function t(t,n){return e.apply(this,arguments)}return t})(),a.sendMessage=function(a){var t=o("ZenonMWThriftMessageTranslator").toMWThriftMessage(a);if(!t||!r("ZenonValidateMWThriftMessage")(t))return(e||(e=n("Promise"))).reject(r("err")("Invalid MW Thrift message"));if(t.messageHeader.type!=null&&!this.$4.has(t.messageHeader.type))return(e||(e=n("Promise"))).resolve();var i=t.messageHeader.type,l={appId:o("ZenonMWTranslatorUtils").getMWAppID(),deviceId:r("ChannelClientID").getID(),userId:a.getHeader().userInfo.userID};return l.userId!==o("ZenonActorHooks").ZenonActor.getAccountID()||i!==o("MultiwayCommonTypes").MessageType.DATA_MESSAGE?this.$5(l,t):(e||(e=n("Promise"))).reject(r("err")("GraphQL only sends DATA_MESSAGE for Page users"))},a.setMessageReceiver=function(t){this.$1=t},a.setLoggingEventHandler=function(t){this.$2=t},t})();l.default=s}),98);
__d("ZenonPeerID",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";var e="MW_PEER_ID";function u(t){return t.length>0||s(0,33504),t==="MW_PEER_ID"?e:(isNaN(t)===!1||s(0,33551,t),t)}function c(t){return isNaN(t)||t===e?null:t}l.ZenonMWPeerID=e,l.convertStringToPeerID=u,l.convertPeerIDForLogging=c}),98);
__d("ZenonLSCallStartEventManager",["ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonPeerID"],(function(t,n,r,o,a,i,l){"use strict";var e=["deviceID"],s=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,e.$ZenonLSCallStartEventManager$p_1={},e.$ZenonLSCallStartEventManager$p_2=!1,e.$ZenonLSCallStartEventManager$p_3=!1,babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.updateEventTimestamp=function(t){this.$ZenonLSCallStartEventManager$p_1[t]==null&&(this.$ZenonLSCallStartEventManager$p_1[t]=o("ZenonCallFalcoEventUtils").performanceNowParsed())},r.receivedFromInvite=function(){this.$ZenonLSCallStartEventManager$p_2=!0},r.receivedFromServer=function(){this.$ZenonLSCallStartEventManager$p_3=!0},r.getStartEventData=function(){var e=this.getCallInfo(),t=e.signalingID,n=babelHelpers.extends({},this.getTimestamps(),this.$ZenonLSCallStartEventManager$p_4());return t!==""&&(n.local_signaling_id=t),n},r.$ZenonLSCallStartEventManager$p_4=function(){var e=this.getCallInfo(),t=e.deviceID,n=e.localCallID,r=e.peerID,a=e.serverInfoData,i=e.signalingID;return babelHelpers.extends({connection_logging_id:i,local_call_id:n,peer_id:o("ZenonPeerID").convertPeerIDForLogging(r),protocol:"multiway"},a!=null&&{shared_call_id:a},{steady_time_ms:o("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:t})},r.getTimestamps=function(){return this.$ZenonLSCallStartEventManager$p_1},r.save=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.storeCallStartEventManager(n,r,this)},r.delete=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.removeLocalStorageObjects([{peerID:n,signalingID:r}])},r.toJsonString=function(){var e=this.getCallInfo(),t=e.signalingID,n={callInfo:e,connectionLoggingId:t,receivedFromInvite:this.$ZenonLSCallStartEventManager$p_2,receivedFromServer:this.$ZenonLSCallStartEventManager$p_3,timestamps:this.getTimestamps()};return JSON.stringify(n)},n.fromJsonString=function(r){var t;try{t=JSON.parse(r)}catch(e){return null}var o=t.callInfo,a=o.deviceID,i=babelHelpers.objectWithoutPropertiesLoose(o,e),l=new n(i);return l.$ZenonLSCallStartEventManager$p_2=t.receivedFromInvite,l.$ZenonLSCallStartEventManager$p_3=t.receivedFromServer,l.$ZenonLSCallStartEventManager$p_1=t.timestamps,l},n})(r("ZenonCallInfoManager"));l.default=s}),98);
__d("ZenonSDESKeyDetector",[],(function(t,n,r,o,a,i){"use strict";var e=/inline:\s*[0-9a-zA-z+/]{40}(\b|\s|$)/;function l(t){return e.test(JSON.stringify(t))}i.default=l}),66);
__d("ZenonUserActionLogger",["FBLogger","RtcWebUserActionsDebugFalcoEvent","RtcWebUserActionsFalcoEvent","ZenonDebugLogger","ZenonLoggingUtils","ZenonSDESKeyDetector"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=window.location.hostname.search("facebook")!==-1?"facebook":window.location.hostname.search("messenger")!==-1?"messenger_dot_com":null,u={logCheckpoint:function(t){u.logEvent(babelHelpers.extends({},t,{event:"checkpoint"}))},logClick:function(t){u.logEvent(babelHelpers.extends({},t,{event:"tap"}))},logError:function(t){u.logEvent(babelHelpers.extends({},t,{event:"error"}))},logEvent:function(t){var e,n;if(r("ZenonSDESKeyDetector")(t))throw r("FBLogger")("rtc_www").mustfixThrow("ZenonUserActionLogger event contains SDES crypto key! This log entry must be removed!");if(o("ZenonLoggingUtils").shouldAllowLogging()){var a=babelHelpers.extends({},t,{page:(e=t.page)!=null?e:s}),i=babelHelpers.extends({},a,{client_time:Date.now().toString()});r("RtcWebUserActionsDebugFalcoEvent").log(function(){return i}),r("RtcWebUserActionsFalcoEvent").log(function(){return i}),r("ZenonDebugLogger").getInstance().getLogHistory().log((n=t.event)!=null?n:"null",JSON.stringify(a))}},logImpression:function(t){u.logEvent(babelHelpers.extends({},t,{event:"impression"}))},logPreCallClick:function(t){u.logEvent(babelHelpers.extends({},t,{event:"tap"}))},logPreCallImpression:function(t){u.logEvent(babelHelpers.extends({},t,{event:"impression"}))},startTimer:function(n){var t=Date.now();e=e.set(n,t),u.logCheckpoint({checkpoint:n+"_timerStart"})},stopTimer:function(n){var t=n.checkpointName===void 0?n.timerName:n.checkpointName,r=n.event||{},o=function(n){var t=e.get(n);return t!=null?(e.delete(n),parseInt(Date.now()-t,10)):null},a=o(n.timerName);return u.logCheckpoint(babelHelpers.extends({},r,{checkpoint:t+"_timerEnd",event_time_elapsed:a==null?void 0:a.toString()})),parseInt(a,10)}};i.exports=u}),34);
__d("ZenonGenericLocalStorageStore",["CacheStorage","WebStorage","ZenonODSLogger","ZenonUserActionLogger","areEqual","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=2e3,c=3,d=(function(){function t(e,t,n){this.$1=e,this.$2=new(r("CacheStorage"))(t,n)}var n=t.prototype;return n.getLocalStorageObjects=function(){return this.$2.get(this.$1)||{}},n.removeLocalStorageObjects=function(t){this.mutateLocalStorageObjects(function(e){return t.forEach(function(t){var n=t.peerID,r=t.signalingID;e[n]&&e[n][r]&&(delete e[n][r],Object.entries(e[n]).length===0&&delete e[n])}),e})},n.mutateLocalStorageObjects=function(n,o,a,i){var t=this;o===void 0&&(o=c),a===void 0&&(a=!1),i===void 0&&(i=null);var l=this.getLocalStorageObjects(),s=this.getLocalStorageObjects(),d=n(l),m=this.getLocalStorageObjects();(e||(e=r("areEqual")))(s,m)?(this.$2.set(this.$1,d),this.logStorageError(this.$2.getLastSetException(),i)):o>0&&(a?r("setTimeout")(function(){t.mutateLocalStorageObjects(n,o-1,!0)},u):this.mutateLocalStorageObjects(n,o-1,!0))},n.logStorageError=function(t,n){t!=null&&(o("ZenonUserActionLogger").logError({call_id:n==null?void 0:n.signalingID,error_domain:"ZenonGenericLocalStorageStore_storeLocalStorageObjects",error_type:t.name,peer_id:n==null?void 0:n.peerID}),(s||(s=r("WebStorage"))).isLocalStorageQuotaExceeded()&&r("ZenonODSLogger").logCounter("local_storage_quota_exceeded"))},t})();l.default=d}),98);
__d("ZenonLSCallStartEventStore",["ZenonGenericLocalStorageStore","ZenonLSCallStartEventManager"],(function(t,n,r,o,a,i,l){"use strict";var e="localstorage",s="RTC_LS_CALL_START_",u="ls_call_start",c=3,d=(function(t){function n(){return t.call(this,u,e,s)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.retrieveCallStartEventManager=function(t,n){var e=this.getLocalStorageObjects(),o=e[t]?e[t][n]:null;return o?r("ZenonLSCallStartEventManager").fromJsonString(o.__d):null},o.storeCallStartEventManager=function(t,n,r){this.mutateLocalStorageObjects(function(e){return e[t]||(e[t]={}),e[t][n]={__d:r.toJsonString(),__t:Date.now(),__z:!0},e},c,!1,{peerID:t,signalingID:n})},n})(r("ZenonGenericLocalStorageStore")),m=new d;l.ZenonLSCallStartEventStoreInstance=m}),98);
__d("ZenonLSCallStartEventLogProcessor",["DateConsts","ZenonInfraActionsLogger","ZenonLSCallStartEventManager","ZenonLSCallStartEventStore","ZenonPeerID","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=10*o("DateConsts").MS_PER_SEC,s=(function(){function t(e){var t=e.data,n=e.updateLogIdentifiers;this.$2=null,this.$3=!1,this.$4=!1,t.peerID=o("ZenonPeerID").ZenonMWPeerID,this.$6=n,this.$5=t.peerID;var a=o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance.retrieveCallStartEventManager(t.peerID,t.signalingID);a?this.$1=a:this.$1=new(r("ZenonLSCallStartEventManager"))(t),n({localCallID:this.$1.getCallInfo().localCallID})}var a=t.prototype;return a.log=function(){this.$4||(this.$4=!0,this.$1.delete(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance))},a.processEvent=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=this;if(!this.$3)switch(t.name){case"atLeastOneParticipantAnswered":this.$1.updateEventTimestamp("answer_recv_ms"),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"connectionReady":this.$1.updateEventTimestamp("connection_ready_ms"),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"connectionStart":t.isIncomingConnection?this.$1.updateEventTimestamp("incoming_connection_start_ms"):this.$1.updateEventTimestamp("outgoing_connection_start_ms"),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"answerSent":this.$1.updateEventTimestamp("answer_sent_ms"),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"callEnded":this.$3=!0,this.$2!==null&&window.clearInterval(this.$2),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Uploading NSL call start summary"}),this.log();break;case"inviteSent":this.$1.updateEventTimestamp("invite_sent_ms"),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"mediaConnected":this.$1.updateEventTimestamp("network_ready_ms"),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"setRemoteSignalingID":this.$6({sharedCallID:t.remoteSignalingID}),this.$1.setSharedCallId(t.remoteSignalingID),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"answerSdpReceived":this.$1.receivedFromServer(),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"prAnswerSdpReceived":this.$1.receivedFromServer(),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"offerSdpReceived":this.$1.receivedFromInvite(),this.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance);break;case"startHeartbeat":this.$2===null&&(this.$2=window.setInterval(function(){n.$1.save(o("ZenonLSCallStartEventStore").ZenonLSCallStartEventStoreInstance)},e));break}});function a(e){return t.apply(this,arguments)}return a})(),t})(),u={LogProcessor:s};l.ZenonLSCallStartEventLogProcessor=s,l.ZenonLSCallStartEventLogProcessorConfig=u}),98);
__d("ResumableUploadService",["cr:720"],(function(t,n,r,o,a,i,l){l.default=n("cr:720")}),98);
__d("ZenonDeviceInfoHelper",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e=-1,l=!1,s={getBatteryStats:(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield s.internalGetWindow().navigator.getBattery;if(typeof t!="function")return{level:e,placeholder:!0,wasCharged:!1};var n=yield t.call(navigator);return n.charging?l=!0:n.onchargingchange=function(e){e.target.charging&&(l=!0),e.target.onchargingchange=null},{level:n.level*100,placeholder:!1,wasCharged:l}});function r(){return t.apply(this,arguments)}return r})(),internalGetWindow:function(){return window}},u=s;i.default=u}),66);
__d("ZenonLSCallSummary",["ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonDeviceInfoHelper","ZenonDismissReason","ZenonLoggingEventTypes","ZenonPeerID","asyncToGeneratorRuntime","performanceNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=["deviceID"],s,u=(function(t){function a(e){var n,a;return a=t.call(this,e)||this,a.$ZenonLSCallSummary$p_1={call_answered_time:"-1",call_connected_time:"-1",call_created_time:"-1",call_ended_time:"-1",last_updated_time:"-1"},a.$ZenonLSCallSummary$p_2=!1,a.$ZenonLSCallSummary$p_3=null,a.$ZenonLSCallSummary$p_6=null,a.$ZenonLSCallSummary$p_8=null,a.$ZenonLSCallSummary$p_9=null,a.$ZenonLSCallSummary$p_10=null,a.$ZenonLSCallSummary$p_11=null,a.$ZenonLSCallSummary$p_15=null,a.$ZenonLSCallSummary$p_19=!1,a.$ZenonLSCallSummary$p_12=e.callTrigger,a.$ZenonLSCallSummary$p_7=e.isVideo,a.$ZenonLSCallSummary$p_4=0,a.$ZenonLSCallSummary$p_14=(n=e.joinMode)!=null?n:o("ZenonLoggingEventTypes").ZenonJoinMode.Primary,a.$ZenonLSCallSummary$p_5=(s||(s=r("performanceNow")))(),a.setTimestamp("call_created_time"),a.updateLastUpdatedTime(),r("promiseDone")(a.updateBatteryStart()),a}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.setTimestamp=function(t){this.$ZenonLSCallSummary$p_1[t]==="-1"&&(this.$ZenonLSCallSummary$p_1[t]=String(this.$ZenonLSCallSummary$p_20()))},i.getTimestamps=function(){return this.$ZenonLSCallSummary$p_1},i.getExtraInfo=function(){var e={};return this.$ZenonLSCallSummary$p_9!=null&&!isNaN(this.$ZenonLSCallSummary$p_9)&&(e.battery_end_level=String(this.$ZenonLSCallSummary$p_9)),this.$ZenonLSCallSummary$p_8!=null&&!isNaN(this.$ZenonLSCallSummary$p_8)&&(e.battery_start_level=String(this.$ZenonLSCallSummary$p_8)),this.$ZenonLSCallSummary$p_10!=null&&(e.was_device_charged=this.$ZenonLSCallSummary$p_10),this.$ZenonLSCallSummary$p_11!=null&&(e.max_concurrent_connected_participant=this.$ZenonLSCallSummary$p_11),e},i.getVideoStats=function(){var e={};if(this.$ZenonLSCallSummary$p_6!=null){var t;if(isNaN(this.$ZenonLSCallSummary$p_6.ld)||(e.local_video_duration=String(this.$ZenonLSCallSummary$p_6.ld)),!isNaN((t=this.$ZenonLSCallSummary$p_6)==null?void 0:t.rd)){var n,r;e.remote_video_duration=String((n=(r=this.$ZenonLSCallSummary$p_6)==null?void 0:r.rd)!=null?n:0)}}return e},i.getEndCallStats=function(){var e={};if(this.$ZenonLSCallSummary$p_16!=null&&(e.end_call_reason=o("ZenonDismissReason").dismissToEndCallReason(this.$ZenonLSCallSummary$p_16)),this.$ZenonLSCallSummary$p_17!=null&&(e.end_call_subreason=this.$ZenonLSCallSummary$p_17),this.$ZenonLSCallSummary$p_19!=null&&(e.remote_ended=this.$ZenonLSCallSummary$p_19),this.$ZenonLSCallSummary$p_3!=null){var t;e.is_connected_end=(t=this.$ZenonLSCallSummary$p_21())!=null?t:!1}return e},i.getLoggingArgs=function(){var e,t=this.getCallInfo(),n=t.deviceID,r=t.peerID,a=t.serverInfoData,i=t.signalingID;return{call_id:i,conf_name:(e=this.$ZenonLSCallSummary$p_13)!=null?e:"",peer_id:o("ZenonPeerID").convertPeerIDForLogging(r),serv_info:a!=null?a:"",web_device_id:n}},i.getSummaryLoggingInfo=function(){var e,t=this.getCallInfo(),n=t.deviceID,r=t.isCaller,a=t.localCallID,i=t.peerID,l=t.serverInfoData,s=t.signalingID;return babelHelpers.extends({},this.getTimestamps(),this.getExtraInfo(),this.getVideoStats(),this.getEndCallStats(),l!=null&&{shared_call_id:l},{call_trigger:(e=this.$ZenonLSCallSummary$p_12)!=null?e:"",client_session_id:s==null?null:String(s),invite_requested_video:this.$ZenonLSCallSummary$p_7,is_caller:r,join_mode:String(this.$ZenonLSCallSummary$p_14),local_call_id:a,peer_id:o("ZenonPeerID").convertPeerIDForLogging(i),rtc_actor_id:this.$ZenonLSCallSummary$p_15,steady_time:o("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time:String(Date.now()),web_device_id:n})},i.onCallEscalated=function(){this.updateLastUpdatedTime()},i.onCallAccepted=function(t){this.$ZenonLSCallSummary$p_12=t,this.setTimestamp("call_answered_time"),this.updateLastUpdatedTime()},i.onCallConnected=function(){this.setTimestamp("call_connected_time"),this.updateLastUpdatedTime()},i.setMediaStats=function(t){this.$ZenonLSCallSummary$p_6=t.video,this.updateLastUpdatedTime()},i.setMaxConnectedParticipants=function(t){this.$ZenonLSCallSummary$p_11=o("ZenonCallFalcoEventUtils").nonNullIntNumber(t),this.updateLastUpdatedTime()},i.setRtcActorID=function(t){this.$ZenonLSCallSummary$p_15=t},i.unsetEndCallFields=function(){this.$ZenonLSCallSummary$p_18===!0&&(this.$ZenonLSCallSummary$p_16=null,this.$ZenonLSCallSummary$p_17=null,this.$ZenonLSCallSummary$p_19=null,this.$ZenonLSCallSummary$p_3=null,this.$ZenonLSCallSummary$p_1.call_ended_time="-1",this.$ZenonLSCallSummary$p_5=0,this.$ZenonLSCallSummary$p_18=null)},i.onCallEnded=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){this.$ZenonLSCallSummary$p_16=e,this.$ZenonLSCallSummary$p_17=r,this.$ZenonLSCallSummary$p_18=n,this.$ZenonLSCallSummary$p_19=t,this.$ZenonLSCallSummary$p_3==null&&(this.$ZenonLSCallSummary$p_3=this.$ZenonLSCallSummary$p_22()),yield this.updateBatteryEnd(),this.setTimestamp("call_ended_time"),this.updateLastUpdatedTime()});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),i.onPCStateChange=function(t){this.$ZenonLSCallSummary$p_2=t,this.updateLastUpdatedTime()},i.updateBatteryStart=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("ZenonDeviceInfoHelper").getBatteryStats(),t=e.level,n=e.placeholder;n!==!0&&(this.$ZenonLSCallSummary$p_8=parseInt(t,10))});function t(){return e.apply(this,arguments)}return t})(),i.updateBatteryEnd=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("ZenonDeviceInfoHelper").getBatteryStats(),t=e.level,n=e.placeholder,o=e.wasCharged;n!==!0&&(this.$ZenonLSCallSummary$p_9=parseInt(t,10),this.setDeviceCharged(o))});function t(){return e.apply(this,arguments)}return t})(),i.setDeviceCharged=function(t){this.$ZenonLSCallSummary$p_10!==!0&&(this.$ZenonLSCallSummary$p_10=t)},i.setConferenceName=function(t){this.$ZenonLSCallSummary$p_13=t,this.updateLastUpdatedTime()},i.getDeviceCharged=function(){return this.$ZenonLSCallSummary$p_10},a.fromJsonString=function(n){var t,r;try{r=JSON.parse(n)}catch(e){return null}var o=r.callInfo,i=o.deviceID,l=babelHelpers.objectWithoutPropertiesLoose(o,e),s=new a(l);return s.setDeviceID(i),s.$ZenonLSCallSummary$p_1=r.timestamps,s.$ZenonLSCallSummary$p_2=r.pcIsConnected,s.$ZenonLSCallSummary$p_3=r.endIsConnected,s.$ZenonLSCallSummary$p_16=r.endCallReason,s.$ZenonLSCallSummary$p_17=r.endCallSubreason,s.$ZenonLSCallSummary$p_19=r.isRemoteEnded,s.$ZenonLSCallSummary$p_7=r.isVideo,s.$ZenonLSCallSummary$p_15=(t=r.rtcActorID)!=null?t:null,s.$ZenonLSCallSummary$p_6={ld:parseInt(r.videoStats.local_video_duration,10),rd:parseInt(r.videoStats.remote_video_duration,10)},s.$ZenonLSCallSummary$p_8=parseInt(r.extraInfo.battery_start_level,10),s.$ZenonLSCallSummary$p_9=parseInt(r.extraInfo.battery_end_level,10),r.extraInfo.was_device_charged!=null&&(s.$ZenonLSCallSummary$p_10=r.extraInfo.was_device_charged),r.extraInfo.max_concurrent_connected_participant!=null&&(s.$ZenonLSCallSummary$p_11=r.extraInfo.max_concurrent_connected_participant),r.unsetOnRetrieve!=null&&(s.$ZenonLSCallSummary$p_18=r.unsetOnRetrieve),r.accumulatedCallTime!=null&&(s.$ZenonLSCallSummary$p_4=r.accumulatedCallTime),r.conferenceName!=null&&(s.$ZenonLSCallSummary$p_13=r.conferenceName),s},i.toJsonString=function(){var e={accumulatedCallTime:this.$ZenonLSCallSummary$p_20(),callInfo:this.getCallInfo(),conferenceName:this.$ZenonLSCallSummary$p_13,endCallReason:this.$ZenonLSCallSummary$p_16,endCallSubreason:this.$ZenonLSCallSummary$p_17,endIsConnected:this.$ZenonLSCallSummary$p_21(),extraInfo:this.getExtraInfo(),isRemoteEnded:this.$ZenonLSCallSummary$p_19,isVideo:this.$ZenonLSCallSummary$p_7,joinMode:this.$ZenonLSCallSummary$p_14,pcIsConnected:this.$ZenonLSCallSummary$p_22(),rtcActorID:this.$ZenonLSCallSummary$p_15,timestamps:this.getTimestamps(),unsetOnRetrieve:this.$ZenonLSCallSummary$p_18,videoStats:this.getVideoStats()};return JSON.stringify(e)},i.$ZenonLSCallSummary$p_20=function(){var e=(s||(s=r("performanceNow")))()-this.$ZenonLSCallSummary$p_5;return Math.floor(this.$ZenonLSCallSummary$p_4+e)},i.$ZenonLSCallSummary$p_21=function(){return this.$ZenonLSCallSummary$p_3==null?null:this.$ZenonLSCallSummary$p_3&&Number(this.$ZenonLSCallSummary$p_11)>1},i.$ZenonLSCallSummary$p_22=function(){return this.$ZenonLSCallSummary$p_2&&Number(this.$ZenonLSCallSummary$p_11)>1},i.updateLastUpdatedTime=function(){this.$ZenonLSCallSummary$p_1.last_updated_time=String(this.$ZenonLSCallSummary$p_20())},i.save=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.storeCallSummary(n,r,this)},i.remove=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.removeLocalStorageObjects([{peerID:n,signalingID:r}])},a})(r("ZenonCallInfoManager"));l.default=u}),98);
__d("ZenonLSCallSummaryStore",["ZenonGenericLocalStorageStore","ZenonLSCallSummary"],(function(t,n,r,o,a,i,l){"use strict";var e="localstorage",s="RTC_LS_CALL_SUMMARY_",u="ls_summary",c=3,d=(function(t){function n(){return t.call(this,u,e,s)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.retrieveCallSummary=function(t,n){var e=this.getLocalStorageObjects(),o=e[t]?e[t][n]:null;return o?r("ZenonLSCallSummary").fromJsonString(o.__d):null},o.storeCallSummary=function(t,n,r){this.mutateLocalStorageObjects(function(e){return e[t]||(e[t]={}),e[t][n]={__d:r.toJsonString(),__t:Date.now(),__z:!0},e},c,!1,{peerID:t,signalingID:n})},n})(r("ZenonGenericLocalStorageStore")),m=new d;l.ZenonLSCallSummaryStoreInstance=m}),98);
__d("ZenonLSCallSummaryLogProcessor",["DateConsts","LsRtcCallSummaryFalcoEvent","LsRtcTslogFalcoEvent","ODS","PersistedQueue","ResumableUploadService","URI","ZenonAuditedCheckpointLogId","ZenonDeviceId","ZenonDismissReason","ZenonInfraActionsLogger","ZenonLSCallSummary","ZenonLSCallSummaryStore","ZenonLoggingEventTypes","ZenonPeerID","asyncToGeneratorRuntime","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=10*o("DateConsts").MS_PER_SEC,c="tslog_upload_backend",d=500*1024*.6,m=(function(){function t(e){var t,n=e.data,a=e.updateLogIdentifiers;this.$2=null,this.$3=!1,this.$6=!1,n.peerID=o("ZenonPeerID").ZenonMWPeerID,this.$5=n.peerID,this.$4=(t=n.disableTsData)!=null?t:!1;var i=o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance.retrieveCallSummary(n.peerID,n.signalingID);i?(this.$1=i,this.$1.unsetEndCallFields(),this.$1.setDeviceID(o("ZenonDeviceId").getZenonLocalStorageDeviceIdWithFallback())):this.$1=new(r("ZenonLSCallSummary"))(n),n.conferenceName!=null&&this.$1.setConferenceName(n.conferenceName),this.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance),a&&a({localCallID:this.$1.getCallInfo().localCallID})}var a=t.prototype;return a.$7=function(t){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:t})},a.$8=function(t){var e,n=t.format,a=t.timeSeries;if(a==null||a.length===0){this.$7("Not sending empty TSLog data");return}this.$7("Sending TSLog data of length "+a.length);var i=(e=t.sequenceNumber)==null?void 0:e.toString(),l=babelHelpers.extends({},this.$1.getLoggingArgs(),{format:n,is_terminal:t.isTerminal,sequence_number:i,source:o("ZenonLoggingEventTypes").tslogSource,time_series:a});if(r("gkx")("25247")&&a.length>d){this.$7("Sending TSLog data through Upload Service");var u=new(s||(s=r("URI")))(window.location.href).getDomain().split(".").slice(-2).join("."),m=r("ResumableUploadService").create({consumer:c,serviceDomain:u}),p=new File([JSON.stringify(l)],"tslog");r("promiseDone")(m.resume(p))}else r("PersistedQueue").eventEmitter.emit("active",null),r("LsRtcTslogFalcoEvent").logImmediately(function(){return l})},a.processEvent=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=this;switch(t.name){case"logTSData":if(this.$4)return;this.$7("Preparing TSLog data for sending"),this.$8(t.serializedTSLog),this.$7("Sent TSLog data");break;case"mqttConnectionState":{this.$6=t.pending;break}}if(!this.$3)switch(t.name){case"callConnected":this.$1.onCallConnected(),this.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);break;case"callEnded":this.$3=!0,this.$2!==null&&window.clearInterval(this.$2),t.endCallReason===o("ZenonDismissReason").ZenonDismissReason.ClientError&&(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_client_crashes","zenon_client_error_end_call_reason"),yield this.$1.onCallEnded(t.endCallReason,t.isRemoteEnded,!1,t.endCallSubreason),this.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] ZenonLoggingEvent_callEnded: "+JSON.stringify({dismissReason:t.endCallReason,endCallReason:o("ZenonDismissReason").dismissToEndCallReason(t.endCallReason),endCallSubreason:t.endCallSubreason,mqttPending:this.$6})}),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Uploading NSL call summary"}),r("LsRtcCallSummaryFalcoEvent").logCritical(function(){return babelHelpers.extends({},n.$1.getSummaryLoggingInfo())}),this.$1.remove(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);break;case"callEscalated":this.$1.onCallEscalated(),this.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);break;case"callJoinRequest":this.$1.setRtcActorID(t.rtcActorID),this.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);break;case"peerConnectionStateChanged":this.$1.onPCStateChange(t.connected),this.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);break;case"setMaxConnectedParticipants":this.$1.setMaxConnectedParticipants(t.connectedParticipantsCount),this.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);break;case"setMediaStats":this.$1.setMediaStats(t.mediaStats),this.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);break;case"setRemoteSignalingID":this.$1.setSharedCallId(t.remoteSignalingID),t.conferenceName!==null&&t.conferenceName!==""&&this.$1.setConferenceName(t.conferenceName),this.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance);break;case"startHeartbeat":this.$2===null&&(this.$2=window.setInterval(function(){n.$1.save(o("ZenonLSCallSummaryStore").ZenonLSCallSummaryStoreInstance),n.$1.updateLastUpdatedTime()},u));break}});function a(e){return t.apply(this,arguments)}return a})(),t})(),p={LogProcessor:m};l.ZenonLSCallSummaryLogProcessor=m,l.ZenonLSCallSummaryLogProcessorConfig=p}),98);
__d("ZenonLSE2EEStatsManager",["E2eeMetricsSerializers","WebAssemblyMemorySingleton","ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonPeerID"],(function(t,n,r,o,a,i,l){"use strict";var e=["deviceID"],s=(function(t){function n(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,e.$ZenonLSE2EEStatsManager$p_1={group_e2ee_metrics:o("E2eeMetricsSerializers").GroupE2eeMetrics$DefaultConstructor(),p2p_e2ee_metrics:o("E2eeMetricsSerializers").P2pE2eeMetrics$DefaultConstructor(),track_specific_e2ee_stats:new Map,wasm_metrics:o("WebAssemblyMemorySingleton").WebAssemblyMemorySingleton.getMetrics()},babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.updateE2eeStats=function(t){this.$ZenonLSE2EEStatsManager$p_1=t},r.getGroupE2eeMetricsInFalcoShape=function(){var e=this.getCallInfo(),t=e.deviceID,n=e.localCallID,r=e.serverInfoData;return babelHelpers.extends({g_e2ee_web_wasm_final_memory_usage_kb:String(this.$ZenonLSE2EEStatsManager$p_1.wasm_metrics.memory_size_kb),g_e2ee_web_wasm_memory_reallocation_count:String(this.$ZenonLSE2EEStatsManager$p_1.wasm_metrics.memory_reallocation_count),local_call_id:n},r!=null&&{shared_call_id:r},{steady_time_ms:o("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:t},this.$ZenonLSE2EEStatsManager$p_1.group_e2ee_metrics)},r.getP2pE2eeMetricsInFalcoShape=function(){var e=this.getCallInfo(),t=e.deviceID,n=e.localCallID,r=e.peerID,a=e.serverInfoData;return babelHelpers.extends({local_call_id:n},a!=null&&{shared_call_id:a},{peer_id:o("ZenonPeerID").convertPeerIDForLogging(r),steady_time_ms:o("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:t},this.$ZenonLSE2EEStatsManager$p_1.p2p_e2ee_metrics)},r.save=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.storeE2eeStats(n,r,this)},r.delete=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.removeLocalStorageObjects([{peerID:n,signalingID:r}])},r.toJsonString=function(){var e={callInfo:this.getCallInfo(),groupE2eeMetrics:this.$ZenonLSE2EEStatsManager$p_1.group_e2ee_metrics,p2pE2eeMetrics:this.$ZenonLSE2EEStatsManager$p_1.p2p_e2ee_metrics,trackSpecificE2eeStatsWithTrackId:Array.from(this.$ZenonLSE2EEStatsManager$p_1.track_specific_e2ee_stats),wasmMetrics:this.$ZenonLSE2EEStatsManager$p_1.wasm_metrics};return JSON.stringify(e)},n.fromJsonString=function(r){var t;try{t=JSON.parse(r)}catch(e){return null}var o=t.callInfo,a=o.deviceID,i=babelHelpers.objectWithoutPropertiesLoose(o,e),l=new n(i);return l.$ZenonLSE2EEStatsManager$p_1={group_e2ee_metrics:t.groupE2eeMetrics,p2p_e2ee_metrics:t.p2pE2eeMetrics,track_specific_e2ee_stats:new Map(t.trackSpecificE2eeStatsWithTrackId),wasm_metrics:t.wasmMetrics},l},n})(r("ZenonCallInfoManager"));l.default=s}),98);
__d("ZenonLSE2EEStore",["ZenonGenericLocalStorageStore","ZenonLSE2EEStatsManager"],(function(t,n,r,o,a,i,l){"use strict";var e="localstorage",s="RTC_LS_E2EE_STATS_",u="ls_e2ee_stats",c=3,d=(function(t){function n(){return t.call(this,u,e,s)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.retrieveE2eeStats=function(t,n){var e=this.getLocalStorageObjects(),o=e[t]?e[t][n]:null;return o?r("ZenonLSE2EEStatsManager").fromJsonString(o.__d):null},o.storeE2eeStats=function(t,n,r){this.mutateLocalStorageObjects(function(e){return e[t]||(e[t]={}),e[t][n]={__d:r.toJsonString(),__t:Date.now(),__z:!0},e},c,!1,{peerID:t,signalingID:n})},n})(r("ZenonGenericLocalStorageStore")),m=new d;l.ZenonLSE2EEStoreInstance=m}),98);
__d("ZenonLSE2EEStatsLogProcessor",["DateConsts","LsRtcGroupE2eeFalcoEvent","LsRtcP2pE2eeFalcoEvent","ZenonInfraActionsLogger","ZenonLSE2EEStatsManager","ZenonLSE2EEStore","ZenonPeerID","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=10*o("DateConsts").MS_PER_SEC,s=(function(){function t(e){var t=e.data,n=e.updateLogIdentifiers;this.$2=null,this.$3=!1,t.peerID=o("ZenonPeerID").ZenonMWPeerID,this.$4=t.peerID;var a=o("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance.retrieveE2eeStats(t.peerID,t.signalingID);a?this.$1=a:this.$1=new(r("ZenonLSE2EEStatsManager"))(t),n({localCallID:this.$1.getCallInfo().localCallID})}var a=t.prototype;return a.processEvent=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=this;if(!this.$3)switch(t.name){case"updateE2EEStats":this.$1.updateE2eeStats(t.e2eeStats),this.$1.save(o("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance);break;case"setRemoteSignalingID":this.$1.setSharedCallId(t.remoteSignalingID),this.$1.save(o("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance);break;case"startHeartbeat":this.$2===null&&(this.$2=window.setInterval(function(){n.$1.save(o("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance)},e));break;case"callEnded":this.$3=!0,this.$2!==null&&window.clearInterval(this.$2),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Uploading NSL E2EE summary"}),r("LsRtcGroupE2eeFalcoEvent").logCritical(function(){return n.$1.getGroupE2eeMetricsInFalcoShape()}),r("LsRtcP2pE2eeFalcoEvent").logCritical(function(){return n.$1.getP2pE2eeMetricsInFalcoShape()}),this.$1.delete(o("ZenonLSE2EEStore").ZenonLSE2EEStoreInstance);break}});function a(e){return t.apply(this,arguments)}return a})(),t})(),u={LogProcessor:s};l.ZenonLSE2EEStatsLogProcessor=s,l.ZenonLSE2EEStatsLogProcessorConfig=u}),98);
__d("ZenonLSPeerConnectionSummary",["ZenonCallFalcoEventUtils","ZenonCallInfoManager","ZenonIceStatsParser","ZenonLoggingEventTypes","ZenonMWMessageTypes","ZenonPeerID","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e=["deviceID"],s,u=(function(t){function n(e){var n;return n=t.call(this,e)||this,n.$ZenonLSPeerConnectionSummary$p_1={CoreAudioMetrics:{isstall:"0",voice_detect_pct:[]},CoreVideoMetrics:{screen:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}},video:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}}},DebugAudioMetrics:{NetworkReceive:{}},audio:{echo_confidence:{}},dataChannelMetrics:{},ecv:{},extraInfo:{},receiver:{},receiver_pct:{audio:{}},receiver_stalls:{screen_recv_stalls:{recv_decode_stall:{is_stall:"0"},recv_no_bytes_stall:{is_stall:"0"},recv_render_stall:{is_stall:"0"}},video_recv_stalls:{recv_decode_stall:{is_stall:"0"},recv_no_bytes_stall:{is_stall:"0"},recv_render_stall:{is_stall:"0"}}},sender:{},sender_pct:{screen:{},video:{}},video:{}},n.$ZenonLSPeerConnectionSummary$p_2={},n.$ZenonLSPeerConnectionSummary$p_3={},n.$ZenonLSPeerConnectionSummary$p_5=-1,n.$ZenonLSPeerConnectionSummary$p_8=null,n.$ZenonLSPeerConnectionSummary$p_9=new Map,n.$ZenonLSPeerConnectionSummary$p_10="unknown",n.$ZenonLSPeerConnectionSummary$p_6=(s||(s=r("performanceNow")))(),n.$ZenonLSPeerConnectionSummary$p_4=0,n.$ZenonLSPeerConnectionSummary$p_7=null,n}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.$ZenonLSPeerConnectionSummary$p_11=function(){var e,t=this,n="",r=0,a=0,i=0,l=0;return Object.keys((e=this.$ZenonLSPeerConnectionSummary$p_1.dataChannelMetrics)!=null?e:{}).forEach(function(e){var o=t.$ZenonLSPeerConnectionSummary$p_1.dataChannelMetrics[e];o!=null&&(n+=o.label+":"+o.bytes_sent+":"+o.bytes_received+":"+o.messages_sent+":"+o.messages_received+",",r+=Number(o.bytes_sent),a+=Number(o.bytes_received),i+=Number(o.messages_sent),l+=Number(o.messages_received))}),{data_channel_total_bytes_recv:o("ZenonCallFalcoEventUtils").nonNullIntNumber(a),data_channel_total_bytes_sent:o("ZenonCallFalcoEventUtils").nonNullIntNumber(r),data_channel_total_msg_recv:o("ZenonCallFalcoEventUtils").nonNullIntNumber(l),data_channel_total_msg_sent:o("ZenonCallFalcoEventUtils").nonNullIntNumber(i),data_channel_type:"SCTP",sctp_per_channel_stats_raw:n}},a.$ZenonLSPeerConnectionSummary$p_12=function(){var e=this.$ZenonLSPeerConnectionSummary$p_1.sender,t=e.codec,n=t===void 0?{}:t,r={gen0_ice_sent_host:o("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_2.host),gen0_ice_sent_relay:o("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_2.relay),gen0_ice_sent_srflx:o("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_2.srflx)},a=n.www;return a!=null&&(r.audio_send_codec=String(a)),this.$ZenonLSPeerConnectionSummary$p_13(r,"audio_send_bytes_sent",e.bytes),this.$ZenonLSPeerConnectionSummary$p_13(r,"audio_send_level_count",e.taulc),this.$ZenonLSPeerConnectionSummary$p_13(r,"audio_send_level_sum",e.tx_sum_lvl),this.$ZenonLSPeerConnectionSummary$p_13(r,"audio_send_packets_sent",e.psent),this.$ZenonLSPeerConnectionSummary$p_13(r,"avg_video_uplink_bandwidth_estimate",e.ube_avg),this.$ZenonLSPeerConnectionSummary$p_13(r,"transport_conn_rtt_avg",e.avgrtt),r},a.$ZenonLSPeerConnectionSummary$p_13=function(t,n,r){r!=null&&(t[n]=o("ZenonCallFalcoEventUtils").truncateNumber(r))},a.$ZenonLSPeerConnectionSummary$p_14=function(){var e,t,n,r=(e=this.$ZenonLSPeerConnectionSummary$p_1.video.sender)==null?void 0:e.ss,o=(t=r==null?void 0:r.frames)!=null?t:0,a=(n=r==null?void 0:r.eqps)!=null?n:0,i=o>0&&a>0?a/o:null,l={};return this.$ZenonLSPeerConnectionSummary$p_15(l,"avg_video_actual_encode_bitrate_ss",r==null?void 0:r.avbr),this.$ZenonLSPeerConnectionSummary$p_15(l,"avg_video_uplink_bandwidth_estimate_ss",r==null?void 0:r.avbw),this.$ZenonLSPeerConnectionSummary$p_15(l,"video_send_duration_ss",r==null?void 0:r.dur),this.$ZenonLSPeerConnectionSummary$p_15(l,"video_send_frames_send_to_encoder_ss",r==null?void 0:r.eiframes),this.$ZenonLSPeerConnectionSummary$p_15(l,"video_send_total_input_pixel_ss",r==null?void 0:r.video_sum_capture_pixel),this.$ZenonLSPeerConnectionSummary$p_15(l,"video_send_total_output_pixel_ss",r==null?void 0:r.video_sum_encoded_pixel),this.$ZenonLSPeerConnectionSummary$p_15(l,"video_send_frames_encoded_ss",r==null?void 0:r.frames),this.$ZenonLSPeerConnectionSummary$p_15(l,"video_send_qp_sum_ss",i),l},a.$ZenonLSPeerConnectionSummary$p_15=function(t,n,r){r!=null&&(t[n]=o("ZenonCallFalcoEventUtils").truncateNumber(r))},a.$ZenonLSPeerConnectionSummary$p_16=function(){var e=this.$ZenonLSPeerConnectionSummary$p_1.video.bwe,t={};return this.$ZenonLSPeerConnectionSummary$p_17(t,"avg_video_actual_encode_bitrate",e==null?void 0:e.avg_enc_bitrate),this.$ZenonLSPeerConnectionSummary$p_17(t,"avg_video_actual_encode_bitrate_ss",e==null?void 0:e.avg_enc_bitrate_ss),this.$ZenonLSPeerConnectionSummary$p_17(t,"avg_video_retransmit_bitrate",e==null?void 0:e.avg_retrans_bitrate),this.$ZenonLSPeerConnectionSummary$p_17(t,"avg_video_transmit_bitrate",e==null?void 0:e.avg_trans_bitrate),this.$ZenonLSPeerConnectionSummary$p_17(t,"avg_video_uplink_bandwidth_estimate",e==null?void 0:e.avg_send_bw),t},a.$ZenonLSPeerConnectionSummary$p_17=function(t,n,r){r!=null&&(t[n]=o("ZenonCallFalcoEventUtils").truncateNumber(r))},a.$ZenonLSPeerConnectionSummary$p_18=function(){var e,t=(e=this.$ZenonLSPeerConnectionSummary$p_1.sender_pct.video)==null?void 0:e.vqs,n={};return(t==null?void 0:t.avg)!=null&&(n.video_send_quality_score=o("ZenonCallFalcoEventUtils").truncateNumber(t==null?void 0:t.avg)),n},a.$ZenonLSPeerConnectionSummary$p_19=function(){var e=this.$ZenonLSPeerConnectionSummary$p_1.video.sender,t={video_send_codec:e==null?void 0:e.ename};return this.$ZenonLSPeerConnectionSummary$p_20(t,"video_recv_firs_sent",e==null?void 0:e.fir),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_recv_nacks_sent",e==null?void 0:e.nack),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_recv_plis_sent",e==null?void 0:e.pli),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_frame_height",e==null?void 0:e.ah),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_frame_height_input",e==null?void 0:e.ch),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_frame_width",e==null?void 0:e.aw),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_frame_width_input",e==null?void 0:e.cw),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_frames_captured",e==null?void 0:e.fcap),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_frames_encoded",e==null?void 0:e.frames),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_frames_sent",e==null?void 0:e.fcsn),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_frames_send_to_encoder",e==null?void 0:e.eiframes),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_capture_duration_ms",this.$ZenonLSPeerConnectionSummary$p_1.video.ld),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_duration_blur",e==null?void 0:e.video_blur_dur),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_key_frames_encoded",e==null?void 0:e.kframes),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_packets_sent",e==null?void 0:e.psent),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_qp_sum",e==null?void 0:e.eqps),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_total_input_pixel",e==null?void 0:e.video_sum_capture_pixel),this.$ZenonLSPeerConnectionSummary$p_20(t,"video_send_total_output_pixel",e==null?void 0:e.video_sum_encoded_pixel),t},a.$ZenonLSPeerConnectionSummary$p_20=function(t,n,r){r!=null&&(t[n]=o("ZenonCallFalcoEventUtils").truncateNumber(r))},a.$ZenonLSPeerConnectionSummary$p_21=function(){var e,t=this.$ZenonLSPeerConnectionSummary$p_1.video.receiver,n={video_recv_codec:t==null?void 0:t.dname};this.$ZenonLSPeerConnectionSummary$p_22(n,"audio_recv_jitter_buffer_frames_assembled",t==null?void 0:t.jtasb),this.$ZenonLSPeerConnectionSummary$p_22(n,"audio_recv_jitter_buffer_frames_out",t==null?void 0:t.jtfrm),this.$ZenonLSPeerConnectionSummary$p_22(n,"audio_recv_jitter_buffer_keyframes_out",t==null?void 0:t.jtkey),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_agg_bytes_decoded",t==null?void 0:t.dec_bytes),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_agg_packets_lost",t==null?void 0:t.plost),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_agg_packets_recv",t==null?void 0:t.precv),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_av_sync_abs",t==null?void 0:t.avabs),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_frame_height",t==null?void 0:t.rh),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_frame_width",t==null?void 0:t.rw),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_frames_decoded",t==null?void 0:t.frd),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_freeze_count",t==null?void 0:t.frcnt),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_freeze_duration",t==null?void 0:t.frdur),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_freeze_duration_above_500_ms",t==null?void 0:t.frdur500),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_freeze_duration_above_500_ms_v2",t==null?void 0:t.frdur500),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_pause_count",t==null?void 0:t.pact),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_pause_duration_ms",t==null?void 0:t.padur),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_qp_sum",t==null?void 0:t.qps),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_total_pixels_decoded",t==null?void 0:t.agg_video_sum_decoded_pixel),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_union_decode_time_ms",t==null?void 0:t.dec_time),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_send_firs_recv",t==null?void 0:t.fir),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_send_nacks_recv",t==null?void 0:t.nack),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_send_plis_recv",t==null?void 0:t.pli),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_weighted_vqs",t==null||(e=t.vqs)==null?void 0:e.avg);var r=t==null?void 0:t.dec_time_all_streams,o=t==null?void 0:t.dec_frame;return this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_agg_decode_time_ms",r),this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_agg_frames_decoded",o),r!=null&&r>0&&o!=null&&o>0&&this.$ZenonLSPeerConnectionSummary$p_22(n,"video_recv_framerate_decoded",o*1e3/r),n},a.$ZenonLSPeerConnectionSummary$p_23=function(){var e,t=(e=this.$ZenonLSPeerConnectionSummary$p_1.video.receiver)==null?void 0:e.ss_recv,n={};return this.$ZenonLSPeerConnectionSummary$p_24(n,"video_recv_duration_ss",t==null?void 0:t.ss_recv_dur),n},a.$ZenonLSPeerConnectionSummary$p_24=function(t,n,r){r!=null&&(t[n]=o("ZenonCallFalcoEventUtils").truncateNumber(r))},a.$ZenonLSPeerConnectionSummary$p_25=function(){var e,t,n,r=(e=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null||(e=e.video_recv_stalls)==null?void 0:e.recv_no_bytes_stall,o=(t=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null||(t=t.video_recv_stalls)==null?void 0:t.recv_decode_stall,a=(n=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null||(n=n.video_recv_stalls)==null?void 0:n.recv_render_stall,i={};if(r){var l=r.is_stall,s=r.sdur,u=r.nstall;l!=null&&(i.video_recv_byte_received_is_stalled=String(l)),s!=null&&(i.video_recv_byte_received_total_stall_duration_ms=String(s)),u!=null&&(i.video_recv_byte_received_total_stalls=String(u))}if(o){var c=o.is_stall,d=o.sdur,m=o.nstall;c!=null&&(i.video_recv_decoder_is_stalled=String(c)),d!=null&&(i.video_recv_decoder_total_stall_duration_ms=String(d)),m!=null&&(i.video_recv_decoder_total_stalls=String(m))}if(a){var p=a.is_stall,_=a.sdur,f=a.nstall;p!=null&&(i.video_render_is_stalled=String(p)),_!=null&&(i.video_render_total_stall_duration_ms=String(_)),f!=null&&(i.video_render_total_stalls=String(f))}return i},a.$ZenonLSPeerConnectionSummary$p_26=function(){var e,t=(e=this.$ZenonLSPeerConnectionSummary$p_1.receiver_stalls)==null||(e=e.screen_recv_stalls)==null?void 0:e.recv_decode_stall,n={};if(t){var r=t.is_stall,o=t.sdur,a=t.nstall;r!=null&&(n.screen_share_recv_decoder_is_stalled=String(r)),o!=null&&(n.screen_share_recv_decoder_total_stall_duration_ms=String(o)),a!=null&&(n.screen_share_recv_decoder_total_stalls=String(a))}return n},a.$ZenonLSPeerConnectionSummary$p_22=function(t,n,r){r!=null&&(t[n]=o("ZenonCallFalcoEventUtils").truncateNumber(r))},a.$ZenonLSPeerConnectionSummary$p_27=function(){var e,t,n,r=this.$ZenonLSPeerConnectionSummary$p_1.DebugAudioMetrics.NetworkReceive.jb_nm,o=r==null||(e=r.neteq)==null?void 0:e.meanWait,a=r==null||(t=r.speech_expand_rate)==null?void 0:t.avg,i=r==null||(n=r.speech_expand_rate)==null?void 0:n.M,l={};return o!=null&&(l.audio_recv_neteq_mean_wait_ms=String(o)),a!=null&&(l.audio_recv_neteq_speech_expand_rate_avg=String(a)),i!=null&&(l.audio_recv_neteq_speech_expand_rate_max=String(i)),l},a.$ZenonLSPeerConnectionSummary$p_28=function(){var e=this.$ZenonLSPeerConnectionSummary$p_1.CoreAudioMetrics,t=e.audio_device,n=e.isstall,r=e.sdur,o=e.astall,a={};return t!=null&&(a.audio_device=String(t)),n!=null&&(a.audio_device_is_stalled=String(n)),r!=null&&(a.audio_device_stall_duration=String(r)),o!=null&&(a.audio_device_total_stall=String(o)),a},a.$ZenonLSPeerConnectionSummary$p_29=function(){var e,t,n,r,a,i,l={};if(((e=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:e.ecv_neteq_wait_time_ms)!=null){var s;l.ecv_neteq_wait_time_ms=o("ZenonCallFalcoEventUtils").truncateNumber(Number((s=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:s.ecv_neteq_wait_time_ms))}if(((t=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:t.ecv_rtt_ms)!=null){var u;l.ecv_rtt_ms=o("ZenonCallFalcoEventUtils").truncateNumber(Number((u=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:u.ecv_rtt_ms))}if(((n=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:n.ecv_plccng_v2)!=null){var c;l.ecv_plccng_v2=o("ZenonCallFalcoEventUtils").truncateNumber(Number((c=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:c.ecv_plccng_v2))}if(((r=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:r.ecv_video_freeze_duration_above_500_ms_v2)!=null){var d;l.ecv_video_freeze_duration_above_500_ms_v2=o("ZenonCallFalcoEventUtils").truncateNumber(Number((d=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:d.ecv_video_freeze_duration_above_500_ms_v2))}if(((a=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:a.ecv_av_sync_above_1000_ms)!=null){var m;l.ecv_av_sync_above_1000_ms=o("ZenonCallFalcoEventUtils").truncateNumber(Number((m=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:m.ecv_av_sync_above_1000_ms))}if(((i=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:i.ecv_decoded_bitrate_duration_sum)!=null){var p;l.ecv_decoded_bitrate_duration_sum=o("ZenonCallFalcoEventUtils").truncateNumber(Number((p=this.$ZenonLSPeerConnectionSummary$p_1.ecv)==null?void 0:p.ecv_decoded_bitrate_duration_sum))}return l},a.$ZenonLSPeerConnectionSummary$p_30=function(){var e=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.video.capture_stall,t=e.is_stall,n=e.last_sdur,r=e.sdur,o=e.nstall,a=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.video.encode_stall,i=a.is_stall,l=a.last_sdur,s=a.sdur,u=a.nstall,c=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.video.sent_stall,d=c.is_stall,m=c.last_sdur,p=c.sdur,_=c.nstall,f={};return t!=null&&(f.video_device_capture_is_stalled=String(t)),n!=null&&(f.video_device_capture_last_stall_duration_ms=String(n)),r!=null&&(f.video_device_capture_total_stall_duration_ms=String(r)),o!=null&&(f.video_device_capture_total_stalls=String(o)),i!=null&&(f.video_encode_is_stalled=String(i)),l!=null&&(f.video_encode_last_stall_duration_ms=String(l)),s!=null&&(f.video_encode_total_stall_duration_ms=String(s)),u!=null&&(f.video_encode_total_stalls=String(u)),d!=null&&(f.video_send_is_stalled=String(d)),m!=null&&(f.video_send_last_stall_duration_ms=String(m)),p!=null&&(f.video_send_total_stall_duration_ms=String(p)),_!=null&&(f.video_send_total_stalls=String(_)),f},a.$ZenonLSPeerConnectionSummary$p_31=function(){var e,t,n,r,a,i,l,s,u=this.$ZenonLSPeerConnectionSummary$p_1,c=u.receiver,d=u.receiver_pct,m=null;c.codec!=null&&(m=String(Object.values(c.codec).pop()));var p={gen0_ice_received_host:o("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_3.host),gen0_ice_received_relay:o("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_3.relay),gen0_ice_received_srflx:o("ZenonCallFalcoEventUtils").nonNullIntNumber(this.$ZenonLSPeerConnectionSummary$p_3.srflx)};return m!=null&&(p.audio_recv_codec=String(m)),this.$ZenonLSPeerConnectionSummary$p_32(p,"audio_ctp_latency_avg_us",(e=d.audio.jbd)==null?void 0:e.avg,(t=d.audio.rtt)==null?void 0:t.avg),this.$ZenonLSPeerConnectionSummary$p_32(p,"audio_ctp_latency_p5_us",(n=d.audio.jbd)==null?void 0:n.p5,(r=d.audio.rtt)==null?void 0:r.p5),this.$ZenonLSPeerConnectionSummary$p_32(p,"audio_ctp_latency_p50_us",(a=d.audio.jbd)==null?void 0:a.p50,(i=d.audio.rtt)==null?void 0:i.p50),this.$ZenonLSPeerConnectionSummary$p_32(p,"audio_ctp_latency_p95_us",(l=d.audio.jbd)==null?void 0:l.p95,(s=d.audio.rtt)==null?void 0:s.p95),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_bytes_recv",c.bytes),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_concealed_samples",c.sp_c),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_fec_packets_discarded",c.fecpd),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_fec_packets_received",c.fecpr),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_jitter",c.jitter),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_jitter_buffer_flushes",c.dec_pack_flush),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_level_count",c.taulc),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_jitter_buffer_emitted_count",c.jbec),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_jitter_buffer_delay",c.jbd),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_level_sum",c.rx_sum_lvl),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_total_samples_duration",c.sp_dur),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_total_samples_received",c.sp_r),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_neteq_accelerate",c.dec_ar),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_neteq_normal",c.dec_normal),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_neteq_operations",c.neteq_calls),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_neteq_plc",c.dec_plc),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_neteq_plccng",c.dec_plc_cng),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_neteq_preemptive_expand",c.dec_per),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_packets_lost",c.plost),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_packets_recv",c.precv),this.$ZenonLSPeerConnectionSummary$p_33(p,"audio_recv_silent_concealed_samples",c.sp_sc),p},a.$ZenonLSPeerConnectionSummary$p_34=function(){var e,t={},n=(e=this.$ZenonLSPeerConnectionSummary$p_1.video.sender)==null?void 0:e.ss;if((n==null?void 0:n.dur)!=null&&(n==null?void 0:n.dur)>0){var r=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.screen.capture_stall,o=r.is_stall,a=r.sdur,i=r.nstall,l=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.screen.encode_stall,s=l.is_stall,u=l.sdur,c=l.nstall,d=this.$ZenonLSPeerConnectionSummary$p_1.CoreVideoMetrics.screen.sent_stall,m=d.is_stall,p=d.sdur,_=d.nstall;o!=null&&(t.screen_share_capture_is_stalled=String(o)),a!=null&&(t.screen_share_capture_total_stall_duration_ms=String(a)),i!=null&&(t.screen_share_capture_total_stalls=String(i)),s!=null&&(t.screen_share_encode_is_stalled=String(s)),u!=null&&(t.screen_share_encode_total_stall_duration_ms=String(u)),c!=null&&(t.screen_share_encode_total_stalls=String(c)),m!=null&&(t.screen_share_send_is_stalled=String(m)),p!=null&&(t.screen_share_send_total_stall_duration_ms=String(p)),_!=null&&(t.screen_share_send_total_stalls=String(_))}return t},a.$ZenonLSPeerConnectionSummary$p_33=function(t,n,r){r!=null&&(t[n]=o("ZenonCallFalcoEventUtils").truncateNumber(r))},a.$ZenonLSPeerConnectionSummary$p_35=function(){var e,t,n,r,o=this.$ZenonLSPeerConnectionSummary$p_1.extraInfo,a=o.localIceCandidate,i=o.remoteIceCandidate;return{relay_protocol:a==null?void 0:a.relayProtocol,transport_conn_type:"l:"+((e=a==null?void 0:a.candidateType)!=null?e:"")+"-"+((t=a==null?void 0:a.protocol)!=null?t:"")+";r:"+((n=i==null?void 0:i.candidateType)!=null?n:"")+"-"+((r=i==null?void 0:i.protocol)!=null?r:"")}},a.$ZenonLSPeerConnectionSummary$p_36=function(){var e=this.$ZenonLSPeerConnectionSummary$p_9,t={},n=0,r=!1,a=0,i=0;if(e.forEach(function(e,t){r!==e&&(e?n>0&&(i++,a+=t-n,n=0):n=t,r=e)}),n>0){var l=this.$ZenonLSPeerConnectionSummary$p_5;l>-1&&l>n&&(i++,a+=l-n)}return t.transport_num_gaps=o("ZenonCallFalcoEventUtils").nonNullIntNumber(i),t.transport_total_gap_duration_ms=o("ZenonCallFalcoEventUtils").nonNullIntNumber(a),this.$ZenonLSPeerConnectionSummary$p_8!=null&&(t.transport_connected=this.$ZenonLSPeerConnectionSummary$p_8?"1":"0"),t},a.$ZenonLSPeerConnectionSummary$p_37=function(){var e,t={};return t.audio_send_echo_confidence=(e=this.$ZenonLSPeerConnectionSummary$p_1.audio)==null||(e=e.echo_confidence)==null?void 0:e.audio_send_echo_confidence,t},a.onCallEnded=function(){this.$ZenonLSPeerConnectionSummary$p_5=this.$ZenonLSPeerConnectionSummary$p_38(),this.$ZenonLSPeerConnectionSummary$p_8==null&&(this.$ZenonLSPeerConnectionSummary$p_8=this.$ZenonLSPeerConnectionSummary$p_7)},a.$ZenonLSPeerConnectionSummary$p_32=function(t,n,r,a){var e=0;r!=null&&(e+=r),a!=null&&(e+=a/2),e>0&&(t[n]=o("ZenonCallFalcoEventUtils").truncateNumber(e))},a.getPeerConnectionSummary=function(){var e=this.getCallInfo(),t=e.deviceID,n=e.localCallID,r=e.peerID,a=e.serverInfoData,i=e.signalingID;return babelHelpers.extends({},this.$ZenonLSPeerConnectionSummary$p_11(),this.$ZenonLSPeerConnectionSummary$p_28(),this.$ZenonLSPeerConnectionSummary$p_12(),this.$ZenonLSPeerConnectionSummary$p_31(),this.$ZenonLSPeerConnectionSummary$p_14(),this.$ZenonLSPeerConnectionSummary$p_16(),this.$ZenonLSPeerConnectionSummary$p_18(),this.$ZenonLSPeerConnectionSummary$p_19(),this.$ZenonLSPeerConnectionSummary$p_21(),this.$ZenonLSPeerConnectionSummary$p_23(),this.$ZenonLSPeerConnectionSummary$p_27(),this.$ZenonLSPeerConnectionSummary$p_36(),this.$ZenonLSPeerConnectionSummary$p_29(),this.$ZenonLSPeerConnectionSummary$p_30(),this.$ZenonLSPeerConnectionSummary$p_34(),this.$ZenonLSPeerConnectionSummary$p_25(),this.$ZenonLSPeerConnectionSummary$p_26(),this.$ZenonLSPeerConnectionSummary$p_35(),this.$ZenonLSPeerConnectionSummary$p_37(),a!=null&&{shared_call_id:a},{connection_logging_id:i,local_call_id:n,media_path:this.$ZenonLSPeerConnectionSummary$p_10,peer_id:o("ZenonPeerID").convertPeerIDForLogging(r),protocol:"multiway",steady_time_ms:o("ZenonCallFalcoEventUtils").performanceNowParsed(),system_time_ms:String(Date.now()),web_device_id:t})},a.$ZenonLSPeerConnectionSummary$p_38=function(){var e=(s||(s=r("performanceNow")))()-this.$ZenonLSPeerConnectionSummary$p_6;return Math.floor(this.$ZenonLSPeerConnectionSummary$p_4+e)},a.updateIceInfo=function(t,n){var e=n===o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send?this.$ZenonLSPeerConnectionSummary$p_2:this.$ZenonLSPeerConnectionSummary$p_3,r=o("ZenonIceStatsParser").extractIceInfo(t);r.forEach(function(t){var n=t.gen,r=t.type;n===0&&(e[r]==null?e[r]=1:e[r]++)})},a.onPCStateChange=function(t){this.$ZenonLSPeerConnectionSummary$p_7!==t&&(this.$ZenonLSPeerConnectionSummary$p_7=t,this.$ZenonLSPeerConnectionSummary$p_9.set(this.$ZenonLSPeerConnectionSummary$p_38(),t))},a.$ZenonLSPeerConnectionSummary$p_39=function(t){switch(t){case o("ZenonMWMessageTypes").ZenonMWMediaPath.SFU:return"sfu";case o("ZenonMWMessageTypes").ZenonMWMediaPath.P2P:return"p2p";case o("ZenonMWMessageTypes").ZenonMWMediaPath.UNKNOWN:default:return"unknown"}},a.setMediaPath=function(t){this.$ZenonLSPeerConnectionSummary$p_10=this.$ZenonLSPeerConnectionSummary$p_39(t)},a.setMediaStats=function(t){this.$ZenonLSPeerConnectionSummary$p_1=t},a.save=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.storePeerConnectionSummary(n,r,this)},a.delete=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.removeLocalStorageObjects([{peerID:n,signalingID:r}])},a.toJsonString=function(){var e=this.getCallInfo(),t=e.signalingID,n={accumulatedCallTime:this.$ZenonLSPeerConnectionSummary$p_38(),callInfo:this.getCallInfo(),connectionLoggingId:t,endIsConnected:this.$ZenonLSPeerConnectionSummary$p_8,gen0IceReceivedCount:this.$ZenonLSPeerConnectionSummary$p_3,gen0IceSentCount:this.$ZenonLSPeerConnectionSummary$p_2,mediaPath:this.$ZenonLSPeerConnectionSummary$p_10,mediaStats:this.$ZenonLSPeerConnectionSummary$p_1,pcIsConnected:this.$ZenonLSPeerConnectionSummary$p_7};return JSON.stringify(n)},n.fromJsonString=function(r){var t,o;try{o=JSON.parse(r)}catch(e){return null}var a=o.callInfo,i=a.deviceID,l=babelHelpers.objectWithoutPropertiesLoose(a,e),s=new n(l);return s.$ZenonLSPeerConnectionSummary$p_10=o.mediaPath,s.$ZenonLSPeerConnectionSummary$p_1=o.mediaStats,s.$ZenonLSPeerConnectionSummary$p_3=o.gen0IceReceivedCount,s.$ZenonLSPeerConnectionSummary$p_2=o.gen0IceSentCount,s.$ZenonLSPeerConnectionSummary$p_7=(t=o.pcIsConnected)!=null?t:null,s.$ZenonLSPeerConnectionSummary$p_8=o.endIsConnected,o.accumulatedCallTime!=null&&(s.$ZenonLSPeerConnectionSummary$p_4=o.accumulatedCallTime),s},n})(r("ZenonCallInfoManager"));l.default=u}),98);
__d("ZenonLSPeerConnectionSummaryStore",["ZenonGenericLocalStorageStore","ZenonLSPeerConnectionSummary"],(function(t,n,r,o,a,i,l){"use strict";var e="localstorage",s="RTC_LS_PCS_",u="ls_pcs",c=3,d=(function(t){function n(){return t.call(this,u,e,s)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.retrievePeerConnectionSummary=function(t,n){var e=this.getLocalStorageObjects(),o=e[t]?e[t][n]:null;return o?r("ZenonLSPeerConnectionSummary").fromJsonString(o.__d):null},o.storePeerConnectionSummary=function(t,n,r){this.mutateLocalStorageObjects(function(e){return e[t]||(e[t]={}),e[t][n]={__d:r.toJsonString(),__t:Date.now(),__z:!0},e},c,!1,{peerID:t,signalingID:n})},n})(r("ZenonGenericLocalStorageStore")),m=new d;l.ZenonLSPeerConnectionSummaryStoreInstance=m}),98);
__d("ZenonLSPeerConnectionSummaryLogProcessor",["LsRtcPeerConnectionSummaryFalcoEvent","ZenonInfraActionsLogger","ZenonLSPeerConnectionSummary","ZenonLSPeerConnectionSummaryStore","ZenonPeerID","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.data,n=e.updateLogIdentifiers;this.$2=!1,t.peerID=o("ZenonPeerID").ZenonMWPeerID,this.$3=t.signalingID,this.$4=t.peerID;var a=o("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance.retrievePeerConnectionSummary(t.peerID,t.signalingID);a?this.$1=a:this.$1=new(r("ZenonLSPeerConnectionSummary"))(t),n({localCallID:this.$1.getCallInfo().localCallID})}var t=e.prototype;return t.processEvent=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this;if(!this.$2)switch(e.name){case"setMediaPath":this.$1.setMediaPath(e.mediaPath),this.$1.save(o("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);break;case"setMediaStats":this.$1.setMediaStats(e.mediaStats),this.$1.save(o("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);break;case"setRemoteSignalingID":this.$1.setSharedCallId(e.remoteSignalingID),this.$1.save(o("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);break;case"peerConnectionStateChanged":this.$1.onPCStateChange(e.connected),this.$1.save(o("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);break;case"updateIceInfo":this.$1.updateIceInfo(e.sdpString,e.direction),this.$1.save(o("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);break;case"callEnded":this.$2=!0,this.$1.onCallEnded(),this.$1.save(o("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Uploading NSL PCS summary"}),r("LsRtcPeerConnectionSummaryFalcoEvent").logCritical(function(){return t.$1.getPeerConnectionSummary()}),this.$1.delete(o("ZenonLSPeerConnectionSummaryStore").ZenonLSPeerConnectionSummaryStoreInstance);break}});function t(t){return e.apply(this,arguments)}return t})(),e})(),s={LogProcessor:e};l.ZenonLSPeerConnectionSummaryLogProcessor=e,l.ZenonLSPeerConnectionSummaryLogProcessorConfig=s}),98);
__d("ZenonLSStarRatingsManager",["LsRtcEndCallSurveyFalcoEvent","LsRtcStarRatingFalcoEvent","ZenonCallInfoManager","ZenonPeerID"],(function(t,n,r,o,a,i,l){"use strict";var e=["deviceID"],s=(function(t){function n(){return t.apply(this,arguments)||this}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.setRating=function(t,n){var e=this.getCallInfo(),a=e.deviceID,i=e.localCallID,l=e.peerID,s=e.serverInfoData,u={local_call_id:i,peer_id:o("ZenonPeerID").convertPeerIDForLogging(l),shared_call_id:s,web_device_id:a};r("LsRtcStarRatingFalcoEvent").logImmediately(function(){return babelHelpers.extends({rating_style:n?"1":null,star_rating:t.toString()},u)})},a.setSurvey=function(t,n,a){var e,i;n===void 0&&(n=null),a===void 0&&(a=null);var l=this.getCallInfo(),s=l.deviceID,u=l.localCallID,c=l.peerID,d=l.serverInfoData,m={local_call_id:u,peer_id:o("ZenonPeerID").convertPeerIDForLogging(c),shared_call_id:d,web_device_id:s},p=Array.isArray(n)?n:n!=null?[n]:[],_=babelHelpers.extends({rtc_end_call_survey_issue:(e=(i=a)==null?void 0:i.toLocaleLowerCase())!=null?e:"",rtc_end_call_survey_selected_options:p},m,t==null?{}:{rtc_end_call_survey_freeform:t});r("LsRtcEndCallSurveyFalcoEvent").log(function(){return _})},a.save=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.storeStarRatings(n,r,this)},a.delete=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.removeLocalStorageObjects([{peerID:n,signalingID:r}])},a.toJsonString=function(){var e={callInfo:this.getCallInfo()};return JSON.stringify(e)},n.fromJsonString=function(r){var t;try{t=JSON.parse(r)}catch(e){return null}var o=t.callInfo,a=o.deviceID,i=babelHelpers.objectWithoutPropertiesLoose(o,e);return new n(i)},n})(r("ZenonCallInfoManager"));l.default=s}),98);
__d("ZenonLSStarRatingsStore",["ZenonGenericLocalStorageStore","ZenonLSStarRatingsManager"],(function(t,n,r,o,a,i,l){"use strict";var e="localstorage",s="RTC_LS_STAR_RATINGS_",u="ls_star_ratings",c=3,d=(function(t){function n(){return t.call(this,u,e,s)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.retrieveStarRatings=function(t,n){var e=this.getLocalStorageObjects(),o=e[t]?e[t][n]:null;return o?r("ZenonLSStarRatingsManager").fromJsonString(o.__d):null},o.storeStarRatings=function(t,n,r){this.mutateLocalStorageObjects(function(e){return e[t]||(e[t]={}),e[t][n]={__d:r.toJsonString(),__t:Date.now(),__z:!0},e},c,!1,{peerID:t,signalingID:n})},n})(r("ZenonGenericLocalStorageStore")),m=new d;l.ZenonLSStarRatingsStoreInstance=m}),98);
__d("ZenonLSStarRatingsLogProcessor",["ZenonLSStarRatingsManager","ZenonLSStarRatingsStore","ZenonPeerID","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.data,n=e.updateLogIdentifiers;t.peerID=o("ZenonPeerID").ZenonMWPeerID;var a=o("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance.retrieveStarRatings(t.peerID,t.signalingID);a?this.$1=a:this.$1=new(r("ZenonLSStarRatingsManager"))(t),n({localCallID:this.$1.getCallInfo().localCallID})}var t=e.prototype;return t.processEvent=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){switch(e.name){case"callRated":this.$1.setRating(e.rating,e.isBinaryRating),this.$1.save(o("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance);return;case"callSurveySubmitted":this.$1.setSurvey(e.feedback,e.surveyChoice,e.surveyIssue),this.$1.save(o("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance);return;case"setRemoteSignalingID":this.$1.setSharedCallId(e.remoteSignalingID),this.$1.save(o("ZenonLSStarRatingsStore").ZenonLSStarRatingsStoreInstance);break}});function t(t){return e.apply(this,arguments)}return t})(),e})(),s={LogProcessor:e};l.ZenonLSStarRatingsLogProcessor=e,l.ZenonLSStarRatingsLogProcessorConfig=s}),98);
__d("ZenonLastCallManager",["ZenonCallInfoManager"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.save=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.storeCallIdentifiers(n,r,this)},n.setConferenceName=function(t){t!=null&&(this.getCallInfo().conferenceName=t)},n.toJSONString=function(){return JSON.stringify(this.getCallInfo())},t})(r("ZenonCallInfoManager"));l.default=e}),98);
__d("ZenonLastCall",["CacheStorage","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3837"),s="RTC_LAST_CALL_",u="rtc_last_call";function c(t){t===void 0&&(t=e);var n=new(r("CacheStorage"))("localstorage",s),o=n.get(u);if(!o||o.length===0)return null;var a=Object.keys(o)[0],i=Object.keys(o[a])[0],l=o[a][i],c=l.__d,d=l.__t;return d<Date.now()-t?null:JSON.parse(c)}l.STORAGE_PREFIX=s,l.STORAGE_KEY=u,l.useZenonLastCall=c}),98);
__d("ZenonLastCallStore",["ZenonAppProvider","ZenonGenericLocalStorageStore","ZenonLastCall"],(function(t,n,r,o,a,i,l){"use strict";var e="localstorage",s=3,u=(function(t){function n(){return t.call(this,o("ZenonLastCall").STORAGE_KEY,e,o("ZenonLastCall").STORAGE_PREFIX)||this}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.isAllowedApp=function(){return o("ZenonAppProvider").isMessengerWebApp()},r.storeCallIdentifiers=function(t,n,r){this.isAllowedApp()&&this.mutateLocalStorageObjects(function(e){var o,a;return a={},a[t]=(o={},o[n]={__d:r.toJSONString(),__t:Date.now(),__z:!0},o),a},s,!1,{peerID:t,signalingID:n})},n})(r("ZenonGenericLocalStorageStore")),c=new u;l.ZenonLastCallStoreInstance=c}),98);
__d("ZenonLastCallLogProcessor",["ZenonLastCallManager","ZenonLastCallStore","ZenonPeerID","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=3e4,s=(function(){function t(e){var t=e.data,n=e.updateLogIdentifiers;this.$2=!1,this.$3=0,this.$1=new(r("ZenonLastCallManager"))(babelHelpers.extends({},t,{peerID:o("ZenonPeerID").ZenonMWPeerID})),n({localCallID:this.$1.getCallInfo().localCallID})}var a=t.prototype;return a.processEvent=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(!this.$2){switch(t.name){case"updateLogIdentifiers":t.logIdentifiers.localCallID!=null&&this.$1.setLocalCallID(t.logIdentifiers.localCallID),t.logIdentifiers.sharedCallID!=null&&this.$1.setSharedCallId(t.logIdentifiers.sharedCallID),t.logIdentifiers.clientSessionID!=null&&this.$1.setSignalingID(t.logIdentifiers.clientSessionID);break;case"setRemoteSignalingID":this.$1.setSharedCallId(t.remoteSignalingID),this.$1.setConferenceName(t.conferenceName);break;case"callEnded":this.$2=!0;break}Date.now()-this.$3>=e&&(this.$1.save(o("ZenonLastCallStore").ZenonLastCallStoreInstance),this.$3=Date.now())}});function r(e){return t.apply(this,arguments)}return r})(),t})(),u={LogProcessor:s};l.MIN_UPDATE_INTERVAL=e,l.ZenonLastCallLogProcessor=s,l.ZenonLastCallLogProcessorConfig=u}),98);
__d("ZenonGetDisplayMediaUtils",["Promise","UserAgent","ZenonMediaActionLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=/\{\s*\[native code\]\s*\}/,u="GetDisplayMedia";function c(){return r("UserAgent").isBrowser("Edge >= 17")||r("UserAgent").isBrowser("Firefox >= 33")||r("UserAgent").isBrowser("Opera >= 60")||r("UserAgent").isBrowser("Chrome")||r("UserAgent").isBrowser("Edge (Chromium Based)")||r("UserAgent").isBrowser("Edge PWA (Chromium Based)")||r("UserAgent").isBrowser("Safari >= 13")}function d(){var e,t=(e=navigator)==null||(e=e.mediaDevices)==null?void 0:e.getDisplayMedia;return typeof t=="function"&&s.test(t.toString())}function m(t){if(!c()){var o=r("err")("SCREEN_SHARING_NOT_SUPPORTED");return r("ZenonMediaActionLogger").logErrorToFbLogger("ZenonGetDisplayMediaUtils: Screen sharing not supported",u,o,"warn"),(e||(e=n("Promise"))).reject(o)}var a=navigator.mediaDevices;if(a==null||typeof a.getDisplayMedia!="function"){var i=r("err")("GET_DISPLAY_MEDIA_NOT_FOUND");return r("ZenonMediaActionLogger").logErrorToFbLogger("ZenonGetDisplayMediaUtils: Display media not found",u,i,"warn"),(e||(e=n("Promise"))).reject(i)}return a.getDisplayMedia(t).catch(function(e){throw r("ZenonMediaActionLogger").logErrorToFbLogger("ZenonGetDisplayMediaUtils: Error while getting display media",u,e,"warn"),e})}function p(){return d()}l.getUserScreenMedia=m,l.isNativeScreenSharingSupported=p}),98);
__d("ZenonLocalAudioVideoManagerUtils",["$InternalEnum","FBLogger","ODS","ZenonMediaActionLogger","ZenonMediaLoggingUtils","ZenonMediaUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e=["deviceId"],s=["deviceId"],u,c="zenon_local_media_manager_v3",d=n("$InternalEnum")({ENDED:"ended",MUTE:"mute",UNMUTE:"unmute"}),m=n("$InternalEnum")({DISPLAY:"display",USER:"user"});function p(e,t,n,o,a){return o===void 0&&(o=!1),e.getTracks().map(function(i){var l={contentHint:i.kind==="audio"?t.contentHint:n.contentHint,isRemote:!1,isUserMuted:!1,stream:e,trackType:o&&i.kind==="video"?"screen":o&&i.kind==="audio"?"screen_audio":void 0};return r("ZenonMediaUtils").convertToZenonImmutableMediaTrack(i,l,null,a!=null?a:"")})}function _(e){var t=e.aspectRatio,n=e.frameRate,o=e.height,a=e.width;if((n==null?void 0:n.exact)!=null&&((n==null?void 0:n.exact)<0||(n==null?void 0:n.exact)>60)||(n==null?void 0:n.min)!=null&&((n==null?void 0:n.min)<0||(n==null?void 0:n.min)>60)||(n==null?void 0:n.max)!=null&&((n==null?void 0:n.max)<0||(n==null?void 0:n.max)>60)||(n==null?void 0:n.ideal)!=null&&((n==null?void 0:n.ideal)<0||(n==null?void 0:n.ideal)>60))throw r("err")("The frame rate must be between: 0 and 60");if((o==null?void 0:o.exact)!=null&&(o==null?void 0:o.exact)<1||(o==null?void 0:o.min)!=null&&(o==null?void 0:o.min)<1||(o==null?void 0:o.max)!=null&&(o==null?void 0:o.max)<1||(o==null?void 0:o.ideal)!=null&&(o==null?void 0:o.ideal)<1)throw r("err")("The height of the video must be at least 1");if((a==null?void 0:a.exact)!=null&&(a==null?void 0:a.exact)<1||(a==null?void 0:a.min)!=null&&(a==null?void 0:a.min)<1||(a==null?void 0:a.max)!=null&&(a==null?void 0:a.max)<1||(a==null?void 0:a.ideal)!=null&&(a==null?void 0:a.ideal)<1)throw r("err")("The width of the video must be at least 1");if((t==null?void 0:t.exact)!=null&&(t==null?void 0:t.exact)<0||(t==null?void 0:t.min)!=null&&(t==null?void 0:t.min)<0||(t==null?void 0:t.max)!=null&&(t==null?void 0:t.max)<0||(t==null?void 0:t.ideal)!=null&&(t==null?void 0:t.ideal)<1)throw r("err")("The aspect ratio cannot be negative")}function f(t){var n,r,o=JSON.parse(JSON.stringify(t)),a=!1;if((o==null||(n=o.audio)==null||(n=n.deviceId)==null?void 0:n.ideal)!=null){var i=o.audio,l=i.deviceId,u=babelHelpers.objectWithoutPropertiesLoose(i,e);o.audio=babelHelpers.extends({},u,{deviceId:{exact:l.ideal}}),a=!0}if(o.video!=null&&typeof o.video!="boolean"&&((r=o.video.deviceId)==null?void 0:r.ideal)!=null){var c=o.video,d=c.deviceId,m=babelHelpers.objectWithoutPropertiesLoose(c,s);o.video=babelHelpers.extends({},m,{deviceId:{exact:d.ideal}}),a=!0}return{constraints:o,hasIdealConstraints:a}}function g(e,t,n){t.getTracks().forEach(function(t){var o=t.id,a=t.kind;t.addEventListener(e,function(){r("ZenonMediaActionLogger").logEvent({checkpoint:a+": "+o+" fired "+e+" event for "+n+" media"})})})}function h(e,t,n){v(e),S(e),R(e),b(e,t,n)}function y(e,t,n){r("ZenonMediaActionLogger").logErrorToFbLogger(t,"GetUserMedia",n,"warn"),typeof n=="object"&&((n==null?void 0:n.name)==="Error"||(n==null?void 0:n.name)==="TypeError")&&r("FBLogger")("rtc_www").catching(n).mustfix("TypeError in getUserMedia");var o=e==="Audio"?"GetUserMedia_Audio_Error":e==="Video"?"GetUserMedia_Video_Error":"GetUserMedia_No_Media_Error";r("ZenonMediaActionLogger").logErrorToFbLogger(t,o,n,"warn")}function C(e){var t="Supported capabilities: "+JSON.stringify(e.getCapabilities==null?void 0:e.getCapabilities()),n="Applied settings: "+JSON.stringify(e.getSettings==null?void 0:e.getSettings());return[t,n].join(" - ")}function b(e,t,n){e.getTracks().forEach(function(e){r("ZenonMediaActionLogger").logEvent({checkpoint:C(e)});var a=e.getSettings==null?void 0:e.getSettings();if(a!=null){var i=[];if(e.kind==="audio"&&t!==void 0){if(t.echoCancellation!==void 0&&a.echoCancellation!==t.echoCancellation){var l;i.push("echoCancellation given("+JSON.stringify(t.echoCancellation)+") actual("+JSON.stringify((l=a.echoCancellation)!=null?l:"undefined")+")"),(u||(u=o("ODS"))).bumpEntityKey(4272,c,"non_matching_constraints.audio")}}else if(e.kind==="video"&&n!==void 0){var s,d;if(a.frameRate!==void 0&&((s=n.frameRate)==null?void 0:s.ideal)!==a.frameRate){var m,p;i.push("frameRate given("+((m=(p=n.frameRate)==null?void 0:p.ideal)!=null?m:"undefined")+") actual("+a.frameRate+")"),(u||(u=o("ODS"))).bumpEntityKey(4272,c,"non_matching_constraints.video")}if(a.aspectRatio!==void 0&&((d=n.aspectRatio)==null?void 0:d.ideal)!==a.aspectRatio){var _,f;i.push("aspectRatio given("+((_=(f=n.aspectRatio)==null?void 0:f.ideal)!=null?_:"undefined")+") actual("+a.aspectRatio+")"),(u||(u=o("ODS"))).bumpEntityKey(4272,c,"non_matching_constraints.video")}}i.length&&r("ZenonMediaActionLogger").logCheckpoint("WARNING: Requested and applied constraints do not match for "+i.join("-"))}})}function v(e){e.getVideoTracks().some(function(e){return"canvas"in e})&&r("ZenonMediaActionLogger").logEvent({checkpoint:"[ZP] CanvasCaptureMediaStreamTrack is present which indicates an extension"})}function S(e){var t=e.getTracks().map(r("ZenonMediaLoggingUtils").serializeMediaStreamTrack);r("ZenonMediaActionLogger").logEvent({checkpoint:'GetUserMedia returned stream with id "'+e.id+'" and tracks: ['+t.join(", ")+"]",mediaID:e.id})}function R(e){var t=e.getVideoTracks(),n=t[0];(n==null?void 0:n.muted)===!0&&r("ZenonMediaActionLogger").logErrorToFbLogger('GetUserMedia returned muted video track with id "'+n.id+'"',"MutedVideoTrack",r("err")("MutedVideoTrack"),"info")}l.LocalMediaEvents=d,l.LocalMediaTypeCheckpoint=m,l.convertToZenonImmutableMediaTrack=p,l.validateVideoConstraints=_,l.cloneConstraintsWithExactDeviceId=f,l.addEventListenerForEvent=g,l.logEventsForMediaStream=h,l.logMediaErrors=y}),98);
__d("ZenonMediaDevicesUtils",["Promise","RpWebBlockedVirtualAudioDevicesConfig","ZenonMediaActionLogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s="default";function u(){if(navigator.mediaDevices!=null&&typeof navigator.mediaDevices.enumerateDevices=="function"){var t=(e||(e=n("Promise"))).resolve(navigator.mediaDevices.enumerateDevices());return f(t).then(function(e){return r("ZenonMediaActionLogger").logCheckpoint("enumerateDevices - navigator.mediaDevices "+JSON.stringify(e)),e})}return(e||(e=n("Promise"))).reject(r("err")("enumerateDevices() not supported"))}function c(e){var t=e.find(function(e){return e.id===s}),n=t!=null&&t.groupId!==""&&t.label!=="";return n?e.filter(function(e){return!((t==null?void 0:t.groupId)===e.groupId&&(t==null?void 0:t.id)!==e.id&&t!=null&&t.label.includes(e.label))}):e}function d(e,t){var n,r,o=[],a=(n=e.find(function(e){return e.id===t}))!=null?n:null;a!=null&&o.push(a);var i=(r=e.find(function(e){return e.id===s&&e.id!==t}))!=null?r:null;i!=null&&o.push(i);var l=e.filter(function(e){return e.id!==s&&e.id!==t}).sort(function(e,t){return e.label>t.label?1:-1});return o.push.apply(o,l),o}function m(e,t){var n,r,o=[],a=(n=e.find(function(e){return e.id===t}))!=null?n:null;a!=null&&o.push(a);var i=(r=e.find(function(e){return e.label.includes("Built-in")&&e.id!==t}))!=null?r:null;i!=null&&o.push(i);var l=e.filter(function(e){return e.id!==(i==null?void 0:i.id)&&e.id!==t}).sort(function(e,t){return e.label>t.label?1:-1});return o.push.apply(o,l),o}function p(e,t){var n,r,o=(n=e.find(function(e){return e.id===s}))!=null?n:null,a=(r=e.find(function(e){return e.id===t}))!=null?r:null;return t!=null&&o!=null&&a!=null&&(o==null?void 0:o.groupId)===(a==null?void 0:a.groupId)&&(o==null?void 0:o.id)!==(a==null?void 0:a.id)&&o!=null&&o.label.includes(a==null?void 0:a.label)?o==null?void 0:o.id:t}function _(e,t,n){return e.filter(function(e){return e.id===s||t!=null&&t!==""&&e.id===t||n!=null&&n!==""&&e.id===n||!o("RpWebBlockedVirtualAudioDevicesConfig").blockedDevices.includes(e.label)})}function f(e){return e.then(function(e){return e.map(function(e){var t=e.deviceId,n=e.groupId,r=e.kind,o=e.label;return{groupId:n,id:t,kind:r,label:o}})})}l.CHROMIUM_BROWSER_DEFAULT_ID=s,l.enumerateDevices=u,l.filterDuplicateDefaultDevices=c,l.sortAudioDevices=d,l.sortVideoDevices=m,l.updateSelectedDeviceWhenMatchesWithDefault=p,l.filterVirtualAudioDevices=_,l.convertToZenonMediaDevice=f}),98);
__d("ZenonLocalMediaManager",["$InternalEnum","ZenonGetDisplayMediaUtils","ZenonLocalAudioVideoManagerUtils","ZenonMediaActionLogger","ZenonMediaDevicesUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=["requestAudio"],s=["requestVideo"],u=["facingMode"],c,d=n("$InternalEnum")({ENDED:"ended",MUTE:"mute",UNMUTE:"unmute"}),m=n("$InternalEnum")({DISPLAY:"display",USER:"user"});typeof((c=window.OverconstrainedError)==null||(c=c.prototype)==null?void 0:c.toString)=="function"&&(window.OverconstrainedError.prototype.toString=function(){return this.name+": "+this.message+" - Constraint: "+this.constraint});function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ZenonMediaDevicesUtils").enumerateDevices(),n=t.map(function(e){return{groupId:e.groupId,id:e.id,kind:e.kind,label:e.label}});return e!=null?n.filter(function(t){return t.kind===e}):n}),_.apply(this,arguments)}function f(e,t,n){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){r("ZenonMediaActionLogger").logEvent({checkpoint:"GetDisplayMedia audioConstraints: "+JSON.stringify(e)+" videoConstraints: "+JSON.stringify(t)});var a=yield o("ZenonGetDisplayMediaUtils").getUserScreenMedia(h(e,t)),i=a.getVideoTracks();return i.length>0&&(i[0].contentHint=t.contentHint),[d.ENDED,d.MUTE,d.UNMUTE].forEach(function(e){b(e,a,m.DISPLAY)}),o("ZenonLocalAudioVideoManagerUtils").convertToZenonImmutableMediaTrack(a,e,t,!0,n)}),g.apply(this,arguments)}function h(e,t){return{audio:y(e),video:C(t)}}function y(t){var n=t.requestAudio,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return n===!1?!1:Object.keys(r).length>0?r:!0}function C(e){var t=e.requestVideo,n=babelHelpers.objectWithoutPropertiesLoose(e,s);if(t===!1)return!1;if(Object.keys(n).length===0)return!0;var r=n.facingMode,o=babelHelpers.objectWithoutPropertiesLoose(n,u),a=babelHelpers.extends({},o);return r!=null&&(a.facingMode={ideal:r}),a}function b(e,t,n){t.getTracks().forEach(function(t){var o=t.id,a=t.kind;t.addEventListener(e,function(){r("ZenonMediaActionLogger").logEvent({checkpoint:a+": "+o+" fired "+e+" event for "+n+" media"})})})}l.Events=d,l.getDevices=p,l.getDisplayMedia=f,l.adaptAudioConstraints=y,l.adaptVideoConstraints=C}),98);
__d("ZenonLocalMediaSDK",["FBLogger","ZenonLocalMediaManager","ZenonMediaDevicesUtils","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=[];function s(){return e.filter(function(e){return e.webrtcTrack.readyState==="live"})}function u(t){e=e.concat(t)}function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ZenonLocalMediaManager").getDisplayMedia(e,t,n);return u(r),r}),d.apply(this,arguments)}function m(e){return o("ZenonLocalMediaManager").getDevices(e)}function p(){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("ZenonMediaDevicesUtils").enumerateDevices();return{canUseAudio:b(e),canUseVideo:C(e)}}),_.apply(this,arguments)}function f(){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e;if(typeof((e=navigator.permissions)==null?void 0:e.query)=="function"){var t=yield navigator.permissions.query({name:"microphone"}),n=t.state;return n==="granted"}}catch(e){r("FBLogger")("rtc_www").catching(r("getErrorSafe")(e)).warn("isMicrophoneAccessGranted")}var o=yield p(),a=o.canUseAudio;return a}),g.apply(this,arguments)}function h(){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e;if(typeof((e=navigator.permissions)==null?void 0:e.query)=="function"){var t=yield navigator.permissions.query({name:"microphone"}),n=t.state,o=yield navigator.permissions.query({name:"camera"}),a=o.state;return{cameraState:a,microphoneState:n}}}catch(e){r("FBLogger")("rtc_www").catching(r("getErrorSafe")(e)).warn("getCurrentPermissions")}}),y.apply(this,arguments)}function C(e){return e.some(function(e){return e.kind==="videoinput"&&e.label.length>0&&e.id.length>0})}function b(e){return e.some(function(e){return e.kind==="audioinput"&&e.label.length>0&&e.id.length>0})}l.getActiveLocalMediaTracks=s,l.getDisplayMedia=c,l.getDevices=m,l.getAvailableMediaPermission=p,l.isMicrophoneAccessGranted=f,l.getCurrentPermissions=h,l.hasVideoDevicePermission=C,l.hasAudioDevicePermission=b}),98);
__d("promiseAny",["invariant","AggregateError","Promise"],(function(t,n,r,o,a,i,l,s){var e;function u(t){return new(e||(e=n("Promise")))(function(r,o){return(e||(e=n("Promise"))).resolve(t).then(o,r)})}function c(t){return t.length!==0||s(0,14837),(e||(e=n("Promise"))).all(t.map(u)).then(function(e){throw new(r("AggregateError"))(e)},function(e){return e})}l.default=c}),98);
__d("ZenonMessageSenderChain",["promiseAny"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.addMessageSender=function(t){this.$1.push(t)},t.sendMessage=function(t){var e=this.$1.map(function(e){return e.sendMessage(t)});return r("promiseAny")(e)},t.setMessageReceiver=function(t){this.$1.forEach(function(e){return e.setMessageReceiver(t)})},t.setLoggingEventHandler=function(t){this.$1.forEach(function(e){return e.setLoggingEventHandler(t)})},e})();l.default=e}),98);
__d("waitForZenonMqttConnected",["Promise","ZenonUserActionLogger","err","getZenonMqttChannel"],(function(t,n,r,o,a,i,l){"use strict";var e,s=15e3;function u(){return new(e||(e=n("Promise")))(function(e,t){var n=r("getZenonMqttChannel")();if(n.getConnectionState()==="Connected")e();else{r("ZenonUserActionLogger").logCheckpoint({checkpoint:"MQTT not connected, deferring sending MWS message"}),r("ZenonUserActionLogger").startTimer("MQTT not connected");var o={onMQTTStateChanged:function(i){i==="Connected"&&(r("ZenonUserActionLogger").stopTimer({checkpointName:"MQTT connected after deferring sending MWS message",timerName:"MQTT not connected"}),n.unsubscribeChannelEvents(o),window.clearTimeout(a),e())}},a=window.setTimeout(function(){n.unsubscribeChannelEvents(o),r("ZenonUserActionLogger").stopTimer({checkpointName:"MQTT never connected. Current status: "+n.getConnectionState(),timerName:"MQTT not connected"}),t(r("err")("timeout"))},s);n.subscribeChannelEvents(o)}})}l.default=u}),98);
__d("ZenonMqttMWThriftMessageSender",["Promise","RpZenonBinaryThriftSignalingSitevarConfig","ZenonActorHooks","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageLogger","ZenonMWThriftMessageMap","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","ZenonMWThriftMessageTranslator","ZenonSignalingConstants","ZenonUserActionLogger","ZenonValidateMWThriftMessage","asyncToGeneratorRuntime","err","filterNulls","getErrorSafe","getZenonMqttChannel","waitForZenonMqttConnected"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){var e=r("RpZenonBinaryThriftSignalingSitevarConfig").supported_message_types_mqtt.map(function(e){return o("ZenonMWThriftMessageMap").messageTypeFromString(e)});this.$3=new Set(r("filterNulls")(e))}var a=t.prototype;return a.$4=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this,n=!0;if(yield r("waitForZenonMqttConnected")().catch(function(e){r("ZenonUserActionLogger").logCheckpoint({checkpoint:"Not sending MWS Thrift message through MQTT because MQTT could not connect. Error: "+e}),n=!1}),!!n){o("ZenonMWThriftMessageReliabilityLogger").logSendingMessage(e),r("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("SENDING","MQTT Thrift",e),this.$2&&o("ZenonMWThriftMessageLogger").logSentMessage(e,this.$2);var a=r("getZenonMqttChannel")();try{yield a.publishBinary(o("ZenonSignalingConstants").T_RTC_MULTI_MQTT_TOPIC,o("ZenonMWThriftMessageSerializer").serializeMWThriftMessage(e)).then(function(){o("ZenonMWThriftMessageReliabilityLogger").logSentMessage(e),t.$2&&t.$2({mwThriftMessage:e,name:"mwThriftMessageSent"})},function(n){t.$5(e,n.toString())})}catch(t){this.$5(e,r("getErrorSafe")(t).toString())}}});function t(t){return e.apply(this,arguments)}return t})(),a.$5=function(t,n){var e=n!=null?n:"MQTT Thrift Message Send Error";o("ZenonMWThriftMessageReliabilityLogger").logSendMessageFailed(t,"[MQTT Thrift] "+e),r("ZenonMWThriftMessageDebugLogger").logSendMultiwayThriftMessageFailure(e,o("ZenonMWThriftMessageMap").messageTypeToString(t.messageHeader.type))},a.sendMessage=function(a){var t=o("ZenonMWThriftMessageTranslator").toMWThriftMessage(a);return!t||!r("ZenonValidateMWThriftMessage")(t)?(e||(e=n("Promise"))).reject(r("err")("Invalid MW Thrift message")):t.messageHeader.type!=null&&!this.$3.has(t.messageHeader.type)?(e||(e=n("Promise"))).resolve():a.getHeader().userInfo.userID!==o("ZenonActorHooks").ZenonActor.getAccountID()&&!o("ZenonActorHooks").ZenonActor.isInstagramUser()&&!o("ZenonActorHooks").ZenonActor.isOculusUser()&&!o("ZenonActorHooks").ZenonActor.isKadabraUser()&&!o("ZenonActorHooks").ZenonActor.isLiveChatOnlyPerson()?(e||(e=n("Promise"))).reject(r("err")("MQTT doesn't work with Page users yet")):this.$4(t)},a.setMessageReceiver=function(t){this.$1=t},a.setLoggingEventHandler=function(t){this.$2=t},t})();l.default=s}),98);
__d("ZenonPeerConnectionConfig",["ZenonBrowsers","shouldUseInsertableStreams"],(function(t,n,r,o,a,i,l){"use strict";var e="stun:stun.fbsbx.com:3478";function s(e,t,n){var r={urls:e};return t!==void 0&&n!==void 0&&(r.username=t,r.credential=n),[r]}var u=(function(){function t(){this.sslPort="",this.tcpPort="",this.turnIP="",this.turnIP_6="",this.turnPassword="",this.turnUsername="",this.udpPort=""}var n=t.prototype;return n.setTurnCredentials=function(t){this.turnIP=t.ip,this.turnIP_6=t.ip_6,this.udpPort=t.udp_port,this.tcpPort=t.tcp_port,this.sslPort=t.ssl_tcp_port,this.turnUsername=t.username,this.turnPassword=t.password},n.getConfigZenonPlatform=function(){var t=r("shouldUseInsertableStreams")(),n="max-compat",o=this.turnIP==="",a;return o?a=s([e]):a=s([e]).concat(s(this.$1(),this.turnUsername,this.turnPassword)),{bundlePolicy:n,encodedInsertableStreams:t,iceServers:a}},n.getConstraints=function(t){t===void 0&&(t=!1);var e=!0;return o("ZenonBrowsers").isChromium()&&o("ZenonBrowsers").webrtcVersion()<57&&t&&(e=!1),{mandatory:{},optional:[{DtlsSrtpKeyAgreement:e}]}},n.$2=function(t,n){var e,r=t?"["+this.turnIP_6+"]":this.turnIP,o,a=n;switch(n){case"tcp":o=this.tcpPort;break;case"udp":o=this.udpPort;break;case"ssl":o=this.sslPort,a="tcp";break;default:o=this.udpPort,a=null;break}return r!=null&&r.length&&(e=o)!=null&&e.length?a!=null&&a.length>0?"turn:"+r+":"+o+"?transport="+a:"turn:"+r+":"+o:null},n.$1=function(){return o("ZenonBrowsers").isFirefox()&&o("ZenonBrowsers").webrtcVersion()<27?[this.$2(!1)].filter(Boolean):[this.$2(!1,"udp"),this.$2(!1,"tcp"),this.$2(!1,"ssl"),this.$2(!0,"udp"),this.$2(!0,"tcp"),this.$2(!0,"ssl")].filter(Boolean)},t})(),c=new u;l.default=c}),98);
__d("RtcProductConnectFunnelFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3544"),s=o("FalcoLoggerInternal").create("rtc_product_connect_funnel",e),u=s;l.default=u}),98);
__d("ZenonProductConnectFunnel",["FBLogger","performanceNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){return Math.trunc((e||(e=r("performanceNow")))())},u=(function(){function e(){this.$6=null,this.$7=null,this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$8=new Map,this.$9=new Map}var t=e.prototype;return t.$10=function(t){var e=this.$8.get(t);if(e!=null)return e;e={acceptedTs:this.$3,connectedTs:null,connectingTs:null,contactingTs:null,endCallTs:null,permissionsReceivedTs:this.$5,permissionsRequestTs:this.$4,ringingTs:this.$2,triggeredTs:this.$1};var n={cameraPermission:this.$6,microphonePermission:this.$7};return this.clearPreJoinTimings(),this.$8.set(t,e),this.$9.set(t,n),e},t.$11=function(t,n){var e,o=t==null||(e=t.getLogIdentifiers())==null?void 0:e.clientSessionID;if(o==null){r("FBLogger")("rtc_www").warn("ProductConnectFunnel: could not record UI event due to missing signaling ID");return}var a=this.$10(o);a[n]==null&&(a[n]=s())},t.getTimings=function(t){return this.$8.get(t)},t.getPreJoinTimings=function(){return{acceptedTs:this.$3,ringingTs:this.$2,triggeredTs:this.$1}},t.clearPreJoinTimings=function(){this.$3=null,this.$2=null,this.$1=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null},t.setPreJoinTimings=function(t){this.$3=t.acceptedTs,this.$2=t.ringingTs,this.$1=t.triggeredTs},t.getAnnotations=function(t){return this.$9.get(t)},t.remove=function(t){this.clearPreJoinTimings(),this.$8.delete(t),this.$9.delete(t)},t.setUITriggered=function(){var e;(e=this.$1)!=null||(this.$1=s())},t.setUIPermissionsRequest=function(){var e=this;if(!(this.$4!=null||!navigator.permissions)){this.$4=s();var t=navigator.permissions;r("promiseDone")(t.query({name:"microphone"}).then(function(t){e.$7=t.state})),r("promiseDone")(t.query({name:"camera"}).then(function(t){e.$6=t.state}))}},t.setUIPermissionsReceived=function(){var e;this.$4!=null&&((e=this.$5)!=null||(this.$5=s()))},t.setUIAccepted=function(){var e;(e=this.$3)!=null||(this.$3=s())},t.setUIConnected=function(t){this.$11(t,"connectedTs")},t.setUIConnecting=function(t){this.$11(t,"connectingTs")},t.setUIRinging=function(){var e;(e=this.$2)!=null||(this.$2=s())},t.setUIContacting=function(t){this.$11(t,"contactingTs")},t.setUIEnded=function(t){this.$11(t,"endCallTs")},e})(),c=new u;l.default=c}),98);
__d("ZenonProductConnectFunnelManager",["ZenonCallInfoManager","ZenonProductConnectFunnel","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(t){function n(n){var o;return o=t.call(this,n)||this,o.$ZenonProductConnectFunnelManager$p_1={connected:null,created:Math.trunc((e||(e=r("performanceNow")))()),ended:null,firstAction:null,firstMediaPacketReceived:null,firstMediaPacketSent:null,peerConnected:null,peerConnecting:null,peerRinging:null,selfConnected:null,selfConnecting:null},o}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.$ZenonProductConnectFunnelManager$p_2=function(n){this.$ZenonProductConnectFunnelManager$p_1[n]==null&&(this.$ZenonProductConnectFunnelManager$p_1[n]=Math.trunc((e||(e=r("performanceNow")))()))},o.setFirstAction=function(){this.$ZenonProductConnectFunnelManager$p_2("firstAction")},o.setFirstMediaPacketSent=function(t){var e="firstMediaPacketSent";this.$ZenonProductConnectFunnelManager$p_1[e]==null&&(this.$ZenonProductConnectFunnelManager$p_1[e]=Math.trunc(t))},o.setFirstMediaPacketReceived=function(t){var e="firstMediaPacketReceived";this.$ZenonProductConnectFunnelManager$p_1[e]==null&&(this.$ZenonProductConnectFunnelManager$p_1[e]=Math.trunc(t))},o.setSelfConnecting=function(){this.$ZenonProductConnectFunnelManager$p_2("selfConnecting")},o.setSelfConnected=function(){this.$ZenonProductConnectFunnelManager$p_2("selfConnected")},o.setPeerRinging=function(){this.$ZenonProductConnectFunnelManager$p_2("peerRinging")},o.setPeerConnecting=function(){this.$ZenonProductConnectFunnelManager$p_2("peerConnecting")},o.setPeerConnected=function(){this.$ZenonProductConnectFunnelManager$p_2("peerConnected")},o.setConnected=function(){this.$ZenonProductConnectFunnelManager$p_2("connected")},o.setEnded=function(){this.$ZenonProductConnectFunnelManager$p_2("ended")},o.getFunnelMetricsInFalcoShape=function(){var e,t,n,o,a,i,l,s,u,c,d,m,p,_,f,g,h,y=this.getCallInfo(),C=y.callTrigger,b=y.isCaller,v=y.isVideo,S=y.localCallID,R=y.serverInfoData,L=y.signalingID,E=r("ZenonProductConnectFunnel").getTimings(L),k=r("ZenonProductConnectFunnel").getAnnotations(L),I=Math.min((e=E==null?void 0:E.acceptedTs)!=null?e:0,(t=E==null?void 0:E.ringingTs)!=null?t:0,(n=E==null?void 0:E.triggeredTs)!=null?n:0),T=I<0?Math.abs(I):0,D=function(t){return t!=null?t+T:null},x=function(t){return t!=null?String(D(t)):null},$={},P=function(t,n){var e=x(n);e!=null&&($[t]=e)};return P("media_first_audio_packet",(o=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:o.firstMediaPacketReceived),P("media_first_audio_packet_sent",(a=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:a.firstMediaPacketSent),P("permissions_request_end",E==null?void 0:E.permissionsReceivedTs),P("permissions_request_start",E==null?void 0:E.permissionsRequestTs),{annotations:{camera_permission:(i=k==null?void 0:k.cameraPermission)!=null?i:"unknown",microphone_permission:(l=k==null?void 0:k.microphonePermission)!=null?l:"unknown"},call_trigger:C,funnel_event:"END",funnel_id:R!=null?R:S,funnel_origin:"UNKNOWN",is_outbound:b,is_video:v,local_call_id:S,points:$,shared_call_id:R,time_created_ms:D((s=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:s.created),time_ended_ms:(E==null?void 0:E.endCallTs)!=null?D(E==null?void 0:E.endCallTs):D((u=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:u.ended),time_rsys_connected_ms:D((c=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:c.connected),time_rsys_ended_ms:D((d=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:d.ended),time_rsys_first_action_ms:D((m=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:m.firstAction),time_rsys_peer_connected_ms:D((p=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:p.peerConnected),time_rsys_peer_connecting_ms:D((_=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:_.peerConnecting),time_rsys_peer_ringing_ms:D((f=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:f.peerRinging),time_rsys_self_connected_ms:D((g=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:g.selfConnected),time_rsys_self_connecting_ms:D((h=this.$ZenonProductConnectFunnelManager$p_1)==null?void 0:h.selfConnecting),time_ui_accepted_ms:D(E==null?void 0:E.acceptedTs),time_ui_connected_ms:D(E==null?void 0:E.connectedTs),time_ui_connecting_ms:D(E==null?void 0:E.connectingTs),time_ui_contacting_ms:D(E==null?void 0:E.contactingTs),time_ui_end_call_ms:D(E==null?void 0:E.endCallTs),time_ui_ringing_ms:D(E==null?void 0:E.ringingTs),time_ui_triggered_ms:D(E==null?void 0:E.triggeredTs)}},o.save=function(t){var e=this.getCallInfo(),n=e.peerID,r=e.signalingID;t.storeFunnel(n,r,this)},o.delete=function(t){var e=this.getCallInfo(),n=e.peerID,o=e.signalingID;t.removeLocalStorageObjects([{peerID:n,signalingID:o}]),r("ZenonProductConnectFunnel").remove(o)},o.toJsonString=function(){var e={callInfo:this.getCallInfo(),timings:this.$ZenonProductConnectFunnelManager$p_1};return JSON.stringify(e)},n.fromJsonString=function(t){var e;try{e=JSON.parse(t)}catch(e){return null}if(e==null||e.callInfo==null)return null;var r=new n(e.callInfo);return r.$ZenonProductConnectFunnelManager$p_1=e.timings,r},n})(r("ZenonCallInfoManager"));l.default=s}),98);
__d("ZenonProductConnectFunnelStore",["ZenonGenericLocalStorageStore","ZenonProductConnectFunnelManager"],(function(t,n,r,o,a,i,l){"use strict";var e="localstorage",s="RTC_PRODUCT_CONNECT_FUNNEL_",u="product_connect_funnel",c=3,d=(function(t){function n(){return t.call(this,u,e,s)||this}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.retrieveFunnel=function(t,n){var e,o=this.getLocalStorageObjects(),a=(e=o[t])==null?void 0:e[n];return a==null?null:r("ZenonProductConnectFunnelManager").fromJsonString(a.__d)},o.storeFunnel=function(t,n,r){this.mutateLocalStorageObjects(function(e){return e[t]||(e[t]={}),e[t][n]={__d:r.toJsonString(),__t:Date.now(),__z:!0},e},c,!1,{peerID:t,signalingID:n})},n})(r("ZenonGenericLocalStorageStore")),m=new d;l.ZenonProductConnectFunnelStoreInstance=m}),98);
__d("ZenonProductConnectFunnelLogProcessor",["RtcProductConnectFunnelFalcoEvent","ZenonInfraActionsLogger","ZenonPeerID","ZenonProductConnectFunnelManager","ZenonProductConnectFunnelStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.data,n=e.updateLogIdentifiers;this.$1=!1,this.$2=!1,t.peerID=o("ZenonPeerID").ZenonMWPeerID,this.$4=n;var a=o("ZenonProductConnectFunnelStore").ZenonProductConnectFunnelStoreInstance.retrieveFunnel(t.peerID,t.signalingID);a?this.$3=a:this.$3=new(r("ZenonProductConnectFunnelManager"))(t),n({localCallID:this.$3.getCallInfo().localCallID})}var t=e.prototype;return t.log=function(){var e=this;this.$2||(this.$2=!0,r("RtcProductConnectFunnelFalcoEvent").logCritical(function(){return e.$3.getFunnelMetricsInFalcoShape()}),this.$3.delete(o("ZenonProductConnectFunnelStore").ZenonProductConnectFunnelStoreInstance))},t.processEvent=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!this.$1)switch(this.$3.setFirstAction(),e.name){case"callConnected":this.$3.setConnected(),this.$3.save(o("ZenonProductConnectFunnelStore").ZenonProductConnectFunnelStoreInstance);break;case"callEnded":this.$1=!0,this.$3.setEnded(),this.log(),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Uploading product connect funnel summary"});break;case"atLeastOneParticipantAlerted":this.$3.setPeerRinging();break;case"callJoinRequest":this.$3.setSelfConnecting();break;case"setMediaPath":this.$3.setSelfConnected();break;case"smuWithAnswerReceived":case"setRemoteSdpAnswer":this.$3.setPeerConnecting();break;case"peerConnectionStateChanged":this.$3.setPeerConnected();break;case"setRemoteSignalingID":this.$3.setSharedCallId(e.remoteSignalingID),this.$3.save(o("ZenonProductConnectFunnelStore").ZenonProductConnectFunnelStoreInstance);break;case"updateLogIdentifiers":this.$3.save(o("ZenonProductConnectFunnelStore").ZenonProductConnectFunnelStoreInstance);break;case"firstMediaPacketReceived":this.$3.setFirstMediaPacketReceived(e.timestamp);break;case"firstMediaPacketSent":this.$3.setFirstMediaPacketSent(e.timestamp);break}});function t(t){return e.apply(this,arguments)}return t})(),e})(),s={LogProcessor:e};l.ZenonProductConnectFunnelLogProcessor=e,l.ZenonProductConnectFunnelLogProcessorConfig=s}),98);
__d("ZenonReliabilityQPLLogProcessor",["Promise","QuickPerformanceLogger","ZenonCallInfoManager","ZenonDismissReason","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){var t=e.data;this.$2=!1,this.$3=r("qpl")._(144192964,"2904"),this.$1=new(r("ZenonCallInfoManager"))(t),(s||(s=r("QuickPerformanceLogger"))).markerStartFromNavStart(this.$3,this.$4(),{cancelOnUnload:!0,crashResilient:!0}),s.markerAnnotate(this.$3,this.$5(),{instanceKey:this.$4()})}var a=t.prototype;return a.$5=function(t){t===void 0&&(t=!1);var e=this.$1.getCallInfo(),n=e.callTrigger,r=e.conferenceName,o=e.deviceID,a=e.isCaller,i=e.localCallID,l=e.serverInfoData,s=e.signalingID,u={int:{is_outgoing:a?1:0},string:{call_trigger:n!=null?n:void 0,conference_name:r!=null?r:void 0,device_id:o!=null?o:void 0,exit_type:t?"web_crash":void 0,is_connected:this.$2?"1":"0",localCallId:i!=null?i:void 0,shared_call_id:l!=null?l:void 0,signaling_id:s!=null?s:void 0,trigger_source:n!=null?n:void 0}};return u},a.$4=function(){return+this.$1.getCallInfo().signalingID},a.processEvent=function(o){var t,a=(t=o.logIdentifiers)!=null?t:{},i=a.clientSessionID,l=a.localCallID,u=a.sharedCallID;switch(o.name){case"updateLogIdentifiers":l!=null&&this.$1.setLocalCallID(l),i!=null&&this.$1.setSignalingID(i),u!=null&&this.$1.setSharedCallId(u),(s||(s=r("QuickPerformanceLogger"))).markerAnnotate(this.$3,this.$5(),{instanceKey:this.$4()});break;case"callConnected":this.$2=!0,(s||(s=r("QuickPerformanceLogger"))).markerAnnotate(this.$3,this.$5(),{instanceKey:this.$4()});break;case"callEnded":this.$6(o)&&(s||(s=r("QuickPerformanceLogger"))).markerAnnotate(this.$3,this.$5(!0),{instanceKey:this.$4()}),(s||(s=r("QuickPerformanceLogger"))).markerEnd(this.$3,this.$6(o)?722:2,this.$4(),(s||(s=r("QuickPerformanceLogger"))).currentTimestamp());break}return(e||(e=n("Promise"))).resolve()},a.$6=function(t){return t.endCallReason===o("ZenonDismissReason").ZenonDismissReason.WebRTCError||t.endCallReason===o("ZenonDismissReason").ZenonDismissReason.ClientError},t})(),c={LogProcessor:u};l.ZenonReliabilityQPLLogProcessor=u,l.ZenonReliabilityQPLLogProcessorConfig=c}),98);
__d("ZenonRenderResolutionTracker",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$2={}}var t=e.prototype;return t.setRenderResolutionListener=function(t){this.$1=t},t.getRenderResolutionMap=function(){return this.$2},t.setRenderResolutionMap=function(t){this.$2=t,this.$1&&this.$1.onRenderResolutionChange(t)},e})();i.default=e}),66);
__d("TokenBucketRateLimit",["DateConsts"],(function(t,n,r,o,a,i,l){"use strict";var e=1e3,s=(function(){function t(t,n){this.$1=t*e,this.$2=t*e,this.$3=Date.now(),this.$4=n*e}var n=t.prototype;return n.take=function(n){n===void 0&&(n=1);var t=n*e;return this.$5(),this.$2<t?!1:(this.$2-=t,!0)},n.$5=function(){if(!(this.$2>=this.$1)){var e=Date.now(),t=(e-this.$3)/o("DateConsts").MS_PER_SEC,n=Math.round(t*this.$4);n!==0&&(this.$2=Math.min(this.$1,this.$2+n),this.$3=e)}},t})();l.default=s}),98);
__d("ZenonSDKRateLimiter",["TokenBucketRateLimit","ZenonPlatformRateLimitSitevarConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.take=function(t,n){n===void 0&&(n=1);var e=this.$2(t);return e.take(n)},t.$2=function(t){var e,n=this.$1.get(t);if(n)return n;var o=(e=r("ZenonPlatformRateLimitSitevarConfig").buckets.get(t))!=null?e:r("ZenonPlatformRateLimitSitevarConfig").default;return n=new(r("TokenBucketRateLimit"))(o.bucket_size,o.refill_rate),this.$1.set(t,n),n},e})();l.default=e}),98);
__d("ZenonMWMessageLogger",["ZenonLoggingEventTypes","ZenonMWMessageTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set,s=new Set;function u(t,n){var r=t.jsonPayload,a=r.body,i=r.header;if(!e.has(i.transactionId)){switch(i.type){case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.JOIN:a.joinRequest&&d(a.joinRequest,n);break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.ICE_CANDIDATE:a.iceCandidateRequest&&p(a.iceCandidateRequest,n,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send);break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.CLIENT_MEDIA_UPDATE:a.clientMediaUpdateRequest&&_(a.clientMediaUpdateRequest,n);break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.SERVER_MEDIA_UPDATE:a.serverMediaUpdateResponse&&h(a.serverMediaUpdateResponse,n);break}e.add(i.transactionId)}}function c(e,t){var n=e.jsonPayload,r=n.body,a=n.header;if(!s.has(a.transactionId)){switch(a.type){case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.JOIN:r.joinResponse&&m(r.joinResponse,t);break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.ICE_CANDIDATE:r.iceCandidateRequest&&p(r.iceCandidateRequest,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive);break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.CLIENT_MEDIA_UPDATE:r.clientMediaUpdateResponse&&f(r.clientMediaUpdateResponse,t);break;case o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.SERVER_MEDIA_UPDATE:r.serverMediaUpdateRequest&&g(r.serverMediaUpdateRequest,t);break}s.add(a.transactionId)}}function d(e,t){var n=e.answer,r=e.offer;t({name:"inviteSent"}),y(r,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send),n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function m(e,t){var n=e.answer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function p(e,t,n){var r=e.iceCandidateSdps;r.forEach(function(e){e.candidateSdpString!=null&&t({direction:n,name:"updateIceInfo",sdpString:e.candidateSdpString})})}function _(e,t){var n=e.offer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function f(e,t){var n=e.answer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function g(e,t){var n=e.answer,r=e.offer;r&&y(r,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive),n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive)}function h(e,t){var n=e.answer;n&&y(n,t,o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Send)}function y(e,t,n){e.sdpString!=null&&t({direction:n,name:"updateIceInfo",sdpString:e.sdpString})}l.logSentMessage=u,l.logReceivedMessage=c}),98);
__d("ZenonValidateMWMessage",["FBLogger","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMWMessageTypes"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.jsonPayload.header.type;return e.jsonPayload.header.serverInfoData==null&&t!=null&&t!==o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.JOIN?(r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP][DROP] No remoteSignalingID in message: "+t}),r("FBLogger")("rtc_www").warn("[ZP][DROP] No remoteSignalingID in message: "+t),!1):!0}l.default=e}),98);
__d("ZenonSctpMWMessageSender",["Promise","RequestStreamBodyUtils","ZenonActorHooks","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMWMessageDebugLogger","ZenonMWMessageLogger","ZenonMWMessageReliabilityLogger","ZenonMWMessageTranslator","ZenonMWMessageTypes","ZenonPeerConnectionConstants","ZenonSCTPConstants","ZenonValidateMWMessage","asyncToGeneratorRuntime","err","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){this.$3=e}var a=t.prototype;return a.$4=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=(t=e.jsonPayload.header.clientSessionId)!=null?t:"";try{yield this.$3.waitForSctpOpened(n)}catch(e){var a=r("getErrorSafe")(e);r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Not sending MWS message through SCTP because SCTP could not connect. Error: "+a.toString()});return}o("ZenonMWMessageReliabilityLogger").logSendingMessage(e),r("ZenonMWMessageDebugLogger").logMWMessage("SENDING","SCTP",e),this.$2&&o("ZenonMWMessageLogger").logSentMessage(e,this.$2);var i,l;switch(e.jsonPayload.header.type){default:i=this.$5(e),l=o("ZenonSCTPConstants").SCTP_SIGNALING_TOPIC;break}if(i!=null&&l!=null)try{yield this.$3.sendDataMessage(n,l,{message:JSON.stringify(i),recipients:{recipientIDs:[o("ZenonPeerConnectionConstants").SCTP_MEDIA_SERVER_ID]},sender:o("ZenonActorHooks").ZenonActor.getID()}),o("ZenonMWMessageReliabilityLogger").logSentMessage(e),this.$2&&this.$2({mwMessage:e,name:"mwMessageSent"})}catch(t){var s=r("getErrorSafe")(t);this.$6(e,s.toString())}else this.$6(e,"Invalid message type sent through datachannel")});function t(t){return e.apply(this,arguments)}return t})(),a.$5=function(t){var e,n,r,a=(e=t.jsonPayload.body.serverMediaUpdateResponse)==null?void 0:e.currentVersion,i={body:t.jsonPayload.body,endpoint:t.endpoint,header:t.jsonPayload.header,senderId:(n=(r=t.jsonPayload.header.sender)==null?void 0:r.id)!=null?n:""};return{signalingMessagePayload:o("RequestStreamBodyUtils").stringToBase64WithoutPadding(JSON.stringify(i)),version:a}},a.$6=function(t,n){var e=n!=null?n:"SCTP Message Send Error";o("ZenonMWMessageReliabilityLogger").logSendMessageFailed(t,"[SCTP] "+e),r("ZenonMWMessageDebugLogger").logSendMultiwayMessageFailure(e,t.jsonPayload.header.type)},a.sendMessage=function(a){var t=o("ZenonMWMessageTranslator").toMWMessage(a);if(!t||!r("ZenonValidateMWMessage")(t))return(e||(e=n("Promise"))).reject(r("err")("Invalid MW message"));var i=t.jsonPayload.header.type;return r("gkx")("25222")&&(i===o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.SERVER_MEDIA_UPDATE||i===o("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.WAKEUP)?this.$4(t):(e||(e=n("Promise"))).reject(r("err")("SCTP only supports SMU"))},a.setMessageReceiver=function(t){this.$1=t},a.setLoggingEventHandler=function(t){this.$2=t},t})();l.default=s}),98);
__d("ZenonSctpMWMessageSenderHelper",["Promise","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonSCTPConstants","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=15e3,u="SCTP not opened",c=(function(){function t(){this.$2=new Map}var a=t.prototype;return a.setupSctpChannelApi=function(t,n,r){this.$1=n,this.$2.set(t,r)},a.sendDataMessage=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var o=this.$2.get(e);if(o!=null){var a;((a=this.$1)==null?void 0:a.getMediaMode())==="sfu"?yield o.sendDataMessage(t,n):r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Not sending message on topic "+t+" because we are not in SFU mode"})}else this.$3()});function t(t,n,r){return e.apply(this,arguments)}return t})(),a.getDataChannelState=function(t,n){var e=this.$2.get(t);if(e!=null)return e.getDataChannelState(n);this.$3()},a.subscribeDataChannelOpen=function(t,n,r){var e=this.$2.get(t);e!=null?e.subscribeDataChannelOpen(n,r):this.$3()},a.unsubscribeDataChannelOpen=function(t,n,r){var e=this.$2.get(t);e!=null?e.unsubscribeDataChannelOpen(n,r):this.$3()},a.waitForSctpOpened=function(a){var t=this;return new(e||(e=n("Promise")))(function(e,n){var i=t.getDataChannelState(a,o("ZenonSCTPConstants").SCTP_SIGNALING_TOPIC);switch(i!=null?i:"does-not-exist"){case"open":{e();break}case"closed":case"closing":{n(r("err")("channel is closed"));break}case"does-not-exist":case"connecting":{r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SCTP not opened, deferring sending MWS message"}),r("ZenonInfraActionsLogger").startTimer(u);var l=function(){r("ZenonInfraActionsLogger").stopTimer(u),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"SCTP not opened, deferring sending MWS message"}),t.unsubscribeDataChannelOpen(a,l,o("ZenonSCTPConstants").SCTP_SIGNALING_TOPIC),window.clearTimeout(c),e()},c=window.setTimeout(function(){t.unsubscribeDataChannelOpen(a,l,o("ZenonSCTPConstants").SCTP_SIGNALING_TOPIC),r("ZenonInfraActionsLogger").stopTimer(u),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"SCTP never opened."}),n(r("err")("timeout"))},s);t.subscribeDataChannelOpen(a,l,o("ZenonSCTPConstants").SCTP_SIGNALING_TOPIC);break}}})},a.$3=function(){var e="ZenonSctpMWMessageSenderHelper",t="[ZP] Peer Connection Manager was not setup for SCTP communication yet";r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:t,errorDomain:e})},t})();l.default=c}),98);
__d("ZenonSignalingTransportTypes",[],(function(t,n,r,o,a,i){"use strict";var e=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",PARENT_INITIATED_CALL:"rtc_child_window_start_call",PARENT_LOG_IDENTIFIERS:"rtc_parent_log_identifiers",PARENT_PCF_TIMINGS:"rtc_parent_pcf_timings",PARENT_QPL_MARKER:"rtc_parent_qpl_marker",PARENT_TO_CHILD_MESSAGE:"rtc_child_window_message"});i.ChildTransportMessageType=e}),66);
__d("isFacebookishURI",["isFacebookURI","isMessengerDotComURI"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("isFacebookURI")(e)||r("isMessengerDotComURI")(e)}l.default=e}),98);
__d("ZenonSignalingChildTransport",["Promise","QuickPerformanceLogger","Random","SecurePostMessage","URI","ZenonProductConnectFunnel","ZenonSignalingTransportTypes","gkx","isEmpty","isFacebookishURI","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(function(){function t(e){var t=this,n=e.onLocalCallIDUpdate,a=e.parentNonce,i=e.peerID,l=e.roomID,u=e.serverInfoData,c=e.timeoutMS;this.$6=null,this.$8=null,this.$12=function(e){var n=e.data,a=Math.trunc((s||(s=r("performanceNow")))()),i=n.acceptedTs,l=n.ringingTs,u=n.triggeredTs;if(n.nonce===t.$1)switch(n.type){case o("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_INITIATED_CALL:t.$6&&t.$6(n.mwThriftRingRequest);return;case o("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_QPL_MARKER:n.version===2&&n.markers.forEach(function(e,t){(d||(d=r("QuickPerformanceLogger"))).activeMarkers.set(t,e)});return;case o("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_LOG_IDENTIFIERS:n.localCallID!=null&&(t.$8=n.localCallID,t.$9&&t.$9(n.localCallID));return;case o("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_PCF_TIMINGS:r("ZenonProductConnectFunnel").setPreJoinTimings({acceptedTs:i!=null?a+i:null,ringingTs:l!=null?a+l:null,triggeredTs:u!=null?a+u:null});return}},this.$2=a,this.$1=this.$10(),this.$3=i,this.$7=c,this.$4=l,this.$5=u,this.$9=n}var a=t.prototype;return a.getLocalCallIDFromParent=function(){return this.$8},a.connect=function(){var t=this,r=new(e||(e=n("Promise")))(function(e){t.$6=function(t){return e({isTimeout:!1,mwThriftRingRequest:t})},t.$11()}),o=new e(function(e){window.setTimeout(function(){e({isTimeout:!0,mwThriftRingRequest:null})},t.$7)}),a=e.race([r,o]);return a.then(function(e){return t.$6=null,e.isTimeout?{state:"join_unavailable"}:{mwThriftRingRequest:e.mwThriftRingRequest,state:"join_ready"}})},a.$11=function(){var e=this,t=r("gkx")("15312")?window.parent:window.opener;if(t&&t.postMessage){window.addEventListener("message",this.$12,!1);var n={childNonce:this.$1,nonce:this.$2,peerID:this.$3,roomID:this.$4,serverInfoData:this.$5,type:o("ZenonSignalingTransportTypes").ChildTransportMessageType.CHILD_WINDOW_READY},a=new MessageChannel;a.port1.onmessage=function(t){e.$12(t)};var i=window.location.origin;r("gkx")("22889")||!(u||(u=r("isEmpty")))(document.referrer)&&i!==document.referrer&&r("isFacebookishURI")(new(c||(c=r("URI")))(document.referrer))&&(i=document.referrer),o("SecurePostMessage").sendMessageToSpecificOrigin(t,n,i,[a.port2])}},a.$10=function(){return String(o("Random").random())},t})();l.default=m}),98);
__d("ZenonSignalingInitState",["setInterval"],(function(t,n,r,o,a,i,l){"use strict";var e=1e4;function s(e,t){return t.type==="receiveInviteRequest"?(e.onInviteReceived(t.payload,t.configuration),{inviteMessageID:t.messageID}):{}}function u(e,t){t.type==="sendInviteRequest"&&e.sendSignalingEvent(t.payload,t.onSent,t.onError)}function c(t){if(!t.pingTimer){var n,o,a=(n=(o=t.config)==null?void 0:o.getConfigManager().getSignalingPingConfig().getPingIntervalMs())!=null?n:e,i={eventName:"pingRequest"},l=r("setInterval")(function(){t.signalingModel.getRemoteSignalingID()!=null&&t.sendSignalingEvent(i)},a);return{pingTimer:l}}return{}}l.onReceiveInvite=s,l.onSendInvite=u,l.startPingTimer=c}),98);
__d("ZenonSignalingInviteReceivedState",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(t.type==="sendInviteResponse"){var n=e.inviteMessageID;n!=null?(t.payload.ackMessageId=n,e.sendSignalingEvent(t.payload,t.onSent,t.onError)):r("FBLogger")("rtc_www").mustfix("onSendInviteResponse handler invoked without populated inviteMessageID in signaling state machine context.")}}l.onSendInviteResponse=e}),98);
__d("ZenonSignalingNegotiationCompleteState",["ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","err","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(t.type==="receiveRemoteSdpRequest"){var n,o=t.payload,a=o.e2eeServerState,i=o.fromVersion,l=i===void 0?-1:i,s=o.mediaPath,u=o.mediaStates,c=o.onProcessed,d=o.sdp,m=o.sdpOriginLocalId,p=o.source,_=(n=e.lastAckedLocalSdpVersion)!=null?n:-1;return r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"negotiationComplete receiveAnswer: lastAckedLocalSdpVersion: "+_+", fromVersion: "+l+", source: "+p}),r("promiseDone")(e.onSdpReceived(d,s,u,p!=null?p:null,null,m,c,t.payload.ackMessageId,a)),{lastRemoteMediaUpdateVersion:d.version}}return{}}function s(e,t){if(t.type==="sendMediaUpdateRequest")if(e.isMediaUpdateResponsePending===!0){var n,o=t.onError,a=t.onSent,i=t.payload;return(n=e.mediaUpdateRequestToSend)==null||n.onError(r("err")("pending media update replaced by newer update")),{mediaUpdateRequestToSend:{onError:o,onSent:a,payload:i}}}else{var l=e.sendSignalingEvent(t.payload,t.onSent,t.onError);return{isMediaUpdateResponsePending:!0,mediaUpdateRequestToSend:null,mediaUpdateRequestTransactionId:l}}return{}}l.onReceiveAnswer=e,l.onSendMediaUpdateRequest=s}),98);
__d("ZenonSignalingSharedActions",["ZenonAuditedCheckpointLogId","ZenonDebugLogger","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonODSLogger","ZenonSignalingTypes","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e="last_remote_media_update_version_from_version_not_equal",s=r("ZenonDebugLogger").getInstance();function u(e,t){t.type!=="messageSent"&&e.sendSignalingEvent(t.payload,t.onSent?t.onSent:void 0,t.onError?t.onError:void 0)}function c(e,t){var n;t.type==="receiveCapabilitiesRequest"&&r("promiseDone")(e.onCapabilitiesReceived(t.payload.capabilities,(n=t.payload.escalationConferenceName)!=null?n:null))}function d(e,t){t.type==="receiveClientInfoRequest"&&r("promiseDone")(e.onClientInfoReceived(t.payload.userCapabilities,t.payload.actorRepresentatives,t.payload.mediaPath))}function m(e,t){if(t.type==="receiveGenericDataMessageRequest"){e.sendSignalingEvent({ackMessageId:t.messageID,eventName:"genericDataMessageResponse"});var n={message:t.payload.data,sender:""};r("promiseDone")(e.onGenericDataMessageReceived(t.payload.topic,n))}}function p(e,t){if(t.type==="receiveIceCandidateRequest"){var n={ackMessageId:t.messageID,eventName:"iceCandidateResponse"};e.sendSignalingEvent(n);var r=e.onIceCandidateReceived;t.payload.iceCandidates.forEach(function(e){return r(e)})}}function _(e,t){var n,a;if(t.type!=="receiveInitiateRenegotiationRequest")return{};var i=t.payload,l=i.hasRemoteOffer,s=i.messageTags,u=D(e.lastRemoteMediaUpdateVersion,t.payload.fromVersion),c={ackMessageId:t.messageID,acknowledgedVersion:u?(n=e.lastRemoteMediaUpdateVersion)!=null?n:0:t.payload.version,eventName:"initiateRenegotiationResponse",hasRemoteOffer:l,messageTags:s,statusCode:u?o("ZenonSignalingTypes").ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH:o("ZenonSignalingTypes").ZenonSignalingStatusCode.OK};if(e.sendSignalingEvent(c),t.payload.onProcessed(),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"onProcessed called in ZenonSignalingSharedActions.onReceiveInitiateRenegotiationRequest"}),u)return{};var d=e.signalingModel.getMediaModeManager();return t.payload.mediaPath===o("ZenonMWMessageTypes").ZenonMWMediaPath.P2P?(d.onDeescalated(),l?(e.logEvent({name:"renegotiationSmuReqWithOfferReceived"}),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"initiateRenegotiationRequest: De-escalation callee"})):(e.logEvent({name:"renegotiationSmuReqWithAnswerReceived"}),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"initiateRenegotiationRequest: De-escalation caller"}))):(d.onSfuEscalated(),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"initiateRenegotiationRequest: SFU escalation"})),r("promiseDone")(e.onRenegotiationRequested(l)),l?{}:M((a=e.lastRemoteMediaUpdateVersion)!=null?a:null,t.payload.version)}function f(e,t){if(t.type==="receiveLocalSdpResponse"){t.payload.source==="joinResponse"&&e.logEvent({name:"inviteResponseReceived"});var n=t.payload.hasAnswerInJoinResponse;n?e.signalingModel.getMediaModeManager().onSfuEscalated():e.logEvent({name:"inviteResponseProcessed"}),e.logEvent({hasAnswerInJoinResponse:n,name:"setHasAnswerInJoinResponse"}),e.logEvent({name:"startHeartbeat"})}}function g(t,n){if(n.type!=="receiveMediaUpdateRequest")return{};var a=t.lastRemoteMediaUpdateVersion,i=n.payload,l=i.mediaStates,u=l.fromVersion,c=l.version,d=i.messageTags,m=i.onProcessed;m&&(m(),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"onProcessed called in ZenonSignalingSharedActions.onReceiveMediaUpdateRequest"}));var p=a!=null&&u!=null&&a!==u;a!==u&&(r("ZenonODSLogger").logCounter(e),s.logConsole("lastRemoteMediaUpdateVersion and fromVersion are not equal"));var _={ackMessageId:n.messageID,acknowledgedVersion:p&&t.lastRemoteMediaUpdateVersion!=null?t.lastRemoteMediaUpdateVersion:n.payload.mediaStates.version,eventName:"mediaUpdateResponse",messageTags:d,responseStatusCode:p?o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONDITIONAL_REQUEST_FAILED:o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK};return t.sendSignalingEvent(_),!p&&(r("promiseDone")(t.onMediaUpdateReceived(n.payload.mediaStates)),a==null||c>a)?{lastRemoteMediaUpdateVersion:c}:{}}function h(e,t){if(t.type!=="receiveParticipantUpdateRequest")return{};var n={ackMessageId:t.messageID,eventName:"participantUpdateResponse",requestVersionId:t.payload.versionId};e.sendSignalingEvent(n);var o=e.lastParticipantUpdateVersion;return o==null||o<t.payload.versionId?(r("promiseDone")(e.onParticipantUpdateReceived(t.payload.participantStates,t.payload.sctpUserIdNodeIdMap)),{lastParticipantUpdateVersion:t.payload.versionId}):{}}function y(e){r("promiseDone")(e.onPendingApprovalReceived()),e.logEvent({name:"pendingApproval"})}function C(e){r("promiseDone")(e.onServerRenegotiationFinished())}function b(e,t){var n,a,i;if(t.type!=="receiveRemoteSdpRequest")return{};var l=D(e.lastRemoteMediaUpdateVersion,t.payload.fromVersion);if(((n=t.payload)==null?void 0:n.source)!=="joinResponse"){var s,u={ackMessageId:t.messageID,acknowledgedVersion:l?(s=e.lastRemoteMediaUpdateVersion)!=null?s:0:t.payload.sdp.version,eventName:"remoteSdpResponse",messageTags:t.payload.messageTags,negotiateType:t.payload.negotiateType,statusCode:l?o("ZenonSignalingTypes").ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH:o("ZenonSignalingTypes").ZenonSignalingStatusCode.OK,type:t.payload.sdp.type};e.sendSignalingEvent(u)}return l?(t.payload.onProcessed?(t.payload.onProcessed(),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"onProcessed called in ZenonSignalingSharedActions.onReceiveRemoteSdpRequest"})):r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"onProcessed is not set in ZenonSignalingSharedActions.onReceiveRemoteSdpRequest!"}),{}):(t.payload.source==="serverMediaUpdateRequest"&&t.payload.sdp.type==="answer"&&e.logEvent({name:"smuWithAnswerReceived"}),r("promiseDone")(e.onSdpReceived(t.payload.sdp,t.payload.mediaPath,t.payload.mediaStates,(a=t.payload.source)!=null?a:null,t.payload.renegotiationOffer,t.payload.sdpOriginLocalId,t.payload.onProcessed,t.payload.ackMessageId,t.payload.e2eeServerState)),babelHelpers.extends({},M((i=e.lastRemoteMediaUpdateVersion)!=null?i:null,t.payload.sdp.version),{lastRemoteSdpResponseMessageId:t.messageID}))}function v(e,t){t.type==="receiveRoomContextUpdateRequest"&&r("promiseDone")(e.onRoomContextUpdateReceived(t.payload.context))}function S(e,t){if(t.type==="receiveStateSyncNotifyRequest"){var n=e.signalingModel,r=t.payload,o=r.data,a=r.responseRequired,i=r.topic,l=r.version;if(n.getStateSyncStore().updateOutputState(i,{data:o,version:l}),n.notify(),a){var s={ackMessageId:t.messageID,eventName:"stateSyncNotifyResponse",topic:i,version:l};e.sendSignalingEvent(s)}}}function R(e,t){if(t.type==="receiveOverlayConfigServerUpdateRequest"){var n=e.signalingModel;n.updateOverlayConfigServerLayer(t.payload.serverLayer),n.notify()}}function L(e,t){var n;if(t.type==="receiveTerminateRequest"){if(t.payload.fromJoinResponse===!0&&e.logEvent({name:"inviteResponseReceived"}),t.payload.shouldInformPeer){var o={ackMessageId:t.messageID,eventName:"dismissResponse"};e.sendSignalingEvent(o)}r("promiseDone")(e.onDismissReceived(e.signalingModel.getSignalingID(),t.payload.reason,(n=t.payload.subreason)!=null?n:null,t.payload.detailedReasonFromMW))}}function E(e,t){if(t.type!=="sendSubscriptionRequest")return{};var n=e.lastSubscriptions,r=e.sendSignalingEvent,o=[].concat(t.payload.subscriptions).sort(w),a=JSON.stringify(o);return n!==a&&r(t.payload,t.onSent,t.onError),{lastSubscriptions:a}}function k(e,t){if(t.type==="sendClientRenegotiationRequest"){var n=t.payload.negotiationEvent;e.onClientRenegotiationReceived(n)}}function I(e,t){t.type==="sendTerminateRequest"&&t.payload.shouldInformPeer&&e.signalingModel.getRemoteSignalingID()!=null&&e.sendSignalingEvent(t.payload,t.onSent,t.onError)}function T(e,t){t.type==="sendUsersApprovalRequest"&&e.sendSignalingEvent(t.payload,t.onSent,t.onError)}function D(e,t){return e!=null&&t!=null&&e!==t}function x(e,t){return P(e,t,!1)}function $(e,t){return P(e,t,!0)}function P(e,t,n){if(t.type==="receiveMediaUpdateResponse"){var o,a=(o=e==null?void 0:e.lastAckedLocalSdpVersion)!=null?o:-1,i=t.payload.acknowledgedVersion;if(r("ZenonDebugLogger").getInstance().logConsole("receiveMediaUpdate: lastAckedSdpVersion "+String(a)+", remoteAckedVersion: "+String(i)),i>=a){var l,s,u;e.lastAckedLocalSdpVersion=i,r("promiseDone")(e.onMediaUpdateResponseReceived({cancelNegotiations:n,responseStatusCode:(l=t.payload.responseStatusCode)!=null?l:null,responseSubCode:(s=t.payload.responseSubCode)!=null?s:null,retryAfter:(u=t.payload.retryAfter)!=null?u:null}))}else r("ZenonDebugLogger").getInstance().logConsole("mediaUpdateResponse: Ignoring old message response");var c=e.mediaUpdateRequestToSend;if(c){var d=c.onError,m=c.onSent,p=c.payload,_=e.sendSignalingEvent(p,m,d);return{isMediaUpdateResponsePending:!0,lastAckedLocalSdpVersion:e.lastAckedLocalSdpVersion,mediaUpdateRequestToSend:null,mediaUpdateRequestTransactionId:_}}else return{isMediaUpdateResponsePending:!1,lastAckedLocalSdpVersion:e.lastAckedLocalSdpVersion,mediaUpdateRequestTransactionId:""}}return{}}function N(e,t){if(t.type!=="sendLocalSdpRequest")return{};var n=e.sendSignalingEvent(t.payload,t.onSent,t.onError);return{mediaUpdateRequestTransactionId:n}}function M(e,t){return e==null||t>e?{lastRemoteMediaUpdateVersion:t}:{}}function w(e,t){var n,r;if(e.type!==t.type)return e.type-t.type;var o=(n=e.trackId)!=null?n:null,a=(r=t.trackId)!=null?r:null;return o===null||a===null?0:o.localeCompare(a)}l.genericEventSender=u,l.onReceiveCapabilitiesRequest=c,l.onReceiveClientInfoRequest=d,l.onReceiveGenericDataMessageRequest=m,l.onReceiveIceCandidateRequest=p,l.onReceiveInitiateRenegotiationRequest=_,l.onReceiveLocalSdpResponse=f,l.onReceiveMediaUpdateRequest=g,l.onReceiveParticipantUpdateRequest=h,l.onReceivePendingApprovalRequest=y,l.onServerRenegotiationFinished=C,l.onReceiveRemoteSdpRequest=b,l.onReceiveRoomContextUpdateRequest=v,l.onReceiveStateSyncNotifyRequest=S,l.onReceiveOverlayConfigServerUpdateRequest=R,l.onReceiveTerminateRequest=L,l.onSendSubscriptionRequest=E,l.onSendClientRenegotiationRequest=k,l.onSendTerminateRequest=I,l.onSendUsersApprovalRequest=T,l.shouldRejectRequest=D,l.onNonSDPReceiveMediaUpdateResponse=x,l.onReceiveMediaUpdateResponse=$,l.onSendLocalSdpRequestOffer=N}),98);
__d("ZenonSignalingSMGuards",["ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonSignalingSharedActions","isEmployeeTestUserZenonLogging"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t.type==="receiveRemoteSdpRequest"&&t.payload.sdp.type==="offer"&&o("ZenonSignalingSharedActions").shouldRejectRequest(e.lastRemoteMediaUpdateVersion,t.payload.fromVersion)===!1}function s(e,t){return t.type==="receiveRemoteSdpRequest"&&t.payload.sdp.type==="offer"&&o("ZenonSignalingSharedActions").shouldRejectRequest(e.lastRemoteMediaUpdateVersion,t.payload.fromVersion)}function u(e,t){return t.type==="receiveRemoteSdpRequest"&&t.payload.sdp.type==="pranswer"}function c(e,t){return t.type==="receiveRemoteSdpRequest"&&t.payload.sdp.type==="answer"}function d(e,t){return t.type==="sendLocalSdpRequest"&&t.payload.sdp.type==="answer"}function m(e,t){return t.type==="receiveLocalSdpResponse"&&t.payload.source==="joinResponse"}function p(e,t){var n=t.type==="receiveRemoteSdpRequest"&&(t.payload.source==="serverMediaUpdateRequest"||t.payload.source==="clientMediaUpdateResponse");return t.type==="receiveRemoteSdpRequest"&&!n&&(r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"[ZP] Calling the processed function for transaction id: "+String(t.payload.ackMessageId)+". Payload source: "+String(t.payload.source)+"."}),t.payload.onProcessed&&t.payload.onProcessed()),n}function _(e,t){return t.type==="receiveRemoteSdpRequest"&&t.payload.sdp.type==="offer"}function f(e,t){return t.type==="sendLocalSdpRequest"&&t.payload.sdp.type==="offer"}function g(e,t){return t.type==="sendLocalSdpRequest"&&t.payload.sdp.type==="offer"}function h(e,t){var n=t.type==="receiveMediaUpdateResponse"&&t.payload.responseStatusCode!==o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK&&t.payload.ackMessageId===e.mediaUpdateRequestTransactionId;return t.type==="receiveMediaUpdateResponse"&&t.payload.responseStatusCode!==o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"[ZP] Server rejected offer with code: "+String(t.payload.responseStatusCode)+", subCode: "+String(t.payload.responseSubCode)+". Outgoing transaction id was: "+String(e.mediaUpdateRequestTransactionId)+". Incoming transaction id was: "+String(t.payload.ackMessageId)+". Transaction should be canceled: "+String(n)+"."}),n}function y(e,t){var n=t.type==="messageSent"&&t.messageID===e.lastRemoteSdpResponseMessageId,o=t.messageID;if(r("isEmployeeTestUserZenonLogging")()){var a;r("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"lastRemoteSdpResponseMessageIdSentGuard: "+(n?"Passed":"Failed")+" Last ID: "+((a=e.lastRemoteSdpResponseMessageId)!=null?a:"null")+". 'Incoming ID: "+(o!=null?o:"null")})}return n}l.sdpOfferReceiveNotRejectedGuard=e,l.sdpOfferReceiveRejectedGuard=s,l.sdpPrAnswerReceiveGuard=u,l.sdpAnswerReceiveGuard=c,l.sdpAnswerSendGuard=d,l.sdpJoinResponseReceiveGuard=m,l.receiveRemoteSdpRequestSmuOrCmuGuard=p,l.sdpOfferReceiveGuard=_,l.sdpOfferSendGuard=f,l.sdpOfferSendGuardNegotiationComplete=g,l.receiveNonOkMediaUpdateResponseGuard=h,l.lastRemoteSdpResponseMessageIdSentGuard=y}),98);
__d("ZenonSignalingTerminatedState",["ODS","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonSignalingTypes","clearInterval"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e.pingTimer?(r("clearInterval")(e.pingTimer),delete e.pingTimer,e):{}}function u(t,n){var a;if(n.type==="receiveRemoteSdpRequest"){(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_signaling","received_sdp_request_in_signaling_terminated_state"),n.payload.onProcessed&&(n.payload.onProcessed(),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"onProcessed called in ZenonSignalingTerminatedState.onReceiveRemoteSdpRequest"}));var i={ackMessageId:(a=n.payload.ackMessageId)!=null?a:n.messageID,acknowledgedVersion:n.payload.sdp.version,eventName:"remoteSdpResponse",messageTags:n.payload.messageTags,negotiateType:n.payload.negotiateType,statusCode:o("ZenonSignalingTypes").ZenonSignalingStatusCode.METHOD_NOT_ALLOWED,subCode:o("ZenonSignalingTypes").ZenonSignalingStatusSubCode.CLIENT_TERMINATED,type:n.payload.sdp.type};t.sendSignalingEvent(i)}}function c(e,t){if(t.type==="receiveInitiateRenegotiationRequest"){t.payload.onProcessed&&(t.payload.onProcessed(),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"onProcessed called in ZenonSignalingTerminatedState.onReceiveInitiateRenegotiationRequest"}));var n={ackMessageId:t.messageID,acknowledgedVersion:t.payload.version,eventName:"initiateRenegotiationResponse",hasRemoteOffer:!1,statusCode:o("ZenonSignalingTypes").ZenonSignalingStatusCode.METHOD_NOT_ALLOWED,subCode:o("ZenonSignalingTypes").ZenonSignalingStatusSubCode.CLIENT_TERMINATED};e.sendSignalingEvent(n)}}function d(e,t){if(t.type==="receiveMediaUpdateRequest"){t.payload.onProcessed&&(t.payload.onProcessed(),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"onProcessed called in ZenonSignalingTerminatedState.onReceiveMediaUpdateRequest"}));var n={ackMessageId:t.messageID,acknowledgedVersion:t.payload.mediaStates.version,eventName:"mediaUpdateResponse",responseStatusCode:o("ZenonMWMessageTypes").ZenonMWResponseStatusCode.METHOD_NOT_ALLOWED,responseSubCode:o("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_TERMINATED};e.sendSignalingEvent(n)}}l.stopPingTimer=s,l.onReceiveRemoteSdpRequest=u,l.onReceiveInitiateRenegotiationRequest=c,l.onReceiveMediaUpdateRequest=d}),98);
__d("getReceiveEvent",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){switch(e.eventName){case"addParticipantsRequest":return{payload:e,type:"receiveAddParticipantsRequest"};case"addParticipantsResponse":return{payload:e,type:"receiveAddParticipantsResponse"};case"pendingApprovalRequest":return{configuration:n,messageID:t,payload:e,type:"receivePendingApprovalRequest"};case"answerIntentRequest":return null;case"clientEventRequest":return null;case"clientRenegotiationRequest":return null;case"capabilitiesRequest":return{configuration:n,messageID:t,payload:e,type:"receiveCapabilitiesRequest"};case"clientInfoRequest":return{configuration:n,messageID:t,payload:e,type:"receiveClientInfoRequest"};case"dismissResponse":return{configuration:n,messageID:t,payload:e,type:"receiveDismissResponse"};case"iceCandidateRequest":return{configuration:n,messageID:t,payload:e,type:"receiveIceCandidateRequest"};case"iceCandidateResponse":return{configuration:n,messageID:t,payload:e,type:"receiveIceCandidateResponse"};case"initiateRenegotiationRequest":return{configuration:n,messageID:t,payload:e,type:"receiveInitiateRenegotiationRequest"};case"initiateRenegotiationResponse":return null;case"inviteRequest":return{configuration:n,messageID:t,payload:e,type:"receiveInviteRequest"};case"inviteResponse":return{configuration:n,messageID:t,payload:e,type:"receiveInviteResponse"};case"localSdpRequest":return null;case"localSdpResponse":return{configuration:n,messageID:t,payload:e,type:"receiveLocalSdpResponse"};case"mediaUpdateRequest":return{configuration:n,messageID:t,payload:e,type:"receiveMediaUpdateRequest"};case"mediaUpdateResponse":return{configuration:n,messageID:t,payload:e,type:"receiveMediaUpdateResponse"};case"overlayConfigServerUpdateRequest":return{configuration:n,messageID:t,payload:e,type:"receiveOverlayConfigServerUpdateRequest"};case"participantUpdateRequest":return{configuration:n,messageID:t,payload:e,type:"receiveParticipantUpdateRequest"};case"participantUpdateResponse":return{configuration:n,messageID:t,payload:e,type:"receiveParticipantUpdateResponse"};case"pingResponse":return{configuration:n,messageID:t,payload:e,type:"receivePingResponse"};case"pingRequest":return null;case"remoteSdpRequest":return{configuration:n,messageID:t,payload:e,type:"receiveRemoteSdpRequest"};case"remoteSdpResponse":return{configuration:n,messageID:t,payload:e,type:"receiveRemoteSdpResponse"};case"stateSyncNotifyRequest":return{configuration:n,messageID:t,payload:e,type:"receiveStateSyncNotifyRequest"};case"stateSyncNotifyResponse":return null;case"stateSyncUnsubscribeRequest":return null;case"stateSyncUnsubscribeResponse":return{configuration:n,messageID:t,payload:e,type:"receiveStateSyncUnsubscribeResponse"};case"stateSyncUpdateRequest":return null;case"stateSyncUpdateResponse":return{configuration:n,messageID:t,payload:e,type:"receiveStateSyncUpdateResponse"};case"subscriptionRequest":return null;case"removeParticipantsRequest":return null;case"usersApprovalRequest":return null;case"terminateRequest":return{configuration:n,messageID:t,payload:e,type:"receiveTerminateRequest"};case"hangupResponse":return null;case"roomContextUpdateRequest":return{configuration:n,messageID:t,payload:e,type:"receiveRoomContextUpdateRequest"};case"genericDataMessageRequest":return{configuration:n,messageID:t,payload:e,type:"receiveGenericDataMessageRequest"};case"genericDataMessageResponse":return{configuration:n,messageID:t,payload:e,type:"receiveGenericDataMessageResponse"};case"wakeupRequest":return{configuration:n,messageID:t,payload:e,type:"receiveWakeupRequest"};case"wakeupResponse":return null;default:return null}}i.default=e}),66);
__d("getSendEvent",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){switch(e.eventName){case"addParticipantsRequest":return{onError:n,onSent:t,payload:e,type:"sendAddParticipantsRequest"};case"addParticipantsResponse":return{onError:n,onSent:t,payload:e,type:"sendAddParticipantsResponse"};case"answerIntentRequest":return{onError:n,onSent:t,payload:e,type:"sendAnswerIntentRequest"};case"usersApprovalRequest":return{onError:n,onSent:t,payload:e,type:"sendUsersApprovalRequest"};case"capabilitiesRequest":return{onError:n,onSent:t,payload:e,type:"sendCapabilitiesRequest"};case"clientEventRequest":return{onError:n,onSent:t,payload:e,type:"sendClientEventRequest"};case"clientInfoRequest":return{onError:n,onSent:t,payload:e,type:"sendClientInfoRequest"};case"clientRenegotiationRequest":return{onError:n,onSent:t,payload:e,type:"sendClientRenegotiationRequest"};case"dismissResponse":return{onError:n,onSent:t,payload:e,type:"sendDismissResponse"};case"iceCandidateRequest":return{onError:n,onSent:t,payload:e,type:"sendIceCandidateRequest"};case"iceCandidateResponse":return{onError:n,onSent:t,payload:e,type:"sendIceCandidateResponse"};case"initiateRenegotiationRequest":return null;case"initiateRenegotiationResponse":return{onError:n,onSent:t,payload:e,type:"sendInitiateRenegotiationResponse"};case"inviteRequest":return{onError:n,onSent:t,payload:e,type:"sendInviteRequest"};case"inviteResponse":return{onError:n,onSent:t,payload:e,type:"sendInviteResponse"};case"localSdpRequest":return{onError:n,onSent:t,payload:e,type:"sendLocalSdpRequest"};case"localSdpResponse":return{onError:n,onSent:t,payload:e,type:"sendLocalSdpResponse"};case"mediaUpdateRequest":return{onError:n,onSent:t,payload:e,type:"sendMediaUpdateRequest"};case"mediaUpdateResponse":return{onError:n,onSent:t,payload:e,type:"sendMediaUpdateResponse"};case"overlayConfigServerUpdateRequest":return{onError:n,onSent:t,payload:e,type:"sendOverlayConfigServerUpdateRequest"};case"participantUpdateRequest":return{onError:n,onSent:t,payload:e,type:"sendParticipantUpdateRequest"};case"participantUpdateResponse":return{onError:n,onSent:t,payload:e,type:"sendParticipantUpdateResponse"};case"pingResponse":return null;case"pingRequest":return{onError:n,onSent:t,payload:e,type:"sendPingRequest"};case"remoteSdpRequest":return null;case"remoteSdpResponse":return{onError:n,onSent:t,payload:e,type:"sendRemoteSdpResponse"};case"subscriptionRequest":return{onError:n,onSent:t,payload:e,type:"sendSubscriptionRequest"};case"removeParticipantsRequest":return{onError:n,onSent:t,payload:e,type:"sendRemoveParticipantsRequest"};case"stateSyncNotifyRequest":return null;case"stateSyncNotifyResponse":return{onError:n,onSent:t,payload:e,type:"sendStateSyncNotifyResponse"};case"stateSyncUnsubscribeRequest":return{onError:n,onSent:t,payload:e,type:"sendStateSyncUnsubscribeRequest"};case"stateSyncUnsubscribeResponse":return null;case"stateSyncUpdateRequest":return{onError:n,onSent:t,payload:e,type:"sendStateSyncUpdateRequest"};case"stateSyncUpdateResponse":return null;case"terminateRequest":return{onError:n,onSent:t,payload:e,type:"sendTerminateRequest"};case"hangupResponse":return null;case"roomContextUpdateRequest":return null;case"genericDataMessageRequest":return{onError:n,onSent:t,payload:e,type:"sendGenericDataMessageRequest"};case"pendingApprovalRequest":return null;case"genericDataMessageResponse":return{onError:n,onSent:t,payload:e,type:"sendGenericDataMessageResponse"};case"wakeupRequest":return null;case"wakeupResponse":return{onError:n,onSent:t,payload:e,type:"sendWakeupResponse"};default:return null}}i.default=e}),66);
__d("ZenonSignalingStateMachine",["Promise","ZenonDebugLogger","ZenonInfraActionsLogger","ZenonLogPromiseRejection","ZenonMWMessageReliabilityLogTypes","ZenonSignalingInitState","ZenonSignalingInviteReceivedState","ZenonSignalingNegotiationCompleteState","ZenonSignalingSMGuards","ZenonSignalingSharedActions","ZenonSignalingTerminatedState","ZenonStateMachineBase","err","getReceiveEvent","getSendEvent","qpl","xstate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=["receiveRemoteSdpRequest","receiveInitiateRenegotiationRequest","receiveMediaUpdateRequest"],f={loggingStateName:"signalingState",name:"SignalingStateMachine",shortname:"Signaling"},g=(function(e){function t(t,n){var a;return n===void 0&&(n="init"),a=e.call(this,{base:{guards:o("ZenonSignalingSMGuards"),initState:"init"},logging:babelHelpers.extends({},f,{eventToLogTimeoutsOn:null,getTransactionId:function(t){return t.type!=="messageSent"?t.payload.ackMessageId:null},loggableEvents:_,loggingId:+t.signalingModel.getSignalingID()}),machine:{context:babelHelpers.extends({},t),initialState:n,states:W}})||this,a.sm.onTransition(function(e){r("ZenonInfraActionsLogger").updateCachedValues({signalingState:e.value});var t=e.event.type==="receiveRemoteSdpRequest"?e.event.messageID:null;a.logTransition(e,t),a.logTransaction(e.event,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT),a.ifDroppedEvent(e,function(e){e.onError&&e.onError(r("err")("event was dropped: "+e.type))})}),a.$ZenonSignalingStateMachine$p_1=t.sendSignalingEvent,r("ZenonDebugLogger").getInstance().startQPL(r("qpl")._(64245348,"8823"),a.loggingId),a}babelHelpers.inheritsLoose(t,e);var a=t.prototype;return a.processSendEvent=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(p||(p=n("Promise")))(function(n,o){var a=r("getSendEvent")(t,n,o);a!=null?e.$ZenonSignalingStateMachine$p_2(a):n()}))},a.processReceiveEvent=function(t,n,o){if(t.eventName==="wakeupRequest"){this.$ZenonSignalingStateMachine$p_1(t);return}var e=r("getReceiveEvent")(t,n,o);e!=null&&this.$ZenonSignalingStateMachine$p_2(e)},a.processEvent=function(t){this.$ZenonSignalingStateMachine$p_2(t)},a.$ZenonSignalingStateMachine$p_2=function(t){var e=t.type==="receiveRemoteSdpRequest"?t.messageID:null;this.logEvent(t,e),this.sm.send(t)},t})((e=o("ZenonStateMachineBase")).ZenonStateMachineBase),h={actions:[(s=o("ZenonSignalingSharedActions")).genericEventSender]},y={actions:[s.onReceiveTerminateRequest],target:"terminated"},C={actions:[s.genericEventSender]},b={actions:[s.genericEventSender]},v={actions:[s.genericEventSender]},S={actions:[s.onReceiveCapabilitiesRequest]},R={actions:[s.onReceiveClientInfoRequest]},L={actions:[s.onReceiveGenericDataMessageRequest]},E={actions:[s.onReceiveIceCandidateRequest]},k={actions:[s.genericEventSender]},I={actions:[s.genericEventSender]},T={actions:[s.genericEventSender]},D={actions:[(u=o("xstate")).assign(s.onSendSubscriptionRequest)]},x={actions:[s.onSendTerminateRequest],target:"terminated"},$={actions:[s.genericEventSender]},P={actions:[u.assign(s.onReceiveParticipantUpdateRequest)]},N={actions:[s.onReceiveRoomContextUpdateRequest]},M={actions:[s.onReceiveOverlayConfigServerUpdateRequest]},w={actions:[s.onReceiveStateSyncNotifyRequest]},A={actions:[s.genericEventSender]},F={actions:[s.genericEventSender]},O={actions:[s.onSendUsersApprovalRequest]},B={actions:[u.assign(s.onReceiveMediaUpdateRequest)]},W={init:{on:{sendInviteRequest:{actions:[u.assign((c=o("ZenonSignalingInitState")).startPingTimer),c.onSendInvite],target:"inviteSent"},receiveInviteRequest:{target:"inviteReceived",actions:[u.assign(c.startPingTimer),u.assign(c.onReceiveInvite)]},receiveTerminateRequest:y,sendTerminateRequest:x,receiveRoomContextUpdateRequest:N,sendClientInfoRequest:h,sendRemoveParticipantsRequest:$,sendUsersApprovalRequest:O,sendSubscriptionRequest:D,receiveMediaUpdateRequest:B,receiveOverlayConfigServerUpdateRequest:M,receiveStateSyncNotifyRequest:w,sendLocalSdpRequest:e.defer,receiveCapabilitiesRequest:e.defer,receiveClientInfoRequest:e.defer,receiveGenericDataMessageRequest:e.defer,receiveIceCandidateRequest:e.defer,receiveParticipantUpdateRequest:e.defer,receiveLocalSdpResponse:e.defer,receiveMediaUpdateResponse:e.defer,receiveRemoteSdpRequest:e.defer,sendGenericDataMessageRequest:e.defer,sendIceCandidateRequest:e.defer,sendStateSyncUnsubscribeRequest:e.defer,sendStateSyncUpdateRequest:e.defer,sendCapabilitiesRequest:e.defer,sendClientRenegotiationRequest:e.defer}},inviteSent:{on:{sendLocalSdpRequest:{actions:[s.genericEventSender],cond:(d=o("ZenonSignalingSMGuards")).sdpOfferSendGuard,target:"offerSdpSent"},receiveTerminateRequest:y,sendTerminateRequest:x,receiveIceCandidateRequest:E,receiveParticipantUpdateRequest:P,receiveRoomContextUpdateRequest:N,sendCapabilitiesRequest:T,sendClientInfoRequest:h,sendRemoveParticipantsRequest:$,receiveMediaUpdateRequest:B,receiveOverlayConfigServerUpdateRequest:M,receiveStateSyncNotifyRequest:w,sendSubscriptionRequest:D,sendUsersApprovalRequest:O,sendMediaUpdateRequest:e.defer,sendIceCandidateRequest:e.defer,receiveGenericDataMessageRequest:e.defer,sendGenericDataMessageRequest:e.defer,sendStateSyncUnsubscribeRequest:e.defer,sendStateSyncUpdateRequest:e.defer,sendClientRenegotiationRequest:e.defer}},offerSdpSent:{on:{receiveLocalSdpResponse:{actions:[s.onReceiveLocalSdpResponse],cond:d.sdpJoinResponseReceiveGuard,target:"offerSdpAcknowledged"},receiveTerminateRequest:y,receiveCapabilitiesRequest:S,receiveClientInfoRequest:R,receiveIceCandidateRequest:E,receiveMediaUpdateRequest:B,receiveParticipantUpdateRequest:P,receiveRoomContextUpdateRequest:N,sendAddParticipantsRequest:I,sendAnswerIntentRequest:C,sendUsersApprovalRequest:O,sendClientInfoRequest:h,sendRemoveParticipantsRequest:$,receiveOverlayConfigServerUpdateRequest:M,receiveStateSyncNotifyRequest:w,sendSubscriptionRequest:D,receivePendingApprovalRequest:e.defer,receiveRemoteSdpRequest:e.defer,receiveInitiateRenegotiationRequest:e.defer,sendGenericDataMessageRequest:e.defer,sendIceCandidateRequest:e.defer,sendMediaUpdateRequest:e.defer,receiveGenericDataMessageRequest:e.defer,sendStateSyncUnsubscribeRequest:e.defer,sendStateSyncUpdateRequest:e.defer,sendTerminateRequest:e.defer,sendClientRenegotiationRequest:e.defer}},offerSdpAcknowledged:{on:{receivePendingApprovalRequest:{actions:[s.onReceivePendingApprovalRequest]},receiveRemoteSdpRequest:[{actions:[u.assign(s.onReceiveRemoteSdpRequest)],cond:d.sdpAnswerReceiveGuard,target:"negotiationComplete"},{actions:[u.assign(s.onReceiveRemoteSdpRequest)],cond:d.sdpPrAnswerReceiveGuard},babelHelpers.extends({},e.defer,{cond:d.sdpOfferReceiveGuard})],receiveInitiateRenegotiationRequest:{actions:[u.assign(s.onReceiveInitiateRenegotiationRequest)],target:"negotiationComplete"},receiveTerminateRequest:y,sendTerminateRequest:x,receiveCapabilitiesRequest:S,receiveClientInfoRequest:R,receiveIceCandidateRequest:E,receiveMediaUpdateRequest:B,receiveParticipantUpdateRequest:P,receiveRoomContextUpdateRequest:N,sendAddParticipantsRequest:I,sendAnswerIntentRequest:C,sendUsersApprovalRequest:O,sendClientInfoRequest:h,sendRemoveParticipantsRequest:$,receiveOverlayConfigServerUpdateRequest:M,receiveStateSyncNotifyRequest:w,sendStateSyncUnsubscribeRequest:F,sendStateSyncUpdateRequest:A,sendSubscriptionRequest:D,sendIceCandidateRequest:v,sendGenericDataMessageRequest:e.defer,sendMediaUpdateRequest:e.defer,receiveGenericDataMessageRequest:e.defer,sendClientRenegotiationRequest:e.defer}},inviteReceived:{on:{sendInviteResponse:{actions:[o("ZenonSignalingInviteReceivedState").onSendInviteResponse],target:"inviteAcknowledged"},sendTerminateRequest:x,receiveRoomContextUpdateRequest:N,sendAnswerIntentRequest:C,sendIceCandidateRequest:v,sendUsersApprovalRequest:O,sendRemoveParticipantsRequest:$,receiveMediaUpdateRequest:B,receiveOverlayConfigServerUpdateRequest:M,receiveStateSyncNotifyRequest:w,sendStateSyncUnsubscribeRequest:F,sendStateSyncUpdateRequest:A,sendSubscriptionRequest:D,receiveCapabilitiesRequest:e.defer,receiveClientInfoRequest:e.defer,receiveGenericDataMessageRequest:e.defer,receiveIceCandidateRequest:e.defer,receiveParticipantUpdateRequest:e.defer,receiveRemoteSdpRequest:e.defer,sendGenericDataMessageRequest:e.defer,receiveTerminateRequest:e.defer,sendClientRenegotiationRequest:e.defer,sendMediaUpdateRequest:e.defer}},inviteAcknowledged:{on:{sendLocalSdpRequest:[{actions:[s.genericEventSender],cond:d.sdpOfferSendGuard,target:"offerSdpSent"},{actions:[s.genericEventSender],cond:d.sdpAnswerSendGuard,target:"negotiationComplete"}],receiveRemoteSdpRequest:{actions:[u.assign(s.onReceiveRemoteSdpRequest)],cond:d.sdpOfferReceiveGuard,target:"offerSdpReceived"},receiveTerminateRequest:y,sendTerminateRequest:x,receiveCapabilitiesRequest:S,receiveClientInfoRequest:R,receiveIceCandidateRequest:E,receiveMediaUpdateRequest:B,receiveParticipantUpdateRequest:P,receiveRoomContextUpdateRequest:N,sendAnswerIntentRequest:C,sendClientInfoRequest:h,sendIceCandidateRequest:v,receiveOverlayConfigServerUpdateRequest:M,receiveStateSyncNotifyRequest:w,sendSubscriptionRequest:D,sendStateSyncUpdateRequest:e.defer,sendUsersApprovalRequest:e.defer,sendRemoveParticipantsRequest:e.defer,sendStateSyncUnsubscribeRequest:e.defer,sendMediaUpdateRequest:e.defer,sendGenericDataMessageRequest:e.defer,receiveGenericDataMessageRequest:e.defer,sendClientRenegotiationRequest:e.defer}},offerSdpReceived:{on:{sendLocalSdpRequest:[{actions:s.genericEventSender,cond:d.sdpAnswerSendGuard}],receiveTerminateRequest:y,sendTerminateRequest:x,receiveLocalSdpResponse:{actions:[s.onReceiveLocalSdpResponse],target:"negotiationComplete"},receiveCapabilitiesRequest:S,receiveClientInfoRequest:R,receiveIceCandidateRequest:E,receiveMediaUpdateRequest:B,receiveParticipantUpdateRequest:P,receiveRoomContextUpdateRequest:N,sendAnswerIntentRequest:C,sendCapabilitiesRequest:T,sendClientInfoRequest:h,sendIceCandidateRequest:v,receiveOverlayConfigServerUpdateRequest:M,receiveStateSyncNotifyRequest:w,sendSubscriptionRequest:D,sendUsersApprovalRequest:e.defer,sendRemoveParticipantsRequest:e.defer,sendStateSyncUnsubscribeRequest:e.defer,sendStateSyncUpdateRequest:e.defer,receiveRemoteSdpRequest:e.defer,sendGenericDataMessageRequest:e.defer,receiveGenericDataMessageRequest:e.defer,sendClientRenegotiationRequest:e.defer,sendMediaUpdateRequest:e.defer}},negotiationComplete:{on:{receiveInitiateRenegotiationRequest:{actions:[u.assign(s.onReceiveInitiateRenegotiationRequest)]},receiveLocalSdpResponse:{actions:[s.onReceiveLocalSdpResponse],cond:d.sdpJoinResponseReceiveGuard},receiveMediaUpdateResponse:{actions:[u.assign(s.onNonSDPReceiveMediaUpdateResponse)]},receivePendingApprovalRequest:{actions:[s.onReceivePendingApprovalRequest]},receiveRemoteSdpRequest:[{actions:[u.assign(s.onReceiveRemoteSdpRequest)],cond:d.sdpOfferReceiveNotRejectedGuard,target:"serverInitiatedRenegotiating"},{actions:[u.assign(s.onReceiveRemoteSdpRequest)],cond:d.sdpOfferReceiveRejectedGuard},{actions:[u.assign(o("ZenonSignalingNegotiationCompleteState").onReceiveAnswer)],cond:d.sdpAnswerReceiveGuard}],sendClientRenegotiationRequest:{actions:[s.onSendClientRenegotiationRequest],target:"clientInitiatedRenegotiating"},sendLocalSdpRequest:[{actions:[u.assign(s.onSendLocalSdpRequestOffer)],cond:d.sdpOfferSendGuardNegotiationComplete,target:"clientInitiatedRenegotiating"},{actions:[s.genericEventSender],cond:d.sdpAnswerSendGuard}],receiveTerminateRequest:y,sendTerminateRequest:x,receiveOverlayConfigServerUpdateRequest:M,receiveParticipantUpdateRequest:P,receiveMediaUpdateRequest:B,receiveCapabilitiesRequest:S,receiveClientInfoRequest:R,receiveGenericDataMessageRequest:L,receiveIceCandidateRequest:E,receiveRoomContextUpdateRequest:N,receiveStateSyncNotifyRequest:w,sendAddParticipantsRequest:I,sendClientEventRequest:k,sendGenericDataMessageRequest:b,sendIceCandidateRequest:v,sendMediaUpdateRequest:[{actions:[u.assign(o("ZenonSignalingNegotiationCompleteState").onSendMediaUpdateRequest)]}],sendPingRequest:{actions:[s.genericEventSender]},sendRemoveParticipantsRequest:$,sendStateSyncUnsubscribeRequest:F,sendStateSyncUpdateRequest:A,sendSubscriptionRequest:D,sendUsersApprovalRequest:O}},serverInitiatedRenegotiating:{on:{sendLocalSdpRequest:[{actions:["defer"],cond:d.sdpOfferSendGuard},{actions:[s.genericEventSender,s.onServerRenegotiationFinished],cond:d.sdpAnswerSendGuard,target:"negotiationComplete"}],messageSent:{actions:[s.onServerRenegotiationFinished],cond:d.lastRemoteSdpResponseMessageIdSentGuard,target:"negotiationComplete"},receiveTerminateRequest:y,sendTerminateRequest:x,receiveGenericDataMessageRequest:L,receiveIceCandidateRequest:E,receiveParticipantUpdateRequest:P,receiveRoomContextUpdateRequest:N,sendUsersApprovalRequest:O,sendIceCandidateRequest:v,sendSubscriptionRequest:D,sendGenericDataMessageRequest:b,sendClientEventRequest:k,receiveMediaUpdateRequest:e.defer,receiveCapabilitiesRequest:e.defer,receiveClientInfoRequest:e.defer,receiveLocalSdpResponse:e.defer,receiveRemoteSdpRequest:e.defer,sendMediaUpdateRequest:e.defer,sendClientRenegotiationRequest:e.defer,receiveMediaUpdateResponse:e.defer,sendRemoveParticipantsRequest:e.defer,receiveOverlayConfigServerUpdateRequest:e.defer,receiveStateSyncNotifyRequest:e.defer,sendStateSyncUnsubscribeRequest:e.defer,sendStateSyncUpdateRequest:e.defer,sendAddParticipantsRequest:e.defer}},clientInitiatedRenegotiating:{on:{receiveRemoteSdpRequest:[{actions:["defer"],cond:d.sdpOfferReceiveGuard},{actions:[u.assign(s.onReceiveRemoteSdpRequest)],cond:d.sdpAnswerReceiveGuard,target:"negotiationComplete"}],receiveMediaUpdateResponse:[{actions:[u.assign(s.onReceiveMediaUpdateResponse)],cond:d.receiveNonOkMediaUpdateResponseGuard,target:"negotiationComplete"},{actions:["defer"]}],receiveTerminateRequest:y,sendTerminateRequest:x,sendLocalSdpRequest:[{actions:[u.assign(s.onSendLocalSdpRequestOffer)],cond:d.sdpOfferSendGuard},{actions:["defer"],cond:d.sdpAnswerSendGuard}],receiveCapabilitiesRequest:S,receiveClientInfoRequest:R,receiveGenericDataMessageRequest:L,receiveIceCandidateRequest:E,receiveMediaUpdateRequest:B,receiveParticipantUpdateRequest:P,receiveRoomContextUpdateRequest:N,sendUsersApprovalRequest:O,sendAddParticipantsRequest:I,sendIceCandidateRequest:v,sendRemoveParticipantsRequest:$,receiveOverlayConfigServerUpdateRequest:M,receiveStateSyncNotifyRequest:w,sendStateSyncUnsubscribeRequest:F,sendStateSyncUpdateRequest:A,sendSubscriptionRequest:D,sendGenericDataMessageRequest:b,sendClientEventRequest:k,receiveLocalSdpResponse:e.defer,sendMediaUpdateRequest:e.defer,sendClientRenegotiationRequest:e.defer,receiveInitiateRenegotiationRequest:e.defer}},terminated:{entry:[u.assign((m=o("ZenonSignalingTerminatedState")).stopPingTimer)],on:{receiveRemoteSdpRequest:[{actions:[m.onReceiveRemoteSdpRequest],cond:d.receiveRemoteSdpRequestSmuOrCmuGuard}],receiveInitiateRenegotiationRequest:[{actions:[m.onReceiveInitiateRenegotiationRequest]}],receiveMediaUpdateRequest:[{actions:[m.onReceiveMediaUpdateRequest]}]}}};l.default=g}),98);
__d("ZenonSignalingClient",["FBLogger","Promise","ZenonActorHooks","ZenonDismissReason","ZenonE2eeMandatedStateManager","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonMediaActionLogger","ZenonSignalingStateMachine"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t,n,o,a){var i=this;a===void 0&&(a=null),this.$5=null,this.$6=function(){},this.$1=e;var l=this.$7();this.$2=new(r("ZenonSignalingStateMachine"))(babelHelpers.extends({config:a,logEvent:function(t){return i.$6(t)},onInviteReceived:function(t,n){o(t,n,i)},sendSignalingEvent:function(t,r,o){return n.sendEvent(t,r,o)}},l,{signalingModel:e})),t.setReceiver(function(e,t,n){return i.processReceiveEvent(e,t,n)}),this.$3=t,this.$4=n}var a=t.prototype;return a.getSignalingModel=function(){return this.$1},a.processReceiveEvent=function(t,n,r){this.$2.processReceiveEvent(t,n,r)},a.sendInvite=function(t,n,r,a){a===void 0&&(a=o("ZenonActorHooks").ZenonActor.getID());var e={actorID:null,appMessages:n,eventName:"inviteRequest",inviterID:"0",isRemoteOfferer:!1,otherParticipants:t,requestingVideo:!1,roomInfo:{name:"mock"},userID:a};return this.$2.processSendEvent(e)},a.initiateClientRenegotiation=function(t){var e={eventName:"clientRenegotiationRequest",negotiationEvent:t};return this.$2.processSendEvent(e)},a.sendSdp=function(t,n){var e=this.$1.getMediaModeManager().getMediaMode(),r={eventName:"localSdpRequest",mediaMode:e,mediaStates:n,sdp:t};return this.$2.processSendEvent(r)},a.sendIceCandidate=function(t){var e={eventName:"iceCandidateRequest",iceCandidates:[t]};return this.$2.processSendEvent(e)},a.sendClientEvent=function(t){var e={clientEventType:t,eventName:"clientEventRequest"};return this.$2.processSendEvent(e)},a.sendDismiss=function(t){this.$6({name:"dismissSent"});var e={eventName:"terminateRequest",fromJoinResponse:!1,reason:t,shouldInformPeer:!0};return this.$2.processSendEvent(e)},a.silentlyTerminate=function(){var e={eventName:"terminateRequest",fromJoinResponse:!1,reason:o("ZenonDismissReason").ZenonDismissReason.OtherInstanceHandled,shouldInformPeer:!1};return this.$2.processSendEvent(e)},a.sendGenericDataMessage=function(t,n,r,o){var e={data:n,eventName:"genericDataMessageRequest",recipientIDs:r,serviceRecipients:o,topic:t};return this.$2.processSendEvent(e)},a.sendMediaUpdate=function(t){var e={eventName:"mediaUpdateRequest",mediaStates:t};return this.$2.processSendEvent(e)},a.sendAddParticipantsMessage=function(t,n){var e={eventName:"addParticipantsRequest",groupThreadId:n,participants:t};return this.$2.processSendEvent(e)},a.sendRemoveParticipantsRequest=function(t){var e={eventName:"removeParticipantsRequest",participants:t};return this.$2.processSendEvent(e)},a.sendUsersApprovalRequest=function(t,n){var e={approvalStatus:t,eventName:"usersApprovalRequest",targetUsers:n};return this.$2.processSendEvent(e)},a.sendClientInfo=function(t,n,a,i){var e=this,l;(n||a)&&(l=new Map),n&&n.forEach(function(t,n){var r;(r=l)==null||r.set(n,e.getSignalingModel().getStateSyncStore().updateInputState(n,t))}),a&&a.forEach(function(e,t){var n;(n=l)==null||n.set(t,e)});var s=this.$1.getMediaModeManager().getMediaMode(),u={actorRepresentatives:new Map,e2eeInfraMandatedExpStatus:r("ZenonE2eeMandatedStateManager").getE2eeInfraMandatedExpStatus(),eventName:"clientInfoRequest",initialSyncStates:l,isE2eeMandated:r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated(),isSecondaryJoinRole:i,mediaPath:o("ZenonMWMessageTypes").ZenonMWMediaPath[s.toUpperCase()],userCapabilities:t};return this.$2.processSendEvent(u)},a.sendStateSyncUnsubscribe=function(t){var e=this.getSignalingModel(),n=e.getStateSyncStore().unsubscribe(t),r={eventName:"stateSyncUnsubscribeRequest",topic:t,version:n.version},o=this.$2.processSendEvent(r);return e.notify(),o},a.sendStateSyncUpdate=function(t,n){var e=this.getSignalingModel(),r=e.getStateSyncStore().updateInputState(t,n),o={data:r.data!=null?r.data:void 0,eventName:"stateSyncUpdateRequest",topic:t,version:r.version},a=this.$2.processSendEvent(o);return e.notify(),a},a.sendSubscriptionRequest=function(t){var e={eventName:"subscriptionRequest",subscriptions:t};return this.$2.processSendEvent(e)},a.receiveMessage=function(t){var e=t.getHeader(),n=e.remoteSignalingID,o=e.roomInfo;n!=null&&this.$1.getRemoteSignalingID()!==n&&(this.$1.updateRemoteSignalingID(n),this.$6({conferenceName:o.name,name:"setRemoteSignalingID",remoteSignalingID:n}),this.$1.notify()),o!=null&&this.$1.getRoomInfo().name!==o.name&&(r("ZenonInfraActionsLogger").updateCachedValues({conferenceName:o.name}),r("ZenonMediaActionLogger").updateCachedValues({conferenceName:o.name}),this.$1.updateRoomInfo(o),this.$1.notify()),this.$3.receiveMessage(t)},a.isTerminated=function(){return this.$2.getState()==="terminated"},a.sendAnswerIntent=function(){var e={eventName:"answerIntentRequest"};return this.$2.processSendEvent(e)},a.respondToInvite=function(t){var e={ackMessageId:"",eventName:"inviteResponse",status:t};return this.$2.processSendEvent(e)},a.setSignalingEventHandlers=function(t){if(this.$5!=null){r("FBLogger")("rtc_www").mustfix("setSignalingEventHandlers should only be called once, to avoid accidentally losing handlers.");return}this.$5=t},a.setLoggingEventHandler=function(t){this.$6=t,this.$3.setLoggingEventHandler(t)},a.setSecureDataMessageManager=function(t){t!=null&&this.$3.setSecureDataMessageManager(t)},a.$7=function(){return{onCapabilitiesReceived:this.$8("onCapabilitiesReceived"),onClientInfoReceived:this.$8("onClientInfoReceived"),onClientRenegotiationReceived:this.$9("onClientRenegotiationReceived"),onDismissReceived:this.$8("onDismissReceived"),onGenericDataMessageReceived:this.$8("onGenericDataMessageReceived"),onIceCandidateReceived:this.$8("onIceCandidateReceived"),onInviteAcknowledgeSent:this.$8("onInviteAcknowledgeSent"),onMediaUpdateReceived:this.$8("onMediaUpdateReceived"),onMediaUpdateResponseReceived:this.$8("onMediaUpdateResponseReceived"),onParticipantUpdateReceived:this.$8("onParticipantUpdateReceived"),onPendingApprovalReceived:this.$8("onPendingApprovalReceived"),onRenegotiationRequested:this.$8("onRenegotiationRequested"),onRoomContextUpdateReceived:this.$8("onRoomContextUpdateReceived"),onSdpReceived:this.$8("onSdpReceived"),onServerRenegotiationFinished:this.$8("onServerRenegotiationFinished")}},a.$9=function(t){var e=this;return function(){if(e.$5&&e.$5[t]){var n;(n=e.$5)[t].apply(n,arguments)}}},a.$8=function(r){var t=this;return function(){if(t.$5&&t.$5[r]){var o;return(o=t.$5)[r].apply(o,arguments)}return(e||(e=n("Promise"))).resolve()}},t})();l.default=s}),98);
__d("ZenonSimulcastUtils",["UserAgent","ZenonSimulcastManager","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e;return(e=r("gkx")("25212"))!=null?e:!1}function s(){return u()&&e()}function u(){return r("UserAgent").isBrowser("Chrome >= 88")}function c(){return r("gkx")("25212")?o("ZenonSimulcastManager").NUM_LAYERS:1}function d(){return o("ZenonSimulcastManager").MAX_NUM_ACTIVE_LAYERS}l.shouldUseChromeSimulcast=e,l.shouldUseSimulcast=s,l.isCurrentBrowserCompatibleWithSimulcast=u,l.getNumLayers=c,l.getMaxNumLayers=d}),98);
__d("ZenonTransportEventEmitter",["EventEmitter"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.emitJoinReady=function(t){this.emit("transportPlatformEvent",{messageType:"joinReady",mwThriftRingRequest:t})},n.emitParentWindowConnectionTimeout=function(){this.emit("transportPlatformEvent",{messageType:"parentWindowConnectionTimeout",mwThriftRingRequest:null})},t})(r("EventEmitter")),s=new e,u=s;l.default=u}),98);
__d("XVideoCallTurnDiscoveryController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/videocall/turndiscovery/",{version:{type:"Int",required:!0},call_id:{type:"String"}})}),null);
__d("ZenonUtils",["AsyncRequest","AsyncResponse","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e=6e3;function s(t,n,o,a,i,l){n===void 0&&(n=r("emptyFunction")),o===void 0&&(o=r("emptyFunction")),a===void 0&&(a=!1),i===void 0&&(i=e),l===void 0&&(l={});var s=new(r("AsyncRequest"))().setURI(t).setData(l).setAllowCrossPageTransition(!0).setHandler(n).setErrorHandler(o).setTimeoutHandler(i,function(e){var t=new(r("AsyncResponse"))(e,{});t.error=408,t.setErrorSummary("Client side timeout"),o(t)});s.setMethod("POST"),a&&s.setOption("asynchronous_DEPRECATED",!1),s.send()}l.sendServerRequest=s}),98);
__d("ZenonTurnDiscovery",["Promise","XVideoCallTurnDiscoveryController","ZenonDebugLogger","ZenonInfraActionsLogger","ZenonUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=3,u=null;function c(t,a,i){i===void 0&&(i=s);var l=u;if(l!=null)return r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({callType:"mw",checkpoint:"[ZP] returning cached TURN credentials"}),l;var c=1,d=r("XVideoCallTurnDiscoveryController").getURIBuilder().setInt("version",c).setString("call_id",t).getURI();return r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({callType:"mw",checkpoint:"[ZP] sending TURN server request to url "+d.toString()}),u=new(e||(e=n("Promise")))(function(e,n){l(i);function l(i){o("ZenonUtils").sendServerRequest(d.toString(),function(t){var n=t.payload;return e(n)},function(e){var o,s,u=(o=(s=e.getErrorSummary())==null?void 0:s.toString())!=null?o:"";i>0?(r("ZenonDebugLogger").getFBLogger({peerID:a,signalingID:t}).info("Failed turn; going to retry",u),l(i-1)):(r("ZenonDebugLogger").getFBLogger({peerID:a,signalingID:t}).warn("Failed turn",u),n(r("err")("failed")))})}}),u}l.requestTurnCreds=c}),98);
__d("ZenonCallsManager",["invariant","FBLogger","JSResourceForInteraction","MultiwaySharedTypes","OverlayConfigManagerWithServerLayer","PersistedQueue","Promise","RTWebIncomingRingConfiguration","SCTPSignalingListener","ZenonActorHooks","ZenonAppProvider","ZenonAuditedCheckpointLogId","ZenonCallLogger","ZenonChildClientPerfQPLLogProcessor","ZenonChildQPLLogProcessor","ZenonCollisionContext","ZenonConnectionStateManager","ZenonConstants","ZenonDGWSharedWorkerUtils","ZenonDGWUtils","ZenonDeviceId","ZenonDismissReason","ZenonE2ee","ZenonE2eeMandatedStateManager","ZenonEncryptionKeysManagerState","ZenonGraphQLMWThriftMessageSender","ZenonInfraActionsLogger","ZenonLSCallStartEventLogProcessor","ZenonLSCallSummaryLogProcessor","ZenonLSE2EEStatsLogProcessor","ZenonLSPeerConnectionSummaryLogProcessor","ZenonLSStarRatingsLogProcessor","ZenonLastCallLogProcessor","ZenonLocalMediaSDK","ZenonLoggingEventTypes","ZenonMWThriftMessageTranslator","ZenonMediaStatsUtil","ZenonMessageSenderChain","ZenonMqttMWThriftMessageSender","ZenonPeerConnectionConfig","ZenonProductConnectFunnelLogProcessor","ZenonRTWebBrowserFeatureSupport","ZenonReliabilityQPLLogProcessor","ZenonRenderResolutionTracker","ZenonRequestedMediaType","ZenonSCTPConstants","ZenonSDKRateLimiter","ZenonSctpMWMessageSender","ZenonSctpMWMessageSenderHelper","ZenonSignalingChildTransport","ZenonSignalingClient","ZenonSignalingClientManager","ZenonSignalingProtocol","ZenonSimulcastUtils","ZenonTransportEventEmitter","ZenonTransportType","ZenonTurnDiscovery","asyncToGeneratorRuntime","fb-error","filterMap","findInMap","getErrorSafe","getZenonMqttChannel","isEmployeeTestUserZenonLogging","promiseDone","qex","uuidv4"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=r("JSResourceForInteraction")("setE2eeIsMandatedForZenonLoggers").__setRef("ZenonCallsManager"),c=r("JSResourceForInteraction")("ZenonDGWMWThriftMessageSender").__setRef("ZenonCallsManager"),d=r("JSResourceForInteraction")("ZenonDGWStreamController").__setRef("ZenonCallsManager");function m(e){var t,n;return(e==null?void 0:e.messageBody.ringRequest)==null?null:(t=e==null||(n=e.messageBody.ringRequest)==null||(n=n.e2eeEnforcement)==null?void 0:n.infraMandatedExpStatus)!=null?t:o("MultiwaySharedTypes").E2eeInfraMandatedExpStatus.NOT_SET}var p=(function(){function t(e){var t=this;this.$4=new Map,this.$5=null,this.$7=null,this.$8=new(r("ZenonSctpMWMessageSenderHelper")),this.$9=new(r("ZenonRenderResolutionTracker")),this.$10=null;var n=e.getRelayEnvironment();this.$7=new(r("ZenonSDKRateLimiter")),this.$1=new Map,this.$2=e;var a=new(r("ZenonMessageSenderChain"))([].concat(n&&!o("ZenonDGWUtils").shouldUseDGW()?[new(r("ZenonGraphQLMWThriftMessageSender"))(n)]:[],[new(r("ZenonSctpMWMessageSender"))(this.$8)]));o("ZenonDGWUtils").shouldUseDGW()&&r("qex")._("4380")?o("ZenonDGWSharedWorkerUtils").setupDGWSharedWorker("CHILD",a,function(e){t.$10=e}):o("ZenonDGWUtils").shouldUseDGW()&&!r("qex")._("4380")?(r("promiseDone")(d.load(),function(e){e.getControllerInstance().setWindowContext("CHILD"),e.getControllerInstance().setStreamOptions({deviceId:o("ZenonDeviceId").getZenonLocalStorageDeviceIdWithFallback(),loggingId:r("uuidv4")(),serviceId:"rpsignaling"})}),r("promiseDone")(c.load(),function(e){return a.addMessageSender(new e)})):a.addMessageSender(new(r("ZenonMqttMWThriftMessageSender"))),this.$3=new(r("ZenonSignalingClientManager"))(r("ZenonSignalingClient"),function(e,n,r){return t.onInviteReceived(e,n,r)},a,e),this.$6=this.$11()}var a=t.prototype;return a.$11=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({callType:"mw",checkpoint:"[ZP] starting TURN discovery"});var e=Date.now();try{var t=yield o("ZenonTurnDiscovery").requestTurnCreds("ZenonPlatform","MW_PEER_ID");if(r("ZenonPeerConnectionConfig").setTurnCredentials(t),r("isEmployeeTestUserZenonLogging")()){var n={ip:t.ip,ip_6:t.ip_6,ssl_tcp_port:t.ssl_tcp_port,tcp_port:t.tcp_port,udp_port:t.udp_port};r("ZenonInfraActionsLogger").logCheckpoint({callType:"mw",checkpoint:"[ZP] successfully acquired TURN credentials: "+JSON.stringify(n)+". Took "+(Date.now()-e)+" ms."})}else r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,callType:"mw",checkpoint:"[ZP] successfully acquired TURN credentials. Took "+(Date.now()-e)+" ms."})}catch(t){var a=r("getErrorSafe")(t);r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,callType:"mw",checkpoint:"[ZP] failed to get TURN credentials. Took "+(Date.now()-e)+" ms. Error message: "+a.message,errorDomain:"ZenonCallsManager_fetchTurnCredentials"})}});function t(){return e.apply(this,arguments)}return t})(),a.getLogProcessors=function(){var e=[o("ZenonLSCallSummaryLogProcessor").ZenonLSCallSummaryLogProcessorConfig,o("ZenonChildQPLLogProcessor").ZenonChildQPLLogProcessorConfig,o("ZenonLSPeerConnectionSummaryLogProcessor").ZenonLSPeerConnectionSummaryLogProcessorConfig,o("ZenonLSE2EEStatsLogProcessor").ZenonLSE2EEStatsLogProcessorConfig,o("ZenonLSStarRatingsLogProcessor").ZenonLSStarRatingsLogProcessorConfig,o("ZenonLastCallLogProcessor").ZenonLastCallLogProcessorConfig,o("ZenonChildClientPerfQPLLogProcessor").ZenonChildClientPerfQPLLogProcessorConfig,o("ZenonLSCallStartEventLogProcessor").ZenonLSCallStartEventLogProcessorConfig,o("ZenonReliabilityQPLLogProcessor").ZenonReliabilityQPLLogProcessorConfig];return(o("ZenonAppProvider").isMetaAI()||o("ZenonAppProvider").isMessengerWebApp()||o("ZenonAppProvider").isBizWebApp()||o("ZenonAppProvider").isWidgetLiveChatApp()||o("ZenonAppProvider").isMDCApp())&&e.push(o("ZenonProductConnectFunnelLogProcessor").ZenonProductConnectFunnelLogProcessorConfig),e},a.onInviteReceived=function(t,n,a){var e=this.$2.getConfigManager().getZenonMultiCallSupportConfig().getMaxConnectedCalls(),i=r("filterMap")(this.$1,function(e){return e.getConnectionState()!=="terminated"}),l=r("filterMap")(i,function(e){var n;return e.getRemoteSignalingID()===((n=t.roomInfo.context)==null?void 0:n.serverInfoData)});if(l.size>0){r("promiseDone")(a.respondToInvite("OK"));return}var s=r("findInMap")(i,function(e){return e.getRemoteSignalingID()==null})!=null;i.size>=e&&(i.size>e&&r("FBLogger")("rtc_www").warn("We have more than supported number of calls occurring"),o("ZenonActorHooks").ZenonActor.getAppID()===436761779744620 .toString()?r("promiseDone")(a.sendDismiss(o("ZenonDismissReason").ZenonDismissReason.InAnotherCall)):r("promiseDone")(a.respondToInvite("IN_ANOTHER_CALL")),s||r("promiseDone")(a.sendDismiss(o("ZenonDismissReason").ZenonDismissReason.InAnotherCall)))},a.join=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=this;r("PersistedQueue").eventEmitter.emit("active",null);var a=e.peerID;a!=null||s(0,18600),e.roomID!=null||!o("ZenonCollisionContext").isCollisionContextEmpty(e.joiningContext)||s(0,69267);var i={userID:a},l=e.actorID,u=e.callMedia,c=e.callTrigger,d=e.clientCallID,p=e.isSecondaryJoinRole,_=p===void 0?!1:p,f=e.joiningContext,g=e.mwThriftRingRequest,h=e.roomID,y=h===void 0?null:h,C=e.setE2eeModel,b=e.signalingID,v=e.usersToRing,S=_?o("ZenonLoggingEventTypes").ZenonJoinMode.Secondary:o("ZenonLoggingEventTypes").ZenonJoinMode.Primary,R={context:babelHelpers.extends({},f),name:y};if(g!=null&&(g.messageHeader.clientSessionId=b!=null?b:""),this.$1.get(d)!=null){var L="Call ID already exists. Use a new clientCallID/clientSessionID if rejoining.";r("FBLogger")("rtc_www").catching(r("fb-error").err(L)).mustfixThrow("Call ID already exists.");return}r("ZenonE2eeMandatedStateManager").processE2eeMandatedStateFromProductAndRing((t=e.isE2eeMandated)!=null?t:!1,m(g));var E=null;b!=null&&(E=this.$3.getSignalingClient(b));var k=null;if(l!=null)k=l;else if(g!=null){var I,T;k=(I=(T=g.messageHeader.receiver)==null?void 0:T.actorId)!=null?I:null}E==null?E=this.$3.createSignalingClient(b,i,e.serverInfoData,r("ZenonSignalingProtocol").MWPP,R,k,o("ZenonActorHooks").ZenonActor.getID()):E.getSignalingModel().setActorID(k);var D=E.getSignalingModel(),x=D.getSignalingID();r("ZenonInfraActionsLogger").updateCachedValues({signalingID:x}),e.serverInfoData!=null&&this.$12(x,e.serverInfoData);var $=g==null,P=!1;if(g!=null){var N;P=((N=g.messageBody.ringRequest)==null||(N=N.offer)==null?void 0:N.sdpString)!=null}D.getMediaModeManager().onJoin($,v.length,P);var M=this.$4.get(d);if(M==null){var w,A,F=u===r("ZenonRequestedMediaType").Video||u===r("ZenonRequestedMediaType").Audiovideo,O=new(r("ZenonCallLogger"))({config:this.$2.getConfigManager(),initLoggerInfo:{appID:o("ZenonActorHooks").ZenonActor.getAppID(),callTrigger:c,conferenceName:e.roomID,disableTsData:r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated(),isCaller:$,isVideo:F,joinMode:S,localCallID:(w=(A=this.$5)==null?void 0:A.getLocalCallIDFromParent())!=null?w:r("uuidv4")(),peerID:a,protocol:r("ZenonSignalingProtocol").MWPP,serverInfoData:e.serverInfoData,signalingID:b!=null?b:x},isE2eeMandated:r("ZenonE2eeMandatedStateManager").areBothInfraAndProductE2eeMandated(),processorConfigs:this.getLogProcessors(),startFromNavigation:!0});this.$4.set(d,O),r("promiseDone")(this.$2.getSignalingListener().then(function(e){e.setLoggingEventHandler(function(e){return O.log(e)})})),M=O}var B=yield o("ZenonLocalMediaSDK").getCurrentPermissions();M.log({cameraPermission:B==null?void 0:B.cameraState,hasOfferInRingRequest:P,isCaller:$,microphonePermission:B==null?void 0:B.microphoneState,name:"callJoinRequest",rtcActorID:k});var W=o("ZenonSimulcastUtils").shouldUseSimulcast();if(E!=null||s(0,23327),D.getMediaModeManager().getMediaMode()==="p2p"&&(yield this.$6),o("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()&&C!=null){r("ZenonInfraActionsLogger").startTimer("[E2ee] Create E2ee Components");var q=function(t){n.endCall(d,"EndToEndEncryptionInvariantViolated",t)},U=function(t,r){n.sendGenericDataMessage(d,o("ZenonSCTPConstants").E2EE_DATA_MESSAGE_MEDIA_CHANNEL_TOPIC,r,{recipientIDs:[t]},o("ZenonTransportType").ZenonTransportType.SCTP)};yield r("ZenonE2ee").createE2eeComponents(M,E,C,q,U,!1),M.log({isE2eeStackReady:r("ZenonE2ee").isE2eeStackReady(),name:"e2eeComponentCreated"}),r("ZenonInfraActionsLogger").stopTimer("[E2ee] Create E2ee Components")}r("ZenonE2eeMandatedStateManager").isInfraE2eeMandated()&&!r("ZenonE2ee").isE2eeStackReady()&&(o("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()?this.endCall(d,"EndToEndEncryptionInvariantViolated","e2ee stack is not initialized: "+r("ZenonE2ee").getE2eeComponentCreationFailureMessage()):this.endCall(d,"EndToEndEncryptionInvariantViolated","E2ee is mandated, but Insertable Streams API is not supported"));var V=new(r("OverlayConfigManagerWithServerLayer"))(this.$2.getConfigManager()),H=new(r("ZenonConnectionStateManager"))(d,E,$?"outgoing":"incoming",V,M,this.$8,W,this.$9);if(this.$1.set(d,H),!o("RTWebIncomingRingConfiguration").isSupportedClient()){r("promiseDone")(this.endCall(e.clientCallID,"VersionUnsupported","Browser not supported"));return}if(yield H.start(e),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,callType:"mw",checkpoint:"[ZP] ZenonCallsManager_join called, starting connectionStateManager",conferenceName:e.roomID,isCaller:$,signalingID:b}),g!=null){var G=o("ZenonMWThriftMessageTranslator").toSignalingMessage(g);G!=null&&this.$3.receiveMessage(G)}var z=new(r("SCTPSignalingListener"))(H),j=function(t){switch(t){case"sfu":z.subscribe(function(e){return n.$3.receiveMessage(e)});break;case"p2p":z.unsubscribe();break}};D.getMediaModeManager().addListener("mediaMode",j),j(D.getMediaModeManager().getMediaMode()),z.setLoggingEventHandler(function(e){var t;return(t=M)==null?void 0:t.log(e)}),o("ZenonMediaStatsUtil").shouldUseTSLog()?r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,callType:"mw",checkpoint:"[ZP] Eligible for tslog logging",conferenceName:e.roomID,isCaller:$,serverInfoData:e.serverInfoData,signalingID:this.$13(x,d)}):r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,callType:"mw",checkpoint:"[ZP] Not eligible for tslog logging",conferenceName:e.roomID,isCaller:$,serverInfoData:e.serverInfoData,signalingID:this.$13(x,d)})});function t(t){return e.apply(this,arguments)}return t})(),a.$13=function(t,n){return t!=null?t:n},a.addLocalTrack=function(r,o){var t;return(t=this.$14(r,function(e){return e.addLocalTrack(o)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.removeLocalTrack=function(r,o){var t;return(t=this.$14(r,function(e){return e.removeLocalTrack(o)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.muteTrack=function(r,o,a){var t;return a===void 0&&(a=!1),this.$15("muteTrack")&&(t=this.$14(r,function(e){return e.muteTrack(o,a)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.unmuteTrack=function(r,o,a){var t;return a===void 0&&(a=!1),this.$15("unmuteTrack")&&(t=this.$14(r,function(e){return e.unmuteTrack(o,a)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.stopLocalTrack=function(r,o){var t;return(t=this.$14(r,function(e){return e.stopLocalTrack(o)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.initializeLogging=function(t,n){var e=n.callTrigger,a=n.initializeVideo,i=n.isE2eeMandated,l=n.peerID,s=n.roomID,c=s===void 0?null:s,d=n.serverInfoData,m=n.signalingID,p=n.startFromNavigation;if(m!=null&&(i&&r("promiseDone")(u.load(),function(e){return e(m)}),r("ZenonInfraActionsLogger").updateCachedValues({signalingID:String(m)}),!this.$4.has(t))){var _,f,g=new(r("ZenonCallLogger"))({config:this.$2.getConfigManager(),initLoggerInfo:{appID:o("ZenonActorHooks").ZenonActor.getAppID(),callTrigger:e,conferenceName:c,isCaller:!0,isVideo:a,localCallID:(_=(f=this.$5)==null?void 0:f.getLocalCallIDFromParent())!=null?_:r("uuidv4")(),peerID:l,protocol:r("ZenonSignalingProtocol").MWPP,serverInfoData:d,signalingID:String(m)},isE2eeMandated:i,processorConfigs:this.getLogProcessors(),startFromNavigation:p});this.$4.set(t,g),r("promiseDone")(this.$2.getSignalingListener().then(function(e){e.setLoggingEventHandler(function(e){return g.log(e)})}))}},a.initializeSignaling=function(t,n,a,i){var e=this;return this.$2.getSignalingListener().then(function(l){if(l.subscribe(function(t){return e.$3.receiveMessage(t)},function(e){}),!o("ZenonDGWUtils").shouldUseDGW()){var s=r("getZenonMqttChannel")();r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] Subscribed to MQTT channels. MQTT connection state: "+s.getConnectionState()})}var u=e.$2.getConfigManager().getZenonStartCallImmediatelyConfig().isEnabled();if(u)r("ZenonTransportEventEmitter").emitJoinReady();else if(n!=null){var c=e.$2.getConfigManager().getZenonPlatformSupportConfig().getParentWindowConnectionTimeoutMs();e.$5=new(r("ZenonSignalingChildTransport"))({onLocalCallIDUpdate:function(n){e.$4.forEach(function(e){e.updateLogIdentifiers({localCallID:n})})},parentNonce:n,peerID:t,roomID:a,serverInfoData:i,timeoutMS:c})}else r("ZenonTransportEventEmitter").emitParentWindowConnectionTimeout();e.$5&&r("promiseDone")(e.$5.connect(),function(e){e.state==="join_ready"?r("ZenonTransportEventEmitter").emitJoinReady(e.mwThriftRingRequest):r("ZenonTransportEventEmitter").emitParentWindowConnectionTimeout()})})},a.endCall=function(a,i,l){var t=o("ZenonDismissReason").endCallToDismissReason(i),s=this.$1.get(a);if(s)return s.end(t,l);var u=this.$4.get(a);return u!=null?u.log({endCallReason:t,endCallSubreason:l,isRemoteEnded:!1,name:"callEnded"}):l!==o("ZenonConstants").DID_NOT_INITIATE&&r("FBLogger")("rtc_www").warn("ZenonCallLogger missing for endCall"),(e||(e=n("Promise"))).resolve()},a.ringParticipants=function(r,o,a){var t;return(t=this.$14(r,function(e){return e.addParticipants(o,a)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.removeParticipants=function(r,o){var t;return(t=this.$14(r,function(e){return e.removeParticipants(o)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.replaceLocalTrack=function(r,o,a,i){var t;return i===void 0&&(i=!1),(t=this.$14(r,function(e){return e.replaceLocalTrack(o,a,i)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.forceEncodingEnabled=function(r,o){var t;return(t=this.$14(r,function(e){return e.forceEncodingEnabled(o)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.submitRating=function(t,n,r,o,a,i){o===void 0&&(o=null),a===void 0&&(a=null),i===void 0&&(i=null);var e=this.$4.get(t);e&&(n!=null&&e.log({isBinaryRating:r||!1,name:"callRated",rating:n}),(o!=null||a!=null||i!=null)&&e.log({feedback:o,name:"callSurveySubmitted",surveyChoice:i,surveyIssue:a}))},a.getCalls=function(){return this.$1},a.setCalls=function(t){this.$1=t},a.createDataMessageSubscription=function(r,o,a,i,l){var t;return(t=this.$14(r,function(e){return e.createDataMessageSubscription(o,a,i,l)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.removeDataMessageSubscription=function(r,o,a){var t;return(t=this.$14(r,function(e){return e.removeDataMessageSubscription(o,a)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.sendGenericDataMessage=function(r,a,i,l,s){var t;return s!==o("ZenonTransportType").ZenonTransportType.SCTP&&!this.$15("dataMessage-"+a)?(e||(e=n("Promise"))).resolve():(t=this.$14(r,function(e){return e.sendGenericDataMessage(a,i,l,s)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.registerDataMessageService=function(r,o,a){var t;return(t=this.$14(r,function(e){return e.registerDataMessageService(o,a)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.getLogIdentifiers=function(t){var e;return(e=this.$4.get(t))==null?void 0:e.getLogIdentifiers()},a.subscribeToRemoteVideo=function(r,o,a){var t=this.$1.get(r);return t!=null?t.subscribeToRemoteVideo(o,a):(e||(e=n("Promise"))).resolve()},a.updateStateSyncTopic=function(r,o,a){var t;return this.$15("updateStateSync-"+o)&&(t=this.$14(r,function(e){return e.updateStateSyncTopic(o,a)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.unsubscribeFromStateSyncTopic=function(r,o){var t;return(t=this.$14(r,function(e){return e.unsubscribeFromStateSyncTopic(o)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.approveParticipants=function(r,o){var t;return(t=this.$14(r,function(e){return e.approveParticipants(o)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.denyParticipants=function(r,o){var t;return(t=this.$14(r,function(e){return e.denyParticipants(o)}))!=null?t:(e||(e=n("Promise"))).resolve()},a.getEncryptionKeysManagerState=function(t){var e=this.$14(t,function(e){return e.getEncryptionKeysManagerState()});return e===null?o("ZenonEncryptionKeysManagerState").ZenonEncryptionKeysManagerState$DefaultConstructor():e},a.getSignalingProtocol=function(t){var e=this;return this.$14(t,function(t){var n;return(n=e.$3.getSignalingClient(t.getSignalingID()))==null?void 0:n.getSignalingModel().getProtocol()})},a.getMediaMode=function(t){var e=this;return this.$14(t,function(t){var n;return(n=e.$3.getSignalingClient(t.getSignalingID()))==null?void 0:n.getSignalingModel().getMediaModeManager().getMediaMode()})},a.getSCTPDataChannelState=function(t,n){return this.$14(t,function(e){return e.getSCTPDataChannelState(n)})},a.getConferenceName=function(t){var e=this;return this.$14(t,function(t){var n;return(n=e.$3.getSignalingClient(t.getSignalingID()))==null?void 0:n.getSignalingModel().getRoomInfo().name})},a.$15=function(t){return this.$7&&!this.$7.take(t)?(r("FBLogger")("rtc_www").mustfix("[ZP] Dropping %s invocation. This SDK method is being called too rapidly.",t),!1):!0},a.$14=function(t,n){var e=this.$1.get(t);return e!=null?n(e):null},a.$12=function(t,n){var e=this.$3.getSignalingClientsWithRemoteSignalingID(n);e.forEach(function(e){e.getSignalingModel().getSignalingID()!==t&&r("promiseDone")(e.silentlyTerminate())})},a.updateRenderedResolutionMap=function(t){this.$9.setRenderResolutionMap(t)},t})();l.default=p}),98);
__d("ZenonClientTslogUploader",["DateConsts","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=5*o("DateConsts").MS_PER_MIN,s="[ZP] Tslog Uploader",u=(function(){function t(t,n){t===void 0&&(t=function(){}),this.$1=function(){},this.$3=e,this.$1=t,this.$2=n,this.$3=e}var n=t.prototype;return n.$4=function(t){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:s+" - "+t})},n.logTslog=function(){var e=this.$2.timeSeries();if(e){if(e.timeSeries==null||e.timeSeries.length===0){this.$4("TSLog is empty - stop sending from logTslog");return}this.$1({name:"logTSData",serializedTSLog:e})}},t})();l.default=u}),98);
__d("ZenonIceConnectionMonitor",["DateConsts","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonNetworkQualityMonitor","ZenonPeerConnectionConstants","clearTimeout","emptyFunction","performanceNow","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=30*o("DateConsts").MS_PER_SEC,c=3,d=new Set([(s=o("ZenonNetworkQualityMonitor")).ZenonNetworkQuality.Disconnected,s.ZenonNetworkQuality.Poor]),m=new Set([s.ZenonNetworkQuality.Excellent,s.ZenonNetworkQuality.Good,s.ZenonNetworkQuality.Fair]),p=(function(){function t(){this.$1="new",this.$2=o("ZenonNetworkQualityMonitor").ZenonNetworkQuality.Excellent,this.$3=null,this.$4=null,this.$5=0,this.$6=!1,this.$7=0}var n=t.prototype;return n.clearIceRestartTimer=function(){this.$4!=null&&(r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Clearing platform ice restart timer"}),r("clearTimeout")(this.$4),this.$4=null)},n.clearIceConnectionTimer=function(){this.$3!=null&&(r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Clearing platform connection drop timer"}),r("clearTimeout")(this.$3),this.$3=null)},n.updateIceConnectionState=function(t){this.$1=t,r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"iceConnectionStateChange: "+t})},n.updateNetworkStatus=function(t){this.$2=t},n.updateIceRestartTimer=function(n,o){if(this.$8())this.clearIceRestartTimer();else if(this.$9()&&this.$4==null&&this.$5<c)this.$7=(e||(e=r("performanceNow")))()+o,r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Creating an ICE Restart timer"}),this.$10(n,o);else if(this.$9()){var t=this.$7-(e||(e=r("performanceNow")))();t>o&&(r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Creating a shorter ICE Restart timer"}),this.clearIceRestartTimer(),this.$10(n,o))}},n.$10=function(t,n){var e=this;this.$4=r("setTimeout")(function(){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"Issuing an ICE Restart"}),e.$5++,t.processEvent({onError:r("emptyFunction"),onSuccess:r("emptyFunction"),type:"iceRestart"})},n)},n.updateIceConnectionTimer=function(t,n){n===void 0&&(n=u),o("ZenonPeerConnectionConstants").CONNECTED_STATES.has(this.$1)?this.clearIceConnectionTimer():o("ZenonPeerConnectionConstants").DISCONNECTED_STATES.has(this.$1)&&this.$3==null&&(r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Setting platform connection drop timer"}),this.$3=r("setTimeout")(function(){r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Ending call on platform connection drop timeout"}),t()},n))},n.logIceConnectionState=function(t){this.$11()||t({connected:this.$12(),name:"peerConnectionStateChanged",newState:this.$1}),this.$12()&&t({name:"mediaConnected"}),this.$1==="connected"&&t({name:"iceConnectionStateChangedConnected"}),this.$1==="disconnected"&&t({name:"iceConnectionStateChangedDisconnected"})},n.$8=function(){return this.$6?this.$12()&&m.has(this.$2):this.$12()},n.$9=function(){return this.$6?this.$13()||d.has(this.$2):this.$13()},n.$12=function(){return o("ZenonPeerConnectionConstants").CONNECTED_STATES.has(this.$1)},n.$13=function(){return o("ZenonPeerConnectionConstants").DISCONNECTED_STATES.has(this.$1)},n.$11=function(){return o("ZenonPeerConnectionConstants").INDETERMINANT_STATES.has(this.$1)},t})();l.default=p}),98);
__d("ZenonPeerConnectionDataActions",["promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n){if(n.type==="createDataChannel"){var e=n.payload,r=e.dataChannelLabel,o=e.dataChannelOptions,a=e.onDataChannelMessage,i=e.onDataChannelOpen,l=e.shouldEstablishDataChannel;t.mediaChannelManager.createDataChannel(r,a,i,l,o),n.onSuccess()}},s=function(t,n){if(n.type==="dataChannelMessageReceived"){var e=n.payload,o=e.dataChannelLabel,a=e.dataMessage;r("promiseDone")(t.onDataChannelMessageReceived(o,a),n.onSuccess,n.onError)}},u=function(t,n){if(n.type==="createDataMessageSubscription"){var e=n.payload,o=e.dataChannelLabel,a=e.onSignalingDataMessage;r("promiseDone")(t.onCreateDataMessageSubscription(o,a),n.onSuccess,n.onError)}},c=function(t,n){if(n.type==="removeDataMessageSubscription"){var e=n.payload,o=e.dataChannelLabel,a=e.onSignalingDataMessage;r("promiseDone")(t.onRemoveDataMessageSubscription(o,a),n.onSuccess,n.onError)}};l.onCreateDataChannel=e,l.onDataChannelMessageReceived=s,l.onCreateDataMessageSubscription=u,l.onRemoveDataMessageSubscription=c}),98);
__d("ZenonPeerConnectionIceActions",["ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e={onIceConnected:function(t){return t.onConnectionEstablished()},onIceConnectionStateChanged:function(n,o){if(o.type==="iceConnectionStateChange"){r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"iceConnectionStateChange: "+o.payload.iceConnectionState});var t=o.payload.iceConnectionState==="connected"||o.payload.iceConnectionState==="completed",a=o.payload.iceConnectionState==="disconnected"||o.payload.iceConnectionState==="failed";return t?r("promiseDone")(e.onIceConnected(n),o.onSuccess,o.onError):a&&r("promiseDone")(n.onConnectionDropped(),o.onSuccess,o.onError),{iceConnectionState:o.payload.iceConnectionState}}return{}}},s=e;l.default=s}),98);
__d("ZenonPeerConnectionMediaActions",["AggregateError","Promise","ZenonAppProvider","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonLoggingEventTypes","ZenonRequestedMediaType","asyncToGeneratorRuntime","emptyFunction","err","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t,n){n.type==="applyRemoteIceCandidate"&&n.payload!=null&&r("promiseDone")(t.sdpManager.setRemoteIceCandidate(n.payload),function(){t.logEvent({direction:o("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive,name:"updateIceInfo",sdpString:n.payload.candidate}),n.onSuccess()},n.onError)},u=function(t,n){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to add local tracks: "+n.data.toString(),errorDomain:"ZenonPeerConnectionMediaActions_onAddLocalTracks"})},c=function(t,n){return r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Successfully added local tracks"}),n.data},d=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){if(a.type!=="addLocalTracks")return{};var i=a.payload,l=i.callMedia,s=i.tracks,u=[],c=yield(e||(e=n("Promise"))).all(s.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{return yield t.mediaChannelManager.addTrack(e,a.payload.mediaMode),x(t,e.trackId,e.enabled),{status:"fulfilled"}}catch(e){return{reason:e,status:"rejected"}}});return function(t){return e.apply(this,arguments)}})()));if(c.forEach(function(e){e.status==="rejected"&&u.push(r("err")(e.reason))}),u.length>0){var d=new(r("AggregateError"))(u);throw a.onError(d),d}var m=a.payload.callInitiator!==!0&&a.payload.mediaMode==="p2p";return(l===r("ZenonRequestedMediaType").Video||l===r("ZenonRequestedMediaType").Audiovideo)&&!m&&(o("ZenonAppProvider").isMetaAI()&&r("justknobx")._("5357")?t.mediaChannelManager.addSendRecvVideoTransceiverIfMissing():t.mediaChannelManager.addReceiveOnlyVideoTransceiverIfMissing()),(l===r("ZenonRequestedMediaType").Audio||l===r("ZenonRequestedMediaType").Audiovideo)&&(yield t.mediaChannelManager.addAudioTrackOrRecvOnlyTransceiverIfMissing(a.payload.mediaMode)),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"add local tracks"}),a.onSuccess(),{localMediaStateVersion:t.localMediaStateVersion+s.length}});return function(n,r){return t.apply(this,arguments)}})(),m=function(t,n){n.type==="forceEncodingEnabled"&&r("promiseDone")(t.mediaChannelManager.forceEncodingEnabled(n.payload.enabled),n.onSuccess,n.onError)},p=function(t,n){n.type==="iceCandidateReady"&&r("promiseDone")(t.onIceCandidateReady(n.payload),n.onSuccess,n.onError)},_=function(t,n){if(n.type!=="localMediaStateUpdateRetry")return{};r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"local media state update retry with media status only"});var e=$(t,n.onSuccess,n.onError),o=e.localMediaStateVersion;return{localMediaStateUpdateRetryTimerId:null,localMediaStateVersion:o}},f=function(t,n){if(n.type==="muteLocalTrack"){var e=D(t,n.payload.trackId,!1,n.onSuccess,n.onError);return r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"mute local track"}),e}return{}},g=function(t,n){return n.type==="muteRemoteTrack"&&(x(t,n.payload.trackId,!1),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"mute remote track"})),{}},h=function(t,n){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to remove local track: "+n.data.toString(),errorDomain:"ZenonPeerConnectionMediaActions_onRemoveLocalTracks"})},y=function(t,n){return r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Successfully removed local track"}),n.data},C=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(t.type!=="removeLocalTrack")return{};var n=t.payload.trackId;yield e.mediaChannelManager.removeTrack(n);var o=D(e,n,!1,t.onSuccess,t.onError);return r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"remove local track with id "+n}),o});return function(n,r){return e.apply(this,arguments)}})(),b=function(t,n){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to replace local tracks: "+n.data.toString(),errorDomain:"ZenonPeerConnectionMediaActions_onReplaceLocalTrack"})},v=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(t.type!=="replaceLocalTrack")return{};var n=t.payload,o=n.preserveOriginal,a=n.replacementTrack,i=n.trackIdToReplace;yield e.mediaChannelManager.replaceTrack(i,a,o!=null?o:!1);var l=D(e,t.payload.trackIdToReplace,!1,r("emptyFunction"),r("emptyFunction"));return l=D(babelHelpers.extends({},e,l),t.payload.replacementTrack.trackId,t.payload.replacementTrack.enabled,t.onSuccess,t.onError),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"replace local track with id "+i+" by track "+a.trackId}),l});return function(n,r){return e.apply(this,arguments)}})(),S=function(t,n){return r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Successfully replaced local track"}),n.data},R=function(t,n){return n.type!=="setLocalMediaStateVersion"?{}:(n.onSuccess(),{localMediaStateVersion:n.payload.version})},L=function(t,n){if(n.type==="stopLocalTrack"){var e=n.payload.trackId;try{t.mediaChannelManager.stopLocalTrack(e),n.onSuccess()}catch(e){n.onError(e)}}},E=function(t,n){if(n.type==="unmuteLocalTrack"){var e=D(t,n.payload.trackId,!0,n.onSuccess,n.onError);return r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"unmute local track"}),e}return{}},k=function(t,n){return n.type==="unmuteRemoteTrack"&&(x(t,n.payload.trackId,!0),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"unmute remote track"})),{}};function I(e,t){t.type==="applyMediaUpdate"&&(T(e.mediaChannelManager,t.payload.mediaStates),t.onSuccess())}function T(e,t,n){n===void 0&&(n=!0),t&&(e.updateTrackInfos(t),e.updateMuteStates(t),n&&e.removeMissingTracks(t.tracks.map(function(e){return e.trackID})))}function D(e,t,n,r,o){return x(e,t,n),$(e,r,o)}function x(e,t,n){var r=e.mediaChannelManager;n?r.unmuteTrack(t):r.muteTrack(t)}function $(e,t,n){var o=e.mediaChannelManager,a=[],i=o.getLocalTracksForMWS();i.forEach(function(e){var t={enabled:e.enabled,name:e.name,trackID:e.trackId,type:e.contentType};a.push(t)});var l=e.localMediaStateVersion+1,s={tracks:a,version:l};return r("promiseDone")(e.onLocalMediaStateUpdate(s),t,n),{localMediaStateVersion:l}}function P(e){var t;(t=e.tslogUploader)==null||t.logTslog()}l.applyRemoteIceCandidate=s,l.onAddLocalTracksError=u,l.onAddedLocalTracks=c,l.onAddingLocalTracks=d,l.onForceEncodingEnabled=m,l.onIceCandidateReady=p,l.onLocalMediaStateUpdateRetry=_,l.onMuteLocalTrack=f,l.onMuteRemoteTrack=g,l.onRemoveLocalTrackError=h,l.onRemovedLocalTrack=y,l.onRemovingLocalTrack=C,l.onReplaceLocalTrackError=b,l.onReplacingLocalTrack=v,l.onReplacedLocalTrack=S,l.onSetLocalMediaStateVersion=R,l.onStopLocalTrack=L,l.onUnmuteLocalTrack=E,l.onUnmuteRemoteTrack=k,l.onApplyMediaUpdate=I,l.applyMediaStates=T,l.startTslog=P}),98);
__d("ZenonPeerConnectionSMGuards",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t.type==="applyRemoteSdp"&&t.payload.sdp.type==="offer"}function l(e,t){return t.type==="applyRemoteSdp"&&(t.payload.sdp.type==="answer"||t.payload.sdp.type==="pranswer")}function s(e,t){var n;return((n=t.data)==null?void 0:n.type)==="pranswer"}function u(e,t){return t.type==="iceConnectionStateChange"&&(t.payload.iceConnectionState==="connected"||t.payload.iceConnectionState==="completed")}function c(e){return e.iceConnectionState==="connected"||e.iceConnectionState==="completed"}function d(e,t){return t.type==="iceConnectionStateChange"&&t.payload.iceConnectionState==="disconnected"}function m(e){return e.iceConnectionState!=="connected"&&e.iceConnectionState!=="completed"}function p(e){var t;return(t=e.outstandingLocalOffer)!=null?t:!1}i.applyRemoteOfferSdpGuard=e,i.applyRemoteAnswerSdpGuard=l,i.prAnswerSetGuard=s,i.iceConnectedEventGuard=u,i.iceConnectedGuard=c,i.iceDisconnectedEventGuard=d,i.iceNotConnectedGuard=m,i.outstandingLocalOfferGuard=p}),66);
/**
 * Released under the MIT license. Copyright (c) 2013 Eirik Albrigtsen.
 *
 * @nolint
 * @preserve-header
 * @preserve-whitespace
 */
__d("sdp-transform-grammar",[],(function $module_sdp_transform_grammar(global,require,requireDynamic,requireLazy,module,exports){

var grammar = module.exports = {
  v: [{
    name: 'version',
    reg: /^(\d*)$/
  }],
  o: [{ //o=- 20518 0 IN IP4 203.0.113.1
    // NB: sessionId will be a String in most cases because it is huge
    name: 'origin',
    reg: /^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,
    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],
    format: '%s %s %d %s IP%d %s'
  }],
  // default parsing of these only (though some of these feel outdated)
  s: [{ name: 'name' }],
  i: [{ name: 'description' }],
  u: [{ name: 'uri' }],
  e: [{ name: 'email' }],
  p: [{ name: 'phone' }],
  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..
  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly
  //k: [{}], // outdated thing ignored
  t: [{ //t=0 0
    name: 'timing',
    reg: /^(\d*) (\d*)/,
    names: ['start', 'stop'],
    format: '%d %d'
  }],
  c: [{ //c=IN IP4 10.47.197.26
    name: 'connection',
    reg: /^IN IP(\d) (\S*)/,
    names: ['version', 'ip'],
    format: 'IN IP%d %s'
  }],
  b: [{ //b=AS:4000
    push: 'bandwidth',
    reg: /^(TIAS|AS|CT|RR|RS):(\d*)/,
    names: ['type', 'limit'],
    format: '%s:%s'
  }],
  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31
    // NB: special - pushes to session
    // TODO: rtp/fmtp should be filtered by the payloads found here?
    reg: /^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,
    names: ['type', 'port', 'protocol', 'payloads'],
    format: '%s %d %s %s'
  }],
  a: [
    { //a=rtpmap:110 opus/48000/2
      push: 'rtp',
      reg: /^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,
      names: ['payload', 'codec', 'rate', 'encoding'],
      format: function (o) {
        return (o.encoding) ?
          'rtpmap:%d %s/%s/%s':
          o.rate ?
          'rtpmap:%d %s/%s':
          'rtpmap:%d %s';
      }
    },
    { //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000
      //a=fmtp:111 minptime=10; useinbandfec=1
      push: 'fmtp',
      reg: /^fmtp:(\d*) ([\S| ]*)/,
      names: ['payload', 'config'],
      format: 'fmtp:%d %s'
    },
    { //a=control:streamid=0
      name: 'control',
      reg: /^control:(.*)/,
      format: 'control:%s'
    },
    { //a=rtcp:65179 IN IP4 193.84.77.194
      name: 'rtcp',
      reg: /^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,
      names: ['port', 'netType', 'ipVer', 'address'],
      format: function (o) {
        return (o.address != null) ?
          'rtcp:%d %s IP%d %s':
          'rtcp:%d';
      }
    },
    { //a=rtcp-fb:98 trr-int 100
      push: 'rtcpFbTrrInt',
      reg: /^rtcp-fb:(\*|\d*) trr-int (\d*)/,
      names: ['payload', 'value'],
      format: 'rtcp-fb:%d trr-int %d'
    },
    { //a=rtcp-fb:98 nack rpsi
      push: 'rtcpFb',
      reg: /^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,
      names: ['payload', 'type', 'subtype'],
      format: function (o) {
        return (o.subtype != null) ?
          'rtcp-fb:%s %s %s':
          'rtcp-fb:%s %s';
      }
    },
    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset
      //a=extmap:1/recvonly URI-gps-string
      push: 'ext',
      reg: /^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,
      names: ['value', 'direction', 'uri', 'config'],
      format: function (o) {
        return 'extmap:%d' + (o.direction ? '/%s' : '%v') + ' %s' + (o.config ? ' %s' : '');
      }
    },
    { //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32
      push: 'crypto',
      reg: /^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,
      names: ['id', 'suite', 'config', 'sessionConfig'],
      format: function (o) {
        return (o.sessionConfig != null) ?
          'crypto:%d %s %s %s':
          'crypto:%d %s %s';
      }
    },
    { //a=setup:actpass
      name: 'setup',
      reg: /^setup:(\w*)/,
      format: 'setup:%s'
    },
    { //a=mid:1
      name: 'mid',
      reg: /^mid:([^\s]*)/,
      format: 'mid:%s'
    },
    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a
      name: 'msid',
      reg: /^msid:(.*)/,
      format: 'msid:%s'
    },
    { //a=ptime:20
      name: 'ptime',
      reg: /^ptime:(\d*)/,
      format: 'ptime:%d'
    },
    { //a=maxptime:60
      name: 'maxptime',
      reg: /^maxptime:(\d*)/,
      format: 'maxptime:%d'
    },
    { //a=sendrecv
      name: 'direction',
      reg: /^(sendrecv|recvonly|sendonly|inactive)/
    },
    { //a=ice-lite
      name: 'icelite',
      reg: /^(ice-lite)/
    },
    { //a=ice-ufrag:F7gI
      name: 'iceUfrag',
      reg: /^ice-ufrag:(\S*)/,
      format: 'ice-ufrag:%s'
    },
    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g
      name: 'icePwd',
      reg: /^ice-pwd:(\S*)/,
      format: 'ice-pwd:%s'
    },
    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33
      name: 'fingerprint',
      reg: /^fingerprint:(\S*) (\S*)/,
      names: ['type', 'hash'],
      format: 'fingerprint:%s %s'
    },
    { //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host
      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10
      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10
      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10
      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10
      push:'candidates',
      reg: /^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,
      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],
      format: function (o) {
        var str = 'candidate:%s %d %s %d %s %d typ %s';

        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';

        // NB: candidate has three optional chunks, so %void middles one if it's missing
        str += (o.tcptype != null) ? ' tcptype %s' : '%v';

        if (o.generation != null) {
          str += ' generation %d';
        }

        str += (o['network-id'] != null) ? ' network-id %d' : '%v';
        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';
        return str;
      }
    },
    { //a=end-of-candidates (keep after the candidates line for readability)
      name: 'endOfCandidates',
      reg: /^(end-of-candidates)/
    },
    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...
      name: 'remoteCandidates',
      reg: /^remote-candidates:(.*)/,
      format: 'remote-candidates:%s'
    },
    { //a=ice-options:trickle fb-force-5245
      name: 'iceOptions',
      reg: /^ice-options:(.*)/,
      format: 'ice-options:%s'
    },
    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1
      push: 'ssrcs',
      reg: /^ssrc:(\d*) ([\w_]*)(?::(.*))?/,
      names: ['id', 'attribute', 'value'],
      format: function (o) {
        var str = 'ssrc:%d';
        if (o.attribute != null) {
          str += ' %s';
          if (o.value != null) {
            str += ':%s';
          }
        }
        return str;
      }
    },
    { //a=ssrc-group:FEC 1 2
      //a=ssrc-group:FEC-FR 3004364195 1080772241
      push: 'ssrcGroups',
      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E
      reg: /^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,
      names: ['semantics', 'ssrcs'],
      format: 'ssrc-group:%s %s'
    },
    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV
      name: 'msidSemantic',
      reg: /^msid-semantic:\s?(\w*) (\S*)/,
      names: ['semantic', 'token'],
      format: 'msid-semantic: %s %s' // space after ':' is not accidental
    },
    { //a=group:BUNDLE audio video
      push: 'groups',
      reg: /^group:(\w*) (.*)/,
      names: ['type', 'mids'],
      format: 'group:%s %s'
    },
    { //a=rtcp-mux
      name: 'rtcpMux',
      reg: /^(rtcp-mux)/
    },
    { //a=rtcp-rsize
      name: 'rtcpRsize',
      reg: /^(rtcp-rsize)/
    },
    { //a=sctpmap:5000 webrtc-datachannel 1024
      name: 'sctpmap',
      reg: /^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,
      names: ['sctpmapNumber', 'app', 'maxMessageSize'],
      format: function (o) {
        return (o.maxMessageSize != null) ?
          'sctpmap:%s %s %s' :
          'sctpmap:%s %s';
      }
    },
    { //a=x-google-flag:conference
      name: 'xGoogleFlag',
      reg: /^x-google-flag:([^\s]*)/,
      format: 'x-google-flag:%s'
    },
    { //a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0
      push: 'rids',
      reg: /^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,
      names: ['id', 'direction', 'params'],
      format: function (o) {
        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';
      }
    },
    { //a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]
      //a=imageattr:* send [x=800,y=640] recv *
      //a=imageattr:100 recv [x=320,y=240]
      push: 'imageattrs',
      reg: new RegExp(
        //a=imageattr:97
        '^imageattr:(\\d+|\\*)' +
        //send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]
        '[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)' +
        //recv [x=330,y=250]
        '(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?'
      ),
      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],
      format: function (o) {
        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');
      }
    },
    { //a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8
      //a=simulcast:recv 1;4,5 send 6;7
      name: 'simulcast',
      reg: new RegExp(
        //a=simulcast:
        '^simulcast:' +
        //send 1,2,3;~4,~5
        '(send|recv) ([a-zA-Z0-9\\-_~;,]+)' +
        //space + recv 6;~7,~8
        '(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?' +
        //end
        '$'
      ),
      names: ['dir1', 'list1', 'dir2', 'list2'],
      format: function (o) {
        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');
      }
    },
    { //Old simulcast draft 03 (implemented by Firefox)
      //  https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03
      //a=simulcast: recv pt=97;98 send pt=97
      //a=simulcast: send rid=5;6;7 paused=6,7
      name: 'simulcast_03',
      reg: /^simulcast:[\s\t]+([\S+\s\t]+)$/,
      names: ['value'],
      format: 'simulcast: %s'
    },
    {
      //a=framerate:25
      //a=framerate:29.97
      name: 'framerate',
      reg: /^framerate:(\d+(?:$|\.\d+))/,
      format: 'framerate:%s'
    },
    {
      //a=x-dtls-auth:<dtls authentication string>
      name: 'dtlsAuthenticationInfo',
      reg: /^x-dtls-auth:(\S+)/,
      format: 'x-dtls-auth:%s'
    },
    { // any a= that we don't understand is kepts verbatim on media.invalid
      push: 'invalid',
      names: ['value']
    },
  ]
};

// set sensible defaults to avoid polluting the grammar with boring details
Object.keys(grammar).forEach(function (key) {
  var objs = grammar[key];
  objs.forEach(function (obj) {
    if (!obj.reg) {
      obj.reg = /(.*)/;
    }
    if (!obj.format) {
      obj.format = '%s';
    }
  });
});

/*  */}),null);
/**
 * Released under the MIT license. Copyright (c) 2013 Eirik Albrigtsen.
 *
 * @nolint
 * @preserve-header
 * @preserve-whitespace
 */
__d("sdp-transform-parser",["sdp-transform-grammar"],(function $module_sdp_transform_parser(global,require,requireDynamic,requireLazy,module,exports){

var toIntIfInt = function (v) {
  return String(Number(v)) === v ? Number(v) : v;
};

var attachProperties = function (match, location, names, rawName) {
  if (rawName && !names) {
    location[rawName] = toIntIfInt(match[1]);
  }
  else {
    for (var i = 0; i < names.length; i += 1) {
      if (match[i+1] != null) {
        location[names[i]] = toIntIfInt(match[i+1]);
      }
    }
  }
};

var parseReg = function (obj, location, content) {
  var needsBlank = obj.name && obj.names;
  if (obj.push && !location[obj.push]) {
    location[obj.push] = [];
  }
  else if (needsBlank && !location[obj.name]) {
    location[obj.name] = {};
  }
  var keyLocation = obj.push ?
    {} :  // blank object that will be pushed
    needsBlank ? location[obj.name] : location; // otherwise, named location or root

  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);

  if (obj.push) {
    location[obj.push].push(keyLocation);
  }
};

var grammar = require('sdp-transform-grammar');

var validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);

exports.parse = function (sdp) {
  var session = {}
    , media = []
    , location = session; // points at where properties go under (one of the above)

  // parse lines we understand
  sdp.split(/(\r\n|\r|\n)/).filter(validLine).forEach(function (l) {
    var type = l[0];
    var content = l.slice(2);
    if (type === 'm') {
      media.push({rtp: [], fmtp: []});
      location = media[media.length-1]; // point at latest media line
    }

    for (var j = 0; j < (grammar[type] || []).length; j += 1) {
      var obj = grammar[type][j];
      if (obj.reg.test(content)) {
        return parseReg(obj, location, content);
      }
    }
  });

  session.media = media; // link it up
  return session;
};

var paramReducer = function (acc, expr) {
  var s = expr.split(/=(.+)/, 2);
  if (s.length === 2) {
    acc[s[0]] = toIntIfInt(s[1]);
  }
  return acc;
};

exports.parseParams = function (str) {
  return str.split(/\;\s?/).reduce(paramReducer, {});
};

// For backward compatibility - alias will be removed in 3.0.0
exports.parseFmtpConfig = exports.parseParams;

exports.parsePayloads = function (str) {
  return str.split(' ').map(Number);
};

exports.parseRemoteCandidates = function (str) {
  var candidates = [];
  var parts = str.split(' ').map(toIntIfInt);
  for (var i = 0; i < parts.length; i += 3) {
    candidates.push({
      component: parts[i],
      ip: parts[i + 1],
      port: parts[i + 2]
    });
  }
  return candidates;
};

exports.parseImageAttributes = function (str) {
  return str.split(' ').map(function (item) {
    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});
  });
};

exports.parseSimulcastStreamList = function (str) {
  return str.split(';').map(function (stream) {
    return stream.split(',').map(function (format) {
      var scid, paused = false;

      if (format[0] !== '~') {
        scid = toIntIfInt(format);
      } else {
        scid = toIntIfInt(format.substring(1, format.length));
        paused = true;
      }

      return {
        scid: scid,
        paused: paused
      };
    });
  });
};

/*  */}),null);
/**
 * Released under the MIT license. Copyright (c) 2013 Eirik Albrigtsen.
 *
 * @nolint
 * @preserve-header
 * @preserve-whitespace
 */
__d("sdp-transform-writer",["sdp-transform-grammar"],(function $module_sdp_transform_writer(global,require,requireDynamic,requireLazy,module,exports){

var grammar = require('sdp-transform-grammar');

// customized util.format - discards excess arguments and can void middle ones
var formatRegExp = /%[sdv%]/g;
var format = function (formatStr) {
  var i = 1;
  var args = arguments;
  var len = args.length;
  return formatStr.replace(formatRegExp, function (x) {
    if (i >= len) {
      return x; // missing argument
    }
    var arg = args[i];
    i += 1;
    switch (x) {
    case '%%':
      return '%';
    case '%s':
      return String(arg);
    case '%d':
      return Number(arg);
    case '%v':
      return '';
    }
  });
  // NB: we discard excess arguments - they are typically undefined from makeLine
};

var makeLine = function (type, obj, location) {
  var str = obj.format instanceof Function ?
    (obj.format(obj.push ? location : location[obj.name])) :
    obj.format;

  var args = [type + '=' + str];
  if (obj.names) {
    for (var i = 0; i < obj.names.length; i += 1) {
      var n = obj.names[i];
      if (obj.name) {
        args.push(location[obj.name][n]);
      }
      else { // for mLine and push attributes
        args.push(location[obj.names[i]]);
      }
    }
  }
  else {
    args.push(location[obj.name]);
  }
  return format.apply(null, args);
};

// RFC specified order
// TODO: extend this with all the rest
var defaultOuterOrder = [
  'v', 'o', 's', 'i',
  'u', 'e', 'p', 'c',
  'b', 't', 'r', 'z', 'a'
];
var defaultInnerOrder = ['i', 'c', 'b', 'a'];


module.exports = function (session, opts) {
  opts = opts || {};
  // ensure certain properties exist
  if (session.version == null) {
    session.version = 0; // 'v=0' must be there (only defined version atm)
  }
  if (session.name == null) {
    session.name = ' '; // 's= ' must be there if no meaningful name set
  }
  session.media.forEach(function (mLine) {
    if (mLine.payloads == null) {
      mLine.payloads = '';
    }
  });

  var outerOrder = opts.outerOrder || defaultOuterOrder;
  var innerOrder = opts.innerOrder || defaultInnerOrder;
  var sdp = [];

  // loop through outerOrder for matching properties on session
  outerOrder.forEach(function (type) {
    grammar[type].forEach(function (obj) {
      if (obj.name in session && session[obj.name] != null) {
        sdp.push(makeLine(type, obj, session));
      }
      else if (obj.push in session && session[obj.push] != null) {
        session[obj.push].forEach(function (el) {
          sdp.push(makeLine(type, obj, el));
        });
      }
    });
  });

  // then for each media line, follow the innerOrder
  session.media.forEach(function (mLine) {
    sdp.push(makeLine('m', grammar.m[0], mLine));

    innerOrder.forEach(function (type) {
      grammar[type].forEach(function (obj) {
        if (obj.name in mLine && mLine[obj.name] != null) {
          sdp.push(makeLine(type, obj, mLine));
        }
        else if (obj.push in mLine && mLine[obj.push] != null) {
          mLine[obj.push].forEach(function (el) {
            sdp.push(makeLine(type, obj, el));
          });
        }
      });
    });
  });

  return sdp.join('\r\n') + '\r\n';
};

/*  */}),null);
/**
 * Released under the MIT license. Copyright (c) 2013 Eirik Albrigtsen.
 *
 * @nolint
 * @preserve-header
 * @preserve-whitespace
 */
__d("sdp-transform",["sdp-transform-parser","sdp-transform-writer"],(function $module_sdp_transform(global,require,requireDynamic,requireLazy,module,exports){

var parser = require('sdp-transform-parser');
var writer = require('sdp-transform-writer');

exports.write = writer;
exports.parse = parser.parse;
exports.parseFmtpConfig = parser.parseFmtpConfig;
exports.parseParams = parser.parseParams;
exports.parsePayloads = parser.parsePayloads;
exports.parseRemoteCandidates = parser.parseRemoteCandidates;
exports.parseImageAttributes = parser.parseImageAttributes;
exports.parseSimulcastStreamList = parser.parseSimulcastStreamList;

/*  */}),null);
/**
 * Copyright @ 2015 Atlassian Pty Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Modified by Meta.
 *
 * 
 * @format
 * @oncall rp_rooms_infra_www
 * @preserve-header
 * @preserve-whitespace
 */__d("ZenonSDPInteropTransform",["invariant","sdp-transform"],(function $module_ZenonSDPInteropTransform(global,require,importDefault,importNamespace,requireLazy,module,exports,invariant){

'use strict';













exports.write=function(
session,
opts,
options)
{
if(
session!==undefined&&
session.media!==undefined&&
Array.isArray(session.media))
{
session.media.forEach(function(mLine){







var groupedSsrcs=[];
var ungroupedSsrcs=Object.keys(mLine.sources||{});


if(mLine.ssrcGroups!==undefined&&Array.isArray(mLine.ssrcGroups)){
mLine.ssrcGroups.forEach(function(ssrcGroup){
if(ssrcGroup.ssrcs!==undefined&&Array.isArray(ssrcGroup.ssrcs)){
var ssrcsArray=ssrcGroup.ssrcs;
groupedSsrcs=groupedSsrcs.concat(ssrcsArray);
ungroupedSsrcs=ungroupedSsrcs.filter(
function(ssrc){return ssrcsArray.indexOf(ssrc)===-1;}
);
ssrcGroup.ssrcs=ssrcsArray.join(' ');
}
});
}


if(
mLine.sources!==undefined&&
Object.keys(mLine.sources).length!==0)
{

var mLine_sources=mLine.sources;
mLine_sources!=null||invariant(0,66290);

var alreadyAddedSsrcs=new Set();
var mLine_ssrcs=[];
groupedSsrcs.concat(ungroupedSsrcs).forEach(function(ssrc){
var source=mLine_sources[ssrc];
Object.keys(source).forEach(function(attribute){
var newSsrcKey=[
ssrc,
String(attribute),
String(source[attribute])].
join('|');
if(!alreadyAddedSsrcs.has(newSsrcKey)){
mLine_ssrcs.push({
attribute:String(attribute),
id:parseInt(ssrc,10),
value:String(source[attribute])
});
alreadyAddedSsrcs.add(newSsrcKey);
}
});
});
mLine.ssrcs=mLine_ssrcs;
if(options&&options.iceOptions){
mLine.iceOptions=options.iceOptions;
}
delete mLine.sources;
}
});
}


if(
session!==undefined&&
session.groups!==undefined&&
Array.isArray(session.groups))
{
session.groups.forEach(function(g){
if(g.mids!==undefined&&Array.isArray(g.mids)){
g.mids=g.mids.join(' ');
}
});
}

return importDefault("sdp-transform").write(session,opts);
};

exports.parse=function(sdp){
var session=importDefault("sdp-transform").parse(sdp);

if(
session!==undefined&&
session.media!==undefined&&
Array.isArray(session.media))
{
session.media.forEach(function(mLine){
mLine.payloads=String(mLine.payloads);

if(mLine.ssrcs!==undefined&&Array.isArray(mLine.ssrcs)){
var mLine_sources={};
mLine.ssrcs.forEach(function(ssrc){
var ssrcId=ssrc.id.toString();
if(!mLine_sources[ssrcId]){
mLine_sources[ssrcId]={};
}

mLine_sources[ssrcId][ssrc.attribute]=ssrc.value;
});
mLine.sources=mLine_sources;

delete mLine.ssrcs;
}


if(mLine.ssrcGroups!==undefined&&Array.isArray(mLine.ssrcGroups)){
mLine.ssrcGroups.forEach(function(ssrcGroup){
if(typeof ssrcGroup.ssrcs==='string'){
ssrcGroup.ssrcs=ssrcGroup.ssrcs.split(' ');
}
});
}
});
}

if(
session!==undefined&&
session.groups!==undefined&&
Array.isArray(session.groups))
{
session.groups.forEach(function(g){
if(typeof g.mids==='string'){
g.mids=g.mids.split(' ');
}
});
}

return session;
};}),34);
__d("ZenonSDP",["FBLogger","ODS","ZenonBrowsers","ZenonSDPInteropTransform","gkx","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){var n=e.sdp;this.$1=n==null?null:o("ZenonSDPInteropTransform").parse(n),this.$2=e.type,this.$3=t}var n=t.prototype;return n.$4=function(t,n,r){var e=t.split(";"),o=e.findIndex(function(e){return e.startsWith(n+"=")}),a=n+"="+r;return o>=0?e[o]=a:e.push(a),""+e.join(";")},n.getMedia=function(){var e,t,n=(e=(t=this.$1)==null?void 0:t.media)!=null?e:[];return n},n.getGroups=function(){var e,t;return(e=(t=this.$1)==null?void 0:t.groups)!=null?e:null},n.getMsidSemantic=function(){var e;return(e=this.$1)==null?void 0:e.msidSemantic},n.getDtlsAuthenticationInfo=function(){var e;return(e=this.$1)==null?void 0:e.dtlsAuthenticationInfo},n.getMediaCname=function(){var e,t="",n=(e=this.$1)==null?void 0:e.media;return n!=null&&n.some(function(e){return e.sources==null?!1:Object.keys(e.sources).some(function(n){if(n!=null&&typeof n=="string"){var o=r("nullthrows")(e.sources)[n];if(o!=null&&o.cname!=null)return t=o.cname,!0}return!1})}),t},n.getTrackIdAndCnameMap=function(){var e,t=this,n=new Map,r=(e=this.$1)==null?void 0:e.media;return r==null||r.forEach(function(e){var r=e.msid,o=e.sources,a=t.$5(r),i=t.$6(o);a!=null&&i!=null&&n.set(a,i)}),n},n.getActiveTrackIDs=function(){var e,t=[],n=(e=this.$1)==null?void 0:e.media;return n==null||n.forEach(function(e){var n=e.msid;if(n!=null){var r=n.split(" ");r.length>=2&&r[0]!=="-"&&e.direction!=="inactive"&&t.push(r[1])}}),t},n.$6=function(t){var e=null;return t!=null&&Object.keys(t).some(function(n){if(n!=null&&typeof n=="string"){var o=r("nullthrows")(t)[n];if(o!=null&&o.cname!=null)return e=o.cname,!0}return!1}),e},n.$5=function(t){if(t!=null){var e=t.split(" ");if(e.length>=2)return e[1]}return null},n.addFmtpConfig=function(t,n,r){var e,o=this,a=(e=this.$1)==null?void 0:e.media;a!=null&&a.forEach(function(e){e.rtp.filter(function(e){return e.codec===t}).forEach(function(t){var a=e.fmtp.find(function(e){return e.payload===t.payload});a==null?e.fmtp.push({config:n+"="+r,payload:t.payload}):a.config=o.$4(a.config,n,r)})})},n.maybeAddPtimeForOpusOnly=function(t){var e,n=(e=this.$1)==null?void 0:e.media;n!=null&&n.forEach(function(e){if(e.type==="audio"){var n=e.rtp.filter(function(e){return e.codec!=="opus"}).length>=1;if(!n){var r=e.rtp.find(function(e){return e.codec==="opus"});r!=null&&e.ptime==null&&(e.ptime=t)}}})},n.addAudioNACK=function(){var e,t=(e=this.$1)==null?void 0:e.media;t!=null&&t.forEach(function(e){e.type==="audio"&&(e.rtcpFb==null&&(e.rtcpFb=[]),e.rtp.forEach(function(t){var n;if(!((n=e.rtcpFb)!=null&&n.some(function(e){return e.payload===t.payload&&e.type==="nack"}))){var r;(r=e.rtcpFb)==null||r.push({payload:t.payload,type:"nack"})}}))})},n.replaceAudioCname=function(t){var e,n=(e=this.$1)==null?void 0:e.media;n!=null&&n.forEach(function(e){e.type==="audio"&&e.sources!=null&&Object.keys(e.sources).forEach(function(n){if(n!=null&&typeof n=="string"){var o=r("nullthrows")(e.sources)[n];o!=null&&o.cname!=null&&(o.cname=t+o.cname)}})})},n.filterExtension=function(t,n){var e,r=(e=this.$1)==null?void 0:e.media;r!=null&&r.forEach(function(e){e.type===n&&e.ext!=null&&(e.ext=e.ext.filter(function(e){return!e.uri.includes(t)}))})},n.useDTLSOverCrypto=function(){var e,t=(e=this.$1)==null?void 0:e.media;t!=null&&t.forEach(function(e){e.fingerprint!=null&&delete e.crypto})},n.getUniqueDtlsFingerprints=function(){var e,t=(e=this.$1)==null?void 0:e.media,n=new Map;return t!=null&&t.forEach(function(e){if(e.fingerprint!=null){var t={algo:e.fingerprint.type,digest:e.fingerprint.hash};n.has(t.digest)||n.set(t.digest,t)}}),Array.from(n.values())},n.updateDtlsAuthenticationInfo=function(t){this.$1!=null&&(this.$1.dtlsAuthenticationInfo=t)},n.addSetupActPass=function(){if(this.$2==="offer"){var e,t=(e=this.$1)==null?void 0:e.media;t!=null&&t.forEach(function(e){e.setup==null&&(e.setup="actpass")})}},n.getSSLRole=function(){var e,t;return this.$2!=="answer"?null:(e=(t=this.$1)==null||(t=t.media)==null||(t=t.find(function(e){return e.setup!=null}))==null?void 0:t.setup)!=null?e:null},n.setSSLRole=function(t){if(this.$2==="answer"){var e,n=(e=this.$1)==null?void 0:e.media;n!=null&&n.forEach(function(e){e.setup==null&&(e.setup=t)})}},n.removeCodec=function(t){var e,n=(e=this.$1)==null?void 0:e.media;n!=null&&n.forEach(function(e){var n=e.rtp.filter(function(e){return e.codec===t}).map(function(e){var t=e.payload;return t}),r=e.fmtp.filter(function(e){var t=e.config.match(/apt=(\d*)/);return t!=null?n.includes(Number(t[1])):!1}).map(function(e){var t=e.payload;return t}),o=n.concat(r);if(!(o.length<1)){e.rtp=e.rtp.filter(function(e){return!o.includes(e.payload)}),e.fmtp=e.fmtp.filter(function(e){return!o.includes(e.payload)}),e.rtcpFb!=null&&(e.rtcpFb=e.rtcpFb.filter(function(e){return!o.includes(e.payload)})),e.rtcpFbTrrInt!=null&&(e.rtcpFbTrrInt=e.rtcpFbTrrInt.filter(function(e){return!o.includes(e.payload)}));var a=new RegExp("("+o.join("|")+") ?","g");e.payloads=e.payloads.replace(a,"").trim()}})},n.preferCodec=function(t,n){var e,r=n.preferredCodec,o=n.preferredCodecRate,a=(e=this.$1)==null?void 0:e.media;a!=null&&a.forEach(function(e){if(e.type===t){var n=e.rtp.find(function(e){return e.codec===r&&e.rate===o});n!=null&&(e.payloads=e.payloads.replace(new RegExp("(^|\\s)"+n.payload+"(\\s|$)","g")," ").trim(),e.payloads=n.payload+" "+e.payloads)}})},n.mungeInactiveMediaSSRC=function(t){var e,n=new Map;t!=null&&t.$1!=null&&t.$1.media!=null&&t.$1.media.forEach(function(e){e.sources!=null&&e.mid!=null&&n.set(e.mid,e.sources)});var r=(e=this.$1)==null?void 0:e.media;r==null||r.forEach(function(e){if(e.mid!=null&&e.direction==="inactive"&&e.sources==null){var t=n.get(e.mid);t!=null&&(e.sources=t)}})},n.preferH264Codec=function(t){var e,n=(e=this.$1)==null?void 0:e.media;n!=null&&n.forEach(function(e){if(e.type==="video"){var n=[];e.rtp.forEach(function(e){e.codec==="H264"&&n.push(e.payload)});var r=t.levelAsymmetryAllowed?"1":"0",o=t.packetizationMode?"1":"0",a=new RegExp("level-asymmetry-allowed="+r+";packetization-mode="+o+";profile-level-id="+t.profileLevelId),i=e.fmtp.find(function(e){return e.config.match(a)&&n.includes(e.payload)});i!=null&&(e.payloads=e.payloads.replace(i.payload+" ",""),e.payloads=i.payload+" "+e.payloads)}})},n.removeH264CodecsWithProfileLevelId=function(t){this.removeH264CodecsMatchingRegex(new RegExp("profile-level-id="+t))},n.removeH264CodecsWithPacketizationMode0=function(){this.removeH264CodecsMatchingRegex(/packetization-mode=0/)},n.removeH264CodecsMatchingRegex=function(t){var e,n=(e=this.$1)==null?void 0:e.media;n!=null&&n.forEach(function(e){var n=e.fmtp.filter(function(e){return e.config.match(t)}).map(function(e){var t=e.payload;return t}),r=e.fmtp.filter(function(e){var t=e.config.match(/apt=(\d*)/);return t!=null?n.includes(Number(t[1])):!1}).map(function(e){var t=e.payload;return t}),o=n.concat(r);if(!(o.length<1)){e.rtp=e.rtp.filter(function(e){return!o.includes(e.payload)}),e.fmtp=e.fmtp.filter(function(e){return!o.includes(e.payload)}),e.rtcpFb!=null&&(e.rtcpFb=e.rtcpFb.filter(function(e){return!o.includes(e.payload)})),e.rtcpFbTrrInt!=null&&(e.rtcpFbTrrInt=e.rtcpFbTrrInt.filter(function(e){return!o.includes(e.payload)}));var a=new RegExp("("+o.join("|")+") ?","g");e.payloads=e.payloads.replace(a,"").trim()}})},n.stripDataChannel=function(){var e,t,n=(e=this.$1)==null?void 0:e.media,r=(t=this.$1)==null?void 0:t.groups,o=null;n!=null&&n.forEach(function(e){e.type==="application"&&e.protocol.includes("RTP")&&(e.port=0,e.protocol="UDP/DTLS/SCTP",o=typeof e.mid=="number"?e.mid.toString():e.mid,e.rtp=[],e.payloads="webrtc-datachannel")}),r!=null&&o!==null&&r.forEach(function(e){var t=typeof e.mids=="string"?e.mids.split(" "):e.mids;e.mids=t.filter(function(e){return e!==o})})},n.stripLocalIceCandidates=function(){var t,n=(t=this.$1)==null?void 0:t.media;n!=null&&n.forEach(function(t){var n;t.candidates=(n=t.candidates)==null?void 0:n.filter(function(t){var n=!t.ip.includes("local");return n||(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_ops","removing_local_candidates_count"),n}),(e||(e=o("ODS"))).flush()})},n.convertMediaSetupActpass=function(){var e,t=(e=this.$1)==null?void 0:e.media;t!=null&&t.forEach(function(e){e.type!=="application"&&(e.setup="actpass")})},n.copyWithTypeAndActpass=function(t){throw r("FBLogger")("rtc_www").mustfixThrow("Abstract parent method was called instead of child method")},n.copyWithType=function(t){throw r("FBLogger")("rtc_www").mustfixThrow("Abstract parent method was called instead of child method")},n.setVersion=function(t){this.$1!=null&&(this.$1.origin.sessionVersion=t)},n.getType=function(){return this.$2},n.setType=function(t){this.$2=t},n.$7=function(){return r("gkx")("19553")||r("gkx")("19554")?!1:o("ZenonBrowsers").isChrome()||o("ZenonBrowsers").isChromiumBasedEdge()||o("ZenonBrowsers").isOpera()||o("ZenonBrowsers").isSamsung()},n.toDescInit=function(){var e,t=function(t){return t!=null&&t.split(" ").includes("renomination")},n="trickle fb-force-5245";if((this.isRemote()?(e=this.$1)!=null&&e.media.every(function(e){return t(e.iceOptions)}):this.$7())&&(n+=" renomination"),this.$1!=null){var r;return{sdp:(r=o("ZenonSDPInteropTransform").write(this.$1,{},{iceOptions:n}))!=null?r:"",type:this.$2}}else return{type:this.$2}},n.toDesc=function(){var e=this.toDescInit(),t=e.sdp,n=e.type;return new RTCSessionDescription({sdp:t,type:n})},n.isRemote=function(){return this.$3==="remote"},n.toLoggingString=function(){var e="\n",t=[" IP4 "," IP6 "],n=this.toDesc().sdp.split(e);return n.forEach(function(e,r){e.startsWith("a=crypto:")?n[r]="a=crypto:**-----**":e.startsWith("a=candidate:")?n[r]="a=candidate:**-----**":t.forEach(function(t){var o=e.indexOf(t);o!==-1&&(n[r]=e.slice(0,o+t.length)+"**-----**")})}),n.join(e)},n.enableExtension=function(t,n,r,o){var e,a=(e=this.$1)==null?void 0:e.media;a==null||a.forEach(function(e){var a,i,l;e.ext==null&&(e.ext=[]);var s=(a=(i=e.ext)==null?void 0:i.some(function(e){return e.uri===t}))!=null?a:!1;s||n!==""&&e.type!==n||(l=e.ext)==null||l.push({config:o,uri:t,value:r})})},n.updateMSection=function(t,n){var e,a,i=o("ZenonSDPInteropTransform").parse(n),l=i.media;if(l.length<1)throw r("FBLogger")("rtc_www").mustfixThrow("Could not parse body from delta SDP");var s=l[0],u=(e=(a=this.$1)==null?void 0:a.media)!=null?e:[];t<u.length?u[t]=s:u.push(s)},n.updateMids=function(t){var e,n=(e=this.$1)==null?void 0:e.groups,r=n==null?void 0:n.find(function(e){return e.type==="BUNDLE"});if(r){var o;typeof r.mids=="string"?o=r.mids.split(" "):o=r.mids;var a=new Set([].concat(o,t));r.mids=Array.from(a)}else n==null||n.push({mids:t,type:"BUNDLE"}),this.$1!=null&&(this.$1.groups=n)},n.fetchVideoCodec=function(){var e,t=new Map,n=(e=this.$1)==null?void 0:e.media;return n!=null&&n.forEach(function(e){if(e.type==="video"){var n,r="",o=(n=e.msid)==null?void 0:n.split(" ");o!=null&&o.length>0&&o[0].length>0&&(r=o.length===2?o[1]:o[0]);var a=[];e.rtp.forEach(function(e){a.push(e.codec)}),t.set(r,a)}}),t},n.updateMsidSemantic=function(){var e,t=(e=this.$1)==null?void 0:e.media,n=new Set;t==null||t.forEach(function(e){var t,r=(t=e.msid)==null?void 0:t.split(" ");r!=null&&r.length>0&&r[0].length>0&&r[0]!=="-"&&n.add(r[0])}),this.$1!=null&&(this.$1.msidSemantic={semantic:"WMS",token:Array.from(n).join(" ")})},t})(),u=(function(e){function t(t){return e.call(this,t,"local")||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.copyWithTypeAndActpass=function(n){var e=new t({sdp:this.toDesc().sdp,type:n});return e.convertMediaSetupActpass(),e},t})(s),c=(function(e){function t(t){return e.call(this,t,"remote")||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.copyWithType=function(n){return new t({sdp:this.toDesc().sdp,type:n})},t})(s);l.ZenonSDP=s,l.ZenonLocalSDP=u,l.ZenonRemoteSDP=c}),98);
__d("ZenonPeerConnectionSdpActions",["FBLogger","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonInfraActionsLogger","ZenonPeerConnectionMediaActions","ZenonSDP","asyncToGeneratorRuntime","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){r("promiseDone")(t.onRemoteSdpSet())},s=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(t.type==="remoteSdpFailed"){if(r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"trying to rollback to last successful sdp pair"}),o("ZenonBrowsers").supportsRollback())yield e.sdpManager.rollbackSdp();else{if(e.lastSuccessfulSdpPair==null)throw r("FBLogger")("rtc_www").mustfixThrow("No last successfully negotiated SDP pair, should never happen here");var n=e.lastSuccessfulSdpPair,a=n.localSdp,i=n.remoteSdp;yield e.sdpManager.setLocalSdp(a),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"setting remote sdp, name: "+t.type}),yield e.sdpManager.setRemoteSdp(i,e.logEvent),t.onSuccess()}r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"successful rollback to last successful sdp pair"})}});return function(n,r){return e.apply(this,arguments)}})(),u=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(t.type==="applyLocalSdp"||t.type==="localMediaStateUpdateRetry"||t.type==="iceRestart"){var n=t.type==="iceRestart",o=e.localMediaStateVersion+1;yield e.sdpManager.createAndSetLocalSdp(o,"offer",{iceRestart:n}),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"apply local SDP"});var a=t.type==="localMediaStateUpdateRetry"?null:e.localMediaStateUpdateRetryTimerId;return t.onSuccess(),{localMediaStateUpdateRetryTimerId:a,localMediaStateVersion:o,outstandingLocalOffer:!0}}return{}});return function(n,r){return e.apply(this,arguments)}})(),c=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(t.type==="applyRemoteSdp"){var n=e.mediaChannelManager,a=e.sdpManager,i=t.payload.sdp,l=i.sdp,s=i.type,u=t.payload.sdpOriginLocalId,c=t.payload.e2eeServerState;s==="answer"?(e.logEvent({name:"setRemoteSdpAnswer"}),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"setting remote sdp, name: "+t.type}),yield a.setRemoteSdp(new(o("ZenonSDP")).ZenonRemoteSDP({sdp:l,type:s}),e.logEvent,u,c),e.logEvent({name:"endSetRemoteDescription"}),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"apply remote answer"})):s==="pranswer"&&(e.logEvent({name:"setRemoteSdpPrAnswer"}),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"setting remote sdp, name: "+t.type}),yield a.setRemoteSdp(new(o("ZenonSDP")).ZenonRemoteSDP({sdp:l,type:s}),e.logEvent,u,c),e.logEvent({name:"endSetRemoteDescription"}),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"apply remote pranswer"})),o("ZenonPeerConnectionMediaActions").applyMediaStates(n,t.payload.mediaStates);var d=t.payload.renegotiationOffer;if(d!=null){var m=d.sdp,p=d.type;r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"setting remote sdp, name: "+t.type}),yield a.setRemoteSdp(new(o("ZenonSDP")).ZenonRemoteSDP({sdp:m,type:p}),e.logEvent,u,c);var _=e.localMediaStateVersion+1;yield e.sdpManager.createAndSetLocalSdp(_,"answer"),r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Apply renegotiation offer and set local answer"})}return t.payload.source==="joinResponse"?e.logEvent({name:"inviteResponseProcessed"}):t.payload.source==="serverMediaUpdateRequest"&&t.payload.sdp.type==="answer"&&e.logEvent({name:"smuWithAnswerProcessed"}),t.payload.onProcessed&&(t.payload.onProcessed(),r("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"onProcessed called in ZenonPeerConnectionSdpActions.applyRemoteAnswer"})),t.onSuccess(),t.payload.sdp}});return function(n,r){return e.apply(this,arguments)}})(),d=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.mediaChannelManager,a=e.sdpManager;if(t.type==="applyRemoteSdp"){var i=t.payload.sdp,l=t.payload.sdpOriginLocalId,s=t.payload.e2eeServerState;if(i.type==="offer"){e.logEvent({name:"setRemoteSdpOffer"});var u;if(i.update){var c;u=(c=e.sdpManager.getRemoteSdp())!=null?c:new(o("ZenonSDP")).ZenonRemoteSDP({type:i.type});var d=Object.keys(i.update.media);d.forEach(function(e){var t=i.update.media[e].body;u.updateMSection(parseInt(e,10),t)}),u.setVersion(i.version),u.setType(i.type),u.updateMids(d.map(function(e){return i.update.media[e].mid})),u.updateMsidSemantic(),n.removeMissingTracks(u.getActiveTrackIDs())}else u=new(o("ZenonSDP")).ZenonRemoteSDP({sdp:i.sdp,type:i.type});r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"setting remote sdp, name: "+t.type});var m=yield a.setRemoteSdp(u,e.logEvent,l,s);o("ZenonPeerConnectionMediaActions").applyMediaStates(n,t.payload.mediaStates,i.update==null),t.payload.onProcessed&&(t.payload.onProcessed(),r("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"onProcessed called in ZenonPeerConnectionSdpActions.applyRemoteOfferAndSetLocalAnswer"}));var p=e.localMediaStateVersion+1,_=yield e.sdpManager.createAndSetLocalSdp(p,"answer");return r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"apply remote offer and set local answer"}),t.onSuccess(),{lastSuccessfulSdpPair:{localSdp:_.copyWithTypeAndActpass("offer"),remoteSdp:m.copyWithType("answer")},localMediaStateVersion:p}}}return{}});return function(n,r){return e.apply(this,arguments)}})(),m=function(t,n){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"Failed to apply remote offer and set local answer: "+n.data.toString(),errorDomain:"ZenonPeerConnectionSdpActions_onApplyRemoteOfferAndSetLocalAnswer"})},p=function(t){var e=t.sdpManager.getLocalSdp();if(e==null)throw r("FBLogger")("rtc_www").mustfixThrow("Local sdp should never be null after setting remote answer");var n=t.sdpManager.getRemoteSdp();if(n==null)throw r("FBLogger")("rtc_www").mustfixThrow("Remote sdp should never be null after setting remote answer");return{lastSuccessfulSdpPair:{localSdp:e,remoteSdp:n},outstandingLocalOffer:!1}},_=function(t){t.logEvent({name:"negotiationComplete"})},f=function(t,n){var e=t.sdpManager.getLocalSdp(),o=n.data.localMediaStateVersion;if(e!==null&&o!=null){var a=e.toDesc(),i=a.sdp,l=a.type;r("promiseDone")(t.onLocalSdpSet({sdp:i,type:l,version:o},t.mediaChannelManager.getLocalTracksForMWS()))}return e!==null&&t.mediaChannelManager.onLocalSdpSet(e),n.data};l.onRemoteSdpSet=e,l.applyingLastSuccessfulSdpPair=s,l.applyLocalSdp=u,l.applyRemoteAnswer=c,l.applyRemoteOfferAndSetLocalAnswer=d,l.onApplyRemoteOfferSetLocalAnswerError=m,l.updateSdpPair=p,l.logNegotiationCompleted=_,l.onLocalSdpSet=f}),98);
__d("ZenonPeerConnectionTerminatedState",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){t.sdpManager.restartPeerConnection()};i.restart=e}),66);
__d("ZenonPeerConnectionTerminatingState",["FBLogger","Promise","ZenonAuditedCheckpointLogId","ZenonInfraActionsLogger","ZenonMediaError","err","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(a,i){var t,l;switch(a.mediaChannelManager.stopStatsPolling(),(i.type!=="endCall"||i.payload.stopLocalTracks)&&(r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"stopping local tracks"}),a.mediaChannelManager.stopLocalTracks()),i.type){case"endCall":if(((t=i.payload)==null?void 0:t.restart)!==!0){var s;r("promiseDone")(a.onConnectionDestroyed((s=i.payload.error)!=null?s:null))}i.onSuccess();break;case"applyLocalSdp":case"error.platform.applyLocalSdpInvoke":r("promiseDone")(a.onConnectionDestroyed(o("ZenonMediaError").ZenonMediaError.SetLocalSdpFailed)),i.onError==null||i.onError(r("err")(o("ZenonMediaError").ZenonMediaError.SetLocalSdpFailed));break;case"applyRemoteSdp":case"error.platform.applyRemoteSdpInvoke":case"error.platform.renegotiatingInvoke":r("promiseDone")(a.onConnectionDestroyed(o("ZenonMediaError").ZenonMediaError.SetRemoteSdpFailed)),i.onError==null||i.onError(r("err")(o("ZenonMediaError").ZenonMediaError.SetRemoteSdpFailed));break;case"error.platform.rollingSdpBackInvoke":r("promiseDone")(a.onConnectionDestroyed(o("ZenonMediaError").ZenonMediaError.RollbackSdpFailed)),i.onError==null||i.onError(r("err")(o("ZenonMediaError").ZenonMediaError.RollbackSdpFailed));break;default:r("FBLogger")("rtc_www").warn("Event "+i.type+" logged as unknown error. Please add a more specific error for this event type."),r("promiseDone")(a.onConnectionDestroyed(o("ZenonMediaError").ZenonMediaError.UnknownError)),i.onError==null||i.onError(r("err")(o("ZenonMediaError").ZenonMediaError.UnknownError));break}return a.sdpManager.closePeerConnection(),(l=a.tslogUploader)==null||l.logTslog(),(e||(e=n("Promise"))).resolve(r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"cleaning up peer connection, event: "+i.type}))},u=function(t,n){};l.cleanUp=s,l.done=u}),98);
__d("ZenonPeerConnectionStateMachine",["ZenonDebugLogger","ZenonInfraActionsLogger","ZenonMWMessageReliabilityLogTypes","ZenonPeerConnectionDataActions","ZenonPeerConnectionIceActions","ZenonPeerConnectionMediaActions","ZenonPeerConnectionSMGuards","ZenonPeerConnectionSdpActions","ZenonPeerConnectionTerminatedState","ZenonPeerConnectionTerminatingState","ZenonStateMachineBase","err","qpl","xstate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_={iceConnectionState:"new",iceConnectionTimeoutID:null,lastSuccessfulSdpPair:null,localMediaStateUpdateRetryTimerId:null,localMediaStateVersion:1,outstandingLocalOffer:!1,retryCount:0},f={loggingStateName:"peerConnectionState",name:"PeerConnectionStateMachine",shortname:"Peer Connection"};function g(e){var t,n;return((t=e.payload)==null?void 0:t.messageID)!=null?String((n=e.payload)==null?void 0:n.messageID):null}var h=(function(e){function t(t,n){var a;return n===void 0&&(n="init"),a=e.call(this,{base:{guards:o("ZenonPeerConnectionSMGuards"),initState:"init"},logging:babelHelpers.extends({},f,{eventToLogTimeoutsOn:"applyRemoteSdp",getTransactionId:g,loggableEvents:["applyRemoteSdp"],loggingId:Date.now()}),machine:{context:babelHelpers.extends({},_,t),initialState:n,states:R}})||this,a.sm.onTransition(function(e){a.logTransaction(e.event,o("ZenonMWMessageReliabilityLogTypes").ZenonMWMessageReliabilityEvent.PROCESSED_SM_EVENT),a.ifDroppedEvent(e,function(e){return e.onError(r("err")("event was dropped: "+e.type))})}),a.sm.onTransition(function(e){r("ZenonInfraActionsLogger").updateCachedValues({peerConnectionState:e.value}),a.logTransition(e),e.value==="terminated"&&r("ZenonDebugLogger").getInstance().endQPL(r("qpl")._(64239068,"6172"),a.loggingId)}),r("ZenonDebugLogger").getInstance().startQPL(r("qpl")._(64239068,"6172"),a.loggingId),a}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getLocalMediaStateVersion=function(){return this.sm.state.context.localMediaStateVersion},t})((s=o("ZenonStateMachineBase")).ZenonStateMachineBase),y={actions:[(u=o("ZenonPeerConnectionMediaActions")).onApplyMediaUpdate]},C={actions:[(p=o("xstate")).assign((e=r("ZenonPeerConnectionIceActions")).onIceConnectionStateChanged)]},b={actions:[(c=o("ZenonPeerConnectionDataActions")).onDataChannelMessageReceived]},v={actions:[u.onForceEncodingEnabled]},S={actions:[u.onIceCandidateReady]},R={init:{exit:[u.startTslog],on:{addLocalTracks:{target:"addingLocalTracks"},applyLocalSdp:{target:"applyingLocalSdp"},applyRemoteSdp:{cond:(d=o("ZenonPeerConnectionSMGuards")).applyRemoteOfferSdpGuard,target:"renegotiating"},removeLocalTrack:{target:"removingLocalTrack"},replaceLocalTrack:{target:"replacingLocalTrack"},applyMediaUpdate:y,createDataChannel:{actions:[c.onCreateDataChannel]},createDataMessageSubscription:{actions:[c.onCreateDataMessageSubscription]},dataChannelMessageReceived:b,iceConnectionStateChange:C,localMediaStateUpdateRetry:{actions:[p.assign(u.onLocalMediaStateUpdateRetry)]},muteLocalTrack:{actions:[p.assign(u.onMuteLocalTrack)]},muteRemoteTrack:{actions:[p.assign(u.onMuteRemoteTrack)]},removeDataMessageSubscription:{actions:[c.onRemoveDataMessageSubscription]},setLocalMediaStateVersion:{actions:[p.assign(u.onSetLocalMediaStateVersion)]},stopLocalTrack:{actions:[u.onStopLocalTrack]},unmuteLocalTrack:{actions:[p.assign(u.onUnmuteLocalTrack)]},unmuteRemoteTrack:{actions:[p.assign(u.onUnmuteRemoteTrack)]},applyRemoteIceCandidate:s.defer,forceEncodingEnabled:s.defer,iceCandidateReady:s.defer}},applyingLocalSdp:{invoke:{id:"applyLocalSdpInvoke",onDone:{actions:[p.assign((m=o("ZenonPeerConnectionSdpActions")).onLocalSdpSet)],target:"hasLocalSdp"},onError:"terminating",src:m.applyLocalSdp},on:{endCall:{target:"terminating"},applyMediaUpdate:y,dataChannelMessageReceived:b,iceConnectionStateChange:C,addLocalTracks:s.defer,applyLocalSdp:s.defer,applyRemoteIceCandidate:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,forceEncodingEnabled:s.defer,iceCandidateReady:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},rollingSdpBack:{invoke:{id:"rollingSdpBackInvoke",onDone:{target:"connected"},onError:{target:"terminating"},src:m.applyingLastSuccessfulSdpPair},on:{endCall:{target:"terminating"},applyMediaUpdate:y,dataChannelMessageReceived:b,iceCandidateReady:S,iceConnectionStateChange:C,addLocalTracks:s.defer,applyLocalSdp:s.defer,applyRemoteIceCandidate:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,forceEncodingEnabled:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,remoteSdpFailed:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},hasLocalSdp:{entry:[function(e){return e.mediaChannelManager.setSimulcastSingleLayerParams()}],on:{applyRemoteSdp:[{cond:d.applyRemoteAnswerSdpGuard,target:"applyingRemoteSdp"},{cond:d.applyRemoteOfferSdpGuard,target:"renegotiating"}],remoteSdpFailed:{target:"rollingSdpBack"},endCall:{target:"terminating"},applyMediaUpdate:y,dataChannelMessageReceived:b,iceCandidateReady:S,iceConnectionStateChange:C,addLocalTracks:s.defer,applyRemoteIceCandidate:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,removeDataMessageSubscription:s.defer,forceEncodingEnabled:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},applyingRemoteSdp:{invoke:[{id:"applyRemoteSdpInvoke",onDone:[{actions:[p.assign(m.updateSdpPair)],cond:d.prAnswerSetGuard,target:"prNegotiated"},{actions:[p.assign(m.updateSdpPair),m.onRemoteSdpSet],cond:d.iceNotConnectedGuard,target:"negotiated"},{actions:[p.assign(m.updateSdpPair),m.onRemoteSdpSet],cond:d.iceConnectedGuard,target:"connected"}],onError:{target:"terminating"},src:m.applyRemoteAnswer}],on:{endCall:{target:"terminating"},iceCandidateReady:S,iceConnectionStateChange:C,addLocalTracks:s.defer,applyMediaUpdate:s.defer,applyLocalSdp:s.defer,applyRemoteIceCandidate:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,dataChannelMessageReceived:s.defer,forceEncodingEnabled:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},negotiated:{entry:[m.logNegotiationCompleted],on:{endCall:{target:"terminating"},iceConnectionStateChange:[{actions:[p.assign(e.onIceConnectionStateChanged)],cond:d.iceConnectedEventGuard,target:"connected"},{actions:[p.assign(e.onIceConnectionStateChanged)]}],iceRestart:{target:"applyingLocalSdp"},applyMediaUpdate:y,applyRemoteIceCandidate:{actions:[u.applyRemoteIceCandidate]},dataChannelMessageReceived:b,forceEncodingEnabled:v,iceCandidateReady:S,addLocalTracks:s.defer,applyLocalSdp:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},prNegotiated:{on:{endCall:{target:"terminating"},applyRemoteSdp:[{cond:d.applyRemoteAnswerSdpGuard,target:"applyingRemoteSdp"}],applyMediaUpdate:y,applyRemoteIceCandidate:{actions:[u.applyRemoteIceCandidate]},dataChannelMessageReceived:b,forceEncodingEnabled:v,iceCandidateReady:S,iceConnectionStateChange:C,addLocalTracks:s.defer,applyLocalSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,iceRestart:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},connected:{on:{addLocalTracks:{target:"addingLocalTracks"},applyLocalSdp:{target:"applyingLocalSdp"},applyRemoteSdp:{cond:d.applyRemoteOfferSdpGuard,target:"renegotiating"},endCall:{target:"terminating"},iceConnectionStateChange:[{actions:[p.assign(e.onIceConnectionStateChanged)],cond:d.iceDisconnectedEventGuard,target:"negotiated"},{actions:[p.assign(e.onIceConnectionStateChanged)]}],localMediaStateUpdateRetry:[{cond:d.outstandingLocalOfferGuard,target:"applyingLocalSdp"},{actions:[p.assign(u.onLocalMediaStateUpdateRetry)]}],removeLocalTrack:{target:"removingLocalTrack"},replaceLocalTrack:{target:"replacingLocalTrack"},applyMediaUpdate:y,applyRemoteIceCandidate:{actions:[u.applyRemoteIceCandidate]},createDataChannel:{actions:[c.onCreateDataChannel]},createDataMessageSubscription:{actions:[c.onCreateDataMessageSubscription]},dataChannelMessageReceived:b,forceEncodingEnabled:v,iceCandidateReady:S,muteLocalTrack:{actions:[p.assign(u.onMuteLocalTrack)]},muteRemoteTrack:{actions:[p.assign(u.onMuteRemoteTrack)]},removeDataMessageSubscription:{actions:[c.onRemoveDataMessageSubscription]},stopLocalTrack:{actions:[u.onStopLocalTrack]},unmuteLocalTrack:{actions:[p.assign(u.onUnmuteLocalTrack)]},unmuteRemoteTrack:{actions:[p.assign(u.onUnmuteRemoteTrack)]}}},addingLocalTracks:{invoke:{id:"addLocalTracksInvoke",onDone:{actions:[p.assign(u.onAddedLocalTracks)],target:"connected"},onError:{actions:[u.onAddLocalTracksError],target:"connected"},src:u.onAddingLocalTracks},on:{endCall:{target:"terminating"},applyMediaUpdate:y,dataChannelMessageReceived:b,iceConnectionStateChange:C,addLocalTracks:s.defer,applyLocalSdp:s.defer,applyRemoteIceCandidate:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,forceEncodingEnabled:s.defer,iceCandidateReady:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},removingLocalTrack:{invoke:{id:"removeLocalTrackInvoke",onDone:{actions:[p.assign(u.onRemovedLocalTrack)],target:"connected"},onError:{actions:[u.onRemoveLocalTrackError],target:"connected"},src:u.onRemovingLocalTrack},on:{endCall:{target:"terminating"},dataChannelMessageReceived:b,iceConnectionStateChange:C,addLocalTracks:s.defer,applyLocalSdp:s.defer,applyMediaUpdate:s.defer,applyRemoteIceCandidate:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,forceEncodingEnabled:s.defer,iceCandidateReady:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},replacingLocalTrack:{invoke:{id:"replaceLocalTrackInvoke",onDone:{actions:[p.assign(u.onReplacedLocalTrack)],target:"connected"},onError:{actions:[u.onReplaceLocalTrackError],target:"connected"},src:u.onReplacingLocalTrack},on:{endCall:{target:"terminating"},dataChannelMessageReceived:b,iceConnectionStateChange:C,addLocalTracks:s.defer,applyLocalSdp:s.defer,applyMediaUpdate:s.defer,applyRemoteIceCandidate:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,forceEncodingEnabled:s.defer,iceCandidateReady:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},renegotiating:{invoke:{id:"renegotiatingInvoke",onDone:[{actions:[p.assign(m.onLocalSdpSet)],cond:d.iceNotConnectedGuard,target:"negotiated"},{actions:[p.assign(m.onLocalSdpSet)],cond:d.iceConnectedGuard,target:"connected"}],onError:{actions:[m.onApplyRemoteOfferSetLocalAnswerError],target:"terminating"},src:m.applyRemoteOfferAndSetLocalAnswer},on:{endCall:{target:"terminating"},addLocalTracks:s.defer,applyLocalSdp:s.defer,applyMediaUpdate:s.defer,applyRemoteIceCandidate:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,dataChannelMessageReceived:s.defer,forceEncodingEnabled:s.defer,iceConnectionStateChange:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},terminating:{exit:[o("ZenonPeerConnectionTerminatingState").done],invoke:[{onDone:{target:"terminated"},src:o("ZenonPeerConnectionTerminatingState").cleanUp}],on:{addLocalTracks:s.defer,applyLocalSdp:s.defer,applyMediaUpdate:s.defer,applyRemoteIceCandidate:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,dataChannelMessageReceived:s.defer,forceEncodingEnabled:s.defer,iceConnectionStateChange:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,restartPeerConnection:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}},terminated:{on:{restartPeerConnection:{actions:[o("ZenonPeerConnectionTerminatedState").restart],target:"init"},addLocalTracks:s.defer,applyLocalSdp:s.defer,applyMediaUpdate:s.defer,applyRemoteIceCandidate:s.defer,applyRemoteSdp:s.defer,createDataChannel:s.defer,createDataMessageSubscription:s.defer,dataChannelMessageReceived:s.defer,forceEncodingEnabled:s.defer,iceConnectionStateChange:s.defer,localMediaStateUpdateRetry:s.defer,muteLocalTrack:s.defer,removeDataMessageSubscription:s.defer,removeLocalTrack:s.defer,replaceLocalTrack:s.defer,stopLocalTrack:s.defer,unmuteLocalTrack:s.defer}}};l.default=h}),98);
__d("SctpSctpDatagramSerializers",["ThriftTypes","jsbi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){return{sender:0,receivers:new Set,payload:Uint8Array.of()}}function u(t,n){if(n.writeStructBegin("Datagram"),n.writeFieldBegin({fname:"sender",ftype:(e||(e=r("ThriftTypes"))).I64,fid:1}),t.sender!=null)n.writeI64(r("jsbi").BigInt(t.sender));else{var o=0;n.writeI64(r("jsbi").BigInt(o))}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"receivers",ftype:e.SET,fid:2}),t.receivers!=null){n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).I64,size:t.receivers.size});for(var a of t.receivers)n.writeI64(r("jsbi").BigInt(a));n.writeSetEnd()}else{var i=new Set;n.writeSetBegin({etype:(e||(e=r("ThriftTypes"))).I64,size:i.size});for(var l of i)n.writeI64(r("jsbi").BigInt(l));n.writeSetEnd()}if(n.writeFieldEnd(),n.writeFieldBegin({fname:"payload",ftype:e.STRING,fid:3}),t.payload!=null)n.writeBinary(t.payload);else{var s=Uint8Array.of();n.writeBinary(s)}n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function c(t){var n={};for(t.readStructBegin();;){var o=t.readFieldBegin(),a=o.ftype,i=o.fid;if(a===(e||(e=r("ThriftTypes"))).STOP)break;switch(i){case 1:a===(e||(e=r("ThriftTypes"))).I64?n.sender=Number(t.readI64()):t.skip(a);break;case 2:if(a===(e||(e=r("ThriftTypes"))).SET){n.receivers=new Set;for(var l=t.readSetBegin(),s=0;s<l.size;s++){var u=Number(t.readI64());n.receivers.add(u)}}else t.skip(a);break;case 3:a===(e||(e=r("ThriftTypes"))).STRING?n.payload=t.readBinary():t.skip(a);break;default:t.skip(a)}t.readFieldEnd()}return t.readStructEnd(),n.sender===void 0&&(n.sender=0),n.receivers===void 0&&(n.receivers=new Set),n.payload===void 0&&(n.payload=Uint8Array.of()),n}l.Datagram$DefaultConstructor=s,l.serializeDatagram=u,l.deserializeDatagram=c}),98);
__d("ZenonDataChannelWrapper",["CompactSerializerPolyfill","RequestStreamBodyUtils","SctpSctpDatagramSerializers","ZenonAuditedCheckpointLogId","ZenonE2ee","ZenonInfraActionsLogger","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=100,s=(function(){function t(e,t,n){var o=this,a;this.$1=[],this.onMessage=function(e){var t=e.data;typeof t=="string"?o.$12(t,null):t instanceof ArrayBuffer?o.$13(t):r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:"Message type is not supported "+typeof t+" and will not be processed.",errorDomain:"ZenonDataChannelWrapper onMessage"})},this.onClose=function(){var e,t;o.$1=[],(e=o.$6)==null||e.deregisterSctpTopic(o.$3),(t=o.$5)==null||t.onClosing()},this.onOpen=function(){var e;o.$14(),(e=o.$5)==null||e.onOpen()},this.$2=e,this.$3=this.$2.label,this.$4=t,this.$5=n,this.$2.onclose=this.onClose,this.$2.onmessage=this.onMessage,this.$2.onopen=this.onOpen,this.$6=r("ZenonE2ee").getSecureDataMessageManager(),this.$7=this.$8(),(a=this.$6)==null||a.registerSctpTopic(this.$3,this.$7)}var n=t.prototype;return n.send=function(t){if(this.getState()!=="open"){this.$9(t);return}this.$10(t)},n.$10=function(t){try{if(!this.$11(t))return;var e=this.$4.toSctpDatagram(t);if(e==null){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:"Could not convert ZenonDataMessage to Datagram. Not sending message.",errorDomain:"ZenonDataChannelWrapper send"});return}var n=o("CompactSerializerPolyfill").serialize(e,o("SctpSctpDatagramSerializers").serializeDatagram);this.$2.send(n)}catch(e){var a=r("getErrorSafe")(e);r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:"Could not convert serialize Datagram with error: "+a.message+". Not sending message.",errorDomain:"ZenonDataChannelWrapper send"})}},n.$11=function(t){if(this.$6==null)return!0;var e=this.$6.encryptSctpMessage(this.$3,t.message);return e==null?!1:(t.message=e,!0)},n.close=function(){this.$2.close()},n.getState=function(){return this.$2.readyState},n.setListeners=function(t){this.$5=t},n.$14=function(){for(;this.$1.length>0&&this.getState()==="open";)this.$10(this.$1.shift())},n.$9=function(n){this.getState()!=="closed"&&this.$1.length<e?this.$1.push(n):r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"We failed to queue message for"+this.$3+" max queue size of"+e+" current queue size: "+this.$1.length+" current data channel state is "+this.getState()})},n.$8=function(){var e=this;return function(t,n,r){var o;(o=e.$5)==null||o.onMessage({message:t,sender:n,senderNodeId:r})}},n.$12=function(t,n){if(n==null){this.$7(t,"",-1);return}var e=this.$4.toUserId(n);if(e==null){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:"Could not find associated sender id of node id. "+n,errorDomain:"ZenonDataChannelWrapper _onSctpMessage"});return}if(this.$6==null){this.$7(t,e,n);return}this.$6.onSctpMessage(this.$3,t,e,n)},n.$13=function(t){try{var e=o("CompactSerializerPolyfill").deserialize(new Uint8Array(t),o("SctpSctpDatagramSerializers").deserializeDatagram);if(e.sender===0)throw r("err")("Incorrectly deserialized datagram. Received a node id of 0.");this.$12(o("RequestStreamBodyUtils").uint8ArrayToString(e.payload),e.sender)}catch(e){var n=r("getErrorSafe")(e);r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:"Could not deserialize datagram with error "+n.message+". Treating as unwrapped payload.",errorDomain:"ZenonDataChannelWrapper onMessage"}),this.$12(o("RequestStreamBodyUtils").uint8ArrayToString(new Uint8Array(t)),null)}},t})();l.default=s}),98);
__d("ZenonEventListenerCache",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map}var t=e.prototype;return t.add=function(t,n){var e=this.getByType(t);e.push(n),this.$1.set(t,e)},t.delete=function(t,n){var e=this.getByType(t),r=e.filter(function(e){return e!==n});r.length<1?this.$1.delete(t):this.$1.set(t,r)},t.forEachEventListener=function(t){var e=this,n=this.getCachedEventTypes();n.forEach(function(n){var r=e.getByType(n);r.forEach(function(e){t(n,e)})})},t.getByType=function(t){var e;return(e=this.$1.get(t))!=null?e:[]},t.getCachedEventTypes=function(){return Array.from(this.$1.keys())},t.getAll=function(){return this.$1},e})();i.default=e}),66);
__d("ZenonPeerConnectionHelper",["FBLogger","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";function e(e){e.signalingState!=="closed"&&e.close()}function s(){return RTCPeerConnection.generateCertificate({name:"ECDSA",namedCurve:"P-256"})}function u(e,t){t===void 0&&(t={});try{return new RTCPeerConnection(babelHelpers.extends({},t))}catch(e){var n=r("getErrorSafe")(e);throw r("FBLogger")("rtc_www").catching(n).warn("Failed to create peer connection"),n}}l.closePeerConnection=e,l.generateCertificate=s,l.createPeerConnection=u}),98);
__d("ZenonSimulcastSdpUtils",["FBLogger","Random","UserAgent"],(function(t,n,r,o,a,i,l){"use strict";var e="\r\n";function s(e){var t=e.filter(function(e){return e.startsWith("a=ssrc:")}).map(function(e){return e.split(" ")[0].split(":")[1]});return new Set(t)}function u(e,t){var n=new RegExp("^a=ssrc:\\d+ "+t+":"),r=e.filter(function(e){return n.test(e)})[0];return r&&r.split(" ")[1].split(":")[1]}function c(e){var t=e.filter(function(e){return e.startsWith("a=ssrc-group:FID")}).map(function(e){return e.split(" ")[2]});return new Set(t)}function d(e){var t=new RegExp("^a=ssrc:\\d+ msid:"),n=e.filter(function(e){return t.test(e)})[0],r=n.split(" ");return r.length>2?r[2]:null}function m(e,t){for(var n=[],r=0;r<e;r++){for(var a=0;a===0||t.has(a.toString());)a=o("Random").uint32();t.add(a.toString()),n.push(a.toString())}return n}function p(t,n){if(!r("UserAgent").isBrowser("Chrome >= 88"))return r("FBLogger")("rtc_www").mustfix("Attempted to add unified-plan simulcast in unsupported browser"),t;if(n<=1||n>3)return r("FBLogger")("rtc_www").mustfix("Unsupported number of layers passed: %s",n),t;var o=t.trim().split(e),a=s(o),i=o.findIndex(function(e){return/^m=video/.test(e)});if(i===-1)return t;for(var l=i+1;l<o.length&&!o[l].startsWith("m=");)l++;var p=o.splice(i,l-i),_=s(p),f=c(p),g=new Set(Array.from(_).filter(function(e){return!f.has(e)}));if(g.size!==1||f.size>1)return[].concat(o.slice(0,i),p,o.slice(i)).join(e);var h=f.size===1,y=Array.from(g)[0],C="";h&&(C=Array.from(f)[0]);var b=u(p,"cname"),v=u(p,"msid"),S=d(p);S!=null&&(v+=" "+S);var R=u(p,"mslabel"),L=u(p,"label"),E=[y].concat(m(n-1,a)),k=[];h&&(E.forEach(function(e){return a.add(e)}),k=[C].concat(m(n-1,a)));var I=[];I.push("a=ssrc-group:SIM "+E.join(" "));for(var T=0;T<k.length;T++)I.push("a=ssrc-group:FID "+E[T]+" "+k[T]);var D=[];if(h)for(var x=0;x<E.length;x++)D.push(E[x]),D.push(k[x]);else D=E;return D.forEach(function(e){I.push("a=ssrc:"+e+" cname:"+b),I.push("a=ssrc:"+e+" msid:"+v),R&&I.push("a=ssrc:"+e+" mslabel:"+R),L&&I.push("a=ssrc:"+e+" label:"+L)}),p=p.filter(function(e){return!e.startsWith("a=ssrc")}),p=[].concat(p,I),[].concat(o.slice(0,i),p,o.slice(i)).join(e)+e}l.addSimulcastToChromeOffer=p}),98);
__d("ZenonPeerConnectionWrapper",["FBLogger","FrameEncryptionWasmTypes","Promise","ZenonAppProvider","ZenonAuditedCheckpointLogId","ZenonDataChannelWrapper","ZenonE2ee","ZenonEventListenerCache","ZenonInfraActionsLogger","ZenonPeerConnectionHelper","ZenonSDP","ZenonSimulcastSdpUtils","ZenonSimulcastUtils","asyncToGeneratorRuntime","err","getErrorSafe","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t,n,a){var i=this;n===void 0&&(n={}),a===void 0&&(a=!1),this.$4=new(r("ZenonEventListenerCache")),this.$9=!1,this.$10=!1,this.$15=function(e){var t=e.channel,n=i.$6.get(t.label);i.$5.set(t.label,new(r("ZenonDataChannelWrapper"))(t,i.$7,n))},this.$2=e,this.$3=n,this.$1=o("ZenonPeerConnectionHelper").createPeerConnection(e,n),this.$5=new Map,this.$6=new Map,this.$7=t,this.$8=a,a&&(this.$9=!0),this.$11=new Map,this.$12=new Map,this.$13=new Map,this.addEventListener("datachannel",this.$15)}var a=t.prototype;return a.$16=function(t){if(t!=null)return t.replace(/a=sendonly|a=recvonly/g,"a=sendrecv")},a.createOffer=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){e===void 0&&(e={});var t=yield this.$17(e);if(o("ZenonAppProvider").isMetaAI()&&!r("justknobx")._("5357")&&(t.sdp=this.$16(t.sdp)),this.$9){if(t.sdp!=null)try{t.sdp=o("ZenonSimulcastSdpUtils").addSimulcastToChromeOffer(t.sdp,o("ZenonSimulcastUtils").getNumLayers())}catch(e){r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:r("getErrorSafe")(e).toString(),errorDomain:"ZenonPeerConnectionWrapper_createOffer_addSimulcastToChromeOffer"})}this.$9=!1}return new(o("ZenonSDP")).ZenonLocalSDP(t)});function t(t){return e.apply(this,arguments)}return t})(),a.rollbackSdp=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield this.$1.setLocalDescription({type:"rollback"})}catch(t){var e=r("getErrorSafe")(t);throw r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,error:e.toString(),errorDomain:"ZenonPeerConnectionWrapper_rollbackSDP"}),e}});function t(){return e.apply(this,arguments)}return t})(),a.setLocalDescription=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){this.$18(e.getMedia(),this.$11);var t=e.toDescInit();try{this.getSignalingState()!=="closed"&&(yield this.$1.setLocalDescription(t))}catch(e){var n=r("getErrorSafe")(e);throw r("FBLogger")("rtc_www").catching(n).mustfix("Error processing modern API setLocalDescription in ZenonPeerConnectionWrapper."),n}});function t(t){return e.apply(this,arguments)}return t})(),a.createAnswer=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield this.$1.createAnswer(),t=new(o("ZenonSDP")).ZenonLocalSDP(e);return this.$14=t.getSSLRole(),t});function t(){return e.apply(this,arguments)}return t})(),a.setRemoteDescription=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(this.$18(e.getMedia(),this.$12),e.getType()==="answer"){var t=e.getSSLRole();if(t!=null&&this.$14==null)this.$14=this.getOppositeSSLRole(t);else if(t==null&&this.$14!=null){var n=this.getOppositeSSLRole(this.$14);e.setSSLRole(n)}}var a=e.toDescInit();this.$19(a),r("ZenonE2ee").terminateCallIfE2eeViolation(o("FrameEncryptionWasmTypes").ZenonE2eeComponent.PRE_REMOTE_SDP,"");try{if(this.getSignalingState()!=="closed")yield this.$1.setRemoteDescription(a);else throw r("err")("Cannot set remote description: peer connection is already closed")}catch(e){var i=r("getErrorSafe")(e);throw r("FBLogger")("rtc_www").catching(i).mustfix("Error processing modern API setRemoteDescription in ZenonPeerConnectionWrapper."),i}});function t(t){return e.apply(this,arguments)}return t})(),a.setRemoteIceCandidate=function(o){return this.$1.remoteDescription===null?(r("FBLogger")("rtc_www").mustfix("Remote ICE candidate should not be applied before remote description"),(e||(e=n("Promise"))).resolve()):this.$1.addIceCandidate(o)},a.close=function(){this.$5.forEach(function(e){return e.close()}),this.$5.clear(),o("ZenonPeerConnectionHelper").closePeerConnection(this.$1)},a.restart=function(){this.$1=o("ZenonPeerConnectionHelper").createPeerConnection(this.$2,this.$3),this.addCachedEventListenersToPeerConnection()},a.addEventListener=function(t,n){this.$4.add(t,n),this.$1.addEventListener(t,n)},a.createDataChannel=function(t,n,o,a,i){var e=function(){},l={onClosing:e,onMessage:n,onOpen:o},s=this.$5.get(t);if(s==null)if(a){var u=this.$1.createDataChannel(t,this.$20(i));u==null?r("FBLogger")("rtc_www").mustfix("Unable to create requested data channel: %s",t):(u.binaryType="arraybuffer",this.$5.set(t,new(r("ZenonDataChannelWrapper"))(u,this.$7,l)))}else this.$6.set(t,l);else s.setListeners(l)},a.getDataChannelState=function(t){var e=this.$5.get(t);return e==null?void 0:e.getState()},a.sendDataMessage=function(t,n){var e=this.$5.get(t);e!=null?e.send(n):r("FBLogger")("rtc_www").mustfix("Unable to send a message on data channel: %s",t)},a.getCnameFromTrackId=function(t){var e;return(e=this.$13.get(t))!=null?e:null},a.getAllEventListeners=function(){return this.$4.getAll()},a.getEventListenersForType=function(t){var e;return(e=this.$4.getByType(t))!=null?e:[]},a.canAcceptRemoteSdp=function(){return this.$1.iceConnectionState!=="closed"&&this.$1.signalingState!=="closed"},a.removeEventListener=function(t,n){this.$4.delete(t,n),this.$1.removeEventListener(t,n)},a.removeAllEventListeners=function(){var e=this;this.$4.forEachEventListener(function(t,n){e.$1.removeEventListener(t),e.$4.delete(t,n)})},a.addCachedEventListenersToPeerConnection=function(){var e=this;this.$4.forEachEventListener(function(t,n){e.$1.addEventListener(t,n)})},a.addTrack=function(t,n){return n==null?this.$1.addTrack(t):this.$1.addTrack(t,n)},a.addTransceiver=function(t,n){return this.$1.addTransceiver(t,n)},a.getTransceivers=function(){return typeof this.$1.getTransceivers=="function"?this.$1.getTransceivers():[]},a.getTransceiverFromSender=function(t){return this.getTransceivers().find(function(e){return e.sender===t})},a.getReceivers=function(){return typeof this.$1.getReceivers=="function"?this.$1.getReceivers():[]},a.getSenders=function(){return typeof this.$1.getSenders=="function"?this.$1.getSenders():[]},a.getStats=function(t){return this.$1.getStats(t)},a.getSignalingState=function(){return this.$1.signalingState},a.removeTrack=function(t){var e=!1;for(var n of this.$1.getSenders())n.track===t&&(this.$1.removeTrack(n),e=!0);e||r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"ZenonPeerConnectionWrapper.removeTrack: Could not find sender for track "+t.id})},a.supportsSimulcast=function(){return this.$8},a.getSimulcastInitialized=function(){return this.$10},a.setSimulcastInitialized=function(t){this.$10=t},a.$17=function(r){return(e||(e=n("Promise"))).resolve(this.$1.createOffer(r))},a.$18=function(t,n){var e=this;t.forEach(function(t){if(t.type!=="application"){var r=t.msid,o=e.getTrackIdFromMsid(r);o!=null&&t.mid!=null&&n.set(String(t.mid),o)}})},a.$20=function(t){return t===void 0&&(t={}),t.negotiated=!1,t},a.$19=function(t){var e=this,n=t.sdp,r=t.type,a=new(o("ZenonSDP")).ZenonRemoteSDP({sdp:n,type:r}).getTrackIdAndCnameMap();a.forEach(function(t,n){e.$13.set(n,t)})},a.getTrackIdFromMsid=function(t){if(t!=null){var e=t.split(" ");if(e.length>=2)return e[1];r("FBLogger")("rtc_www").warn("MSID did not have an eligible ID for caching")}return null},a.getLocalMWTrackId=function(t){var e;return t!==null&&(e=this.$11.get(t))!=null?e:null},a.getRemoteMWTrackId=function(t){var e;return t!==null&&(e=this.$12.get(t))!=null?e:null},a.getCurrentRemoteDescription=function(){return this.$1.currentRemoteDescription!=null?new(o("ZenonSDP")).ZenonRemoteSDP({sdp:this.$1.currentRemoteDescription.sdp,type:this.$1.currentRemoteDescription.type}):null},a.getOppositeSSLRole=function(t){return t==="active"?"passive":"active"},a.getDataChannel_TESTONLY=function(t){return this.$5.get(t)},t})();l.default=s}),98);
__d("ZenonSDPRtpHeaderExtensionManager",["ZenonAppProvider","ZenonBrowsers","ZenonInfraActionsLogger","ZenonODSLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14],s="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00",u="http://www.webrtc.org/experiments/rtp-hdrext/generic-frame-descriptor-00",c="urn:ietf:params:rtp-hdrext:encrypt",d="urn:ietf:params:rtp-hdrext:ssrc-audio-level",m="http://www.webrtc.org/experiments/rtp-hdrext/abs-capture-time",p=0,_=(function(){function t(e){this.$1=[],this.$2=e,this.$3()}var n=t.prototype;return n.$3=function(){if(o("ZenonBrowsers").isVideoLayersAllocationSupported()){var e={existingId:p,isRemoteSupported:!0,mediaType:"video",notFoundCounterName:"no_unused_extension_id_found_for_vla",uri:s};this.$1.push(e)}if(this.$2){var t={existingId:p,isRemoteSupported:!0,mediaType:"video",notFoundCounterName:"no_unused_extension_id_found_for_gfd",uri:u};this.$1.push(t);var n={config:d,existingId:p,isRemoteSupported:!0,mediaType:"audio",notFoundCounterName:"no_unused_extension_id_found_for_encrypted_audio_rtp_header",uri:c};this.$1.push(n)}if(o("ZenonAppProvider").shouldSupportRTPSession()){var r={existingId:p,isRemoteSupported:!0,mediaType:"audio",notFoundCounterName:"no_unused_extension_id_found_for_abs_capture_time",uri:m};this.$1.push(r)}},n.resetRtpHeaderExtensionStatus=function(){this.$1=[],this.$3()},n.setExtensionsSupportedByRemote=function(t){var e=this;this.$1.forEach(function(n){var r=e.$4(t,n);r===p?n.isRemoteSupported=!1:n.existingId===p&&(n.existingId=r)})},n.enableRegisteredExtensions=function(t){var e=this,n=t.getMedia();n!=null&&this.$1.forEach(function(o){if(o.isRemoteSupported){var a=o.existingId!==p?o.existingId:e.$5(n,o);if(a===p)return;o.existingId=a,r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"[ZP] enabling header extension for <uri: "+o.uri+"\n          , id: "+a+", media type: "+o.mediaType+",\n          config: "+String(o.config)+">"}),t.enableExtension(o.uri,o.mediaType,a,o.config)}})},n.$5=function(n,o){var t=this,a=new Set(e),i=0;return n.forEach(function(e){if(e.ext!=null)for(var n of e.ext){if(t.$6(o,n)){i=n.value;return}a.delete(n.value)}}),i===p&&a.size===0?(o.notFoundCounterName!==""&&r("ZenonODSLogger").logCounter(o.notFoundCounterName),p):i===p?Array.from(a)[0]:i},n.$4=function(t,n){var e=this,r=p,o=t.getMedia();if(o!=null)for(var a of o){var i;(i=a.ext)==null||i.forEach(function(t){e.$6(n,t)&&(r=t.value)})}return r},n.getRegisteredRtpHeaderExtensions=function(){return this.$1},n.$6=function(t,n){return t.uri!==n.uri?!1:t.config==null?!0:t.config===n.config},t})();l.default=_}),98);
__d("ZenonSDPManager",["FBLogger","FrameEncryptionWasmTypes","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonE2ee","ZenonE2eeMandatedStateManager","ZenonInfraActionsLogger","ZenonODSLogger","ZenonSDPCodecRemoval","ZenonSDPRtpHeaderExtensionManager","asyncToGeneratorRuntime","getErrorSafe","gkx","pako","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s="http://www.webrtc.org/experiments/rtp-hdrext/playout-delay",u="urn:3gpp:video-orientation",c="set_local_sdp_error",d="set_remote_sdp_error",m="rollback_sdp_error",p=(function(){function t(e,t){this.$2=null,this.$3=null,this.$1=e,this.$4=t.getZenonSdpTransformConfig(),this.$5=new(r("ZenonSDPRtpHeaderExtensionManager"))(r("ZenonE2ee").isE2eeStackReady()||r("ZenonE2eeMandatedStateManager").isInfraE2eeMandated())}var a=t.prototype;return a.getLocalSdp=function(){return this.$2},a.getRemoteSdp=function(){return this.$3},a.getZenonSDPRtpHeaderExtensionManager=function(){return this.$5},a.shouldPreferH264Multiway=function(){return r("gkx")("25217")},a.shouldPreferAV1Multiway=function(){return r("gkx")("25218")},a.createLocalSdp=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var o=t==="offer"?yield this.$1.createOffer(babelHelpers.extends({},n,{preserveH264:this.$4.isPreserveH264()})):yield this.$1.createAnswer();this.shouldPreferH264Multiway()&&(this.$4.isPreferSwH264()?o.preferH264Codec({levelAsymmetryAllowed:!0,packetizationMode:!0,profileLevelId:"42e01f"}):o.preferCodec("video",{preferredCodec:"H264",preferredCodecRate:9e4})),o.removeH264CodecsWithPacketizationMode0(),this.$4.isPreserveH264()||o.removeCodec("H264"),o.removeH264CodecsWithProfileLevelId("42001f");var a=this.shouldPreferAV1Multiway();a&&o.preferCodec("video",{preferredCodec:"AV1",preferredCodecRate:9e4});var i=r("ZenonSDPCodecRemoval").video_codecs;a||o.removeCodec("AV1"),i.forEach(function(e){o.removeCodec(e)}),this.$6(o);var l=r("ZenonE2ee").generateDtlsAuthenticationInfo(o);return l!=null&&o.updateDtlsAuthenticationInfo(l),o.setVersion(e),this.$2=o,o});function t(t,n,r){return e.apply(this,arguments)}return t})(),a.setLocalSdp=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{this.$7(t,"local");var n=(e||(e=r("performanceNow")))();yield this.$1.setLocalDescription(t);var o=e()-n;r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"[ZP]["+t.getType()+"] Finished setting local sdp of type in: "+String(o)})}catch(e){r("ZenonODSLogger").logCounter(c);var a=r("getErrorSafe")(e);throw this.$8(a,"Failed to set local sdp","ZenonSDPManager_setLocalSdp"),a}this.$2=t});function o(e){return t.apply(this,arguments)}return o})(),a.rollbackSdp=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield this.$1.rollbackSdp(),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP] Successfully called rollback sdp"})}catch(t){r("ZenonODSLogger").logCounter(m);var e=r("getErrorSafe")(t);throw this.$8(e,"Failed to set rollback sdp","ZenonSDPManager_rollbackSDP"),e}});function t(){return e.apply(this,arguments)}return t})(),a.createAndSetLocalSdp=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield this.createLocalSdp(e,t,n);return yield this.setLocalSdp(r),r});function t(t,n,r){return e.apply(this,arguments)}return t})(),a.setRemoteSdp=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i){var l;if(t.isRemote()||r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"[ZP] Wrong SDP location",error:"Non-remote SDP passed to setRemoteSdp()",errorDomain:"ZenonSDPManager_setRemoteSdp"}),!this.$1.canAcceptRemoteSdp())return t;n({name:"beginRemoteSdpMunging"}),this.$6(t),this.shouldPreferAV1Multiway()||t.removeCodec("AV1"),n({name:"endRemoteSdpMunging"}),r("gkx")("25219")&&(r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP]["+t.getType()+"] Munge inactive media SSRC"}),t.mungeInactiveMediaSSRC(this.$1.getCurrentRemoteDescription())),r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"processing e2ee attributes while setting remote sdp, e2eeServerState is null? "+(i==null?"yes":"no")+", server state size is "+((l=i==null?void 0:i.byteLength)!=null?l:0)+" bytes"}),a!=null&&r("ZenonE2ee").updateRemoteUserId(a),i!=null&&(yield r("ZenonE2ee").processE2eeServerState(i)),yield r("ZenonE2ee").verifyDtlsAuthenticationInfo(t);try{this.$7(t,"remote");var s=(e||(e=r("performanceNow")))();yield this.$1.setRemoteDescription(t);var u=e()-s;r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP]["+t.getType()+"] Finished setting remote sdp in: "+String(u)})}catch(e){r("ZenonODSLogger").logCounter(d);var c=r("getErrorSafe")(e);throw this.$8(c,"Failed to set remote sdp","ZenonSDPManager_setRemoteSdp"),c}return r("ZenonE2ee").terminateCallIfE2eeViolation(o("FrameEncryptionWasmTypes").ZenonE2eeComponent.POST_REMOTE_SDP,""),this.$3=t,t});function a(e,n,r,o){return t.apply(this,arguments)}return a})(),a.$8=function(t,n,o){var e="[ZP] "+n;r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:e,error:t.toString(),errorDomain:o})},a.$7=function(t,n){try{var e=btoa(r("pako").deflate(t.toLoggingString(),{to:"string"}));r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__PLATFORM,checkpoint:"[ZP]["+t.getType()+"] Set "+n+" description sdp: "+e})}catch(e){var o=r("getErrorSafe")(e);r("FBLogger")("rtc_www").catching(o).warn("Failed to log the SDP"),r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"[ZP] Failed to log the SDP",error:o.toString(),errorDomain:"ZenonSDPManager_logSdp"})}},a.setRemoteIceCandidate=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{yield this.$1.setRemoteIceCandidate(e)}catch(n){var t=r("getErrorSafe")(n);throw r("FBLogger")("rtc_www").catching(t).warn("Failed to setRemoteIceCandidate with ",JSON.stringify(e)),r("ZenonInfraActionsLogger").logError({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__ERROR,checkpoint:"[ZP] Failed to set remote ice candidate",error:t.toString(),errorDomain:"ZenonSDPManager_setRemoteIceCandidate"}),t}});function t(t){return e.apply(this,arguments)}return t})(),a.closePeerConnection=function(){this.$1.close()},a.restartPeerConnection=function(){this.$5.resetRtpHeaderExtensionStatus(),this.$1.restart()},a.$6=function(t){t.stripLocalIceCandidates(),t.useDTLSOverCrypto(),t.stripDataChannel(),t.maybeAddPtimeForOpusOnly(60),t.addFmtpConfig("H264","sps-pps-idr-in-keyframe","1"),this.$4.isDisableOpusStereo()&&t.addFmtpConfig("opus","stereo","0"),t.addFmtpConfig("opus","useinbandfec",this.$4.isSetOpusUseinbandfec()?"1":"0"),t.addFmtpConfig("opus","usedtx",this.$4.isSetOpusUsedtx()?"1":"0");var e=this.$4.getSetOpusMaxaveragebitrate();e>0&&t.addFmtpConfig("opus","maxaveragebitrate",e.toString());var n=this.$4.getSetOpusMaxplaybackrate();n>0&&t.addFmtpConfig("opus","maxplaybackrate",n.toString()),t.addAudioNACK(),t.isRemote()?(this.$5.setExtensionsSupportedByRemote(t),o("ZenonBrowsers").isFirefox()&&t.addSetupActPass()):(t.filterExtension(s,"video"),t.filterExtension(u,"video"),this.$5.enableRegisteredExtensions(t))},t})();l.default=p}),98);
__d("ZenonSimulcastDataMessageParser",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=null,n=0;if(e.perSsrcTargetBitrateBpsMap!=null&&(t=s(e.perSsrcTargetBitrateBpsMap)),e.qualityMask!=null){var r=parseInt(e.qualityMask,10);isNaN(r)||(n=r)}return{perSsrcTargetBitrateBpsMap:t,qualityMask:n}}function s(e){var t=new Map;return Object.keys(e).forEach(function(n){var o=parseInt(e[n],10);if(isNaN(o)){r("FBLogger")("rtc_www").mustfix("Simulcast bitrate string could not be parsed as int");return}t.set(n,o)}),t}l.parseSimulcastControlMessage=e}),98);
__d("ZenonPeerConnectionManager",["DateConsts","FBLogger","ODS","Promise","ZenonAuditedCheckpointLogId","ZenonBrowsers","ZenonClientTslogUploader","ZenonIceConnectionMonitor","ZenonInfraActionsLogger","ZenonLogPromiseRejection","ZenonMediaActionLogger","ZenonMediaChannelManager","ZenonMediaError","ZenonMediaStatsUtil","ZenonPeerConnectionConfig","ZenonPeerConnectionStateMachine","ZenonPeerConnectionWrapper","ZenonSDPManager","ZenonSimulcastDataMessageParser","ZenonSimulcastManager","ZenonSimulcastUtils","emptyFunction","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=2*o("DateConsts").MS_PER_SEC,c=6,d=(function(){function t(e){var t=this,n;this.$5=null,this.$6=function(){},this.$7=new Set,this.$8=new Map,this.$9=new Map,this.$10=!1,this.$12=new Map,this.$13=!1,this.$16=0,this.$17=!1,this.$18=!1,this.$20=function(e){var n=e.target,a=n.iceConnectionState;t.$14.updateIceConnectionState(a),t.$14.logIceConnectionState(t.$6),t.$14.updateIceConnectionTimer(function(){return t.$1.processEvent({onError:r("emptyFunction"),onSuccess:r("emptyFunction"),payload:{error:o("ZenonMediaError").ZenonMediaError.IceDisconnected,stopLocalTracks:!0},type:"endCall"})}),t.$13&&t.$14.updateIceRestartTimer(t.$1,u),t.$1.processEvent({onError:r("emptyFunction"),onSuccess:r("emptyFunction"),payload:{iceConnectionState:a},type:"iceConnectionStateChange"})},this.$22=function(e){var n=e.target;if(n.signalingState==="closed"&&r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"Peer connection signaling state changed to closed"}),n.connectionState==="closed"){var a=!0,i=o("ZenonMediaError").ZenonMediaError.ConnectionClosed;r("ZenonInfraActionsLogger").logCheckpoint({auditId:r("ZenonAuditedCheckpointLogId").RP_ROOMS_INFRA_WWW__STATE_MACHINE,checkpoint:"Peer connection state changed to closed"}),t.$1.processEvent({onError:r("emptyFunction"),onSuccess:r("emptyFunction"),payload:{error:i,stopLocalTracks:a},type:"endCall"})}},this.$21=function(e){var n=e.candidate;n!=null&&t.$1.processEvent({onError:r("emptyFunction"),onSuccess:r("emptyFunction"),payload:n,type:"iceCandidateReady"})},this.$14=new(r("ZenonIceConnectionMonitor")),this.$10=(n=e.shouldUseSimulcast)!=null?n:!1,this.$11=o("ZenonBrowsers").isChrome(),e.loggingEventHandler&&(this.$6=e.loggingEventHandler),this.$5=null;var a=r("ZenonPeerConnectionConfig").getConfigZenonPlatform();this.$4=new(r("ZenonPeerConnectionWrapper"))(e.configManager,e.dataMessageTranslator,babelHelpers.extends({},a),this.$10),this.$6({name:"peerConnectionCreated"});var i=o("ZenonMediaStatsUtil").shouldUseTSLog();this.$2=new(r("ZenonMediaChannelManager"))({areTslogsEnabled:i,dataMessageTranslator:e.dataMessageTranslator,mediaStats:e.mediaStats,onFirstMediaPacket:function(n,r){return t.$6({name:"firstMediaPacketReceived",timestamp:r,type:n})},onFirstSentMediaPacket:function(n,r){return t.$6({name:"firstMediaPacketSent",timestamp:r,type:n})},onMediaStatUpdate:function(n){return t.$6({mediaStats:n,name:"setMediaStats"})},peerConnection:this.$4}),this.$3=new(r("ZenonSDPManager"))(this.$4,e.configManager),this.$1=new(r("ZenonPeerConnectionStateMachine"))(babelHelpers.extends({},this.$19(),{logEvent:function(n){return t.$6(n)},mediaChannelManager:this.$2,sdpManager:this.$3,tslogUploader:i?new(r("ZenonClientTslogUploader"))(function(e){return t.$6(e)},this.$2):null})),this.$4.addEventListener("iceconnectionstatechange",this.$20),this.$4.addEventListener("icecandidate",this.$21),this.$4.addEventListener("signalingstatechange",this.$22)}var a=t.prototype;return a.subscribeDataChannelOpen=function(t,n){var e,r=(e=this.$12.get(n))!=null?e:[];r.push(t),this.$12.set(n,r)},a.unsubscribeDataChannelOpen=function(t,n){var e,r=(e=this.$12.get(n))!=null?e:[],o=r.filter(function(e){return e!==t});this.$12.set(n,o)},a.onNetworkUpdate=function(t){this.$14.updateNetworkStatus(t.local),this.$13&&this.$14.updateIceRestartTimer(this.$1,u)},a.getLocalMediaStateVersion=function(){return this.$1.getLocalMediaStateVersion()},a.setLocalMediaStateVersion=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{version:t},type:"setLocalMediaStateVersion"})}))},a.addLocalTracks=function(t,o,a,i){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{callInitiator:i,callMedia:a,mediaMode:o,tracks:t},type:"addLocalTracks"})}))},a.removeLocalTrack=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{trackId:t},type:"removeLocalTrack"})}))},a.replaceLocalTrack=function(t,o,a){var e=this;return a===void 0&&(a=!1),r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:babelHelpers.extends({},a?{preserveOriginal:a}:{},{replacementTrack:o,trackIdToReplace:t}),type:"replaceLocalTrack"})}))},a.createDataChannel=function(t,o,a){var e=this;return this.$23(o),this.$15==null&&r("FBLogger")("rtweb").warn("Data channel instantion role not setup properly"),r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,i){var l;e.$7.add(t),a&&e.$8.set(t,a),e.$1.processEvent({onError:i,onSuccess:n,payload:{dataChannelLabel:t,dataChannelOptions:a,onDataChannelMessage:function(o){e.$1.processEvent({onError:r("emptyFunction"),onSuccess:r("emptyFunction"),payload:{dataChannelLabel:t,dataMessage:o},type:"dataChannelMessageReceived"}),e.$10&&t==="data"&&e.maybeHandleSimulcastDataMessage(o)},onDataChannelOpen:function(){var n=e.$12.get(t);n==null||n.forEach(function(e){e()}),e.$24(o),e.$16++},shouldEstablishDataChannel:(l=e.$15)!=null?l:!0},type:"createDataChannel"})}))},a.$23=function(t){this.$17||(this.$25("sctp_"+t.toString()+"_attempt"),this.$17=!0)},a.$24=function(t){this.$18||(this.$25("sctp_"+t.toString()+"_success"),this.$18=!0)},a.$25=function(n){(e||(e=o("ODS"))).bumpEntityKey(4083,"zenon_sctp",n)},a.onSimulcastSignalingDataMessage=function(t){this.$10&&this.$11&&this.maybeHandleSignalingSimulcastDataMessage(t)},a.createDataMessageSubscription=function(t,o){var e=this;return this.$9.has(t)?(s||(s=n("Promise"))).resolve():(this.$9.set(t,o),r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{dataChannelLabel:t,onSignalingDataMessage:o},type:"createDataMessageSubscription"})})))},a.removeDataMessageSubscription=function(t){var e=this;if(this.$9.has(t)){var o,a=(o=this.$9.get(t))!=null?o:function(){};return this.$9.delete(t),r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{dataChannelLabel:t,onSignalingDataMessage:a},type:"removeDataMessageSubscription"})}))}return(s||(s=n("Promise"))).resolve()},a.getDataChannelOpenCount=function(){return this.$16},a.getDataChannelLabels=function(){return this.$7},a.getDataChannelOptions=function(t){var e;return(e=this.$8.get(t))!=null?e:{}},a.getDataChannelState=function(t){return this.$4.getDataChannelState(t)},a.getDataMessageSubscriptions=function(){return this.$9},a.getSupportsSimulcastOverSignaling=function(){return this.$11},a.setShouldEstablishDataChannel=function(t){this.$15=t},a.setIceRestartEligible=function(t){this.$13=t&&o("ZenonBrowsers").supportsIceRestart(),this.$13||this.$14.clearIceRestartTimer()},a.getIceRestartEnabled=function(){return this.$13},a.localMediaStateUpdateRetry=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){var o=e.$1.getContext();o.retryCount<c&&(o.retryCount++,o.localMediaStateUpdateRetryTimerId=window.setTimeout(function(){e.$1.processEvent({onError:r,onSuccess:n,type:"localMediaStateUpdateRetry"})},t))}))},a.clearRetryCount=function(){var e=this.$1.getContext();e.retryCount=0},a.cancelPendingNegotiation=function(){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(t,n){e.$1.processEvent({onError:n,onSuccess:t,type:"remoteSdpFailed"})}))},a.muteRemoteTrack=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{trackId:t},type:"muteRemoteTrack"})}))},a.unmuteRemoteTrack=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{trackId:t},type:"unmuteRemoteTrack"})}))},a.muteLocalTrack=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{trackId:t},type:"muteLocalTrack"})}))},a.unmuteLocalTrack=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{trackId:t},type:"unmuteLocalTrack"})}))},a.stopLocalTrack=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{trackId:t},type:"stopLocalTrack"})}))},a.applyLocalSdp=function(){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(t,n){e.$1.processEvent({onError:n,onSuccess:t,type:"applyLocalSdp"})}))},a.applyMediaUpdate=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{mediaStates:t},type:"applyMediaUpdate"})}))},a.applyRemoteSdp=function(t,o,a,i,l,u,c,d){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{e2eeServerState:d,mediaStates:o,messageID:c,onProcessed:u,renegotiationOffer:i,sdp:t,sdpOriginLocalId:l,source:a},type:"applyRemoteSdp"})}))},a.applyRemoteIceCandidate=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:t,type:"applyRemoteIceCandidate"})}))},a.forceEncodingEnabled=function(t){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$1.processEvent({onError:r,onSuccess:n,payload:{enabled:t},type:"forceEncodingEnabled"})}))},a.end=function(t,o){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$14.clearIceRestartTimer(),e.$1.processEvent({onError:r,onSuccess:n,payload:{restart:o,stopLocalTracks:t},type:"endCall"})}))},a.restart=function(){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(t,n){r("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Beginning the restart process on peer connection"}),r("promiseDone")(e.end(!1,!0)),e.$2.clearTracks(),e.$17=!1,e.$18=!1,e.$1.processEvent({onError:n,onSuccess:t,type:"restartPeerConnection"})}))},a.getTracks=function(){return this.$2.getTracks()},a.getLocalTracksForMWS=function(){return this.$2.getLocalTracksForMWS()},a.getRtpSenders=function(){return this.$4.getSenders()},a.getRtpReceivers=function(){return this.$4.getReceivers()},a.setPeerConnectionEventHandlers=function(t){this.$5=t},a.swapPeerConnectionEventHandlers=function(t){var e=this.$5;this.$5=t.$5,t.$5=e},a.setNetworkStatusListener=function(t){this.$2.setNetworkStatusListener(t)},a.registerTrackListener=function(t){this.$2.registerTrackListener(t)},a.setTrackListenersFromManager=function(t){this.$2.setTrackListenersFromManager(t.$2)},a.setLoggingEventHandler=function(t){this.$6=t},a.sendDataMessage=function(t,o){var e=this;return r("ZenonLogPromiseRejection")(new(s||(s=n("Promise")))(function(n,r){e.$4.sendDataMessage(t,o),n()}))},a.$19=function(){return{onConnectionDestroyed:this.$26("onConnectionDestroyed"),onConnectionDropped:this.$26("onConnectionDropped"),onConnectionEstablished:this.$26("onConnectionEstablished"),onCreateDataMessageSubscription:this.$26("onCreateDataMessageSubscription"),onDataChannelMessageReceived:this.$26("onDataChannelMessageReceived"),onIceCandidateReady:this.$26("onIceCandidateReady"),onLocalMediaStateUpdate:this.$26("onLocalMediaStateUpdate"),onLocalSdpSet:this.$26("onLocalSdpSet"),onRemoteSdpSet:this.$26("onRemoteSdpSet"),onRemoveDataMessageSubscription:this.$26("onRemoveDataMessageSubscription")}},a.$26=function(t){var e=this;return function(){if(e.$5&&e.$5[t]){var r;return(r=e.$5)[t].apply(r,arguments)}return(s||(s=n("Promise"))).resolve()}},a.maybeHandleSimulcastDataMessage=function(t){try{var e=JSON.parse(t.message),n=e.body,a=n.videoUploadRequest,i=a.perSsrcTargetBitrateBpsMap,l=a.qualityMask;if(a!=null&&l!=null&&l!==0&&i!=null){var s=o("ZenonSimulcastDataMessageParser").parseSimulcastControlMessage({perSsrcTargetBitrateBpsMap:i,qualityMask:l});this.handleSimulcastUploadRequest(s)}}catch(e){var u=r("getErrorSafe")(e);r("FBLogger")("rtc_www").warn("MaybeHandleSimulcastDataMessage failed:",u.message)}},a.maybeHandleSignalingSimulcastDataMessage=function(t){try{var e=JSON.parse(t.message);if(e.qualityMask!=null&&e.qualityMask!==0&&e.perSsrcTargetBitrateBpsMap!=null){var n={perSsrcTargetBitrateBpsMap:e.perSsrcTargetBitrateBpsMap,qualityMask:e.qualityMask},a=o("ZenonSimulcastDataMessageParser").parseSimulcastControlMessage(n);this.handleSimulcastUploadRequest(a)}}catch(e){var i=r("getErrorSafe")(e);r("FBLogger")("rtc_www").warn("MaybeHandleSignalingSimulcastDataMessage failed:",i.message)}},a.handleSimulcastUploadRequest=function(t){var e,n,a,i,l,s,u;if(!o("ZenonSimulcastUtils").isCurrentBrowserCompatibleWithSimulcast()||!this.$4.supportsSimulcast()||typeof((e=RTCRtpSender)==null?void 0:e.prototype.getParameters)!="function"){r("ZenonMediaActionLogger").logCheckpoint("ZenonPeerConnectionManager: handleSimulcastUploadRequest: Simulcast not supported!");return}var c=this.$4.getSenders().filter(function(e){return e.track&&e.track.kind==="video"});if(c.length===0){r("ZenonMediaActionLogger").logCheckpoint("ZenonPeerConnectionManager: handleSimulcastUploadRequest: No Senders!");return}var d=c[0];if(!(!("getParameters"in d)||!("setParameters"in d))){var m=this.$4.getTransceiverFromSender(d);if(!m){r("ZenonMediaActionLogger").logCheckpoint("ZenonPeerConnectionManager: handleSimulcastUploadRequest: Transceiver is null!");return}if(!m.stopped){var p=!1,_=this.$2.getTracks();if((n=d.track)!=null&&n.id){var f,g=_.get((f=d.track)==null?void 0:f.id);p=g&&g.contentType==="screen"}var h=this.getTotalVideoParticipants(),y=o("ZenonSimulcastManager").getSimulcastEncodingParameters(d.getParameters(),t,h,o("ZenonSimulcastManager").getSimulcastSsrcToLayerMap(((a=this.$3.getLocalSdp())==null?void 0:a.toDesc().sdp)||""),p,o("ZenonSimulcastUtils").getMaxNumLayers(),{height:(i=(l=d.track)==null?void 0:l.getSettings().height)!=null?i:720,width:(s=(u=d.track)==null?void 0:u.getSettings().width)!=null?s:1280},o("ZenonSimulcastManager").ALLOW_SCREENSHARE_SIMULCAST,o("ZenonSimulcastManager").MIN_NUM_ACTIVE_LAYERS),C=y.params;r("promiseDone")(d.setParameters(C))}}},a.getTotalVideoParticipants=function(){var e=this.$4.getTransceivers(),t=this.$4.getReceivers(),n=0;if(e!=null&&e.length>0){var r=e.filter(function(e){var t,n;return((t=e.receiver.track)==null?void 0:t.kind)==="video"&&e.currentDirection!=="inactive"&&((n=e.receiver.track)==null?void 0:n.readyState)==="live"});n=r.length}else{var o=t.filter(function(e){var t;return((t=e.track)==null?void 0:t.kind)==="video"});n=o.length+1}return n},a.renegotiateNullSenderTransport=function(){for(var e of this.getRtpSenders())if(e.transport==null){r("promiseDone")(this.applyLocalSdp());break}},t})();l.default=d}),98);
__d("ZenonSdkMethod",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ADD_LOCAL_TRACK","REGISTER_SERVICE_NODE_ID","REMOVE_LOCAL_TRACK","REPLACE_LOCAL_TRACK","MUTE_TRACK","UNMUTE_TRACK","STOP_LOCAL_TRACK","CREATE_DATA_MESSAGE_SUBSCRIPTION","REMOVE_DATA_MESSAGE_SUBSCRIPTION","SEND_GENERIC_DATA_MESSAGE","SUBSCRIBE_TO_REMOTE_VIDEO","JOIN","UNSUBSCRIBE_FROM_STATESYNC_TOPIC","SUBSCRIBE_TO_STATESYNC_TOPIC","UPDATE_STATESYNC_TOPIC","APPROVE_PARTICIPANTS","DENY_PARTICIPANTS","END_CALL","RING_PARTICIPANTS","REMOVE_PARTICIPANTS","FORCE_ENCODING_ENABLED"]);i.ZenonSdkMethod=e}),66);
__d("ZenonCallInstanceSDK",["QuickPerformanceLogger","Random","ZenonLoggingUtils","ZenonSdkMethod","ZenonTransportType","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e,t){this.$2=e,this.$1=t}var n=t.prototype;return n.ringParticipants=function(t,n){return this.$3(this.$1.ringParticipants(this.$2,t,n),o("ZenonSdkMethod").ZenonSdkMethod.RING_PARTICIPANTS)},n.removeParticipants=function(t){return this.$3(this.$1.removeParticipants(this.$2,t),o("ZenonSdkMethod").ZenonSdkMethod.REMOVE_PARTICIPANTS)},n.forceEncodingEnabled=function(t){return this.$3(this.$1.forceEncodingEnabled(this.$2,t),o("ZenonSdkMethod").ZenonSdkMethod.FORCE_ENCODING_ENABLED)},n.addLocalTrack=function(t){return this.$3(this.$1.addLocalTrack(this.$2,t),o("ZenonSdkMethod").ZenonSdkMethod.ADD_LOCAL_TRACK,{string:{trackType:t.contentType}})},n.stopLocalTrack=function(t){return this.$3(this.$1.stopLocalTrack(this.$2,t),o("ZenonSdkMethod").ZenonSdkMethod.STOP_LOCAL_TRACK)},n.muteTrack=function(t,n){return n===void 0&&(n=!1),this.$3(this.$1.muteTrack(this.$2,t,n),o("ZenonSdkMethod").ZenonSdkMethod.MUTE_TRACK)},n.unmuteTrack=function(t,n){return n===void 0&&(n=!1),this.$3(this.$1.unmuteTrack(this.$2,t,n),o("ZenonSdkMethod").ZenonSdkMethod.UNMUTE_TRACK)},n.subscribeToRemoteVideo=function(t,n){return this.$3(this.$1.subscribeToRemoteVideo(this.$2,t,n),o("ZenonSdkMethod").ZenonSdkMethod.SUBSCRIBE_TO_REMOTE_VIDEO)},n.getLogIdentifiers=function(){return this.$1.getLogIdentifiers(this.$2)},n.unsubscribeFromStateSyncTopic=function(t){return this.$3(this.$1.unsubscribeFromStateSyncTopic(this.$2,t),o("ZenonSdkMethod").ZenonSdkMethod.UNSUBSCRIBE_FROM_STATESYNC_TOPIC)},n.subscribeToStateSyncTopic=function(t){return this.$3(this.$1.updateStateSyncTopic(this.$2,t,null),o("ZenonSdkMethod").ZenonSdkMethod.SUBSCRIBE_TO_STATESYNC_TOPIC)},n.replaceLocalTrack=function(t,n,r){return r===void 0&&(r=!1),this.$3(this.$1.replaceLocalTrack(this.$2,t,n,r),o("ZenonSdkMethod").ZenonSdkMethod.REPLACE_LOCAL_TRACK,{string:{trackType:n.contentType}})},n.removeLocalTrack=function(t){return this.$3(this.$1.removeLocalTrack(this.$2,t),o("ZenonSdkMethod").ZenonSdkMethod.REMOVE_LOCAL_TRACK)},n.createDataMessageSubscription=function(t,n,r,a){return this.$3(this.$1.createDataMessageSubscription(this.$2,t,n,r,a),o("ZenonSdkMethod").ZenonSdkMethod.CREATE_DATA_MESSAGE_SUBSCRIPTION)},n.removeDataMessageSubscription=function(t,n){return this.$3(this.$1.removeDataMessageSubscription(this.$2,t,n),o("ZenonSdkMethod").ZenonSdkMethod.REMOVE_DATA_MESSAGE_SUBSCRIPTION)},n.sendGenericDataMessage=function(t,n,r,a){return a===void 0&&(a=o("ZenonTransportType").ZenonTransportType.SIGNALING),this.$3(this.$1.sendGenericDataMessage(this.$2,t,n,r,a),o("ZenonSdkMethod").ZenonSdkMethod.SEND_GENERIC_DATA_MESSAGE)},n.registerDataMessageService=function(t,n){return this.$3(this.$1.registerDataMessageService(this.$2,t,n),o("ZenonSdkMethod").ZenonSdkMethod.REGISTER_SERVICE_NODE_ID)},n.submitRating=function(t,n,r,o,a){this.$1.submitRating(this.$2,t,n,r,o,a)},n.getConferenceName=function(){return this.$1.getConferenceName(this.$2)},n.getMediaMode=function(){return this.$1.getMediaMode(this.$2)},n.getSCTPDataChannelState=function(t){return this.$1.getSCTPDataChannelState(this.$2,t)},n.updateStateSyncTopic=function(t,n){return this.$3(this.$1.updateStateSyncTopic(this.$2,t,n),o("ZenonSdkMethod").ZenonSdkMethod.UPDATE_STATESYNC_TOPIC)},n.approveParticipants=function(t){return this.$3(this.$1.approveParticipants(this.$2,t),o("ZenonSdkMethod").ZenonSdkMethod.APPROVE_PARTICIPANTS)},n.denyParticipants=function(t){return this.$3(this.$1.denyParticipants(this.$2,t),o("ZenonSdkMethod").ZenonSdkMethod.DENY_PARTICIPANTS)},n.getSignalingProtocol=function(){return this.$1.getSignalingProtocol(this.$2)},n.getEncryptionKeysManagerState=function(){return this.$1.getEncryptionKeysManagerState(this.$2)},n.endCall=function(t,n){return this.$3(this.$1.endCall(this.$2,t,n),o("ZenonSdkMethod").ZenonSdkMethod.END_CALL)},n.join=function(t){var e=this;return this.$3(this.$1.join(babelHelpers.extends({clientCallID:this.$2},t)),o("ZenonSdkMethod").ZenonSdkMethod.JOIN).then(function(){return e})},n.initLogging=function(t){this.$1.initializeLogging(this.$2,t)},n.getClientCallID_DEPRECATED=function(){return this.$2},n.$3=function(n,a,i){i===void 0&&(i={});var t=r("qpl")._(398989351,"1493"),l=r("Random").uint32(),s=o("ZenonLoggingUtils").shouldAllowLogging();return s&&(i.string?i.string.method=a:i.string={method:a},(e||(e=r("QuickPerformanceLogger"))).markerStart(t,l),e.markerAnnotate(t,i,{instanceKey:l})),n.then(function(){s&&(e||(e=r("QuickPerformanceLogger"))).markerEnd(t,2,l)}).catch(function(){s&&(e||(e=r("QuickPerformanceLogger"))).markerEnd(t,87,l)})},t})();l.default=s}),98);
__d("ZenonOverlayConfigManager",["ChromeOverlayConfigLayer","EdgeOverlayConfigLayer","FirefoxOverlayConfigLayer","JSResourceForInteraction","OperaOverlayConfigLayer","OverlayConfigManager","Promise","UserAgentData","ZenonDGWUtils","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("JSResourceForInteraction")("RTWebSignalingListener").__setRef("ZenonOverlayConfigManager"),u=r("JSResourceForInteraction")("DGWSignalingListener").__setRef("ZenonOverlayConfigManager"),c=r("JSResourceForInteraction")("SharedWorkerSignalingListener").__setRef("ZenonOverlayConfigManager"),d=(function(){function t(t){this.$1=t,this.$2=new(r("OverlayConfigManager"));var o={Chrome:r("ChromeOverlayConfigLayer"),"Edge (Chromium Based)":r("EdgeOverlayConfigLayer"),"Edge PWA (Chromium Based)":r("EdgeOverlayConfigLayer"),Firefox:r("FirefoxOverlayConfigLayer"),Opera:r("OperaOverlayConfigLayer")},a=o[r("UserAgentData").browserName];a&&this.$2.layerManager.addLayer(a),t.appConfig&&this.$2.layerManager.addLayer(t.appConfig),t.signalingListener&&(this.$3=(e||(e=n("Promise"))).resolve(t.signalingListener))}var a=t.prototype;return a.getRelayEnvironment=function(){return this.$1.relayEnvironment},a.getSignalingListener=function(){return this.$3?this.$3:(o("ZenonDGWUtils").shouldUseDGW()?r("qex")._("4380")?this.$3=c.load().then(function(e){return new e}):this.$3=u.load().then(function(e){return new e}):this.$3=s.load().then(function(e){return new e}),this.$3)},a.getConfigManager=function(){return this.$2},t})();l.default=d}),98);
__d("ZenonSignalingIDType",["randomInt"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(){return r("randomInt")(0,4294967294)+1}l.convertNumberToZenonSignalingID=e,l.generateZenonSignalingID=s}),98);
__d("ZenonCallSDK",["EventEmitter","ZenonCallInstanceSDK","ZenonCallsManager","ZenonCallsModelEmitter","ZenonOverlayConfigManager","ZenonSignalingIDType","ZenonTransportEventEmitter","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;n=e.call(this)||this;var a=new(r("ZenonOverlayConfigManager"))(t);return n.$ZenonCallSDK$p_1=new(r("ZenonCallsManager"))(a),o("ZenonCallsModelEmitter").CallsModelEmitterInstance.addListener("callsModelUpdate",function(e){n.emit("callsModelUpdate",e)}),r("ZenonTransportEventEmitter").addListener("transportPlatformEvent",function(e){n.emit("signalingEvent",e)}),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.initSignaling=function(t,n,o,a){r("promiseDone")(this.$ZenonCallSDK$p_1.initializeSignaling(t,n,o,a))},n.createCall=function(){var e=String(o("ZenonSignalingIDType").generateZenonSignalingID());return new(r("ZenonCallInstanceSDK"))(e,this.$ZenonCallSDK$p_1)},n.getCallInstance=function(t){return new(r("ZenonCallInstanceSDK"))(t,this.$ZenonCallSDK$p_1)},n.getCurrentCallsModel=function(){return o("ZenonCallsModelEmitter").CallsModelEmitterInstance.getCallsModel()},n.updateRenderedResolutionMap=function(t){this.$ZenonCallSDK$p_1.updateRenderedResolutionMap(t)},t})(r("EventEmitter"));l.default=e}),98);
__d("ZenonVideoProcessingConstants",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["Active","Inactive","Paused","Error"]);i.ZenonVideoProcessingState=e}),66);
__d("ZenonVideoProcessingContext",["ZenonVideoProcessingConstants","err","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({inputVideoHeightRef:{current:720},inputVideoRef:{current:null},inputVideoWidthRef:{current:1280},isVideoProcessingSupported:!1,originalVideoTrack:null,outputCanvasRef:{current:null},pause:function(t){throw r("err")("pause is not implemented!")},processedStream:null,setVideoProcessingURIs:function(t){throw r("err")("setVideoProcessingURIs is not implemented!")},start:function(t){throw r("err")("start is not implemented!")},stop:function(t){throw r("err")("stop is not implemented!")},videoProcessingState:o("ZenonVideoProcessingConstants").ZenonVideoProcessingState.Inactive}),c=u;l.default=c}),98);
__d("ZenonVideoProcessingTypeAtom",["Decoil"],(function(t,n,r,o,a,i,l){"use strict";var e=o("Decoil").atom({default:"background_blur",key:"ZenonVideoProcessingType"}),s=o("Decoil").atom({default:null,key:"ZenonVideoProcessingBackgroundImage"});l.ZenonVideoProcessingTypeAtom=e,l.ZenonVideoProcessingBackgroundImageAtom=s}),98);
__d("ZenonBackgroundBlurHooks",["fbt","Decoil","FBLogger","ODS","RPWebUXLogger","ZenonCallsContext","ZenonCallsHooks","ZenonLoggingHooks","ZenonVideoProcessingConstants","ZenonVideoProcessingContext","ZenonVideoProcessingTypeAtom","asyncToGeneratorRuntime","getErrorSafe","promiseDone","react","useDebouncedComet"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=c.useCallback,m=c.useContext,p=c.useEffect,_=c.useState,f=200;function g(){var e=b(),t=o("ZenonLoggingHooks").useCheckpointLogging(),n=D(),a=T(),i=r("ZenonCallsHooks").useLocalVideo(),l=r("RPWebUXLogger").useClickEventLogger();return d(function(){e?((u||(u=o("ODS"))).bumpEntityKey(4272,"zenon_product","background_blur_disabled"),l==null||l({component:"toggle_background_blur_button",eventName:"disable_background_blur"}),a(),t("Background blur was disabled")):((u||(u=o("ODS"))).bumpEntityKey(4272,"zenon_product","background_blur_enabled"),l==null||l({component:"toggle_background_blur_button",eventName:"enable_background_blur"}),r("promiseDone")(n(i)),t("Background blur was enabled"))},[e,l,n,i,t,a])}function h(e){e===void 0&&(e="background_blur");var t=o("Decoil").useDecoilState(o("ZenonVideoProcessingTypeAtom").ZenonVideoProcessingTypeAtom),n=t[0],a=t[1],i=b(),l=_(!1),s=l[0],u=l[1],c=g(),m=d(function(){i?e!==n?a(e):c():(u(!0),a(e),c())},[i,n,e,a,c]);p(function(){s&&i&&u(!1)},[i,s]);var h=r("useDebouncedComet")(m,{wait:f}),y=d(function(){h()},[h]);return{isLoading:s,toggleVideoProcessing:y}}function y(){var e=m(r("ZenonVideoProcessingContext")),t=e.videoProcessingState,n=o("Decoil").useDecoilValue(o("ZenonVideoProcessingTypeAtom").ZenonVideoProcessingTypeAtom);return t===o("ZenonVideoProcessingConstants").ZenonVideoProcessingState.Active&&n==="background_blur"}function C(){var e=m(r("ZenonVideoProcessingContext")),t=e.videoProcessingState,n=o("Decoil").useDecoilValue(o("ZenonVideoProcessingTypeAtom").ZenonVideoProcessingTypeAtom);return t===o("ZenonVideoProcessingConstants").ZenonVideoProcessingState.Active&&n==="replace_background"}function b(){var e=m(r("ZenonVideoProcessingContext")),t=e.videoProcessingState;return t===o("ZenonVideoProcessingConstants").ZenonVideoProcessingState.Active}function v(){var e=m(r("ZenonVideoProcessingContext")),t=e.videoProcessingState;return t===o("ZenonVideoProcessingConstants").ZenonVideoProcessingState.Paused}function S(){var e=m(r("ZenonVideoProcessingContext")),t=e.isVideoProcessingSupported,n=r("ZenonCallsHooks").useLocalVideo();return(n==null?void 0:n.enabled)===!0&&t}function R(){var e=m(r("ZenonVideoProcessingContext")),t=e.start;return t}function L(){var e=m(r("ZenonVideoProcessingContext")),t=e.pause;return d(function(e){t(e)},[t])}function E(){var e=m(r("ZenonVideoProcessingContext")),t=e.stop;return d(function(e){t(e)},[t])}function k(){var e=m(r("ZenonVideoProcessingContext")),t=e.processedStream;return t}function I(){var e=m(r("ZenonVideoProcessingContext")),t=e.originalVideoTrack;return t}function T(){var e=b(),t=m(r("ZenonVideoProcessingContext")),n=t.originalVideoTrack,o=t.stop,a=m(r("ZenonCallsContext")),i=a.currentCallInstanceSDK,l=r("ZenonCallsHooks").useLocalVideo();return d(function(){e&&l!=null&&l.enabled&&o(function(){n!=null&&r("promiseDone")(i.replaceLocalTrack(l.trackId,n,!0),function(){l.webrtcTrack.stop()})})},[i,e,l==null?void 0:l.enabled,l==null?void 0:l.trackId,l==null?void 0:l.webrtcTrack,n,o])}function D(){var e=m(r("ZenonCallsContext")),t=e.currentCallInstanceSDK,o=m(r("ZenonVideoProcessingContext")),a=o.start;return d((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{var n=yield a({trackToReplace:e});n!=null&&e!=null&&r("promiseDone")(t.replaceLocalTrack(e.trackId,n,!0))}catch(e){r("FBLogger")("rtc_www").catching(r("getErrorSafe")(e)).warn("Failed to start video processing")}});return function(t){return e.apply(this,arguments)}})(),[a,t])}function x(e){var t=y(),n=m(r("ZenonVideoProcessingContext")),o=n.isVideoProcessingSupported;if(!o)return s._(/*BTDS*/"Desfoque de plano de fundo indispon\u00edvel, use o navegador Chrome ou Edge");if(e)return s._(/*BTDS*/"Desfoque de plano de fundo indispon\u00edvel, seu v\u00eddeo est\u00e1 desativado");var a=t?s._(/*BTDS*/"Desativar desfoque de plano de fundo"):s._(/*BTDS*/"Ativar desfoque de plano de fundo");return a}l.useToggleVideoProcessingAndReplaceTrack=g,l.useDebouncedToggleVideoProcessing=h,l.useIsBackgroundBlurActive=y,l.useIsVirtualBackgroundActive=C,l.useIsVideoProcessingActive=b,l.useIsVideoProcessingPaused=v,l.useCanToggle=S,l.useStartVideoProcessing=R,l.usePauseVideoProcessing=L,l.useStopVideoProcessing=E,l.useBlurredStream=k,l.useOriginalVideoTrack=I,l.useBackgroundBlurButtonTooltip=x}),226);
__d("ZenonAppFeaturesUtils",["UserAgent"],(function(t,n,r,o,a,i,l){"use strict";function e(){return!r("UserAgent").isBrowser("Firefox")}function s(){var e;return typeof((e=window.MediaStreamTrack)==null||(e=e.prototype)==null?void 0:e.getSettings)=="function"}l.shouldStopMediaTrackWhenMute=e,l.supportsGetSettings=s}),98);
__d("ZenonGenAICallsContext",["err","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={calls:new Map,callSDK:void 0,currentCallInstance:void 0,isE2EConnected:!1,setCallSDK:function(){throw r("err")("setCallSDK is not implemented!")},setCurrentCallInstance:function(){throw r("err")("setCurrentCallInstance is not implemented!")},setIsE2EConnected:function(){},setUserMediaTracks:function(){throw r("err")("setUserMediaTracks is not implemented!")},userMediaTracks:[]},c=s.createContext(u),d=c;l.default=d}),98);
__d("ZenonLocalAudioVideoTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e={MUTE_DETECTION_AUDIO:"muteDetectionAudio",PREVIEW_AUDIO:"previewAudio",PRIMARY_AUDIO:"audio"},l={PREVIEW_VIDEO:"previewVideo",PRIMARY_VIDEO:"video"},s={SCREEN:"screen",SCREEN_AUDIO:"screenAudio"},u=babelHelpers.extends({},e,l,s),c=n("$InternalEnum").Mirrored(["None","RelaxConstraints"]),d=n("$InternalEnum").Mirrored(["Strong","Weak"]);i.AudioTrackTypeMap=e,i.VideoTrackTypeMap=l,i.ScreenTrackTypeMap=s,i.TrackType=u,i.ZenonLocalMediaFallbackStrategy=c,i.ZenonLocalMediaOwnershipType=d}),66);
__d("ZenonVideoConstraintUtils",["RTCZenonExperimentPhonesNeedAlignment","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e=f(1920,1080,30),s={aspectRatio:1920/1080,frameRate:30,height:1080,width:1920},u={aspectRatio:1280/720,frameRate:30,height:720,width:1280},c=f(u.width,u.height,u.frameRate),d=f(1280,720,15),m=f(640,360,15);function p(){var e=r("RTCZenonExperimentPhonesNeedAlignment").phoneNeedsAlignment;return e?64:0}function _(e,t){if(t>0&&e>0){var n=Math.max(1,e/t);return t*Math.round(n)}return e}function f(e,t,n){if(e==null||t==null||n==null)return null;var r=p(),o=_(e,r),a=_(t,r),i=o/a;return{aspectRatio:{ideal:i},frameRate:{ideal:n},height:{ideal:a},width:{ideal:o}}}function g(){return m}function h(){return b()}function y(){var e;return(e=b())!=null?e:m}function C(){return m}function b(){return r("qex")._("1577")?e:r("gkx")("25156")?c:null}l.CONSTRAINT_1080P=e,l.CONSTRAINT_1080P_30FPS_CONFIG=s,l.CONSTRAINT_720P_30FPS_CONFIG=u,l.CONSTRAINT_720P_30FPS=c,l.CONSTRAINT_720P=d,l.CONSTRAINT_360P=m,l.alignTo=_,l.createConstraints=f,l.getP2PVideoConstraints=g,l.getMWVideoConstraints=h,l.getMWVideoConstraintsRooms=y,l.getMWebVideoConstraints=C}),98);
__d("ZenonWebRTCWrapper",["invariant","asyncToGeneratorRuntime","cr:1284813","performanceNow"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var o=navigator,a=o.mediaDevices;a!=null||s(0,14422);var i=(e||(e=r("performanceNow")))(),l=yield a.getUserMedia(t);return n("cr:1284813")&&n("cr:1284813").measureModern("getUserMedia",{end:(e||(e=r("performanceNow")))(),start:i}),l}),c.apply(this,arguments)}l.getUserMedia=u}),98);
__d("ZenonLocalAudioVideoManager",["CancelablePromise","EventEmitter","Log","ODS","ZenonActorHooks","ZenonAppFeaturesUtils","ZenonLocalAudioVideoManagerUtils","ZenonLocalAudioVideoTypes","ZenonLocalMediaSDK","ZenonMediaActionLogger","ZenonMediaDevicesUtils","ZenonODSLogger","ZenonVideoConstraintUtils","ZenonWebRTCWrapper","asyncToGeneratorRuntime","err","promiseDone","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=["requestAudio"],s=["requestVideo"],u=["facingMode"],c,d=1,m="zenon_local_audio_video_manager",p="ZenonLocalAudioVideoManager",_=(function(t){function a(){var e;return e=t.call(this)||this,e.$ZenonLocalAudioVideoManager$p_5={audioConstraints:Object.freeze({}),videoConstraints:Object.freeze({})},e.$ZenonLocalAudioVideoManager$p_1={},e.$ZenonLocalAudioVideoManager$p_2={},e.$ZenonLocalAudioVideoManager$p_3={audio:null,muteDetectionAudio:null,previewAudio:null,previewVideo:null,screen:null,screenAudio:null,video:null},e.$ZenonLocalAudioVideoManager$p_4={audio:null,muteDetectionAudio:null,previewAudio:null,previewVideo:null,screen:null,screenAudio:null,video:null},e.$ZenonLocalAudioVideoManager$p_6={audio:0,previewAudio:0,previewVideo:0,video:0},e}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.retain=function(t){var e=o("ZenonLocalAudioVideoTypes").TrackType[t];this.$ZenonLocalAudioVideoManager$p_6[e]++},i.release=function(t){var e=o("ZenonLocalAudioVideoTypes").TrackType[t];this.$ZenonLocalAudioVideoManager$p_6[e]--,this.$ZenonLocalAudioVideoManager$p_6[e]<0&&(this.$ZenonLocalAudioVideoManager$p_7("Attempted to decrement retain count on ${type} more than it was retained. This indicates a bug in our codebase."),this.$ZenonLocalAudioVideoManager$p_6[e]=0),this.$ZenonLocalAudioVideoManager$p_6[e]===0&&this.$ZenonLocalAudioVideoManager$p_8(t)},i.setLocalAudioAndVideo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=babelHelpers.extends({},e,{requestAudio:!0}),i=babelHelpers.extends({},t,{requestVideo:!0}),l;switch(n){case o("ZenonLocalAudioVideoTypes").ZenonLocalMediaFallbackStrategy.None:o("ZenonLocalAudioVideoManagerUtils").validateVideoConstraints(t),l=yield this.$ZenonLocalAudioVideoManager$p_9(a,i);break;case o("ZenonLocalAudioVideoTypes").ZenonLocalMediaFallbackStrategy.RelaxConstraints:l=yield this.$ZenonLocalAudioVideoManager$p_10(a,i);break}return this.$ZenonLocalAudioVideoManager$p_11(r,l!=null?l:[],e,t)});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),i.setLocalAudio=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=o("ZenonLocalAudioVideoTypes").TrackType[e];try{var l=this.$ZenonLocalAudioVideoManager$p_12(n!=null?n:{},{}),s=l.audioConstraints,u=yield this.$ZenonLocalAudioVideoManager$p_13(i,t,s);if(u==null)return u;if(a!=null)try{u=yield a(u)}catch(e){throw this.$ZenonLocalAudioVideoManager$p_14("Post-processing error while setting local audio track",e.toString(),r("err")("postProcessTrackFunction")),r("err")(e)}if(this.$ZenonLocalAudioVideoManager$p_6[i]===0)return this.$ZenonLocalAudioVideoManager$p_15(u);if(this.$ZenonLocalAudioVideoManager$p_16(i,u),this.$ZenonLocalAudioVideoManager$p_1=n!=null?n:{},i==="audio"){var c={constraints:s,contentType:"audio",track:u};this.emit("trackUpdate",c)}return u}catch(e){throw e}finally{this.$ZenonLocalAudioVideoManager$p_4[i]=null}});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),i.createtNonReferenceCountedVideoTrack=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=this.$ZenonLocalAudioVideoManager$p_12({},t!=null?t:{}),i=a.audioConstraints,l=a.videoConstraints,s;switch(e){case o("ZenonLocalAudioVideoTypes").ZenonLocalMediaFallbackStrategy.None:o("ZenonLocalAudioVideoManagerUtils").validateVideoConstraints(l),s=yield this.$ZenonLocalAudioVideoManager$p_9(babelHelpers.extends({},i,{requestAudio:!1}),babelHelpers.extends({},l,{requestVideo:!0}));break;case o("ZenonLocalAudioVideoTypes").ZenonLocalMediaFallbackStrategy.RelaxConstraints:s=yield this.$ZenonLocalAudioVideoManager$p_10(babelHelpers.extends({},i,{requestAudio:!1}),babelHelpers.extends({},l,{requestVideo:!0}));break}var u=s!=null?s:[],c=u[0];if(n!=null)try{c=yield n(c)}catch(e){throw this.$ZenonLocalAudioVideoManager$p_14("Post-processing error while setting local video track",e.toString(),r("err")("postProcessTrackFunction")),r("err")(e)}return this.$ZenonLocalAudioVideoManager$p_2=t!=null?t:{},c});function t(t,n,r){return e.apply(this,arguments)}return t})(),i.setLocalVideo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=o("ZenonLocalAudioVideoTypes").TrackType[e];try{var l=this.$ZenonLocalAudioVideoManager$p_12({},n!=null?n:{}),s=l.videoConstraints,u=yield this.$ZenonLocalAudioVideoManager$p_17(i,t,s);if(u==null)return u;if(a!=null)try{u=yield a(u)}catch(e){throw this.$ZenonLocalAudioVideoManager$p_14("Post-processing error while setting local video track",e.toString(),r("err")("postProcessTrackFunction")),r("err")(e)}if(this.$ZenonLocalAudioVideoManager$p_6[i]<=0)return this.$ZenonLocalAudioVideoManager$p_15(u);if(this.$ZenonLocalAudioVideoManager$p_16(i,u),this.$ZenonLocalAudioVideoManager$p_2=n!=null?n:{},i==="video"){var c={constraints:s,contentType:"video",track:u};this.emit("trackUpdate",c)}return u}catch(e){throw e}finally{this.$ZenonLocalAudioVideoManager$p_4[i]=null}});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),i.applyNewVideoCaptureConstraints=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var o,a=(o=this.$ZenonLocalAudioVideoManager$p_3.video)==null?void 0:o.webrtcStream.getVideoTracks();if(!(a==null||a.length===0)){var i={aspectRatio:e,frameRate:t,height:n,width:r},l=this.$ZenonLocalAudioVideoManager$p_12({},i),s=l.videoConstraints;if(yield a[0].applyConstraints(i),this.$ZenonLocalAudioVideoManager$p_3.video){var u={constraints:s,contentType:"video",track:this.$ZenonLocalAudioVideoManager$p_3.video};this.emit("trackUpdate",u)}}});function t(t,n,r,o){return e.apply(this,arguments)}return t})(),i.setLocalScreen=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){n===void 0&&(n=!1),this.$ZenonLocalAudioVideoManager$p_4.screen!=null&&this.$ZenonLocalAudioVideoManager$p_4.screen.cancel();try{var a=this.$ZenonLocalAudioVideoManager$p_12(e!=null?e:{},t!=null?t:{}),i=a.audioConstraints,l=a.videoConstraints;o("ZenonLocalAudioVideoManagerUtils").validateVideoConstraints(l),this.$ZenonLocalAudioVideoManager$p_4.screen=new(r("CancelablePromise"))(this.$ZenonLocalAudioVideoManager$p_18(babelHelpers.extends({},i,{requestAudio:n}),babelHelpers.extends({},l,{requestVideo:!0})));var s=yield this.$ZenonLocalAudioVideoManager$p_4.screen.getPromise(),u=s.filter(function(e){return e.contentType==="screen"}),c=u[0],d=s.filter(function(e){return e.contentType==="screen_audio"});this.$ZenonLocalAudioVideoManager$p_16("screen",c);var m=null;d.length>0&&this.getLocalScreenAudio()!==d[0]&&(m=d[0],this.$ZenonLocalAudioVideoManager$p_16("screenAudio",m));var p={constraints:{audioConstraints:i,videoConstraints:l},contentType:"screen",screenAudioTrack:m,screenVideoTrack:c};return this.emit("trackUpdate",p),s}catch(e){throw e}finally{this.$ZenonLocalAudioVideoManager$p_4.screen=null}});function t(t,n,r){return e.apply(this,arguments)}return t})(),i.setDefaultConstraints=function(t){this.$ZenonLocalAudioVideoManager$p_5=t},i.getLocalAudio=function(){return this.$ZenonLocalAudioVideoManager$p_3.audio},i.getLocalPreviewAudio=function(){return this.$ZenonLocalAudioVideoManager$p_3.previewAudio},i.getLocalMuteDetectionAudio=function(){return this.$ZenonLocalAudioVideoManager$p_3.muteDetectionAudio},i.getLocalScreenAudio=function(){return this.$ZenonLocalAudioVideoManager$p_3.screenAudio},i.getLocalScreen=function(){return this.$ZenonLocalAudioVideoManager$p_3.screen},i.getLocalVideo=function(){return this.$ZenonLocalAudioVideoManager$p_3.video},i.getLocalPreviewVideo=function(){return this.$ZenonLocalAudioVideoManager$p_3.previewVideo},i.stopAllTracks=function(){for(var e of Object.entries(this.$ZenonLocalAudioVideoManager$p_3)){var t,n=e[0];(t=this.$ZenonLocalAudioVideoManager$p_3[n])==null||t.webrtcTrack.stop(),this.$ZenonLocalAudioVideoManager$p_3[n]=null}},i.disableAudioTrack=function(t){return this.$ZenonLocalAudioVideoManager$p_8(t)},i.disableVideoTrack=function(t){return this.$ZenonLocalAudioVideoManager$p_8(t)},i.$ZenonLocalAudioVideoManager$p_13=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=this,a;switch(t){case o("ZenonLocalAudioVideoTypes").ZenonLocalMediaFallbackStrategy.None:this.$ZenonLocalAudioVideoManager$p_19(e),a=yield this.$ZenonLocalAudioVideoManager$p_20(e,this.$ZenonLocalAudioVideoManager$p_9(babelHelpers.extends({},n,{requestAudio:!0}),{requestVideo:!1})).catch(function(e){return r.$ZenonLocalAudioVideoManager$p_21(e)});break;case o("ZenonLocalAudioVideoTypes").ZenonLocalMediaFallbackStrategy.RelaxConstraints:this.$ZenonLocalAudioVideoManager$p_19(e),a=yield this.$ZenonLocalAudioVideoManager$p_20(e,this.$ZenonLocalAudioVideoManager$p_10(babelHelpers.extends({},n,{requestAudio:!0}),{requestVideo:!1})).catch(function(e){return r.$ZenonLocalAudioVideoManager$p_21(e)});break}var i=a!=null?a:[],l=i[0];return l});function t(t,n,r){return e.apply(this,arguments)}return t})(),i.$ZenonLocalAudioVideoManager$p_17=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=this,a;switch(t){case o("ZenonLocalAudioVideoTypes").ZenonLocalMediaFallbackStrategy.None:o("ZenonLocalAudioVideoManagerUtils").validateVideoConstraints(n),this.$ZenonLocalAudioVideoManager$p_19(e),a=yield this.$ZenonLocalAudioVideoManager$p_22(e,this.$ZenonLocalAudioVideoManager$p_9({requestAudio:!1},babelHelpers.extends({},n,{requestVideo:!0}))).catch(function(e){return r.$ZenonLocalAudioVideoManager$p_21(e)});break;case o("ZenonLocalAudioVideoTypes").ZenonLocalMediaFallbackStrategy.RelaxConstraints:this.$ZenonLocalAudioVideoManager$p_19(e),a=yield this.$ZenonLocalAudioVideoManager$p_22(e,this.$ZenonLocalAudioVideoManager$p_10({requestAudio:!1},babelHelpers.extends({},n,{requestVideo:!0}))).catch(function(e){return r.$ZenonLocalAudioVideoManager$p_21(e)});break}var i=a!=null?a:[],l=i[0];return l});function t(t,n,r){return e.apply(this,arguments)}return t})(),i.$ZenonLocalAudioVideoManager$p_11=function(t,n,r,a){var e=this,i=t?o("ZenonLocalAudioVideoTypes").TrackType.PRIMARY_AUDIO:o("ZenonLocalAudioVideoTypes").TrackType.PREVIEW_AUDIO,l=t?o("ZenonLocalAudioVideoTypes").TrackType.PRIMARY_VIDEO:o("ZenonLocalAudioVideoTypes").TrackType.PREVIEW_VIDEO;return n.map(function(n){if(n.contentType==="audio"){if(e.$ZenonLocalAudioVideoManager$p_6[i]===0)return e.$ZenonLocalAudioVideoManager$p_15(n);if(e.$ZenonLocalAudioVideoManager$p_16(i,n),t){var o={constraints:r,contentType:"audio",track:n};e.emit("trackUpdate",o)}}else if(n.contentType==="video"){if(e.$ZenonLocalAudioVideoManager$p_6[l]===0)return e.$ZenonLocalAudioVideoManager$p_15(n);if(e.$ZenonLocalAudioVideoManager$p_16(l,n),t){var s={constraints:a,contentType:"video",track:n};e.emit("trackUpdate",s)}}return n})},i.$ZenonLocalAudioVideoManager$p_8=function(t){var e=o("ZenonLocalAudioVideoTypes").TrackType[t];if(!this.$ZenonLocalAudioVideoManager$p_3[e])return null;var n=this.$ZenonLocalAudioVideoManager$p_15(this.$ZenonLocalAudioVideoManager$p_3[e]);if(n&&e==="audio"){var r={constraints:babelHelpers.extends({},this.$ZenonLocalAudioVideoManager$p_5.audioConstraints,this.$ZenonLocalAudioVideoManager$p_1),contentType:"audio",track:n};this.emit("trackUpdate",r)}else if(n&&e==="video"){var a={constraints:babelHelpers.extends({},this.$ZenonLocalAudioVideoManager$p_5.videoConstraints,this.$ZenonLocalAudioVideoManager$p_2),contentType:"video",track:n};this.emit("trackUpdate",a)}return n},i.$ZenonLocalAudioVideoManager$p_19=function(t){this.$ZenonLocalAudioVideoManager$p_4[t]!=null&&this.$ZenonLocalAudioVideoManager$p_4[t].cancel()},i.$ZenonLocalAudioVideoManager$p_21=function(t){var e=t.isCanceled,n=t.result;if(n&&Array.isArray(n)&&n[0]&&this.$ZenonLocalAudioVideoManager$p_15(n[0]),e==null||e===!1)throw t},i.$ZenonLocalAudioVideoManager$p_20=function(t,n){if(this.$ZenonLocalAudioVideoManager$p_4[t]=new(r("CancelablePromise"))(n),this.$ZenonLocalAudioVideoManager$p_4[t]!=null)return this.$ZenonLocalAudioVideoManager$p_4[t].getPromise();throw r("err")("could not get audio tracks")},i.$ZenonLocalAudioVideoManager$p_22=function(t,n){if(this.$ZenonLocalAudioVideoManager$p_4[t]=new(r("CancelablePromise"))(n),this.$ZenonLocalAudioVideoManager$p_4[t]!=null)return this.$ZenonLocalAudioVideoManager$p_4[t].getPromise();throw r("err")("could not get video tracks")},i.$ZenonLocalAudioVideoManager$p_15=function(t){return(t.contentType==="video"||t.contentType==="audio")&&o("ZenonAppFeaturesUtils").shouldStopMediaTrackWhenMute()&&(t.webrtcTrack.stop(),this.$ZenonLocalAudioVideoManager$p_23(t)),t.webrtcTrack.enabled=!1,babelHelpers.extends({},t,{enabled:!1})},i.$ZenonLocalAudioVideoManager$p_23=function(t){t.webrtcTrack.readyState!=="ended"&&this.$ZenonLocalAudioVideoManager$p_14("Stopping track failed: "+t.label,p,r("err")("Stopping track failed: "+t.label))},i.$ZenonLocalAudioVideoManager$p_18=function(t,n){return o("ZenonLocalMediaSDK").getDisplayMedia(t,n)},i.$ZenonLocalAudioVideoManager$p_12=function(t,n){var e=babelHelpers.extends({},this.$ZenonLocalAudioVideoManager$p_5.audioConstraints,t),r=babelHelpers.extends({},this.$ZenonLocalAudioVideoManager$p_5.videoConstraints,n);return{audioConstraints:e,videoConstraints:r}},i.$ZenonLocalAudioVideoManager$p_16=function(t,n){var e;(e=this.$ZenonLocalAudioVideoManager$p_3[t])==null||e.webrtcTrack.stop(),this.$ZenonLocalAudioVideoManager$p_3[t]=n},i.$ZenonLocalAudioVideoManager$p_10=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){this.$ZenonLocalAudioVideoManager$p_7("GetUserMediaWithRelaxConstraintsFallback audioConstraints: "+JSON.stringify(e)+" videoConstraints: "+JSON.stringify(t)),(c||(c=o("ODS"))).bumpEntityKey(4272,m,"gum_with_fallback.attempt");try{return yield this.$ZenonLocalAudioVideoManager$p_9(e,t)}catch(i){(c||(c=o("ODS"))).bumpEntityKey(4272,m,"gum_with_fallback.no_retry_fallback");var n=!1,a=!1;if((i==null?void 0:i.name)==="NotReadableError"?(n=!0,a=!0):(i==null?void 0:i.name)==="OverconstrainedError"&&(n=t.requestVideo&&Object.keys(t).length>1,a=e.requestAudio&&Object.keys(e).length>1),n&&this.$ZenonLocalAudioVideoManager$p_14("Removing video constraints: "+JSON.stringify(t),i.toString(),r("err")("GetUserMedia"),"info"),a&&this.$ZenonLocalAudioVideoManager$p_14("Removing audio constraints: "+JSON.stringify(e),i.toString(),r("err")("GetUserMedia"),"info"),n||a)return this.$ZenonLocalAudioVideoManager$p_9(a?{requestAudio:e.requestAudio}:e,n?{requestVideo:t.requestVideo}:t);throw i!=null?i:r("err")(p+" Error calling #getUserMediaWithRelaxConstraintsFallback")}});function t(t,n){return e.apply(this,arguments)}return t})(),i.$ZenonLocalAudioVideoManager$p_9=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){for(var n=0;n<d;)try{return yield this.$ZenonLocalAudioVideoManager$p_24(e,t)}catch(e){o("Log").debug("getUserMediaWithRetries error: "+String(e)),n++}return this.$ZenonLocalAudioVideoManager$p_24(e,t)});function t(t,n){return e.apply(this,arguments)}return t})(),i.$ZenonLocalAudioVideoManager$p_24=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=this.$ZenonLocalAudioVideoManager$p_25(e,t);o("ZenonActorHooks").ZenonActor.isEmployee()&&r("promiseDone")(o("ZenonMediaDevicesUtils").enumerateDevices());var a="GetUserMedia: "+JSON.stringify({audioConstraints:n.audio,tx:r("uuidv4")(),videoConstraints:n.video});this.$ZenonLocalAudioVideoManager$p_7(a);try{var i,l=yield this.$ZenonLocalAudioVideoManager$p_26(n);return[(i=o("ZenonLocalAudioVideoManagerUtils")).LocalMediaEvents.ENDED,i.LocalMediaEvents.MUTE,i.LocalMediaEvents.UNMUTE].forEach(function(e){o("ZenonLocalAudioVideoManagerUtils").addEventListenerForEvent(e,l,o("ZenonLocalAudioVideoManagerUtils").LocalMediaTypeCheckpoint.USER)}),i.logEventsForMediaStream(l,e,t),i.convertToZenonImmutableMediaTrack(l,e,t)}catch(t){throw o("ZenonLocalAudioVideoManagerUtils").logMediaErrors(e.requestAudio?"Audio":"Video",p+" Error calling "+a,t),t!=null?t:r("err")(p+" Error calling #getUserMedia")}});function t(t,n){return e.apply(this,arguments)}return t})(),i.$ZenonLocalAudioVideoManager$p_26=function(t){var e=o("ZenonLocalAudioVideoManagerUtils").cloneConstraintsWithExactDeviceId(t),n=e.constraints,r=e.hasIdealConstraints;try{return this.$ZenonLocalAudioVideoManager$p_27(n)}catch(e){if(e.isCanceled||!r)throw e;return this.$ZenonLocalAudioVideoManager$p_27(t)}},i.$ZenonLocalAudioVideoManager$p_27=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("ZenonWebRTCWrapper").getUserMedia(e),n=t.getVideoTracks(),a=n[0];if(t.getTracks().map(function(e){if(e.kind==="video"){var t=e.getSettings();t.height===o("ZenonVideoConstraintUtils").CONSTRAINT_1080P_30FPS_CONFIG.height&&t.width===o("ZenonVideoConstraintUtils").CONSTRAINT_1080P_30FPS_CONFIG.width&&t.frameRate===o("ZenonVideoConstraintUtils").CONSTRAINT_1080P_30FPS_CONFIG.frameRate&&r("ZenonODSLogger").logCounter("FULL_HD_CALL_INITIATED")}}),(a==null?void 0:a.muted)===!0){this.$ZenonLocalAudioVideoManager$p_7('Retry getUserMedia on muted video track: "'+a.id+'"',a.id),t.getTracks().forEach(function(e){e.stop()}),t=yield o("ZenonWebRTCWrapper").getUserMedia(e);var i=t.getVideoTracks(),l=i[0];(l==null?void 0:l.muted)===!0&&this.$ZenonLocalAudioVideoManager$p_7("Video track is still muted after retrying getUserMedia",l.id)}return t});function t(t){return e.apply(this,arguments)}return t})(),i.$ZenonLocalAudioVideoManager$p_25=function(t,n){return{audio:this.$ZenonLocalAudioVideoManager$p_28(t),video:this.$ZenonLocalAudioVideoManager$p_29(n)}},i.$ZenonLocalAudioVideoManager$p_28=function(n){var t=n.requestAudio,r=babelHelpers.objectWithoutPropertiesLoose(n,e);return t===!1?!1:Object.keys(r).length>0?r:!0},i.$ZenonLocalAudioVideoManager$p_29=function(t){var e=t.requestVideo,n=babelHelpers.objectWithoutPropertiesLoose(t,s);if(e===!1)return!1;if(Object.keys(n).length===0)return!0;var r=n.facingMode,o=babelHelpers.objectWithoutPropertiesLoose(n,u),a=babelHelpers.extends({},o);return r!=null&&(a.facingMode={ideal:r}),a},i.$ZenonLocalAudioVideoManager$p_7=function(t,n){r("ZenonMediaActionLogger").logEvent(babelHelpers.extends({checkpoint:p+" "+t},n!=null?{mediaID:n}:{}))},i.$ZenonLocalAudioVideoManager$p_14=function(t,n,o,a){a===void 0&&(a="warn"),r("ZenonMediaActionLogger").logErrorToFbLogger(p+" "+t,n,o,a)},a})(r("EventEmitter")),f=new _;l.default=f}),98);
__d("ZenonLocalMediaContext",["emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({audioConstraints:{},audioTrack:null,lobbyMuteState:{audioMuted:!1,videoMuted:!1},screenAudioTrack:null,screenVideoTrack:null,updateLobbyMuteState:r("emptyFunction"),videoConstraints:{},videoTrack:null});l.default=u}),98);
__d("ZenonLocalAudioVideoHooks",["Promise","ZenonAppProvider","ZenonCallsHooks","ZenonLocalAudioVideoManager","ZenonLocalAudioVideoTypes","ZenonLocalMediaContext","ZenonLoggingHooks","ZenonProductConnectFunnel","ZenonUserActionLogger","ZenonVideoConstraintUtils","asyncToGeneratorRuntime","getErrorSafe","gkx","qex","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useRef,_="ZenonLocalAudioVideoHooks";function f(e,t,n){return e&&t!=null&&t>0&&n!=null&&n>0}function g(t,a,i,l){l===void 0&&(l=!1),t===o("ZenonLocalAudioVideoTypes").ZenonLocalMediaOwnershipType.Strong&&r("ZenonLocalAudioVideoManager").retain("PRIMARY_AUDIO");try{var s;return l===!0&&(s=function(r){return r.webrtcTrack.enabled=!1,(e||(e=n("Promise"))).resolve(babelHelpers.extends({},r,{enabled:!1}))}),r("ZenonLocalAudioVideoManager").setLocalAudio("PRIMARY_AUDIO",a,i,s)}catch(e){t===o("ZenonLocalAudioVideoTypes").ZenonLocalMediaOwnershipType.Strong&&r("ZenonLocalAudioVideoManager").release("PRIMARY_AUDIO");var u=r("getErrorSafe")(e);throw r("ZenonUserActionLogger").logError({checkpoint:_+"_getUserMedia_audio_error",error_domain:_,error_type:u.toString()}),e}}function h(e){e===o("ZenonLocalAudioVideoTypes").ZenonLocalMediaOwnershipType.Strong&&r("ZenonLocalAudioVideoManager").release("PRIMARY_AUDIO")}function y(e,t){t===void 0&&(t=!0);var o=p(!1);return m(function(){o&&t&&h(e)},[e,t]),c((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){a===void 0&&(a=!1),h(e),o.current=!0,r("ZenonProductConnectFunnel").setUIPermissionsRequest();var i=yield g(e,t,n,a);return r("ZenonProductConnectFunnel").setUIPermissionsReceived(),i});return function(e,n,r){return t.apply(this,arguments)}})(),[e])}function C(t,a){a===void 0&&(a=!0),m(function(){return t===o("ZenonLocalAudioVideoTypes").ZenonLocalMediaOwnershipType.Strong&&r("ZenonLocalAudioVideoManager").retain("PRIMARY_AUDIO"),function(){t===o("ZenonLocalAudioVideoTypes").ZenonLocalMediaOwnershipType.Strong&&a&&r("ZenonLocalAudioVideoManager").release("PRIMARY_AUDIO")}},[t,a]);var i=c((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,o,a){a===void 0&&(a=!1);try{var i;a===!0&&(i=function(r){return r.webrtcTrack.enabled=!1,(e||(e=n("Promise"))).resolve(babelHelpers.extends({},r,{enabled:!1}))}),r("ZenonProductConnectFunnel").setUIPermissionsRequest();var l=yield r("ZenonLocalAudioVideoManager").setLocalAudio("PRIMARY_AUDIO",t,o,i);return r("ZenonProductConnectFunnel").setUIPermissionsReceived(),l}catch(e){var s=r("getErrorSafe")(e);throw r("ZenonUserActionLogger").logError({checkpoint:_+"_getUserMedia_audio_error",error_domain:_,error_type:s.toString()}),e}});return function(e,n,r){return t.apply(this,arguments)}})(),[]);return i}var b=r("gkx")("11524")||o("ZenonAppProvider").isWidgetLiveChatApp()?y:C;function v(){m(function(){return r("ZenonLocalAudioVideoManager").retain("PRIMARY_AUDIO"),r("ZenonLocalAudioVideoManager").retain("PRIMARY_VIDEO"),function(){r("ZenonLocalAudioVideoManager").release("PRIMARY_AUDIO"),r("ZenonLocalAudioVideoManager").release("PRIMARY_VIDEO")}},[]);var e=r("ZenonCallsHooks").useSupportConstrainedDevice(),t=e.frameRate,a=e.height,i=e.isEnabled,l=e.width;m(function(){if(f(i,l,a))r("ZenonLocalAudioVideoManager").applyNewVideoCaptureConstraints({ideal:(l!=null?l:16)/(a!=null?a:9)},{max:t!=null?t:30},{max:a},{max:l});else if(r("qex")._("1577")){var e;r("ZenonLocalAudioVideoManager").applyNewVideoCaptureConstraints({ideal:(e=o("ZenonVideoConstraintUtils")).CONSTRAINT_1080P_30FPS_CONFIG.aspectRatio},{ideal:e.CONSTRAINT_1080P_30FPS_CONFIG.frameRate},{ideal:e.CONSTRAINT_1080P_30FPS_CONFIG.height},{ideal:e.CONSTRAINT_1080P_30FPS_CONFIG.width})}else{var e;r("ZenonLocalAudioVideoManager").applyNewVideoCaptureConstraints({ideal:(e=o("ZenonVideoConstraintUtils")).CONSTRAINT_720P_30FPS_CONFIG.aspectRatio},{ideal:e.CONSTRAINT_720P_30FPS_CONFIG.frameRate},{ideal:e.CONSTRAINT_720P_30FPS_CONFIG.height},{ideal:e.CONSTRAINT_720P_30FPS_CONFIG.width})}},[t,a,i,l]);var s=c((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n,s){try{if(f(i,l,a))t!=null&&(n.frameRate={max:t}),n.height={max:a},n.width={max:l},n.aspectRatio={ideal:(l!=null?l:16)/(a!=null?a:9)};else if(r("qex")._("1577")){var u;n.frameRate={ideal:(u=o("ZenonVideoConstraintUtils")).CONSTRAINT_1080P_30FPS_CONFIG.frameRate},n.height={ideal:u.CONSTRAINT_1080P_30FPS_CONFIG.height},n.width={ideal:u.CONSTRAINT_1080P_30FPS_CONFIG.width},n.aspectRatio={ideal:u.CONSTRAINT_1080P_30FPS_CONFIG.aspectRatio}}else{var u;n.frameRate={ideal:(u=o("ZenonVideoConstraintUtils")).CONSTRAINT_720P_30FPS_CONFIG.frameRate},n.height={ideal:u.CONSTRAINT_720P_30FPS_CONFIG.height},n.width={ideal:u.CONSTRAINT_720P_30FPS_CONFIG.width},n.aspectRatio={ideal:u.CONSTRAINT_720P_30FPS_CONFIG.aspectRatio}}r("ZenonProductConnectFunnel").setUIPermissionsRequest();var c=yield r("ZenonLocalAudioVideoManager").setLocalAudioAndVideo(e,n,s,!0);return r("ZenonProductConnectFunnel").setUIPermissionsReceived(),c}catch(e){var d=r("getErrorSafe")(e);throw r("ZenonUserActionLogger").logError({checkpoint:_+"_useCreateLocalAudioAndVideo_error",error_domain:_,error_type:d.toString()}),e}});return function(t,n,r){return e.apply(this,arguments)}})(),[t,a,i,l]);return s}function S(){m(function(){return r("ZenonLocalAudioVideoManager").retain("PREVIEW_AUDIO"),r("ZenonLocalAudioVideoManager").retain("PREVIEW_VIDEO"),function(){r("ZenonLocalAudioVideoManager").release("PREVIEW_AUDIO"),r("ZenonLocalAudioVideoManager").release("PREVIEW_VIDEO")}},[]);var e=c((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){try{return yield r("ZenonLocalAudioVideoManager").setLocalAudioAndVideo(e,t,n,!1)}catch(e){var o=r("getErrorSafe")(e);throw r("ZenonUserActionLogger").logError({checkpoint:_+"_useCreateLocalAudioAndVideoForPreview_error",error_domain:_,error_type:o.toString()}),e}});return function(t,n,r){return e.apply(this,arguments)}})(),[]);return e}function R(){var e=o("ZenonLoggingHooks").useErrorLogging();m(function(){return r("ZenonLocalAudioVideoManager").retain("PREVIEW_AUDIO"),function(){r("ZenonLocalAudioVideoManager").release("PREVIEW_AUDIO")}},[]);var t=c((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){try{return yield r("ZenonLocalAudioVideoManager").setLocalAudio("PREVIEW_AUDIO",t,n)}catch(t){var o=r("getErrorSafe")(t);throw e({checkpoint:_+"_getUserMedia_error_audio_preview",error:o,errorDomain:_}),t}});return function(e,n){return t.apply(this,arguments)}})(),[e]);return t}function L(t){m(function(){return t===o("ZenonLocalAudioVideoTypes").ZenonLocalMediaOwnershipType.Strong&&r("ZenonLocalAudioVideoManager").retain("PRIMARY_VIDEO"),function(){t===o("ZenonLocalAudioVideoTypes").ZenonLocalMediaOwnershipType.Strong&&r("ZenonLocalAudioVideoManager").release("PRIMARY_VIDEO")}},[t]);var a=r("ZenonCallsHooks").useSupportConstrainedDevice(),i=a.frameRate,l=a.height,s=a.isEnabled,u=a.width,d=o("ZenonLoggingHooks").useErrorLogging(),p=c((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,c,m){c===void 0&&(c=!1);try{var p=m;if(c===!0&&(p=function(r){r.webrtcTrack.enabled=!1;var t=babelHelpers.extends({},r,{enabled:!1});return m?m(t):(e||(e=n("Promise"))).resolve(t)}),f(s,u,l))i!=null&&(a.frameRate={max:i}),a.width={max:u},a.height={max:l},a.aspectRatio={ideal:(u!=null?u:16)/(l!=null?l:9)};else if(r("qex")._("1577")){var g;r("ZenonLocalAudioVideoManager").applyNewVideoCaptureConstraints({ideal:(g=o("ZenonVideoConstraintUtils")).CONSTRAINT_1080P_30FPS_CONFIG.aspectRatio},{ideal:g.CONSTRAINT_1080P_30FPS_CONFIG.frameRate},{ideal:g.CONSTRAINT_1080P_30FPS_CONFIG.height},{ideal:g.CONSTRAINT_1080P_30FPS_CONFIG.width})}else{var g;a.frameRate={ideal:(g=o("ZenonVideoConstraintUtils")).CONSTRAINT_720P_30FPS_CONFIG.frameRate},a.height={ideal:g.CONSTRAINT_720P_30FPS_CONFIG.height},a.width={ideal:g.CONSTRAINT_720P_30FPS_CONFIG.width},a.aspectRatio={ideal:g.CONSTRAINT_720P_30FPS_CONFIG.aspectRatio}}r("ZenonProductConnectFunnel").setUIPermissionsRequest();var h=yield r("ZenonLocalAudioVideoManager").setLocalVideo("PRIMARY_VIDEO",t,a,p);return r("ZenonProductConnectFunnel").setUIPermissionsReceived(),h}catch(e){var y=r("getErrorSafe")(e);throw d({checkpoint:_+"_getUserMedia_video_error",error:y,errorDomain:_}),e}});return function(e,n,r,o){return t.apply(this,arguments)}})(),[i,l,d,s,u]);return p}function E(){m(function(){return r("ZenonLocalAudioVideoManager").retain("PREVIEW_VIDEO"),function(){r("ZenonLocalAudioVideoManager").release("PREVIEW_VIDEO")}},[]);var e=o("ZenonLoggingHooks").useErrorLogging(),t=c((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){try{return yield r("ZenonLocalAudioVideoManager").setLocalVideo("PREVIEW_VIDEO",t,n)}catch(t){var o=r("getErrorSafe")(t);throw e({checkpoint:_+"_getUserMedia_error_video_preview",error:o,errorDomain:_}),t}});return function(e,n){return t.apply(this,arguments)}})(),[e]);return t}function k(){var e=o("ZenonLoggingHooks").useErrorLogging(),t=c((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,o){try{return yield r("ZenonLocalAudioVideoManager").createtNonReferenceCountedVideoTrack(t,n,o)}catch(t){var a=r("getErrorSafe")(t);throw e({checkpoint:_+"_getUserMedia_error_useCreateNonReferenceCountedVideo",error:a,errorDomain:_}),t}});return function(e,n,r){return t.apply(this,arguments)}})(),[e]);return t}function I(){return c(function(e){return r("ZenonLocalAudioVideoManager").disableAudioTrack(e)},[])}function T(){return c(function(e){return r("ZenonLocalAudioVideoManager").disableVideoTrack(e)},[])}function D(){var e=d(r("ZenonLocalMediaContext")),t=e.audioTrack;return t}function x(){var e=d(r("ZenonLocalMediaContext")),t=e.videoTrack;return t}var $={useCreateLocalAudio:b,useCreateLocalAudio2:y,useCreateLocalAudioAndVideo:v,useCreateLocalAudioAndVideoForPreview:S,useCreateLocalAudioForPreview:R,useCreateLocalVideo:L,useCreateLocalVideoForPreview:E,useCreateNonReferenceCountedVideo:k,useDisableAudio:I,useDisableVideo:T,useLocalAudio:D,useLocalVideo:x},P=$;l.default=P}),98);